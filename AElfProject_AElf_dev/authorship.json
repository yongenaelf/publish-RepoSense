[{"path":".bettercodehub.yml","fileType":"yml","lines":[{"lineNumber":1,"author":{"gitId":"jason20240511"},"content":"# Depth of components to analyze (2 levels deep)","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"-"},"content":"component_depth: 2","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"jason20240511"},"content":"# Programming languages to analyze","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"-"},"content":"languages:","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"-"},"content":"- csharp","isFullCredit":false}],"authorContributionMap":{"jason20240511":2,"-":4}},{"path":".github/ISSUE_TEMPLATE/bug_report.md","fileType":"md","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"---","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"JimAelf"},"content":"name: ðŸ‘¾ Bug Report","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"JimAelf"},"content":"about: Report a bug or issue with the project.","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"-"},"content":"title: \u0027\u0027","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"JimAelf"},"content":"labels: \u0027bug\u0027","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"-"},"content":"assignees: \u0027\u0027","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"-"},"content":"---","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"JimAelf"},"content":"### Description","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"-"},"content":"A clear and concise description of what the bug is.","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"JimAelf"},"content":"### Steps To Reproduce","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"JimAelf"},"content":"1. Log in...","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"JimAelf"},"content":"2. Ensure that...","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"JimAelf"},"content":"3. Allow a long period of inactivity to pass...","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"JimAelf"},"content":"4. Observe that...","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"JimAelf"},"content":"5. Attempt to log in...","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"JimAelf"},"content":"### Current Behavior","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"JimAelf"},"content":"- After the period of inactivity...","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"JimAelf"},"content":"- When the user tries to log in using another method...","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"JimAelf"},"content":"- This causes a bug due to...","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"JimAelf"},"content":"### Expected Behavior","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"JimAelf"},"content":"- After a long period of inactivity...","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"JimAelf"},"content":"- When a user logs in successfully...","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"JimAelf"},"content":"- This ensures that only...","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"JimAelf"},"content":"### Environment","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"JimAelf"},"content":"- Platform: PC","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"JimAelf"},"content":"- Node: v18.18.0","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"JimAelf"},"content":"- Browser: Chrome 126.0.6478.56","isFullCredit":false}],"authorContributionMap":{"JimAelf":22,"-":11}},{"path":".github/ISSUE_TEMPLATE/config.yml","fileType":"yml","lines":[{"lineNumber":1,"author":{"gitId":"JimAelf"},"content":"blank_issues_enabled: false","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"JimAelf"},"content":"issue_template:","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"JimAelf"},"content":"  - name: ðŸ‘¾ Bug Report","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"JimAelf"},"content":"    description: Report a bug or issue with the project.","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"JimAelf"},"content":"    labels: [\"bug\"]","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"JimAelf"},"content":"    template: bug_report.md","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"JimAelf"},"content":"  - name: ðŸ’¡ Feature Request","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"JimAelf"},"content":"    description: Create a new ticket for a new feature request.","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"JimAelf"},"content":"    labels: [\"enhancement\"]","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"JimAelf"},"content":"    template: feature_request.md","isFullCredit":false}],"authorContributionMap":{"JimAelf":10}},{"path":".github/ISSUE_TEMPLATE/feature_request.md","fileType":"md","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"---","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"JimAelf"},"content":"name: ðŸ’¡ Feature Request","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"JimAelf"},"content":"about: Create a new ticket for a new feature request","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"-"},"content":"title: \u0027\u0027","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"JimAelf"},"content":"labels: \u0027enhancement\u0027","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"-"},"content":"assignees: \u0027\u0027","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"-"},"content":"---","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"JimAelf"},"content":"### Expected Behavior","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"JimAelf"},"content":"Describe the expected behavior here.","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"JimAelf"},"content":"### Specifications","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"JimAelf"},"content":"As a `user`, I would like to `action` so that `reason`.","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"JimAelf"},"content":"**Features:**","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"JimAelf"},"content":"- describe feature details here.","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"JimAelf"},"content":"**Development Tasks:**","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"JimAelf"},"content":"- [ ] Task 1","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"JimAelf"},"content":"- [ ] Task 2","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"JimAelf"},"content":"","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"JimAelf"},"content":"### Dependencies","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"JimAelf"},"content":"List any dependencies that are required for this feature by providing links to the issues or repositories.","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"JimAelf"},"content":"","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"JimAelf"},"content":"### References","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"JimAelf"},"content":"List any references that are related to this feature request.","isFullCredit":false}],"authorContributionMap":{"JimAelf":18,"-":9}},{"path":".github/workflows/benchmark_action.yml","fileType":"yml","lines":[{"lineNumber":1,"author":{"gitId":"jason20240511"},"content":"name: benchmark_action","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"jason20240511"},"content":"on:","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"jason20240511"},"content":"  push:","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"jason20240511"},"content":"    tags:","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"jason20240511"},"content":"      - \u0027**\u0027","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"jason20240511"},"content":"    branches:","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"jason20240511"},"content":"      - \u0027**\u0027","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"jason20240511"},"content":"","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"jason20240511"},"content":"","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"jason20240511"},"content":"","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"jason20240511"},"content":"env:","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"jason20240511"},"content":"  DOTNET_INSTALL_DIR: \"./.dotnet\"","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"jason20240511"},"content":"  Solution_Name: AElf.All.sln","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"jason20240511"},"content":"  Service_Name: AELF","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"jason20240511"},"content":"","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"jason20240511"},"content":"jobs:","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"jason20240511"},"content":"  test:","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"jason20240511"},"content":"    runs-on: ubuntu-latest","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"jason20240511"},"content":"    permissions:","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"jason20240511"},"content":"      pull-requests: write","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"jason20240511"},"content":"      contents: write","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"jason20240511"},"content":"    steps:","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"jason20240511"},"content":"      - name: Checkout","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"jason20240511"},"content":"        uses: actions/checkout@v4","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"jason20240511"},"content":"      - name: Setup dotnet","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"jason20240511"},"content":"        uses: actions/setup-dotnet@v4","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"jason20240511"},"content":"        with:","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"jason20240511"},"content":"          dotnet-version: \u00276.0\u0027","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"jason20240511"},"content":"","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"jason20240511"},"content":"      - name: \u0027Download AElf build tools\u0027","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"jason20240511"},"content":"        run: bash scripts/download_binary.sh","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"jason20240511"},"content":"","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"jason20240511"},"content":"      - name: \u0027Install protobuf\u0027","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"jason20240511"},"content":"        run: bash scripts/install_protobuf.sh","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"jason20240511"},"content":"","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"jason20240511"},"content":"      - name: Install dependencies","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"jason20240511"},"content":"        run: dotnet restore bench/AElf.Benchmark/AElf.Benchmark.csproj --verbosity quiet","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"jason20240511"},"content":"","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"jason20240511"},"content":"      - name: BenchMark","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"jason20240511"},"content":"        run: |","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"jason20240511"},"content":"          cd bench/AElf.Benchmark","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"jason20240511"},"content":"          dotnet run --filter \u0027*MinerTests*\u0027","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"jason20240511"},"content":"      - name: Upload build artifacts","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"jason20240511"},"content":"        uses: actions/upload-artifact@v4","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"jason20240511"},"content":"        with:","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"jason20240511"},"content":"          name: ${{ env.Service_Name }}","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"jason20240511"},"content":"          path: bench/AElf.Benchmark/BenchmarkDotNet.Artifacts/results","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"jason20240511"},"content":"          retention-days: 30","isFullCredit":false}],"authorContributionMap":{"jason20240511":48}},{"path":".github/workflows/sonarqube.yaml","fileType":"yaml","lines":[{"lineNumber":1,"author":{"gitId":"chopin.fan"},"content":"on:","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"chopin.fan"},"content":"  pull_request:","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"chopin.fan"},"content":"    types: [opened, synchronize, reopened]","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"chopin.fan"},"content":"","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"chopin.fan"},"content":"name: PR Static Code Analysis","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"chopin.fan"},"content":"jobs:","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"chopin.fan"},"content":"  static-code-analysis:","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"chopin.fan"},"content":"    runs-on: ubuntu-latest","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"chopin.fan"},"content":"    steps:","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"chopin.fan"},"content":"      - name: Code Checkout","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"chopin.fan"},"content":"        uses: actions/checkout@v4","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"chopin.fan"},"content":"        with:","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"chopin.fan"},"content":"          fetch-depth: 0","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"chopin.fan"},"content":"      - uses: actions/setup-dotnet@v4","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"chopin.fan"},"content":"        with:","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"chopin.fan"},"content":"          dotnet-version: \u00277.0\u0027","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"chopin.fan"},"content":"      - name: Create temporary global.json","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"chopin.fan"},"content":"        run: echo \u0027{\"sdk\":{\"version\":\"7.0.410\"}}\u0027 \u003e ./global.json","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"chopin.fan"},"content":"      - name: Set up JDK 17","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"chopin.fan"},"content":"        uses: actions/setup-java@v1","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"chopin.fan"},"content":"        with:","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"chopin.fan"},"content":"          java-version: 17","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"chopin.fan"},"content":"      - name: Cache SonarQube packages","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"chopin.fan"},"content":"        uses: actions/cache@v1","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"chopin.fan"},"content":"        with:","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"chopin.fan"},"content":"          path: ~/.sonar/cache","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"chopin.fan"},"content":"          key: ${{ runner.os }}-sonar","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"chopin.fan"},"content":"          restore-keys: ${{ runner.os }}-sonar","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"chopin.fan"},"content":"      - name: Cache SonarQube scanner","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"chopin.fan"},"content":"        id: cache-sonar-scanner","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"chopin.fan"},"content":"        uses: actions/cache@v1","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"chopin.fan"},"content":"        with:","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"chopin.fan"},"content":"          path: ./.sonar/scanner","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"chopin.fan"},"content":"          key: ${{ runner.os }}-sonar-scanner","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"chopin.fan"},"content":"          restore-keys: ${{ runner.os }}-sonar-scanner","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"chopin.fan"},"content":"      - name: Install SonarScanner for .NET","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"chopin.fan"},"content":"        run: dotnet tool update dotnet-sonarscanner --tool-path ./.sonar/scanner","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"chopin.fan"},"content":"      - name: Add .NET global tools to PATH","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"chopin.fan"},"content":"        run: echo \"$HOME/.dotnet/tools\" \u003e\u003e $GITHUB_PATH","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"chopin.fan"},"content":"      - name: Install protobuf","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"chopin.fan"},"content":"        run: sudo apt-get update \u0026\u0026 sudo apt-get install -y protobuf-compiler","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"chopin.fan"},"content":"      - name: Begin SonarQube analysis","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"chopin.fan"},"content":"        run: |","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"chopin.fan"},"content":"          ./.sonar/scanner/dotnet-sonarscanner begin /k:\"AElf\" /d:sonar.host.url\u003d\"${{ secrets.SONAR_HOST_URL }}\" /d:sonar.token\u003d\"${{ secrets.SONAR_TOKEN }}\"","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"chopin.fan"},"content":"          dotnet build AElf.All.sln","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"chopin.fan"},"content":"          ./.sonar/scanner/dotnet-sonarscanner end /d:sonar.token\u003d\"${{ secrets.SONAR_TOKEN }}\"","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"chopin.fan"},"content":"","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"chopin.fan"},"content":"","isFullCredit":false},{"lineNumber":49,"author":{"gitId":"chopin.fan"},"content":"          ","isFullCredit":false}],"authorContributionMap":{"chopin.fan":49}},{"path":".readthedocs.yml","fileType":"yml","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"# .readthedocs.yml","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"-"},"content":"# Read the Docs configuration file","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"-"},"content":"# See https://docs.readthedocs.io/en/stable/config-file/v2.html for details","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"-"},"content":"# Required","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"-"},"content":"version: 2","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"-"},"content":"# Build documentation with sphinx","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"-"},"content":"sphinx:","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"-"},"content":"  builder: html","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"-"},"content":"  configuration: docs-sphinx/conf.py","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"-"},"content":"  fail_on_warning: true","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"-"},"content":"# Optionally build your docs in additional formats such as PDF and ePub","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"-"},"content":"formats: all","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"jason20240511"},"content":"# Optionally set the version of python and requirements required to build your docs","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"-"},"content":"python:","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"-"},"content":"  version: 3.7","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"-"},"content":"  install:","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"-"},"content":"    - requirements: docs-sphinx/requirements.txt","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"-"},"content":"","isFullCredit":false}],"authorContributionMap":{"jason20240511":1,"-":24}},{"path":"AElf.ContractTools.targets","fileType":"targets","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"\u003c?xml version\u003d\"1.0\"?\u003e","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"-"},"content":"\u003cProject xmlns\u003d\"http://schemas.microsoft.com/developer/msbuild/2003\"\u003e","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"-"},"content":"    \u003cPropertyGroup\u003e","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"-"},"content":"        \u003cProtoBaseDir\u003e..\\..\\protobuf\u003c/ProtoBaseDir\u003e","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"-"},"content":"        \u003cPatcherDir\u003e..\\..\\scripts\\patcher\u003c/PatcherDir\u003e","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"-"},"content":"        \u003cPatcherProjectName\u003eAElf.ContractDeployer\u003c/PatcherProjectName\u003e","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"-"},"content":"    \u003c/PropertyGroup\u003e","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"-"},"content":"    \u003cItemGroup\u003e","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"-"},"content":"        \u003cNone Include\u003d\"$(ProtoBaseDir)\\aelf\\*\"\u003e","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"-"},"content":"            \u003cLink\u003eProtobuf\\Proto\\aelf/*\u003c/Link\u003e","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"-"},"content":"        \u003c/None\u003e","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"-"},"content":"    \u003c/ItemGroup\u003e","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"-"},"content":"    \u003cChoose\u003e","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"-"},"content":"        \u003cWhen Condition\u003d\"!$([MSBuild]::IsOsPlatform(Windows))\"\u003e","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"-"},"content":"            \u003cPropertyGroup\u003e","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"-"},"content":"                \u003cGenerateContractBaseCommand\u003e../../scripts/generate_contract_base.sh\u003c/GenerateContractBaseCommand\u003e","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"-"},"content":"                \u003cGenerateContractCodeCommand\u003e../../scripts/generate_contract_code.sh\u003c/GenerateContractCodeCommand\u003e","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"-"},"content":"                \u003cGenerateContractReferenceCommand\u003e../../scripts/generate_contract_reference.sh\u003c/GenerateContractReferenceCommand\u003e","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"-"},"content":"                \u003cGenerateContractStubCommand\u003e../../scripts/generate_contract_stub.sh\u003c/GenerateContractStubCommand\u003e","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"-"},"content":"                \u003cGenerateContractMessageCommand\u003e../../scripts/generate_event_only.sh\u003c/GenerateContractMessageCommand\u003e","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"-"},"content":"            \u003c/PropertyGroup\u003e","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"-"},"content":"        \u003c/When\u003e","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"-"},"content":"        \u003cOtherwise\u003e","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"-"},"content":"            \u003cPropertyGroup\u003e","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"-"},"content":"                \u003cGenerateContractBaseCommand\u003e..\\..\\scripts\\generate_contract_base.bat\u003c/GenerateContractBaseCommand\u003e","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"-"},"content":"                \u003cGenerateContractCodeCommand\u003e..\\..\\scripts\\generate_contract_code.bat\u003c/GenerateContractCodeCommand\u003e","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"-"},"content":"                \u003cGenerateContractReferenceCommand\u003e..\\..\\scripts\\generate_contract_reference.bat\u003c/GenerateContractReferenceCommand\u003e","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"-"},"content":"                \u003cGenerateContractStubCommand\u003e..\\..\\scripts\\generate_contract_stub.bat\u003c/GenerateContractStubCommand\u003e","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"-"},"content":"                \u003cGenerateContractMessageCommand\u003e..\\..\\scripts\\generate_event_only.bat\u003c/GenerateContractMessageCommand\u003e","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"-"},"content":"            \u003c/PropertyGroup\u003e","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"-"},"content":"        \u003c/Otherwise\u003e","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"-"},"content":"    \u003c/Choose\u003e","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"jason20240511"},"content":"    \u003c!-- Generate protobuf code before building and getting the target path --\u003e","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"-"},"content":"    \u003cTarget Name\u003d\"GenerateProtobufCode\" BeforeTargets\u003d\"BeforeBuild;GetTargetPath\"\u003e","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"-"},"content":"        \u003cPropertyGroup\u003e","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"-"},"content":"            \u003cLocalProtobufDir\u003e$(ProjectDir)/Protobuf\u003c/LocalProtobufDir\u003e","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"-"},"content":"            \u003cGenerateContractInternalCommand\u003eprotoc --proto_path\u003d../../protobuf --csharp_out\u003dinternal_access:$(LocalProtobufDir)/Generated --csharp_opt\u003dfile_extension\u003d.g.cs\u003c/GenerateContractInternalCommand\u003e","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"-"},"content":"        \u003c/PropertyGroup\u003e","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"-"},"content":"        \u003cPropertyGroup\u003e","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"-"},"content":"            \u003cLocalProtobufDir\u003e$(ProjectDir)/Protobuf\u003c/LocalProtobufDir\u003e","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"-"},"content":"            \u003cGenerateCommonMessageCommand\u003eprotoc --proto_path\u003d../../protobuf --csharp_out\u003d$(LocalProtobufDir)/Generated --csharp_opt\u003dfile_extension\u003d.g.cs\u003c/GenerateCommonMessageCommand\u003e","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"-"},"content":"        \u003c/PropertyGroup\u003e","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"-"},"content":"        \u003cPropertyGroup\u003e","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"-"},"content":"            \u003cIsContract Condition\u003d\"\u0027@(ContractCode)\u0027 !\u003d \u0027\u0027\"\u003etrue\u003c/IsContract\u003e","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"-"},"content":"        \u003c/PropertyGroup\u003e","isFullCredit":false},{"lineNumber":49,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":50,"author":{"gitId":"-"},"content":"        \u003cItemGroup\u003e","isFullCredit":false},{"lineNumber":51,"author":{"gitId":"-"},"content":"            \u003cCompile Remove\u003d\"Protobuf/Generated/*.cs\"/\u003e","isFullCredit":false},{"lineNumber":52,"author":{"gitId":"-"},"content":"        \u003c/ItemGroup\u003e","isFullCredit":false},{"lineNumber":53,"author":{"gitId":"-"},"content":"        \u003cRemoveDir Directories\u003d\"Protobuf\\Generated\"/\u003e","isFullCredit":false},{"lineNumber":54,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":55,"author":{"gitId":"-"},"content":"        \u003cMakeDir Condition\u003d\"@(ContractInternal) !\u003d \u0027\u0027 Or @(CommonMessage) !\u003d \u0027\u0027 Or @(ContractBase) !\u003d \u0027\u0027 Or @(ContractCode) !\u003d \u0027\u0027 Or @(ContractReference) !\u003d \u0027\u0027 Or @(ContractStub) !\u003d \u0027\u0027 Or @(ContractMessage) !\u003d \u0027\u0027\" Directories\u003d\"$(LocalProtobufDir)/Generated\"/\u003e","isFullCredit":false},{"lineNumber":56,"author":{"gitId":"-"},"content":"        \u003cExec Condition\u003d\"@(ContractInternal) !\u003d \u0027\u0027\" Command\u003d\"$(GenerateContractInternalCommand) %(Identity)\"/\u003e","isFullCredit":false},{"lineNumber":57,"author":{"gitId":"-"},"content":"        \u003cExec Condition\u003d\"@(CommonMessage) !\u003d \u0027\u0027\" Command\u003d\"$(GenerateCommonMessageCommand) %(Identity)\"/\u003e","isFullCredit":false},{"lineNumber":58,"author":{"gitId":"-"},"content":"        \u003cExec Condition\u003d\"@(ContractBase) !\u003d \u0027\u0027 And $(IsContract) !\u003d \u0027\u0027 AND \u0027$(IsContract)\u0027 \" Command\u003d\"$(GenerateContractBaseCommand) %(Identity) \"/\u003e","isFullCredit":false},{"lineNumber":59,"author":{"gitId":"-"},"content":"        \u003cExec Condition\u003d\"@(ContractBase) !\u003d \u0027\u0027 And %(ContractBase.PublicAccessibility) \u003d\u003d \u0027true\u0027\" Command\u003d\"$(GenerateContractBaseCommand) %(Identity) \"/\u003e","isFullCredit":false},{"lineNumber":60,"author":{"gitId":"-"},"content":"        \u003cExec Condition\u003d\"@(ContractBase) !\u003d \u0027\u0027 And $(IsContract) \u003d\u003d \u0027\u0027 And %(ContractBase.PublicAccessibility) !\u003d \u0027true\u0027\" Command\u003d\"$(GenerateContractBaseCommand) %(Identity) internal_access\"/\u003e","isFullCredit":false},{"lineNumber":61,"author":{"gitId":"-"},"content":"        \u003cExec Condition\u003d\"@(ContractCode) !\u003d \u0027\u0027\" Command\u003d\"$(GenerateContractCodeCommand) %(Identity)\"/\u003e","isFullCredit":false},{"lineNumber":62,"author":{"gitId":"-"},"content":"        \u003cExec Condition\u003d\"@(ContractReference) !\u003d \u0027\u0027\" Command\u003d\"$(GenerateContractReferenceCommand)  %(Identity)\"/\u003e","isFullCredit":false},{"lineNumber":63,"author":{"gitId":"-"},"content":"        \u003cExec Condition\u003d\"@(ContractStub) !\u003d \u0027\u0027\" Command\u003d\"$(GenerateContractStubCommand) %(Identity)\"/\u003e","isFullCredit":false},{"lineNumber":64,"author":{"gitId":"-"},"content":"        \u003cExec Condition\u003d\"@(ContractMessage) !\u003d \u0027\u0027\" Command\u003d\"$(GenerateContractMessageCommand) %(Identity)\"/\u003e","isFullCredit":false},{"lineNumber":65,"author":{"gitId":"-"},"content":"        \u003cItemGroup\u003e","isFullCredit":false},{"lineNumber":66,"author":{"gitId":"-"},"content":"            \u003cCompile Remove\u003d\"Protobuf/Generated/*.cs\"/\u003e","isFullCredit":false},{"lineNumber":67,"author":{"gitId":"-"},"content":"            \u003cCompile Include\u003d\"Protobuf/Generated/*.cs\"/\u003e","isFullCredit":false},{"lineNumber":68,"author":{"gitId":"-"},"content":"        \u003c/ItemGroup\u003e","isFullCredit":false},{"lineNumber":69,"author":{"gitId":"-"},"content":"    \u003c/Target\u003e","isFullCredit":false},{"lineNumber":70,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":71,"author":{"gitId":"-"},"content":"    \u003c!-- Build patcher before building the contract --\u003e","isFullCredit":false},{"lineNumber":72,"author":{"gitId":"-"},"content":"    \u003cTarget Name\u003d\"PatcherBuild\" BeforeTargets\u003d\"BeforeBuild\"\u003e","isFullCredit":false},{"lineNumber":73,"author":{"gitId":"-"},"content":"        \u003cPropertyGroup\u003e","isFullCredit":false},{"lineNumber":74,"author":{"gitId":"-"},"content":"            \u003cIsContract Condition\u003d\"\u0027@(ContractCode)\u0027 !\u003d \u0027\u0027\"\u003etrue\u003c/IsContract\u003e","isFullCredit":false},{"lineNumber":75,"author":{"gitId":"-"},"content":"            \u003cIsSystemContract Condition\u003d\"\u0027@(ContractCode)\u0027 !\u003d \u0027\u0027 And %(ContractCode.SystemContract) !\u003d \u0027\u0027 And %(ContractCode.SystemContract)\"\u003etrue\u003c/IsSystemContract\u003e","isFullCredit":false},{"lineNumber":76,"author":{"gitId":"-"},"content":"        \u003c/PropertyGroup\u003e","isFullCredit":false},{"lineNumber":77,"author":{"gitId":"-"},"content":"        \u003cMSBuild Condition\u003d\"\u0027$(IsContract)\u0027 !\u003d \u0027\u0027 AND \u0027$(IsContract)\u0027\"","isFullCredit":false},{"lineNumber":78,"author":{"gitId":"-"},"content":"                 Projects\u003d\"$(ProjectDir)/../../src/$(PatcherProjectName)/$(PatcherProjectName).csproj\"/\u003e","isFullCredit":false},{"lineNumber":79,"author":{"gitId":"-"},"content":"    \u003c/Target\u003e","isFullCredit":false},{"lineNumber":80,"author":{"gitId":"-"},"content":"    \u003c!-- Patch the contract dll after building the contract --\u003e","isFullCredit":false},{"lineNumber":81,"author":{"gitId":"-"},"content":"    \u003cTarget Name\u003d\"PatchContractCode\" Condition\u003d\"\u0027$(IsContract)\u0027 !\u003d \u0027\u0027 AND \u0027$(IsContract)\u0027\" AfterTargets\u003d\"AfterBuild\"\u003e","isFullCredit":false},{"lineNumber":82,"author":{"gitId":"-"},"content":"        \u003cPropertyGroup\u003e","isFullCredit":false},{"lineNumber":83,"author":{"gitId":"-"},"content":"            \u003cCmdPatchOverwrite\u003e\u003c/CmdPatchOverwrite\u003e","isFullCredit":false},{"lineNumber":84,"author":{"gitId":"-"},"content":"            \u003cCmdPatchOverwrite Condition\u003d\"\u0027$(PatchOverwrite)\u0027 !\u003d \u0027\u0027 AND \u0027$(PatchOverwrite)\u0027\"\u003e-w \u003c/CmdPatchOverwrite\u003e","isFullCredit":false},{"lineNumber":85,"author":{"gitId":"-"},"content":"            \u003cCmdSkipAudit\u003e\u003c/CmdSkipAudit\u003e","isFullCredit":false},{"lineNumber":86,"author":{"gitId":"-"},"content":"            \u003cCmdSkipAudit Condition\u003d\"\u0027$(SkipAudit)\u0027 !\u003d \u0027\u0027 AND \u0027$(SkipAudit)\u0027\"\u003e-s \u003c/CmdSkipAudit\u003e","isFullCredit":false},{"lineNumber":87,"author":{"gitId":"-"},"content":"            \u003cCmdTreatAsSystemContract\u003e\u003c/CmdTreatAsSystemContract\u003e","isFullCredit":false},{"lineNumber":88,"author":{"gitId":"-"},"content":"            \u003cCmdTreatAsSystemContract Condition\u003d\"\u0027$(IsSystemContract)\u0027 !\u003d \u0027\u0027 AND \u0027$(IsSystemContract)\u0027\"\u003e-t \u003c/CmdTreatAsSystemContract\u003e","isFullCredit":false},{"lineNumber":89,"author":{"gitId":"-"},"content":"        \u003c/PropertyGroup\u003e","isFullCredit":false},{"lineNumber":90,"author":{"gitId":"-"},"content":"        \u003cExec WorkingDirectory\u003d\"$(PatcherDir)\"","isFullCredit":false},{"lineNumber":91,"author":{"gitId":"-"},"content":"              Command\u003d\"dotnet $(PatcherProjectName).dll $(CmdPatchOverwrite)$(CmdSkipAudit)$(CmdTreatAsSystemContract)-p $(TargetDir)$(TargetName).dll\"","isFullCredit":false},{"lineNumber":92,"author":{"gitId":"-"},"content":"              ConsoleToMSBuild\u003d\"true\"\u003e","isFullCredit":false},{"lineNumber":93,"author":{"gitId":"-"},"content":"            \u003cOutput TaskParameter\u003d\"ConsoleOutput\" ItemName\u003d\"PatchContractCodeOutput\"/\u003e","isFullCredit":false},{"lineNumber":94,"author":{"gitId":"-"},"content":"        \u003c/Exec\u003e","isFullCredit":false},{"lineNumber":95,"author":{"gitId":"-"},"content":"        \u003cMessage Text\u003d\"$(PatchContractCodeOutput)\"/\u003e","isFullCredit":false},{"lineNumber":96,"author":{"gitId":"-"},"content":"    \u003c/Target\u003e","isFullCredit":false},{"lineNumber":97,"author":{"gitId":"-"},"content":"    \u003c!-- Move dlls before codecov injection in travis --\u003e","isFullCredit":false},{"lineNumber":98,"author":{"gitId":"-"},"content":"    \u003cTarget Name\u003d\"CopyNonCodeCovContractDll\" Condition\u003d\"\u0027$(IsContract)\u0027 !\u003d \u0027\u0027 AND \u0027$(IsContract)\u0027\" AfterTargets\u003d\"PatchContractCode\"\u003e","isFullCredit":false},{"lineNumber":99,"author":{"gitId":"-"},"content":"        \u003cPropertyGroup\u003e","isFullCredit":false},{"lineNumber":100,"author":{"gitId":"-"},"content":"            \u003cLauncherTargetDir\u003e../../src/AElf.Launcher/contracts\u003c/LauncherTargetDir\u003e","isFullCredit":false},{"lineNumber":101,"author":{"gitId":"-"},"content":"        \u003c/PropertyGroup\u003e","isFullCredit":false},{"lineNumber":102,"author":{"gitId":"-"},"content":"        \u003cCopy SourceFiles\u003d\"$(TargetDir)$(TargetName).dll\"","isFullCredit":false},{"lineNumber":103,"author":{"gitId":"-"},"content":"              DestinationFolder\u003d\"$(LauncherTargetDir)\"","isFullCredit":false},{"lineNumber":104,"author":{"gitId":"-"},"content":"              SkipUnchangedFiles\u003d\"true\"/\u003e","isFullCredit":false},{"lineNumber":105,"author":{"gitId":"-"},"content":"        \u003cCopy Condition\u003d\"Exists(\u0027$(TargetDir)$(TargetName).dll.patched\u0027)\"","isFullCredit":false},{"lineNumber":106,"author":{"gitId":"-"},"content":"              SourceFiles\u003d\"$(TargetDir)$(TargetName).dll.patched\"","isFullCredit":false},{"lineNumber":107,"author":{"gitId":"-"},"content":"              DestinationFolder\u003d\"../../test/patched\"","isFullCredit":false},{"lineNumber":108,"author":{"gitId":"-"},"content":"              SkipUnchangedFiles\u003d\"true\"/\u003e","isFullCredit":false},{"lineNumber":109,"author":{"gitId":"-"},"content":"    \u003c/Target\u003e","isFullCredit":false},{"lineNumber":110,"author":{"gitId":"-"},"content":"    \u003c!-- Copy patched contract dll after publish to include in publish directory --\u003e","isFullCredit":false},{"lineNumber":111,"author":{"gitId":"-"},"content":"    \u003cTarget Name\u003d\"CopyPatchedContractCodeToPublish\" AfterTargets\u003d\"Publish\"\u003e","isFullCredit":false},{"lineNumber":112,"author":{"gitId":"-"},"content":"        \u003cCopy Condition\u003d\"\u0027$(IsContract)\u0027 !\u003d \u0027\u0027 AND \u0027$(IsContract)\u0027 AND Exists(\u0027$(TargetDir)$(TargetName).dll.patched\u0027)\"","isFullCredit":false},{"lineNumber":113,"author":{"gitId":"-"},"content":"              SourceFiles\u003d\"$(TargetDir)$(TargetName).dll.patched\"","isFullCredit":false},{"lineNumber":114,"author":{"gitId":"-"},"content":"              DestinationFiles\u003d\"$(PublishDir)/$(TargetName).dll\"","isFullCredit":false},{"lineNumber":115,"author":{"gitId":"-"},"content":"              SkipUnchangedFiles\u003d\"true\"/\u003e","isFullCredit":false},{"lineNumber":116,"author":{"gitId":"-"},"content":"    \u003c/Target\u003e","isFullCredit":false},{"lineNumber":117,"author":{"gitId":"-"},"content":"\u003c/Project\u003e","isFullCredit":false}],"authorContributionMap":{"jason20240511":1,"-":116}},{"path":"AElf.Contracts.sln","fileType":"sln","lines":[{"lineNumber":1,"author":{"gitId":"jason20240511"},"content":"ï»¿Microsoft Visual Studio Solution File, Format Version 12.00","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"-"},"content":"Project(\"{2150E333-8FDC-42A3-9474-1A3956D46DE8}\") \u003d \"contract\", \"contract\", \"{651F0F6E-86CF-42D2-9110-5F3EAE5704F0}\"","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"-"},"content":"EndProject","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"-"},"content":"Project(\"{2150E333-8FDC-42A3-9474-1A3956D46DE8}\") \u003d \"test\", \"test\", \"{26990847-E0A2-4FCC-8C71-267CA77557CD}\"","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"-"},"content":"EndProject","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"-"},"content":"Project(\"{2150E333-8FDC-42A3-9474-1A3956D46DE8}\") \u003d \"src\", \"src\", \"{51CE1A9E-63A0-49C6-B820-C8519C94F389}\"","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"-"},"content":"EndProject","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"-"},"content":"Global","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"-"},"content":"\tGlobalSection(SolutionConfigurationPlatforms) \u003d preSolution","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"-"},"content":"\t\tDebug|Any CPU \u003d Debug|Any CPU","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"-"},"content":"\t\tRelease|Any CPU \u003d Release|Any CPU","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"-"},"content":"\tEndGlobalSection","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"-"},"content":"EndGlobal","isFullCredit":false}],"authorContributionMap":{"jason20240511":1,"-":12}},{"path":"AElf.sln.DotSettings","fileType":"DotSettings","lines":[{"lineNumber":1,"author":{"gitId":"jason20240511"},"content":"ï»¿\u003cwpf:ResourceDictionary xml:space\u003d\"preserve\" xmlns:x\u003d\"http://schemas.microsoft.com/winfx/2006/xaml\"","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"jason20240511"},"content":"                        xmlns:s\u003d\"clr-namespace:System;assembly\u003dmscorlib\"","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"jason20240511"},"content":"                        xmlns:ss\u003d\"urn:shemas-jetbrains-com:settings-storage-xaml\"","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"jason20240511"},"content":"                        xmlns:wpf\u003d\"http://schemas.microsoft.com/winfx/2006/xaml/presentation\"\u003e","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"-"},"content":"\t\u003cs:Boolean x:Key\u003d\"/Default/CodeEditing/SuppressNullableWarningFix/Enabled/@EntryValue\"\u003eFalse\u003c/s:Boolean\u003e","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"-"},"content":"    \u003cs:String x:Key\u003d\"/Default/CodeStyle/Naming/CSharpNaming/Abbreviations/\u003dJS/@EntryIndexedValue\"\u003eJS\u003c/s:String\u003e","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"-"},"content":"    \u003cs:Boolean x:Key\u003d\"/Default/UserDictionary/Words/\u003daelf/@EntryIndexedValue\"\u003eTrue\u003c/s:Boolean\u003e","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"-"},"content":"    \u003cs:Boolean x:Key\u003d\"/Default/UserDictionary/Words/\u003dappsettings/@EntryIndexedValue\"\u003eTrue\u003c/s:Boolean\u003e","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"-"},"content":"    \u003cs:Boolean x:Key\u003d\"/Default/UserDictionary/Words/\u003dblockchain/@EntryIndexedValue\"\u003eTrue\u003c/s:Boolean\u003e","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"-"},"content":"    \u003cs:Boolean x:Key\u003d\"/Default/UserDictionary/Words/\u003dBlockchains/@EntryIndexedValue\"\u003eTrue\u003c/s:Boolean\u003e","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"-"},"content":"    \u003cs:Boolean x:Key\u003d\"/Default/UserDictionary/Words/\u003dDPOS/@EntryIndexedValue\"\u003eTrue\u003c/s:Boolean\u003e","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"-"},"content":"    \u003cs:Boolean x:Key\u003d\"/Default/UserDictionary/Words/\u003dgrpc/@EntryIndexedValue\"\u003eTrue\u003c/s:Boolean\u003e","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"-"},"content":"    \u003cs:Boolean x:Key\u003d\"/Default/UserDictionary/Words/\u003dhangfire/@EntryIndexedValue\"\u003eTrue\u003c/s:Boolean\u003e","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"-"},"content":"    \u003cs:Boolean x:Key\u003d\"/Default/UserDictionary/Words/\u003dMerkle/@EntryIndexedValue\"\u003eTrue\u003c/s:Boolean\u003e","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"-"},"content":"    \u003cs:Boolean x:Key\u003d\"/Default/UserDictionary/Words/\u003dpubkey/@EntryIndexedValue\"\u003eTrue\u003c/s:Boolean\u003e","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"-"},"content":"    \u003cs:Boolean x:Key\u003d\"/Default/UserDictionary/Words/\u003dSsdb/@EntryIndexedValue\"\u003eTrue\u003c/s:Boolean\u003e","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"-"},"content":"    \u003cs:Boolean x:Key\u003d\"/Default/UserDictionary/Words/\u003dXunit/@EntryIndexedValue\"\u003eTrue\u003c/s:Boolean\u003e\u003c/wpf:ResourceDictionary\u003e","isFullCredit":false}],"authorContributionMap":{"jason20240511":4,"-":13}},{"path":"CodeCoverage.runsettings","fileType":"runsettings","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"\u003c?xml version\u003d\"1.0\" encoding\u003d\"utf-8\"?\u003e","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"jason20240511"},"content":"\u003c!-- This XML defines run settings for code coverage. --\u003e","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"-"},"content":"\u003c!-- File name extension must be .runsettings --\u003e","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"-"},"content":"\u003cRunSettings\u003e","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"-"},"content":"  \u003cDataCollectionRunSettings\u003e","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"-"},"content":"    \u003cDataCollectors\u003e      ","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"-"},"content":"       \u003cDataCollector friendlyName\u003d\"XPlat code coverage\"\u003e","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"-"},"content":"        \u003cConfiguration\u003e","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"-"},"content":"          \u003cFormat\u003ecobertura\u003c/Format\u003e","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"-"},"content":"          \u003cExclude\u003e[xunit.*]*,[*Tests]*\u003c/Exclude\u003e \u003c!-- [Assembly-Filter]Type-Filter --\u003e","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"-"},"content":"          \u003cExcludeByFile\u003e**/test/**/*.cs,**/AElf.ContractTestBase/**/*.cs,**/AElf.ContractTestKit/**/*.cs,**/AElf.ContractTestKit.AEDPoSExtension/**/*.cs,**/AElf.Database/**/*.cs,**/AElf.ContractDeployer/Program.cs,**/AElf.WebApp.Web/*.cs\u003c/ExcludeByFile\u003e","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"-"},"content":"          \u003cExcludeByAttribute\u003eObsolete,GeneratedCodeAttribute,CompilerGeneratedAttribute\u003c/ExcludeByAttribute\u003e","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"-"},"content":"          \u003cSingleHit\u003efalse\u003c/SingleHit\u003e","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"-"},"content":"        \u003c/Configuration\u003e","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"-"},"content":"      \u003c/DataCollector\u003e    ","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"-"},"content":"    \u003c/DataCollectors\u003e","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"-"},"content":"  \u003c/DataCollectionRunSettings\u003e","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"-"},"content":"\u003c/RunSettings\u003e","isFullCredit":false}],"authorContributionMap":{"jason20240511":1,"-":17}},{"path":"appveyor.yml","fileType":"yml","lines":[{"lineNumber":1,"author":{"gitId":"jason20240511"},"content":"# appveyor configuration file","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"-"},"content":"version: 1.0.0.{build}","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"-"},"content":"skip_tags: true","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"-"},"content":"os: Windows Server 2012 R2","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"-"},"content":"image: Visual Studio 2019","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"-"},"content":"build:","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"-"},"content":"  publish_nuget: true","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"-"},"content":"  verbosity: minimal","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"-"},"content":"configuration:","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"-"},"content":"  - Debug","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"-"},"content":"install:","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"-"},"content":"  - choco install vcredist2017","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"-"},"content":"  - ps: dotnet --info","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"-"},"content":"  - ps: node --version","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"-"},"content":"  - ps: (new-object net.webclient).DownloadFile(\u0027https://github.com/protocolbuffers/protobuf/releases/download/v3.11.4/protoc-3.11.4-win64.zip\u0027, \u0027c:\\protoc-3.11.4-win64.zip\u0027)","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"-"},"content":"  - cmd: unzip c:\\protoc-3.11.4-win64.zip  -d c:\\protoc\\","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"-"},"content":"  - cmd: set PATH\u003d%PATH%;c:\\protoc\\bin\\","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"-"},"content":"  - ps: (new-object net.webclient).DownloadFile(\u0027https://github.com/AElfProject/contract-plugin/releases/download/v1.0.3/contract_csharp_plugin-v1.0.3-win32.zip\u0027, \u0027c:\\projects\\aelf\\scripts\\contract_csharp_plugin-v1.0.3-win32.zip\u0027)","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"-"},"content":"  - cmd: unzip -o c:\\projects\\aelf\\scripts\\contract_csharp_plugin-v1.0.3-win32.zip -d c:\\projects\\aelf\\scripts\\","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"-"},"content":"environment:","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"-"},"content":"  CI_TEST: true","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"-"},"content":"build_script:","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"-"},"content":"  - ps: .\\build.ps1","isFullCredit":false}],"authorContributionMap":{"jason20240511":1,"-":22}},{"path":"azure-myget-publish.yml","fileType":"yml","lines":[{"lineNumber":1,"author":{"gitId":"jason20240511"},"content":"  # Azure DevOps pipeline configuration for publishing NuGet packages to MyGet","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"-"},"content":"  pool:","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"-"},"content":"    vmImage: ubuntu-latest","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"-"},"content":"  pr: none ","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"-"},"content":"  trigger: none","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"-"},"content":"  schedules:","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"-"},"content":"  - cron: \"28 04 * * *\"","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"-"},"content":"    displayName: \"daily build and publish myget\"","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"-"},"content":"    branches:","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"-"},"content":"      include:","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"-"},"content":"      - dev","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"-"},"content":"    always: true","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"-"},"content":"  steps:","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"-"},"content":"  - task: UseDotNet@2","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"-"},"content":"    displayName: \u0027Install .NET Core SDK\u0027","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"-"},"content":"    inputs:","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"-"},"content":"      version: 3.1.102","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"-"},"content":"  - script: bash scripts/install_protobuf.sh","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"-"},"content":"  - script: bash scripts/download_binary.sh","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"-"},"content":"  - script: bash build.sh -target\u003dPublish-MyGet","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"-"},"content":"    displayName: \u0027publish myget cron\u0027","isFullCredit":false}],"authorContributionMap":{"jason20240511":1,"-":20}},{"path":"azure-pipelines.yml","fileType":"yml","lines":[{"lineNumber":1,"author":{"gitId":"jason20240511"},"content":"# Azure Pipelines configuration file","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"-"},"content":"jobs:","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"-"},"content":"  - template: templates/build-template-window.yml","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"-"},"content":"    parameters:","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"-"},"content":"      parts: 3","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"-"},"content":"      n: 1","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"-"},"content":"      codecoverage: true","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"-"},"content":"  - template: templates/build-template-window.yml","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"-"},"content":"    parameters:","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"-"},"content":"      parts: 3","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"-"},"content":"      n: 2","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"-"},"content":"      codecoverage: false","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"-"},"content":"  - template: templates/build-template-window.yml","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"-"},"content":"    parameters:","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"-"},"content":"      parts: 3","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"-"},"content":"      n: 3","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"-"},"content":"      codecoverage: false","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"-"},"content":"  - template: templates/build-template-linux.yml","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"-"},"content":"    parameters:","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"-"},"content":"      parts: 3","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"-"},"content":"      n: 1","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"-"},"content":"      codecoverage: true","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"-"},"content":"  - template: templates/build-template-linux.yml","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"-"},"content":"    parameters:","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"-"},"content":"      parts: 3","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"-"},"content":"      n: 2","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"-"},"content":"      codecoverage: false","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"-"},"content":"  - template: templates/build-template-linux.yml","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"-"},"content":"    parameters:","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"-"},"content":"      parts: 3","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"-"},"content":"      n: 3","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"-"},"content":"      codecoverage: false","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"-"},"content":"  - template: templates/build-template-macos.yml","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"-"},"content":"    parameters:","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"-"},"content":"      parts: 3","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"-"},"content":"      n: 1","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"-"},"content":"      codecoverage: true","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"-"},"content":"  - template: templates/build-template-macos.yml","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"-"},"content":"    parameters:","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"-"},"content":"      parts: 3","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"-"},"content":"      n: 2","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"-"},"content":"      codecoverage: true","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"-"},"content":"  - template: templates/build-template-macos.yml","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"-"},"content":"    parameters:","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"-"},"content":"      parts: 3","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"-"},"content":"      n: 3","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"-"},"content":"      codecoverage: true","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"-"},"content":"    ","isFullCredit":false}],"authorContributionMap":{"jason20240511":1,"-":47}},{"path":"bench/AElf.Benchmark/HtmlSummaryExporter.cs","fileType":"cs","lines":[{"lineNumber":1,"author":{"gitId":"jason20240511"},"content":"using BenchmarkDotNet.Exporters;","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"jason20240511"},"content":"using BenchmarkDotNet.Loggers;","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"jason20240511"},"content":"using BenchmarkDotNet.Reports;","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"jason20240511"},"content":"","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"jason20240511"},"content":"using System.Collections.Generic;","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"jason20240511"},"content":"using System.IO;","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"jason20240511"},"content":"","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"jason20240511"},"content":"","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"jason20240511"},"content":"public class HtmlSummaryExporter : IExporter","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"jason20240511"},"content":"{","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"jason20240511"},"content":"    public string Name \u003d\u003e nameof(HtmlSummaryExporter);","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"jason20240511"},"content":"","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"jason20240511"},"content":"    public void ExportToLog(Summary summary, ILogger logger)","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"jason20240511"},"content":"    {","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"jason20240511"},"content":"","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"jason20240511"},"content":"    }","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"jason20240511"},"content":"","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"jason20240511"},"content":"    public IEnumerable\u003cstring\u003e ExportToFiles(Summary summary, ILogger consoleLogger)","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"jason20240511"},"content":"    {","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"jason20240511"},"content":"        string directoryPath \u003d summary.ResultsDirectoryPath;","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"jason20240511"},"content":"        string outputPath \u003d Path.Combine(directoryPath, \"Summary.html\");","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"jason20240511"},"content":"","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"jason20240511"},"content":"        var htmlFiles \u003d Directory.GetFiles(directoryPath, \"*.html\");","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"jason20240511"},"content":"","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"jason20240511"},"content":"        using (StreamWriter writer \u003d new StreamWriter(outputPath))","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"jason20240511"},"content":"        {","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"jason20240511"},"content":"            writer.WriteLine(\"\u003chtml\u003e\");","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"jason20240511"},"content":"            writer.WriteLine(\"\u003chead\u003e\");","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"jason20240511"},"content":"            writer.WriteLine(\"\u003ctitle\u003eBenchmark Summary\u003c/title\u003e\");","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"jason20240511"},"content":"","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"jason20240511"},"content":"            writer.WriteLine(\"\u003cstyle\u003e\");","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"jason20240511"},"content":"            foreach (var file in htmlFiles)","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"jason20240511"},"content":"            {","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"jason20240511"},"content":"                string content \u003d File.ReadAllText(file);","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"jason20240511"},"content":"                string styleContent \u003d GetStyleContent(content);","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"jason20240511"},"content":"                writer.WriteLine(styleContent);","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"jason20240511"},"content":"            }","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"jason20240511"},"content":"            writer.WriteLine(\"\u003c/style\u003e\");","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"jason20240511"},"content":"","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"jason20240511"},"content":"            writer.WriteLine(\"\u003c/head\u003e\");","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"jason20240511"},"content":"            writer.WriteLine(\"\u003cbody\u003e\");","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"jason20240511"},"content":"","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"jason20240511"},"content":"            foreach (var file in htmlFiles)","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"jason20240511"},"content":"            {","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"jason20240511"},"content":"                string fileName \u003d Path.GetFileName(file);","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"jason20240511"},"content":"                writer.WriteLine($\"\u003ch2\u003e{fileName}\u003c/h2\u003e\"); ","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"jason20240511"},"content":"                string content \u003d File.ReadAllText(file);","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"jason20240511"},"content":"                string bodyContent \u003d GetBodyContent(content);","isFullCredit":false},{"lineNumber":49,"author":{"gitId":"jason20240511"},"content":"                writer.WriteLine(bodyContent);","isFullCredit":false},{"lineNumber":50,"author":{"gitId":"jason20240511"},"content":"            }","isFullCredit":false},{"lineNumber":51,"author":{"gitId":"jason20240511"},"content":"","isFullCredit":false},{"lineNumber":52,"author":{"gitId":"jason20240511"},"content":"            writer.WriteLine(\"\u003c/body\u003e\");","isFullCredit":false},{"lineNumber":53,"author":{"gitId":"jason20240511"},"content":"            writer.WriteLine(\"\u003c/html\u003e\");","isFullCredit":false},{"lineNumber":54,"author":{"gitId":"jason20240511"},"content":"        }","isFullCredit":false},{"lineNumber":55,"author":{"gitId":"jason20240511"},"content":"","isFullCredit":false},{"lineNumber":56,"author":{"gitId":"jason20240511"},"content":"        consoleLogger.WriteLine($\"Summary HTML file created successfully at {outputPath}.\");","isFullCredit":false},{"lineNumber":57,"author":{"gitId":"jason20240511"},"content":"","isFullCredit":false},{"lineNumber":58,"author":{"gitId":"jason20240511"},"content":"        return new[] { outputPath };","isFullCredit":false},{"lineNumber":59,"author":{"gitId":"jason20240511"},"content":"    }","isFullCredit":false},{"lineNumber":60,"author":{"gitId":"jason20240511"},"content":"","isFullCredit":false},{"lineNumber":61,"author":{"gitId":"jason20240511"},"content":"    private string GetBodyContent(string html)","isFullCredit":false},{"lineNumber":62,"author":{"gitId":"jason20240511"},"content":"    {","isFullCredit":false},{"lineNumber":63,"author":{"gitId":"jason20240511"},"content":"        int bodyStartIndex \u003d html.IndexOf(\"\u003cbody\u003e\") + \"\u003cbody\u003e\".Length;","isFullCredit":false},{"lineNumber":64,"author":{"gitId":"jason20240511"},"content":"        int bodyEndIndex \u003d html.IndexOf(\"\u003c/body\u003e\");","isFullCredit":false},{"lineNumber":65,"author":{"gitId":"jason20240511"},"content":"        if (bodyStartIndex \u003e\u003d 0 \u0026\u0026 bodyEndIndex \u003e\u003d 0)","isFullCredit":false},{"lineNumber":66,"author":{"gitId":"jason20240511"},"content":"        {","isFullCredit":false},{"lineNumber":67,"author":{"gitId":"jason20240511"},"content":"            return html.Substring(bodyStartIndex, bodyEndIndex - bodyStartIndex);","isFullCredit":false},{"lineNumber":68,"author":{"gitId":"jason20240511"},"content":"        }","isFullCredit":false},{"lineNumber":69,"author":{"gitId":"jason20240511"},"content":"        return string.Empty;","isFullCredit":false},{"lineNumber":70,"author":{"gitId":"jason20240511"},"content":"    }","isFullCredit":false},{"lineNumber":71,"author":{"gitId":"jason20240511"},"content":"","isFullCredit":false},{"lineNumber":72,"author":{"gitId":"jason20240511"},"content":"    private string GetStyleContent(string html)","isFullCredit":false},{"lineNumber":73,"author":{"gitId":"jason20240511"},"content":"    {","isFullCredit":false},{"lineNumber":74,"author":{"gitId":"jason20240511"},"content":"        int styleStartIndex \u003d html.IndexOf(\"\u003cstyle\u003e\") + \"\u003cstyle\u003e\".Length;","isFullCredit":false},{"lineNumber":75,"author":{"gitId":"jason20240511"},"content":"        int styleEndIndex \u003d html.IndexOf(\"\u003c/style\u003e\");","isFullCredit":false},{"lineNumber":76,"author":{"gitId":"jason20240511"},"content":"        if (styleStartIndex \u003e\u003d 0 \u0026\u0026 styleEndIndex \u003e\u003d 0)","isFullCredit":false},{"lineNumber":77,"author":{"gitId":"jason20240511"},"content":"        {","isFullCredit":false},{"lineNumber":78,"author":{"gitId":"jason20240511"},"content":"            return html.Substring(styleStartIndex, styleEndIndex - styleStartIndex);","isFullCredit":false},{"lineNumber":79,"author":{"gitId":"jason20240511"},"content":"        }","isFullCredit":false},{"lineNumber":80,"author":{"gitId":"jason20240511"},"content":"        return string.Empty;","isFullCredit":false},{"lineNumber":81,"author":{"gitId":"jason20240511"},"content":"    }","isFullCredit":false},{"lineNumber":82,"author":{"gitId":"jason20240511"},"content":"}","isFullCredit":false}],"authorContributionMap":{"jason20240511":82}},{"path":"bench/AElf.Benchmark/Program.cs","fileType":"cs","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"ï»¿using System;","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"-"},"content":"using System.IO;","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"-"},"content":"using System.Reflection;","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"-"},"content":"using BenchmarkDotNet.Configs;","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"jason20240511"},"content":"using BenchmarkDotNet.Exporters;","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"jason20240511"},"content":"using BenchmarkDotNet.Exporters.Csv;","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"jason20240511"},"content":"using BenchmarkDotNet.Exporters.Xml;","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"jason20240511"},"content":"using BenchmarkDotNet.Reports;","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"-"},"content":"using BenchmarkDotNet.Running;","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"-"},"content":"using Volo.Abp;","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"-"},"content":"namespace AElf.Benchmark;","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"-"},"content":"internal class Program","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"-"},"content":"{","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"-"},"content":"    private static void Main(string[] args)","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"-"},"content":"        RegisterAssemblyResolveEvent();","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"-"},"content":"        using (var application \u003d AbpApplicationFactory.Create\u003cBenchmarkAElfModule\u003e(options \u003d\u003e","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"-"},"content":"               {","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"-"},"content":"                   options.UseAutofac();","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"-"},"content":"               }))","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"-"},"content":"            application.Initialize();","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"jason20240511"},"content":"            var config \u003d new DebugInProcessConfig()","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"jason20240511"},"content":"                .WithSummaryStyle(SummaryStyle.Default.WithMaxParameterColumnWidth(50))","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"jason20240511"},"content":"                .AddExporter(XmlExporter.Default)","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"jason20240511"},"content":"                .AddExporter(HtmlExporter.Default)","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"jason20240511"},"content":"                .AddExporter(new HtmlSummaryExporter())","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"jason20240511"},"content":"                .AddExporter(CsvExporter.Default); ","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"jason20240511"},"content":"            BenchmarkSwitcher.FromAssembly(typeof(Program).Assembly).Run(args, config);        }","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"-"},"content":"    private static void RegisterAssemblyResolveEvent()","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"-"},"content":"        var currentDomain \u003d AppDomain.CurrentDomain;","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"-"},"content":"        currentDomain.AssemblyResolve +\u003d OnAssemblyResolve;","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"-"},"content":"    private static Assembly OnAssemblyResolve(object sender, ResolveEventArgs args)","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"-"},"content":"        var folderPath \u003d Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location);","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"-"},"content":"        var assemblyPath \u003d Path.Combine(folderPath, new AssemblyName(args.Name).Name + \".dll\");","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"-"},"content":"        if (!File.Exists(assemblyPath)) return null;","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"-"},"content":"        var assembly \u003d Assembly.LoadFrom(assemblyPath);","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"-"},"content":"        return assembly;","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":49,"author":{"gitId":"-"},"content":"}","isFullCredit":false}],"authorContributionMap":{"jason20240511":11,"-":38}},{"path":"build.ps1","fileType":"ps1","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"#!/usr/bin/env pwsh","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"-"},"content":"$DotNetInstallerUri \u003d \u0027https://dot.net/v1/dotnet-install.ps1\u0027;","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"-"},"content":"$DotNetUnixInstallerUri \u003d \u0027https://dot.net/v1/dotnet-install.sh\u0027","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"-"},"content":"$DotNetChannel \u003d \u0027LTS\u0027","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"-"},"content":"$PSScriptRoot \u003d Split-Path $MyInvocation.MyCommand.Path -Parent","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"-"},"content":"[string] $CakeVersion \u003d \u0027\u0027","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"-"},"content":"[string] $DotNetVersion\u003d \u0027\u0027","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"jason20240511"},"content":"","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"-"},"content":"foreach($line in Get-Content (Join-Path $PSScriptRoot \u0027build.config\u0027))","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"-"},"content":"{","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"-"},"content":"  if ($line -like \u0027CAKE_VERSION\u003d*\u0027) {","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"-"},"content":"      $CakeVersion \u003d $line.SubString(13)","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"-"},"content":"  }","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"-"},"content":"  elseif ($line -like \u0027DOTNET_VERSION\u003d*\u0027) {","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"-"},"content":"      $DotNetVersion \u003d$line.SubString(15)","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"-"},"content":"  }","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"-"},"content":"}","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"-"},"content":"if ([string]::IsNullOrEmpty($CakeVersion) -or [string]::IsNullOrEmpty($DotNetVersion)) {","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"-"},"content":"    \u0027Failed to parse Cake / .NET Core SDK Version\u0027","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"-"},"content":"    exit 1","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"-"},"content":"}","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"-"},"content":"# Make sure tools folder exists","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"-"},"content":"$ToolPath \u003d Join-Path $PSScriptRoot \"tools\"","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"-"},"content":"if (!(Test-Path $ToolPath)) {","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"-"},"content":"    Write-Verbose \"Creating tools directory...\"","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"-"},"content":"    New-Item -Path $ToolPath -Type Directory -Force | out-null","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"-"},"content":"}","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"-"},"content":"if ($PSVersionTable.PSEdition -ne \u0027Core\u0027) {","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"-"},"content":"    # Attempt to set highest encryption available for SecurityProtocol.","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"-"},"content":"    # PowerShell will not set this by default (until maybe .NET 4.6.x). This","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"-"},"content":"    # will typically produce a message for PowerShell v2 (just an info","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"-"},"content":"    # message though)","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"-"},"content":"    try {","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"-"},"content":"        # Set TLS 1.2 (3072), then TLS 1.1 (768), then TLS 1.0 (192), finally SSL 3.0 (48)","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"-"},"content":"        # Use integers because the enumeration values for TLS 1.2 and TLS 1.1 won\u0027t","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"-"},"content":"        # exist in .NET 4.0, even though they are addressable if .NET 4.5+ is","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"-"},"content":"        # installed (.NET 4.5 is an in-place upgrade).","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"-"},"content":"        [System.Net.ServicePointManager]::SecurityProtocol \u003d 3072 -bor 768 -bor 192 -bor 48","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"-"},"content":"      } catch {","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"-"},"content":"        Write-Output \u0027Unable to set PowerShell to use TLS 1.2 and TLS 1.1 due to old .NET Framework installed. If you see underlying connection closed or trust errors, you may need to upgrade to .NET Framework 4.5+ and PowerShell v3\u0027","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"-"},"content":"      }","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"-"},"content":"}","isFullCredit":false},{"lineNumber":49,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":50,"author":{"gitId":"-"},"content":"###########################################################################","isFullCredit":false},{"lineNumber":51,"author":{"gitId":"-"},"content":"# INSTALL .NET CORE CLI","isFullCredit":false},{"lineNumber":52,"author":{"gitId":"-"},"content":"###########################################################################","isFullCredit":false},{"lineNumber":53,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":54,"author":{"gitId":"-"},"content":"$env:DOTNET_SKIP_FIRST_TIME_EXPERIENCE\u003d1","isFullCredit":false},{"lineNumber":55,"author":{"gitId":"-"},"content":"$env:DOTNET_CLI_TELEMETRY_OPTOUT\u003d1","isFullCredit":false},{"lineNumber":56,"author":{"gitId":"-"},"content":"$env:DOTNET_ROLL_FORWARD_ON_NO_CANDIDATE_FX\u003d2","isFullCredit":false},{"lineNumber":57,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":58,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":59,"author":{"gitId":"-"},"content":"Function Remove-PathVariable([string]$VariableToRemove)","isFullCredit":false},{"lineNumber":60,"author":{"gitId":"-"},"content":"{","isFullCredit":false},{"lineNumber":61,"author":{"gitId":"-"},"content":"    $SplitChar \u003d \u0027;\u0027","isFullCredit":false},{"lineNumber":62,"author":{"gitId":"-"},"content":"    if ($IsMacOS -or $IsLinux) {","isFullCredit":false},{"lineNumber":63,"author":{"gitId":"-"},"content":"        $SplitChar \u003d \u0027:\u0027","isFullCredit":false},{"lineNumber":64,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":65,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":66,"author":{"gitId":"-"},"content":"    $path \u003d [Environment]::GetEnvironmentVariable(\"PATH\", \"User\")","isFullCredit":false},{"lineNumber":67,"author":{"gitId":"-"},"content":"    if ($path -ne $null)","isFullCredit":false},{"lineNumber":68,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":69,"author":{"gitId":"-"},"content":"        $newItems \u003d $path.Split($SplitChar, [StringSplitOptions]::RemoveEmptyEntries) | Where-Object { \"$($_)\" -inotlike $VariableToRemove }","isFullCredit":false},{"lineNumber":70,"author":{"gitId":"-"},"content":"        [Environment]::SetEnvironmentVariable(\"PATH\", [System.String]::Join($SplitChar, $newItems), \"User\")","isFullCredit":false},{"lineNumber":71,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":72,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":73,"author":{"gitId":"-"},"content":"    $path \u003d [Environment]::GetEnvironmentVariable(\"PATH\", \"Process\")","isFullCredit":false},{"lineNumber":74,"author":{"gitId":"-"},"content":"    if ($path -ne $null)","isFullCredit":false},{"lineNumber":75,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":76,"author":{"gitId":"-"},"content":"        $newItems \u003d $path.Split($SplitChar, [StringSplitOptions]::RemoveEmptyEntries) | Where-Object { \"$($_)\" -inotlike $VariableToRemove }","isFullCredit":false},{"lineNumber":77,"author":{"gitId":"-"},"content":"        [Environment]::SetEnvironmentVariable(\"PATH\", [System.String]::Join($SplitChar, $newItems), \"Process\")","isFullCredit":false},{"lineNumber":78,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":79,"author":{"gitId":"-"},"content":"}","isFullCredit":false},{"lineNumber":80,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":81,"author":{"gitId":"-"},"content":"# Get .NET Core CLI path if installed.","isFullCredit":false},{"lineNumber":82,"author":{"gitId":"-"},"content":"$FoundDotNetCliVersion \u003d $null;","isFullCredit":false},{"lineNumber":83,"author":{"gitId":"-"},"content":"if (Get-Command dotnet -ErrorAction SilentlyContinue) {","isFullCredit":false},{"lineNumber":84,"author":{"gitId":"-"},"content":"    $FoundDotNetCliVersion \u003d dotnet --version;","isFullCredit":false},{"lineNumber":85,"author":{"gitId":"-"},"content":"}","isFullCredit":false},{"lineNumber":86,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":87,"author":{"gitId":"-"},"content":"if($FoundDotNetCliVersion -ne $DotNetVersion) {","isFullCredit":false},{"lineNumber":88,"author":{"gitId":"-"},"content":"    $InstallPath \u003d Join-Path $PSScriptRoot \".dotnet\"","isFullCredit":false},{"lineNumber":89,"author":{"gitId":"-"},"content":"    if (!(Test-Path $InstallPath)) {","isFullCredit":false},{"lineNumber":90,"author":{"gitId":"-"},"content":"        New-Item -Path $InstallPath -ItemType Directory -Force | Out-Null;","isFullCredit":false},{"lineNumber":91,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":92,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":93,"author":{"gitId":"-"},"content":"    if ($IsMacOS -or $IsLinux) {","isFullCredit":false},{"lineNumber":94,"author":{"gitId":"-"},"content":"        $ScriptPath \u003d Join-Path $InstallPath \u0027dotnet-install.sh\u0027","isFullCredit":false},{"lineNumber":95,"author":{"gitId":"-"},"content":"        (New-Object System.Net.WebClient).DownloadFile($DotNetUnixInstallerUri, $ScriptPath);","isFullCredit":false},{"lineNumber":96,"author":{"gitId":"-"},"content":"        \u0026 bash $ScriptPath --version \"$DotNetVersion\" --install-dir \"$InstallPath\" --channel \"$DotNetChannel\" --no-path","isFullCredit":false},{"lineNumber":97,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":98,"author":{"gitId":"-"},"content":"        Remove-PathVariable \"$InstallPath\"","isFullCredit":false},{"lineNumber":99,"author":{"gitId":"-"},"content":"        $env:PATH \u003d \"$($InstallPath):$env:PATH\"","isFullCredit":false},{"lineNumber":100,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":101,"author":{"gitId":"-"},"content":"    else {","isFullCredit":false},{"lineNumber":102,"author":{"gitId":"-"},"content":"        $ScriptPath \u003d Join-Path $InstallPath \u0027dotnet-install.ps1\u0027","isFullCredit":false},{"lineNumber":103,"author":{"gitId":"-"},"content":"        (New-Object System.Net.WebClient).DownloadFile($DotNetInstallerUri, $ScriptPath);","isFullCredit":false},{"lineNumber":104,"author":{"gitId":"-"},"content":"        \u0026 $ScriptPath -Channel $DotNetChannel -Version $DotNetVersion -InstallDir $InstallPath;","isFullCredit":false},{"lineNumber":105,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":106,"author":{"gitId":"-"},"content":"        Remove-PathVariable \"$InstallPath\"","isFullCredit":false},{"lineNumber":107,"author":{"gitId":"-"},"content":"        $env:PATH \u003d \"$InstallPath;$env:PATH\"","isFullCredit":false},{"lineNumber":108,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":109,"author":{"gitId":"-"},"content":"    $env:DOTNET_ROOT\u003d$InstallPath","isFullCredit":false},{"lineNumber":110,"author":{"gitId":"-"},"content":"}","isFullCredit":false},{"lineNumber":111,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":112,"author":{"gitId":"-"},"content":"###########################################################################","isFullCredit":false},{"lineNumber":113,"author":{"gitId":"-"},"content":"# INSTALL CAKE","isFullCredit":false},{"lineNumber":114,"author":{"gitId":"-"},"content":"###########################################################################","isFullCredit":false},{"lineNumber":115,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":116,"author":{"gitId":"-"},"content":"# Make sure Cake has been installed.","isFullCredit":false},{"lineNumber":117,"author":{"gitId":"-"},"content":"[string] $CakeExePath \u003d \u0027\u0027","isFullCredit":false},{"lineNumber":118,"author":{"gitId":"-"},"content":"[string] $CakeInstalledVersion \u003d Get-Command dotnet-cake -ErrorAction SilentlyContinue  | % {\u0026$_.Source --version}","isFullCredit":false},{"lineNumber":119,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":120,"author":{"gitId":"-"},"content":"if ($CakeInstalledVersion -eq $CakeVersion) {","isFullCredit":false},{"lineNumber":121,"author":{"gitId":"-"},"content":"    # Cake found locally","isFullCredit":false},{"lineNumber":122,"author":{"gitId":"-"},"content":"    $CakeExePath \u003d (Get-Command dotnet-cake).Source","isFullCredit":false},{"lineNumber":123,"author":{"gitId":"-"},"content":"}","isFullCredit":false},{"lineNumber":124,"author":{"gitId":"-"},"content":"else {","isFullCredit":false},{"lineNumber":125,"author":{"gitId":"-"},"content":"    $CakePath \u003d [System.IO.Path]::Combine($ToolPath,\u0027.store\u0027, \u0027cake.tool\u0027, $CakeVersion) # Old PowerShell versions Join-Path only supports one child path","isFullCredit":false},{"lineNumber":126,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":127,"author":{"gitId":"-"},"content":"    $CakeExePath \u003d (Get-ChildItem -Path $ToolPath -Filter \"dotnet-cake*\" -File| ForEach-Object FullName | Select-Object -First 1)","isFullCredit":false},{"lineNumber":128,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":129,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":130,"author":{"gitId":"-"},"content":"    if ((!(Test-Path -Path $CakePath -PathType Container)) -or (!(Test-Path $CakeExePath -PathType Leaf))) {","isFullCredit":false},{"lineNumber":131,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":132,"author":{"gitId":"-"},"content":"        if ((![string]::IsNullOrEmpty($CakeExePath)) -and (Test-Path $CakeExePath -PathType Leaf))","isFullCredit":false},{"lineNumber":133,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":134,"author":{"gitId":"-"},"content":"            \u0026 dotnet tool uninstall --tool-path $ToolPath Cake.Tool","isFullCredit":false},{"lineNumber":135,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":136,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":137,"author":{"gitId":"-"},"content":"        \u0026 dotnet tool install --tool-path $ToolPath --version $CakeVersion Cake.Tool","isFullCredit":false},{"lineNumber":138,"author":{"gitId":"-"},"content":"        if ($LASTEXITCODE -ne 0)","isFullCredit":false},{"lineNumber":139,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":140,"author":{"gitId":"-"},"content":"            \u0027Failed to install cake\u0027","isFullCredit":false},{"lineNumber":141,"author":{"gitId":"-"},"content":"            exit 1","isFullCredit":false},{"lineNumber":142,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":143,"author":{"gitId":"-"},"content":"        $CakeExePath \u003d (Get-ChildItem -Path $ToolPath -Filter \"dotnet-cake*\" -File| ForEach-Object FullName | Select-Object -First 1)","isFullCredit":false},{"lineNumber":144,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":145,"author":{"gitId":"-"},"content":"}","isFullCredit":false},{"lineNumber":146,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":147,"author":{"gitId":"-"},"content":"###########################################################################","isFullCredit":false},{"lineNumber":148,"author":{"gitId":"-"},"content":"# RUN BUILD SCRIPT","isFullCredit":false},{"lineNumber":149,"author":{"gitId":"-"},"content":"###########################################################################","isFullCredit":false},{"lineNumber":150,"author":{"gitId":"-"},"content":"\u0026 \"$CakeExePath\" ./build.cake --bootstrap","isFullCredit":false},{"lineNumber":151,"author":{"gitId":"-"},"content":"if ($LASTEXITCODE -eq 0)","isFullCredit":false},{"lineNumber":152,"author":{"gitId":"-"},"content":"{","isFullCredit":false},{"lineNumber":153,"author":{"gitId":"-"},"content":"    \u0026 \"$CakeExePath\" ./build.cake $args","isFullCredit":false},{"lineNumber":154,"author":{"gitId":"-"},"content":"}","isFullCredit":false},{"lineNumber":155,"author":{"gitId":"-"},"content":"exit $LASTEXITCODE","isFullCredit":false}],"authorContributionMap":{"jason20240511":1,"-":154}},{"path":"build.sh","fileType":"sh","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"#!/usr/bin/env bash","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"jason20240511"},"content":"# Define variables","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"-"},"content":"SCRIPT_DIR\u003d$( cd \"$( dirname \"${BASH_SOURCE[0]}\" )\" \u0026\u0026 pwd )","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"-"},"content":"source $SCRIPT_DIR/build.config","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"-"},"content":"TOOLS_DIR\u003d$SCRIPT_DIR/tools","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"-"},"content":"CAKE_EXE\u003d$TOOLS_DIR/dotnet-cake","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"-"},"content":"CAKE_PATH\u003d$TOOLS_DIR/.store/cake.tool/$CAKE_VERSION","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"-"},"content":"if [ \"$CAKE_VERSION\" \u003d \"\" ] || [ \"$DOTNET_VERSION\" \u003d \"\" ]; then","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"-"},"content":"    echo \"An error occured while parsing Cake / .NET Core SDK version.\"","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"-"},"content":"    exit 1","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"-"},"content":"fi","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"-"},"content":"# Make sure the tools folder exist.","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"-"},"content":"if [ ! -d \"$TOOLS_DIR\" ]; then","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"-"},"content":"  mkdir \"$TOOLS_DIR\"","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"-"},"content":"fi","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"-"},"content":"###########################################################################","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"-"},"content":"# INSTALL .NET CORE CLI","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"-"},"content":"###########################################################################","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"-"},"content":"export DOTNET_SKIP_FIRST_TIME_EXPERIENCE\u003d1","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"-"},"content":"export DOTNET_CLI_TELEMETRY_OPTOUT\u003d1","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"-"},"content":"export DOTNET_SYSTEM_NET_HTTP_USESOCKETSHTTPHANDLER\u003d0","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"-"},"content":"export DOTNET_ROLL_FORWARD_ON_NO_CANDIDATE_FX\u003d2","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"-"},"content":"DOTNET_INSTALLED_VERSION\u003d$(dotnet --version 2\u003e\u00261)","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"-"},"content":"if [ \"$DOTNET_VERSION\" !\u003d \"$DOTNET_INSTALLED_VERSION\" ]; then","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"-"},"content":"    echo \"Installing .NET CLI...\"","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"-"},"content":"    if [ ! -d \"$SCRIPT_DIR/.dotnet\" ]; then","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"-"},"content":"      mkdir \"$SCRIPT_DIR/.dotnet\"","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"-"},"content":"    fi","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"-"},"content":"    curl -Lsfo \"$SCRIPT_DIR/.dotnet/dotnet-install.sh\" https://dot.net/v1/dotnet-install.sh","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"-"},"content":"    bash \"$SCRIPT_DIR/.dotnet/dotnet-install.sh\" --version $DOTNET_VERSION --install-dir .dotnet --no-path","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"-"},"content":"    export PATH\u003d\"$SCRIPT_DIR/.dotnet\":$PATH","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"-"},"content":"    export DOTNET_ROOT\u003d\"$SCRIPT_DIR/.dotnet\"","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"-"},"content":"fi","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"-"},"content":"###########################################################################","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"-"},"content":"# INSTALL CAKE","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"-"},"content":"###########################################################################","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"-"},"content":"CAKE_INSTALLED_VERSION\u003d$(dotnet-cake --version 2\u003e\u00261)","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"-"},"content":"if [ \"$CAKE_VERSION\" !\u003d \"$CAKE_INSTALLED_VERSION\" ]; then","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"-"},"content":"    if [ ! -f \"$CAKE_EXE\" ] || [ ! -d \"$CAKE_PATH\" ]; then","isFullCredit":false},{"lineNumber":49,"author":{"gitId":"-"},"content":"        if [ -f \"$CAKE_EXE\" ]; then","isFullCredit":false},{"lineNumber":50,"author":{"gitId":"-"},"content":"            dotnet tool uninstall --tool-path $TOOLS_DIR Cake.Tool","isFullCredit":false},{"lineNumber":51,"author":{"gitId":"-"},"content":"        fi","isFullCredit":false},{"lineNumber":52,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":53,"author":{"gitId":"-"},"content":"        echo \"Installing Cake $CAKE_VERSION...\"","isFullCredit":false},{"lineNumber":54,"author":{"gitId":"-"},"content":"        dotnet tool install --tool-path $TOOLS_DIR --version $CAKE_VERSION Cake.Tool","isFullCredit":false},{"lineNumber":55,"author":{"gitId":"-"},"content":"        if [ $? -ne 0 ]; then","isFullCredit":false},{"lineNumber":56,"author":{"gitId":"-"},"content":"            echo \"An error occured while installing Cake.\"","isFullCredit":false},{"lineNumber":57,"author":{"gitId":"-"},"content":"            exit 1","isFullCredit":false},{"lineNumber":58,"author":{"gitId":"-"},"content":"        fi","isFullCredit":false},{"lineNumber":59,"author":{"gitId":"-"},"content":"    fi","isFullCredit":false},{"lineNumber":60,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":61,"author":{"gitId":"-"},"content":"    # Make sure that Cake has been installed.","isFullCredit":false},{"lineNumber":62,"author":{"gitId":"-"},"content":"    if [ ! -f \"$CAKE_EXE\" ]; then","isFullCredit":false},{"lineNumber":63,"author":{"gitId":"-"},"content":"        echo \"Could not find Cake.exe at \u0027$CAKE_EXE\u0027.\"","isFullCredit":false},{"lineNumber":64,"author":{"gitId":"-"},"content":"        exit 1","isFullCredit":false},{"lineNumber":65,"author":{"gitId":"-"},"content":"    fi","isFullCredit":false},{"lineNumber":66,"author":{"gitId":"-"},"content":"else","isFullCredit":false},{"lineNumber":67,"author":{"gitId":"-"},"content":"    CAKE_EXE\u003d\"dotnet-cake\"","isFullCredit":false},{"lineNumber":68,"author":{"gitId":"-"},"content":"fi","isFullCredit":false},{"lineNumber":69,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":70,"author":{"gitId":"-"},"content":"###########################################################################","isFullCredit":false},{"lineNumber":71,"author":{"gitId":"-"},"content":"# RUN BUILD SCRIPT","isFullCredit":false},{"lineNumber":72,"author":{"gitId":"-"},"content":"###########################################################################","isFullCredit":false},{"lineNumber":73,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":74,"author":{"gitId":"-"},"content":"# Start Cake","isFullCredit":false},{"lineNumber":75,"author":{"gitId":"-"},"content":"(exec \"$CAKE_EXE\" build.cake --bootstrap) \u0026\u0026 (exec \"$CAKE_EXE\" build.cake \"$@\")","isFullCredit":false}],"authorContributionMap":{"jason20240511":1,"-":74}},{"path":"contract/AElf.Contracts.Association/Association.cs","fileType":"cs","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"using System.Linq;","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"-"},"content":"using AElf.Sdk.CSharp;","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"-"},"content":"using AElf.Standards.ACS3;","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"-"},"content":"using AElf.Types;","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"-"},"content":"using Google.Protobuf.WellKnownTypes;","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"-"},"content":"namespace AElf.Contracts.Association;","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"-"},"content":"public partial class AssociationContract : AssociationContractImplContainer.AssociationContractImplBase","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"-"},"content":"{","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"-"},"content":"    #region View","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"-"},"content":"    public override Organization GetOrganization(Address address)","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"-"},"content":"        return State.Organizations[address] ?? new Organization();","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"-"},"content":"    public override ProposalOutput GetProposal(Hash proposalId)","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"-"},"content":"        var proposal \u003d State.Proposals[proposalId];","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"-"},"content":"        if (proposal \u003d\u003d null) return new ProposalOutput();","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"-"},"content":"        var organization \u003d State.Organizations[proposal.OrganizationAddress];","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"-"},"content":"        var readyToRelease \u003d IsReleaseThresholdReached(proposal, organization);","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"-"},"content":"        return new ProposalOutput","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"-"},"content":"            ProposalId \u003d proposalId,","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"-"},"content":"            ContractMethodName \u003d proposal.ContractMethodName,","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"-"},"content":"            ExpiredTime \u003d proposal.ExpiredTime,","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"-"},"content":"            OrganizationAddress \u003d proposal.OrganizationAddress,","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"-"},"content":"            Params \u003d proposal.Params,","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"-"},"content":"            Proposer \u003d proposal.Proposer,","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"-"},"content":"            ToAddress \u003d proposal.ToAddress,","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"-"},"content":"            ToBeReleased \u003d readyToRelease,","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"-"},"content":"            ApprovalCount \u003d proposal.Approvals.Count,","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"-"},"content":"            RejectionCount \u003d proposal.Rejections.Count,","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"eanzhao"},"content":"            AbstentionCount \u003d proposal.Abstentions.Count,","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"eanzhao"},"content":"            Title \u003d proposal.Title,","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"eanzhao"},"content":"            Description \u003d proposal.Description","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"-"},"content":"    public override Address CalculateOrganizationAddress(CreateOrganizationInput input)","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"-"},"content":"        var organizationHashAddressPair \u003d CalculateOrganizationHashAddressPair(input);","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d organizationHashAddressPair.OrganizationAddress;","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"-"},"content":"        return organizationAddress;","isFullCredit":false},{"lineNumber":49,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":50,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":51,"author":{"gitId":"-"},"content":"    public override BoolValue ValidateOrganizationExist(Address input)","isFullCredit":false},{"lineNumber":52,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":53,"author":{"gitId":"-"},"content":"        return new BoolValue { Value \u003d State.Organizations[input] !\u003d null };","isFullCredit":false},{"lineNumber":54,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":55,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":56,"author":{"gitId":"-"},"content":"    public override BoolValue ValidateProposerInWhiteList(ValidateProposerInWhiteListInput input)","isFullCredit":false},{"lineNumber":57,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":58,"author":{"gitId":"-"},"content":"        var organization \u003d State.Organizations[input.OrganizationAddress];","isFullCredit":false},{"lineNumber":59,"author":{"gitId":"-"},"content":"        return new BoolValue","isFullCredit":false},{"lineNumber":60,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":61,"author":{"gitId":"-"},"content":"            Value \u003d organization.ProposerWhiteList.Contains(input.Proposer)","isFullCredit":false},{"lineNumber":62,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":63,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":64,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":65,"author":{"gitId":"-"},"content":"    #endregion view","isFullCredit":false},{"lineNumber":66,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":67,"author":{"gitId":"-"},"content":"    #region Actions","isFullCredit":false},{"lineNumber":68,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":69,"author":{"gitId":"-"},"content":"    public override Address CreateOrganization(CreateOrganizationInput input)","isFullCredit":false},{"lineNumber":70,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":71,"author":{"gitId":"-"},"content":"        var organizationHashAddressPair \u003d CalculateOrganizationHashAddressPair(input);","isFullCredit":false},{"lineNumber":72,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d organizationHashAddressPair.OrganizationAddress;","isFullCredit":false},{"lineNumber":73,"author":{"gitId":"-"},"content":"        var organizationHash \u003d organizationHashAddressPair.OrganizationHash;","isFullCredit":false},{"lineNumber":74,"author":{"gitId":"-"},"content":"        var organization \u003d new Organization","isFullCredit":false},{"lineNumber":75,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":76,"author":{"gitId":"-"},"content":"            ProposalReleaseThreshold \u003d input.ProposalReleaseThreshold,","isFullCredit":false},{"lineNumber":77,"author":{"gitId":"-"},"content":"            OrganizationAddress \u003d organizationAddress,","isFullCredit":false},{"lineNumber":78,"author":{"gitId":"-"},"content":"            ProposerWhiteList \u003d input.ProposerWhiteList,","isFullCredit":false},{"lineNumber":79,"author":{"gitId":"-"},"content":"            OrganizationMemberList \u003d input.OrganizationMemberList,","isFullCredit":false},{"lineNumber":80,"author":{"gitId":"-"},"content":"            OrganizationHash \u003d organizationHash,","isFullCredit":false},{"lineNumber":81,"author":{"gitId":"-"},"content":"            CreationToken \u003d input.CreationToken","isFullCredit":false},{"lineNumber":82,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":83,"author":{"gitId":"-"},"content":"        Assert(Validate(organization), \"Invalid organization.\");","isFullCredit":false},{"lineNumber":84,"author":{"gitId":"-"},"content":"        if (State.Organizations[organizationAddress] \u003d\u003d null)","isFullCredit":false},{"lineNumber":85,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":86,"author":{"gitId":"-"},"content":"            State.Organizations[organizationAddress] \u003d organization;","isFullCredit":false},{"lineNumber":87,"author":{"gitId":"-"},"content":"            Context.Fire(new OrganizationCreated","isFullCredit":false},{"lineNumber":88,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":89,"author":{"gitId":"-"},"content":"                OrganizationAddress \u003d organizationAddress","isFullCredit":false},{"lineNumber":90,"author":{"gitId":"-"},"content":"            });","isFullCredit":false},{"lineNumber":91,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":92,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":93,"author":{"gitId":"-"},"content":"        return organizationAddress;","isFullCredit":false},{"lineNumber":94,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":95,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":96,"author":{"gitId":"-"},"content":"    public override Address CreateOrganizationBySystemContract(CreateOrganizationBySystemContractInput input)","isFullCredit":false},{"lineNumber":97,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":98,"author":{"gitId":"-"},"content":"        Assert(Context.GetSystemContractNameToAddressMapping().Values.Contains(Context.Sender),","isFullCredit":false},{"lineNumber":99,"author":{"gitId":"-"},"content":"            \"Unauthorized to create organization.\");","isFullCredit":false},{"lineNumber":100,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d CreateOrganization(input.OrganizationCreationInput);","isFullCredit":false},{"lineNumber":101,"author":{"gitId":"-"},"content":"        if (!string.IsNullOrEmpty(input.OrganizationAddressFeedbackMethod))","isFullCredit":false},{"lineNumber":102,"author":{"gitId":"-"},"content":"            Context.SendInline(Context.Sender, input.OrganizationAddressFeedbackMethod, organizationAddress);","isFullCredit":false},{"lineNumber":103,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":104,"author":{"gitId":"-"},"content":"        return organizationAddress;","isFullCredit":false},{"lineNumber":105,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":106,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":107,"author":{"gitId":"-"},"content":"    public override Hash CreateProposal(CreateProposalInput input)","isFullCredit":false},{"lineNumber":108,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":109,"author":{"gitId":"-"},"content":"        AssertIsAuthorizedProposer(input.OrganizationAddress, Context.Sender);","isFullCredit":false},{"lineNumber":110,"author":{"gitId":"-"},"content":"        var proposalId \u003d CreateNewProposal(input);","isFullCredit":false},{"lineNumber":111,"author":{"gitId":"-"},"content":"        return proposalId;","isFullCredit":false},{"lineNumber":112,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":113,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":114,"author":{"gitId":"-"},"content":"    public override Hash CreateProposalBySystemContract(CreateProposalBySystemContractInput input)","isFullCredit":false},{"lineNumber":115,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":116,"author":{"gitId":"-"},"content":"        Assert(Context.GetSystemContractNameToAddressMapping().Values.Contains(Context.Sender),","isFullCredit":false},{"lineNumber":117,"author":{"gitId":"-"},"content":"            \"Not authorized to propose.\");","isFullCredit":false},{"lineNumber":118,"author":{"gitId":"-"},"content":"        AssertIsAuthorizedProposer(input.ProposalInput.OrganizationAddress, input.OriginProposer);","isFullCredit":false},{"lineNumber":119,"author":{"gitId":"-"},"content":"        var proposalId \u003d CreateNewProposal(input.ProposalInput);","isFullCredit":false},{"lineNumber":120,"author":{"gitId":"-"},"content":"        return proposalId;","isFullCredit":false},{"lineNumber":121,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":122,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":123,"author":{"gitId":"-"},"content":"    public override Empty Approve(Hash input)","isFullCredit":false},{"lineNumber":124,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":125,"author":{"gitId":"-"},"content":"        var proposal \u003d GetValidProposal(input);","isFullCredit":false},{"lineNumber":126,"author":{"gitId":"-"},"content":"        AssertProposalNotYetVotedBySender(proposal, Context.Sender);","isFullCredit":false},{"lineNumber":127,"author":{"gitId":"-"},"content":"        var organization \u003d GetOrganization(proposal.OrganizationAddress);","isFullCredit":false},{"lineNumber":128,"author":{"gitId":"-"},"content":"        AssertIsAuthorizedOrganizationMember(organization, Context.Sender);","isFullCredit":false},{"lineNumber":129,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":130,"author":{"gitId":"-"},"content":"        proposal.Approvals.Add(Context.Sender);","isFullCredit":false},{"lineNumber":131,"author":{"gitId":"-"},"content":"        State.Proposals[input] \u003d proposal;","isFullCredit":false},{"lineNumber":132,"author":{"gitId":"-"},"content":"        Context.Fire(new ReceiptCreated","isFullCredit":false},{"lineNumber":133,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":134,"author":{"gitId":"-"},"content":"            Address \u003d Context.Sender,","isFullCredit":false},{"lineNumber":135,"author":{"gitId":"-"},"content":"            ProposalId \u003d input,","isFullCredit":false},{"lineNumber":136,"author":{"gitId":"-"},"content":"            Time \u003d Context.CurrentBlockTime,","isFullCredit":false},{"lineNumber":137,"author":{"gitId":"-"},"content":"            ReceiptType \u003d nameof(Approve),","isFullCredit":false},{"lineNumber":138,"author":{"gitId":"-"},"content":"            OrganizationAddress \u003d proposal.OrganizationAddress","isFullCredit":false},{"lineNumber":139,"author":{"gitId":"-"},"content":"        });","isFullCredit":false},{"lineNumber":140,"author":{"gitId":"-"},"content":"        return new Empty();","isFullCredit":false},{"lineNumber":141,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":142,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":143,"author":{"gitId":"-"},"content":"    public override Empty Reject(Hash input)","isFullCredit":false},{"lineNumber":144,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":145,"author":{"gitId":"-"},"content":"        var proposal \u003d GetValidProposal(input);","isFullCredit":false},{"lineNumber":146,"author":{"gitId":"-"},"content":"        AssertProposalNotYetVotedBySender(proposal, Context.Sender);","isFullCredit":false},{"lineNumber":147,"author":{"gitId":"-"},"content":"        var organization \u003d GetOrganization(proposal.OrganizationAddress);","isFullCredit":false},{"lineNumber":148,"author":{"gitId":"-"},"content":"        AssertIsAuthorizedOrganizationMember(organization, Context.Sender);","isFullCredit":false},{"lineNumber":149,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":150,"author":{"gitId":"-"},"content":"        proposal.Rejections.Add(Context.Sender);","isFullCredit":false},{"lineNumber":151,"author":{"gitId":"-"},"content":"        State.Proposals[input] \u003d proposal;","isFullCredit":false},{"lineNumber":152,"author":{"gitId":"-"},"content":"        Context.Fire(new ReceiptCreated","isFullCredit":false},{"lineNumber":153,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":154,"author":{"gitId":"-"},"content":"            Address \u003d Context.Sender,","isFullCredit":false},{"lineNumber":155,"author":{"gitId":"-"},"content":"            ProposalId \u003d input,","isFullCredit":false},{"lineNumber":156,"author":{"gitId":"-"},"content":"            Time \u003d Context.CurrentBlockTime,","isFullCredit":false},{"lineNumber":157,"author":{"gitId":"-"},"content":"            ReceiptType \u003d nameof(Reject),","isFullCredit":false},{"lineNumber":158,"author":{"gitId":"-"},"content":"            OrganizationAddress \u003d proposal.OrganizationAddress","isFullCredit":false},{"lineNumber":159,"author":{"gitId":"-"},"content":"        });","isFullCredit":false},{"lineNumber":160,"author":{"gitId":"-"},"content":"        return new Empty();","isFullCredit":false},{"lineNumber":161,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":162,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":163,"author":{"gitId":"-"},"content":"    public override Empty Abstain(Hash input)","isFullCredit":false},{"lineNumber":164,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":165,"author":{"gitId":"-"},"content":"        var proposal \u003d GetValidProposal(input);","isFullCredit":false},{"lineNumber":166,"author":{"gitId":"-"},"content":"        AssertProposalNotYetVotedBySender(proposal, Context.Sender);","isFullCredit":false},{"lineNumber":167,"author":{"gitId":"-"},"content":"        var organization \u003d GetOrganization(proposal.OrganizationAddress);","isFullCredit":false},{"lineNumber":168,"author":{"gitId":"-"},"content":"        AssertIsAuthorizedOrganizationMember(organization, Context.Sender);","isFullCredit":false},{"lineNumber":169,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":170,"author":{"gitId":"-"},"content":"        proposal.Abstentions.Add(Context.Sender);","isFullCredit":false},{"lineNumber":171,"author":{"gitId":"-"},"content":"        State.Proposals[input] \u003d proposal;","isFullCredit":false},{"lineNumber":172,"author":{"gitId":"-"},"content":"        Context.Fire(new ReceiptCreated","isFullCredit":false},{"lineNumber":173,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":174,"author":{"gitId":"-"},"content":"            Address \u003d Context.Sender,","isFullCredit":false},{"lineNumber":175,"author":{"gitId":"-"},"content":"            ProposalId \u003d input,","isFullCredit":false},{"lineNumber":176,"author":{"gitId":"-"},"content":"            Time \u003d Context.CurrentBlockTime,","isFullCredit":false},{"lineNumber":177,"author":{"gitId":"-"},"content":"            ReceiptType \u003d nameof(Abstain),","isFullCredit":false},{"lineNumber":178,"author":{"gitId":"-"},"content":"            OrganizationAddress \u003d proposal.OrganizationAddress","isFullCredit":false},{"lineNumber":179,"author":{"gitId":"-"},"content":"        });","isFullCredit":false},{"lineNumber":180,"author":{"gitId":"-"},"content":"        return new Empty();","isFullCredit":false},{"lineNumber":181,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":182,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":183,"author":{"gitId":"-"},"content":"    public override Empty Release(Hash input)","isFullCredit":false},{"lineNumber":184,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":185,"author":{"gitId":"-"},"content":"        var proposalInfo \u003d GetValidProposal(input);","isFullCredit":false},{"lineNumber":186,"author":{"gitId":"-"},"content":"        Assert(Context.Sender \u003d\u003d proposalInfo.Proposer, \"No permission.\");","isFullCredit":false},{"lineNumber":187,"author":{"gitId":"-"},"content":"        var organization \u003d State.Organizations[proposalInfo.OrganizationAddress];","isFullCredit":false},{"lineNumber":188,"author":{"gitId":"-"},"content":"        Assert(IsReleaseThresholdReached(proposalInfo, organization), \"Not approved.\");","isFullCredit":false},{"lineNumber":189,"author":{"gitId":"-"},"content":"        Context.SendVirtualInlineBySystemContract(","isFullCredit":false},{"lineNumber":190,"author":{"gitId":"-"},"content":"            CalculateVirtualHash(organization.OrganizationHash, organization.CreationToken), proposalInfo.ToAddress,","isFullCredit":false},{"lineNumber":191,"author":{"gitId":"-"},"content":"            proposalInfo.ContractMethodName, proposalInfo.Params);","isFullCredit":false},{"lineNumber":192,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":193,"author":{"gitId":"-"},"content":"        Context.Fire(new ProposalReleased","isFullCredit":false},{"lineNumber":194,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":195,"author":{"gitId":"-"},"content":"            ProposalId \u003d input,","isFullCredit":false},{"lineNumber":196,"author":{"gitId":"-"},"content":"            OrganizationAddress \u003d proposalInfo.OrganizationAddress","isFullCredit":false},{"lineNumber":197,"author":{"gitId":"-"},"content":"        });","isFullCredit":false},{"lineNumber":198,"author":{"gitId":"-"},"content":"        State.Proposals.Remove(input);","isFullCredit":false},{"lineNumber":199,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":200,"author":{"gitId":"-"},"content":"        return new Empty();","isFullCredit":false},{"lineNumber":201,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":202,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":203,"author":{"gitId":"-"},"content":"    public override Empty ChangeOrganizationThreshold(ProposalReleaseThreshold input)","isFullCredit":false},{"lineNumber":204,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":205,"author":{"gitId":"-"},"content":"        var organization \u003d State.Organizations[Context.Sender];","isFullCredit":false},{"lineNumber":206,"author":{"gitId":"-"},"content":"        Assert(organization !\u003d null, \"Organization not found.\");","isFullCredit":false},{"lineNumber":207,"author":{"gitId":"-"},"content":"        organization.ProposalReleaseThreshold \u003d input;","isFullCredit":false},{"lineNumber":208,"author":{"gitId":"-"},"content":"        Assert(Validate(organization), \"Invalid organization.\");","isFullCredit":false},{"lineNumber":209,"author":{"gitId":"-"},"content":"        State.Organizations[Context.Sender] \u003d organization;","isFullCredit":false},{"lineNumber":210,"author":{"gitId":"-"},"content":"        Context.Fire(new OrganizationThresholdChanged","isFullCredit":false},{"lineNumber":211,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":212,"author":{"gitId":"-"},"content":"            OrganizationAddress \u003d Context.Sender,","isFullCredit":false},{"lineNumber":213,"author":{"gitId":"-"},"content":"            ProposerReleaseThreshold \u003d input","isFullCredit":false},{"lineNumber":214,"author":{"gitId":"-"},"content":"        });","isFullCredit":false},{"lineNumber":215,"author":{"gitId":"-"},"content":"        return new Empty();","isFullCredit":false},{"lineNumber":216,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":217,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":218,"author":{"gitId":"-"},"content":"    public override Empty ChangeOrganizationProposerWhiteList(ProposerWhiteList input)","isFullCredit":false},{"lineNumber":219,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":220,"author":{"gitId":"-"},"content":"        var organization \u003d State.Organizations[Context.Sender];","isFullCredit":false},{"lineNumber":221,"author":{"gitId":"-"},"content":"        Assert(organization !\u003d null, \"Organization not found.\");","isFullCredit":false},{"lineNumber":222,"author":{"gitId":"-"},"content":"        organization.ProposerWhiteList \u003d input;","isFullCredit":false},{"lineNumber":223,"author":{"gitId":"-"},"content":"        Assert(Validate(organization), \"Invalid organization.\");","isFullCredit":false},{"lineNumber":224,"author":{"gitId":"-"},"content":"        State.Organizations[Context.Sender] \u003d organization;","isFullCredit":false},{"lineNumber":225,"author":{"gitId":"-"},"content":"        Context.Fire(new OrganizationWhiteListChanged","isFullCredit":false},{"lineNumber":226,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":227,"author":{"gitId":"-"},"content":"            OrganizationAddress \u003d Context.Sender,","isFullCredit":false},{"lineNumber":228,"author":{"gitId":"-"},"content":"            ProposerWhiteList \u003d input","isFullCredit":false},{"lineNumber":229,"author":{"gitId":"-"},"content":"        });","isFullCredit":false},{"lineNumber":230,"author":{"gitId":"-"},"content":"        return new Empty();","isFullCredit":false},{"lineNumber":231,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":232,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":233,"author":{"gitId":"-"},"content":"    public override Empty AddMember(Address input)","isFullCredit":false},{"lineNumber":234,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":235,"author":{"gitId":"-"},"content":"        var organization \u003d State.Organizations[Context.Sender];","isFullCredit":false},{"lineNumber":236,"author":{"gitId":"-"},"content":"        Assert(organization !\u003d null, \"Organization not found.\");","isFullCredit":false},{"lineNumber":237,"author":{"gitId":"-"},"content":"        organization.OrganizationMemberList.OrganizationMembers.Add(input);","isFullCredit":false},{"lineNumber":238,"author":{"gitId":"-"},"content":"        Assert(Validate(organization), \"Invalid organization.\");","isFullCredit":false},{"lineNumber":239,"author":{"gitId":"-"},"content":"        State.Organizations[Context.Sender] \u003d organization;","isFullCredit":false},{"lineNumber":240,"author":{"gitId":"-"},"content":"        Context.Fire(new MemberAdded","isFullCredit":false},{"lineNumber":241,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":242,"author":{"gitId":"-"},"content":"            OrganizationAddress \u003d Context.Sender,","isFullCredit":false},{"lineNumber":243,"author":{"gitId":"-"},"content":"            Member \u003d input","isFullCredit":false},{"lineNumber":244,"author":{"gitId":"-"},"content":"        });","isFullCredit":false},{"lineNumber":245,"author":{"gitId":"-"},"content":"        return new Empty();","isFullCredit":false},{"lineNumber":246,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":247,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":248,"author":{"gitId":"-"},"content":"    public override Empty ChangeMember(ChangeMemberInput input)","isFullCredit":false},{"lineNumber":249,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":250,"author":{"gitId":"-"},"content":"        var organization \u003d State.Organizations[Context.Sender];","isFullCredit":false},{"lineNumber":251,"author":{"gitId":"-"},"content":"        Assert(organization !\u003d null, \"Organization not found.\");","isFullCredit":false},{"lineNumber":252,"author":{"gitId":"-"},"content":"        var removeResult \u003d organization.OrganizationMemberList.OrganizationMembers.Remove(input.OldMember);","isFullCredit":false},{"lineNumber":253,"author":{"gitId":"-"},"content":"        Assert(removeResult, \"Remove member failed.\");","isFullCredit":false},{"lineNumber":254,"author":{"gitId":"-"},"content":"        organization.OrganizationMemberList.OrganizationMembers.Add(input.NewMember);","isFullCredit":false},{"lineNumber":255,"author":{"gitId":"-"},"content":"        Assert(Validate(organization), \"Invalid organization.\");","isFullCredit":false},{"lineNumber":256,"author":{"gitId":"-"},"content":"        State.Organizations[Context.Sender] \u003d organization;","isFullCredit":false},{"lineNumber":257,"author":{"gitId":"-"},"content":"        Context.Fire(new MemberChanged","isFullCredit":false},{"lineNumber":258,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":259,"author":{"gitId":"-"},"content":"            OrganizationAddress \u003d Context.Sender,","isFullCredit":false},{"lineNumber":260,"author":{"gitId":"-"},"content":"            OldMember \u003d input.OldMember,","isFullCredit":false},{"lineNumber":261,"author":{"gitId":"-"},"content":"            NewMember \u003d input.NewMember","isFullCredit":false},{"lineNumber":262,"author":{"gitId":"-"},"content":"        });","isFullCredit":false},{"lineNumber":263,"author":{"gitId":"-"},"content":"        return new Empty();","isFullCredit":false},{"lineNumber":264,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":265,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":266,"author":{"gitId":"-"},"content":"    public override Empty RemoveMember(Address input)","isFullCredit":false},{"lineNumber":267,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":268,"author":{"gitId":"-"},"content":"        var organization \u003d State.Organizations[Context.Sender];","isFullCredit":false},{"lineNumber":269,"author":{"gitId":"-"},"content":"        Assert(organization !\u003d null, \"Organization not found.\");","isFullCredit":false},{"lineNumber":270,"author":{"gitId":"-"},"content":"        var removeResult \u003d organization.OrganizationMemberList.OrganizationMembers.Remove(input);","isFullCredit":false},{"lineNumber":271,"author":{"gitId":"-"},"content":"        Assert(removeResult, \"Remove member failed.\");","isFullCredit":false},{"lineNumber":272,"author":{"gitId":"-"},"content":"        Assert(Validate(organization), \"Invalid organization.\");","isFullCredit":false},{"lineNumber":273,"author":{"gitId":"-"},"content":"        State.Organizations[Context.Sender] \u003d organization;","isFullCredit":false},{"lineNumber":274,"author":{"gitId":"-"},"content":"        Context.Fire(new MemberRemoved","isFullCredit":false},{"lineNumber":275,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":276,"author":{"gitId":"-"},"content":"            OrganizationAddress \u003d Context.Sender,","isFullCredit":false},{"lineNumber":277,"author":{"gitId":"-"},"content":"            Member \u003d input","isFullCredit":false},{"lineNumber":278,"author":{"gitId":"-"},"content":"        });","isFullCredit":false},{"lineNumber":279,"author":{"gitId":"-"},"content":"        return new Empty();","isFullCredit":false},{"lineNumber":280,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":281,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":282,"author":{"gitId":"-"},"content":"    public override Empty ClearProposal(Hash input)","isFullCredit":false},{"lineNumber":283,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":284,"author":{"gitId":"-"},"content":"        // anyone can clear proposal if it is expired","isFullCredit":false},{"lineNumber":285,"author":{"gitId":"-"},"content":"        var proposal \u003d State.Proposals[input];","isFullCredit":false},{"lineNumber":286,"author":{"gitId":"-"},"content":"        Assert(proposal !\u003d null \u0026\u0026 Context.CurrentBlockTime \u003e\u003d proposal.ExpiredTime, \"Proposal clear failed\");","isFullCredit":false},{"lineNumber":287,"author":{"gitId":"-"},"content":"        State.Proposals.Remove(input);","isFullCredit":false},{"lineNumber":288,"author":{"gitId":"-"},"content":"        return new Empty();","isFullCredit":false},{"lineNumber":289,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":290,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":291,"author":{"gitId":"-"},"content":"    #endregion","isFullCredit":false},{"lineNumber":292,"author":{"gitId":"-"},"content":"}","isFullCredit":false}],"authorContributionMap":{"eanzhao":3,"-":289}},{"path":"contract/AElf.Contracts.Association/AssociationConstants.cs","fileType":"cs","lines":[{"lineNumber":1,"author":{"gitId":"eanzhao"},"content":"namespace AElf.Contracts.Association;","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"eanzhao"},"content":"","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"eanzhao"},"content":"public static class AssociationConstants","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"eanzhao"},"content":"{","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"eanzhao"},"content":"    public const int MaxLengthForTitle \u003d 255;","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"eanzhao"},"content":"    public const int MaxLengthForDescription \u003d 10200;","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"eanzhao"},"content":"    public const int MaxLengthForProposalDescriptionUrl \u003d 255;","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"eanzhao"},"content":"}","isFullCredit":false}],"authorContributionMap":{"eanzhao":8}},{"path":"contract/AElf.Contracts.Association/Association_Helper.cs","fileType":"cs","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"using System;","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"-"},"content":"using System.Linq;","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"-"},"content":"using AElf.Sdk.CSharp;","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"-"},"content":"using AElf.Standards.ACS3;","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"-"},"content":"using AElf.Types;","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"-"},"content":"namespace AElf.Contracts.Association;","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"-"},"content":"public partial class AssociationContract","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"-"},"content":"{","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"-"},"content":"    private void AssertIsAuthorizedProposer(Address organizationAddress, Address proposer)","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"-"},"content":"        var organization \u003d State.Organizations[organizationAddress];","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"-"},"content":"        Assert(organization !\u003d null, \"No registered organization.\");","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"-"},"content":"        Assert(organization.ProposerWhiteList.Contains(proposer), \"Unauthorized to propose.\");","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"-"},"content":"    private void AssertIsAuthorizedOrganizationMember(Organization organization, Address member)","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"-"},"content":"        Assert(organization.OrganizationMemberList.Contains(member),","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"-"},"content":"            \"Unauthorized member.\");","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"-"},"content":"    private bool IsReleaseThresholdReached(ProposalInfo proposal, Organization organization)","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"-"},"content":"        var isRejected \u003d IsProposalRejected(proposal, organization);","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"-"},"content":"        if (isRejected)","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"-"},"content":"            return false;","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"-"},"content":"        var isAbstained \u003d IsProposalAbstained(proposal, organization);","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"-"},"content":"        return !isAbstained \u0026\u0026 CheckEnoughVoteAndApprovals(proposal, organization);","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"-"},"content":"    private bool IsProposalRejected(ProposalInfo proposal, Organization organization)","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"-"},"content":"        var rejectionMemberCount \u003d","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"-"},"content":"            proposal.Rejections.Count(organization.OrganizationMemberList.Contains);","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"-"},"content":"        return rejectionMemberCount \u003e organization.ProposalReleaseThreshold.MaximalRejectionThreshold;","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"-"},"content":"    private bool IsProposalAbstained(ProposalInfo proposal, Organization organization)","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"-"},"content":"        var abstentionMemberCount \u003d proposal.Abstentions.Count(organization.OrganizationMemberList.Contains);","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"-"},"content":"        return abstentionMemberCount \u003e organization.ProposalReleaseThreshold.MaximalAbstentionThreshold;","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"-"},"content":"    private bool CheckEnoughVoteAndApprovals(ProposalInfo proposal, Organization organization)","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":49,"author":{"gitId":"-"},"content":"        var approvedMemberCount \u003d proposal.Approvals.Count(organization.OrganizationMemberList.Contains);","isFullCredit":false},{"lineNumber":50,"author":{"gitId":"-"},"content":"        var isApprovalEnough \u003d","isFullCredit":false},{"lineNumber":51,"author":{"gitId":"-"},"content":"            approvedMemberCount \u003e\u003d organization.ProposalReleaseThreshold.MinimalApprovalThreshold;","isFullCredit":false},{"lineNumber":52,"author":{"gitId":"-"},"content":"        if (!isApprovalEnough)","isFullCredit":false},{"lineNumber":53,"author":{"gitId":"-"},"content":"            return false;","isFullCredit":false},{"lineNumber":54,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":55,"author":{"gitId":"-"},"content":"        var isVoteThresholdReached \u003d","isFullCredit":false},{"lineNumber":56,"author":{"gitId":"-"},"content":"            proposal.Abstentions.Concat(proposal.Approvals).Concat(proposal.Rejections).Count() \u003e\u003d","isFullCredit":false},{"lineNumber":57,"author":{"gitId":"-"},"content":"            organization.ProposalReleaseThreshold.MinimalVoteThreshold;","isFullCredit":false},{"lineNumber":58,"author":{"gitId":"-"},"content":"        return isVoteThresholdReached;","isFullCredit":false},{"lineNumber":59,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":60,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":61,"author":{"gitId":"-"},"content":"    private bool Validate(Organization organization)","isFullCredit":false},{"lineNumber":62,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":63,"author":{"gitId":"-"},"content":"        if (organization.ProposerWhiteList.Empty() ||","isFullCredit":false},{"lineNumber":64,"author":{"gitId":"-"},"content":"            organization.ProposerWhiteList.AnyDuplicate() ||","isFullCredit":false},{"lineNumber":65,"author":{"gitId":"-"},"content":"            organization.OrganizationMemberList.Empty() ||","isFullCredit":false},{"lineNumber":66,"author":{"gitId":"-"},"content":"            organization.OrganizationMemberList.AnyDuplicate())","isFullCredit":false},{"lineNumber":67,"author":{"gitId":"-"},"content":"            return false;","isFullCredit":false},{"lineNumber":68,"author":{"gitId":"-"},"content":"        if (organization.OrganizationAddress \u003d\u003d null || organization.OrganizationHash \u003d\u003d null)","isFullCredit":false},{"lineNumber":69,"author":{"gitId":"-"},"content":"            return false;","isFullCredit":false},{"lineNumber":70,"author":{"gitId":"-"},"content":"        var proposalReleaseThreshold \u003d organization.ProposalReleaseThreshold;","isFullCredit":false},{"lineNumber":71,"author":{"gitId":"-"},"content":"        var organizationMemberCount \u003d organization.OrganizationMemberList.Count();","isFullCredit":false},{"lineNumber":72,"author":{"gitId":"-"},"content":"        return proposalReleaseThreshold.MinimalVoteThreshold \u003c\u003d organizationMemberCount \u0026\u0026","isFullCredit":false},{"lineNumber":73,"author":{"gitId":"-"},"content":"               proposalReleaseThreshold.MinimalApprovalThreshold \u003c\u003d proposalReleaseThreshold.MinimalVoteThreshold \u0026\u0026","isFullCredit":false},{"lineNumber":74,"author":{"gitId":"-"},"content":"               proposalReleaseThreshold.MinimalApprovalThreshold \u003e 0 \u0026\u0026","isFullCredit":false},{"lineNumber":75,"author":{"gitId":"-"},"content":"               proposalReleaseThreshold.MaximalAbstentionThreshold \u003e\u003d 0 \u0026\u0026","isFullCredit":false},{"lineNumber":76,"author":{"gitId":"-"},"content":"               proposalReleaseThreshold.MaximalRejectionThreshold \u003e\u003d 0 \u0026\u0026","isFullCredit":false},{"lineNumber":77,"author":{"gitId":"-"},"content":"               proposalReleaseThreshold.MaximalAbstentionThreshold +","isFullCredit":false},{"lineNumber":78,"author":{"gitId":"-"},"content":"               proposalReleaseThreshold.MinimalApprovalThreshold \u003c\u003d organizationMemberCount \u0026\u0026","isFullCredit":false},{"lineNumber":79,"author":{"gitId":"-"},"content":"               proposalReleaseThreshold.MaximalRejectionThreshold +","isFullCredit":false},{"lineNumber":80,"author":{"gitId":"-"},"content":"               proposalReleaseThreshold.MinimalApprovalThreshold \u003c\u003d organizationMemberCount;","isFullCredit":false},{"lineNumber":81,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":82,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":83,"author":{"gitId":"-"},"content":"    private bool Validate(ProposalInfo proposal)","isFullCredit":false},{"lineNumber":84,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":85,"author":{"gitId":"-"},"content":"        if (proposal.ToAddress \u003d\u003d null || string.IsNullOrWhiteSpace(proposal.ContractMethodName) ||","isFullCredit":false},{"lineNumber":86,"author":{"gitId":"-"},"content":"            !ValidateDescriptionUrlScheme(proposal.ProposalDescriptionUrl))","isFullCredit":false},{"lineNumber":87,"author":{"gitId":"-"},"content":"            return false;","isFullCredit":false},{"lineNumber":88,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":89,"author":{"gitId":"-"},"content":"        return proposal.ExpiredTime !\u003d null \u0026\u0026 Context.CurrentBlockTime \u003c proposal.ExpiredTime;","isFullCredit":false},{"lineNumber":90,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":91,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":92,"author":{"gitId":"-"},"content":"    private bool ValidateDescriptionUrlScheme(string uriString)","isFullCredit":false},{"lineNumber":93,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":94,"author":{"gitId":"-"},"content":"        if (string.IsNullOrEmpty(uriString))","isFullCredit":false},{"lineNumber":95,"author":{"gitId":"-"},"content":"            return true;","isFullCredit":false},{"lineNumber":96,"author":{"gitId":"-"},"content":"        var result \u003d Uri.TryCreate(uriString, UriKind.Absolute, out var uriResult)","isFullCredit":false},{"lineNumber":97,"author":{"gitId":"-"},"content":"                     \u0026\u0026 (uriResult.Scheme \u003d\u003d Uri.UriSchemeHttp || uriResult.Scheme \u003d\u003d Uri.UriSchemeHttps);","isFullCredit":false},{"lineNumber":98,"author":{"gitId":"-"},"content":"        return result;","isFullCredit":false},{"lineNumber":99,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":100,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":101,"author":{"gitId":"-"},"content":"    private ProposalInfo GetValidProposal(Hash proposalId)","isFullCredit":false},{"lineNumber":102,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":103,"author":{"gitId":"-"},"content":"        var proposal \u003d State.Proposals[proposalId];","isFullCredit":false},{"lineNumber":104,"author":{"gitId":"-"},"content":"        Assert(proposal !\u003d null, \"Invalid proposal id.\");","isFullCredit":false},{"lineNumber":105,"author":{"gitId":"-"},"content":"        Assert(Validate(proposal), \"Invalid proposal.\");","isFullCredit":false},{"lineNumber":106,"author":{"gitId":"-"},"content":"        return proposal;","isFullCredit":false},{"lineNumber":107,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":108,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":109,"author":{"gitId":"-"},"content":"    private OrganizationHashAddressPair CalculateOrganizationHashAddressPair(","isFullCredit":false},{"lineNumber":110,"author":{"gitId":"-"},"content":"        CreateOrganizationInput createOrganizationInput)","isFullCredit":false},{"lineNumber":111,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":112,"author":{"gitId":"-"},"content":"        var organizationHash \u003d HashHelper.ComputeFrom(createOrganizationInput);","isFullCredit":false},{"lineNumber":113,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":114,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d","isFullCredit":false},{"lineNumber":115,"author":{"gitId":"-"},"content":"            Context.ConvertVirtualAddressToContractAddressWithContractHashName(","isFullCredit":false},{"lineNumber":116,"author":{"gitId":"-"},"content":"                CalculateVirtualHash(organizationHash, createOrganizationInput.CreationToken));","isFullCredit":false},{"lineNumber":117,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":118,"author":{"gitId":"-"},"content":"        return new OrganizationHashAddressPair","isFullCredit":false},{"lineNumber":119,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":120,"author":{"gitId":"-"},"content":"            OrganizationAddress \u003d organizationAddress,","isFullCredit":false},{"lineNumber":121,"author":{"gitId":"-"},"content":"            OrganizationHash \u003d organizationHash","isFullCredit":false},{"lineNumber":122,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":123,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":124,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":125,"author":{"gitId":"-"},"content":"    private Hash CalculateVirtualHash(Hash organizationHash, Hash creationToken)","isFullCredit":false},{"lineNumber":126,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":127,"author":{"gitId":"-"},"content":"        return creationToken \u003d\u003d null","isFullCredit":false},{"lineNumber":128,"author":{"gitId":"-"},"content":"            ? organizationHash","isFullCredit":false},{"lineNumber":129,"author":{"gitId":"-"},"content":"            : HashHelper.ConcatAndCompute(organizationHash, creationToken);","isFullCredit":false},{"lineNumber":130,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":131,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":132,"author":{"gitId":"-"},"content":"    private void AssertProposalNotYetVotedBySender(ProposalInfo proposal, Address sender)","isFullCredit":false},{"lineNumber":133,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":134,"author":{"gitId":"-"},"content":"        var isAlreadyVoted \u003d proposal.Approvals.Contains(sender) || proposal.Rejections.Contains(sender) ||","isFullCredit":false},{"lineNumber":135,"author":{"gitId":"-"},"content":"                             proposal.Abstentions.Contains(sender);","isFullCredit":false},{"lineNumber":136,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":137,"author":{"gitId":"-"},"content":"        Assert(!isAlreadyVoted, \"Sender already voted.\");","isFullCredit":false},{"lineNumber":138,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":139,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":140,"author":{"gitId":"-"},"content":"    private Hash GenerateProposalId(CreateProposalInput input)","isFullCredit":false},{"lineNumber":141,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":142,"author":{"gitId":"-"},"content":"        return Context.GenerateId(Context.Self, input.Token ?? HashHelper.ComputeFrom(input));","isFullCredit":false},{"lineNumber":143,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":144,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":145,"author":{"gitId":"-"},"content":"    private Hash CreateNewProposal(CreateProposalInput input)","isFullCredit":false},{"lineNumber":146,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":147,"author":{"gitId":"eanzhao"},"content":"        CheckCreateProposalInput(input);","isFullCredit":false},{"lineNumber":148,"author":{"gitId":"-"},"content":"        var proposalId \u003d GenerateProposalId(input);","isFullCredit":false},{"lineNumber":149,"author":{"gitId":"-"},"content":"        var proposal \u003d new ProposalInfo","isFullCredit":false},{"lineNumber":150,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":151,"author":{"gitId":"-"},"content":"            ContractMethodName \u003d input.ContractMethodName,","isFullCredit":false},{"lineNumber":152,"author":{"gitId":"-"},"content":"            ExpiredTime \u003d input.ExpiredTime,","isFullCredit":false},{"lineNumber":153,"author":{"gitId":"-"},"content":"            Params \u003d input.Params,","isFullCredit":false},{"lineNumber":154,"author":{"gitId":"-"},"content":"            ToAddress \u003d input.ToAddress,","isFullCredit":false},{"lineNumber":155,"author":{"gitId":"-"},"content":"            OrganizationAddress \u003d input.OrganizationAddress,","isFullCredit":false},{"lineNumber":156,"author":{"gitId":"-"},"content":"            ProposalId \u003d proposalId,","isFullCredit":false},{"lineNumber":157,"author":{"gitId":"-"},"content":"            Proposer \u003d Context.Sender,","isFullCredit":false},{"lineNumber":158,"author":{"gitId":"eanzhao"},"content":"            ProposalDescriptionUrl \u003d input.ProposalDescriptionUrl,","isFullCredit":false},{"lineNumber":159,"author":{"gitId":"eanzhao"},"content":"            Title \u003d input.Title,","isFullCredit":false},{"lineNumber":160,"author":{"gitId":"eanzhao"},"content":"            Description \u003d input.Description","isFullCredit":false},{"lineNumber":161,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":162,"author":{"gitId":"-"},"content":"        Assert(Validate(proposal), \"Invalid proposal.\");","isFullCredit":false},{"lineNumber":163,"author":{"gitId":"-"},"content":"        Assert(State.Proposals[proposalId] \u003d\u003d null, \"Proposal already exists.\");","isFullCredit":false},{"lineNumber":164,"author":{"gitId":"-"},"content":"        State.Proposals[proposalId] \u003d proposal;","isFullCredit":false},{"lineNumber":165,"author":{"gitId":"-"},"content":"        Context.Fire(new ProposalCreated","isFullCredit":false},{"lineNumber":166,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":167,"author":{"gitId":"-"},"content":"            ProposalId \u003d proposalId,","isFullCredit":false},{"lineNumber":168,"author":{"gitId":"eanzhao"},"content":"            OrganizationAddress \u003d input.OrganizationAddress,","isFullCredit":false},{"lineNumber":169,"author":{"gitId":"eanzhao"},"content":"            Title \u003d input.Title,","isFullCredit":false},{"lineNumber":170,"author":{"gitId":"eanzhao"},"content":"            Description \u003d input.Description","isFullCredit":false},{"lineNumber":171,"author":{"gitId":"-"},"content":"        });","isFullCredit":false},{"lineNumber":172,"author":{"gitId":"-"},"content":"        return proposalId;","isFullCredit":false},{"lineNumber":173,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":174,"author":{"gitId":"eanzhao"},"content":"","isFullCredit":false},{"lineNumber":175,"author":{"gitId":"eanzhao"},"content":"    private void CheckCreateProposalInput(CreateProposalInput input)","isFullCredit":false},{"lineNumber":176,"author":{"gitId":"eanzhao"},"content":"    {","isFullCredit":false},{"lineNumber":177,"author":{"gitId":"eanzhao"},"content":"        // Check the length of title","isFullCredit":false},{"lineNumber":178,"author":{"gitId":"eanzhao"},"content":"        Assert(input.Title.Length \u003c\u003d AssociationConstants.MaxLengthForTitle, \"Title is too long.\");","isFullCredit":false},{"lineNumber":179,"author":{"gitId":"eanzhao"},"content":"        // Check the length of description","isFullCredit":false},{"lineNumber":180,"author":{"gitId":"eanzhao"},"content":"        Assert(input.Description.Length \u003c\u003d AssociationConstants.MaxLengthForDescription, \"Description is too long.\");","isFullCredit":false},{"lineNumber":181,"author":{"gitId":"eanzhao"},"content":"        // Check the length of description url","isFullCredit":false},{"lineNumber":182,"author":{"gitId":"eanzhao"},"content":"        Assert(input.ProposalDescriptionUrl.Length \u003c\u003d AssociationConstants.MaxLengthForProposalDescriptionUrl,","isFullCredit":false},{"lineNumber":183,"author":{"gitId":"eanzhao"},"content":"            \"Description url is too long.\");","isFullCredit":false},{"lineNumber":184,"author":{"gitId":"eanzhao"},"content":"    }","isFullCredit":false},{"lineNumber":185,"author":{"gitId":"-"},"content":"}","isFullCredit":false}],"authorContributionMap":{"eanzhao":18,"-":167}},{"path":"contract/AElf.Contracts.Parliament/Parliament.cs","fileType":"cs","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"using System.Linq;","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"-"},"content":"using AElf.Sdk.CSharp;","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"-"},"content":"using AElf.Standards.ACS3;","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"-"},"content":"using AElf.Types;","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"-"},"content":"using Google.Protobuf.WellKnownTypes;","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"-"},"content":"namespace AElf.Contracts.Parliament;","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"-"},"content":"public partial class ParliamentContract : ParliamentContractImplContainer.ParliamentContractImplBase","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"-"},"content":"{","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"-"},"content":"    public override Empty Initialize(InitializeInput input)","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"-"},"content":"        Assert(!State.Initialized.Value, \"Already initialized.\");","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"-"},"content":"        State.Initialized.Value \u003d true;","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"-"},"content":"        var proposerWhiteList \u003d new ProposerWhiteList();","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"-"},"content":"        if (input.PrivilegedProposer !\u003d null)","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"-"},"content":"            proposerWhiteList.Proposers.Add(input.PrivilegedProposer);","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"-"},"content":"        State.ProposerWhiteList.Value \u003d proposerWhiteList;","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"-"},"content":"        var organizationInput \u003d new CreateOrganizationInput","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"-"},"content":"            ProposalReleaseThreshold \u003d new ProposalReleaseThreshold","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"-"},"content":"                MinimalApprovalThreshold \u003d DefaultOrganizationMinimalApprovalThreshold,","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"-"},"content":"                MinimalVoteThreshold \u003d DefaultOrganizationMinimalVoteThresholdThreshold,","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"-"},"content":"                MaximalAbstentionThreshold \u003d DefaultOrganizationMaximalAbstentionThreshold,","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"-"},"content":"                MaximalRejectionThreshold \u003d DefaultOrganizationMaximalRejectionThreshold","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"-"},"content":"            },","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"-"},"content":"            ProposerAuthorityRequired \u003d input.ProposerAuthorityRequired,","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"-"},"content":"            ParliamentMemberProposingAllowed \u003d true","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"-"},"content":"        var defaultOrganizationAddress \u003d CreateNewOrganization(organizationInput);","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"-"},"content":"        State.DefaultOrganizationAddress.Value \u003d defaultOrganizationAddress;","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"-"},"content":"        return new Empty();","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"-"},"content":"    public override Address CreateOrganizationBySystemContract(CreateOrganizationBySystemContractInput input)","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"-"},"content":"        Assert(Context.GetSystemContractNameToAddressMapping().Values.Contains(Context.Sender),","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"-"},"content":"            \"Unauthorized to create organization.\");","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d CreateNewOrganization(input.OrganizationCreationInput);","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"-"},"content":"        if (!string.IsNullOrEmpty(input.OrganizationAddressFeedbackMethod))","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"-"},"content":"            Context.SendInline(Context.Sender, input.OrganizationAddressFeedbackMethod, organizationAddress);","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"-"},"content":"        return organizationAddress;","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":49,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":50,"author":{"gitId":"-"},"content":"    public override Address CreateOrganization(CreateOrganizationInput input)","isFullCredit":false},{"lineNumber":51,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":52,"author":{"gitId":"-"},"content":"        Assert(","isFullCredit":false},{"lineNumber":53,"author":{"gitId":"-"},"content":"            ValidateAddressInWhiteList(Context.Sender) || ValidateParliamentMemberAuthority(Context.Sender) ||","isFullCredit":false},{"lineNumber":54,"author":{"gitId":"-"},"content":"            State.DefaultOrganizationAddress.Value \u003d\u003d Context.Sender,","isFullCredit":false},{"lineNumber":55,"author":{"gitId":"-"},"content":"            \"Unauthorized to create organization.\");","isFullCredit":false},{"lineNumber":56,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d CreateNewOrganization(input);","isFullCredit":false},{"lineNumber":57,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":58,"author":{"gitId":"-"},"content":"        return organizationAddress;","isFullCredit":false},{"lineNumber":59,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":60,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":61,"author":{"gitId":"-"},"content":"    public override Hash CreateProposal(CreateProposalInput input)","isFullCredit":false},{"lineNumber":62,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":63,"author":{"gitId":"-"},"content":"        AssertIsAuthorizedProposer(input.OrganizationAddress, Context.Sender);","isFullCredit":false},{"lineNumber":64,"author":{"gitId":"-"},"content":"        var proposalId \u003d CreateNewProposal(input);","isFullCredit":false},{"lineNumber":65,"author":{"gitId":"-"},"content":"        return proposalId;","isFullCredit":false},{"lineNumber":66,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":67,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":68,"author":{"gitId":"-"},"content":"    public override Hash CreateProposalBySystemContract(CreateProposalBySystemContractInput input)","isFullCredit":false},{"lineNumber":69,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":70,"author":{"gitId":"-"},"content":"        Assert(Context.GetSystemContractNameToAddressMapping().Values.Contains(Context.Sender),","isFullCredit":false},{"lineNumber":71,"author":{"gitId":"-"},"content":"            \"Unauthorized to propose.\");","isFullCredit":false},{"lineNumber":72,"author":{"gitId":"-"},"content":"        AssertIsAuthorizedProposer(input.ProposalInput.OrganizationAddress, input.OriginProposer);","isFullCredit":false},{"lineNumber":73,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":74,"author":{"gitId":"-"},"content":"        var proposalId \u003d CreateNewProposal(input.ProposalInput);","isFullCredit":false},{"lineNumber":75,"author":{"gitId":"-"},"content":"        return proposalId;","isFullCredit":false},{"lineNumber":76,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":77,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":78,"author":{"gitId":"-"},"content":"    public override Empty Approve(Hash input)","isFullCredit":false},{"lineNumber":79,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":80,"author":{"gitId":"-"},"content":"        var parliamentMemberAddress \u003d GetAndCheckActualParliamentMemberAddress();","isFullCredit":false},{"lineNumber":81,"author":{"gitId":"-"},"content":"        var proposal \u003d GetValidProposal(input);","isFullCredit":false},{"lineNumber":82,"author":{"gitId":"-"},"content":"        AssertProposalNotYetVotedByMember(proposal, parliamentMemberAddress);","isFullCredit":false},{"lineNumber":83,"author":{"gitId":"-"},"content":"        proposal.Approvals.Add(parliamentMemberAddress);","isFullCredit":false},{"lineNumber":84,"author":{"gitId":"-"},"content":"        State.Proposals[input] \u003d proposal;","isFullCredit":false},{"lineNumber":85,"author":{"gitId":"-"},"content":"        Context.Fire(new ReceiptCreated","isFullCredit":false},{"lineNumber":86,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":87,"author":{"gitId":"-"},"content":"            Address \u003d parliamentMemberAddress,","isFullCredit":false},{"lineNumber":88,"author":{"gitId":"-"},"content":"            ProposalId \u003d input,","isFullCredit":false},{"lineNumber":89,"author":{"gitId":"-"},"content":"            Time \u003d Context.CurrentBlockTime,","isFullCredit":false},{"lineNumber":90,"author":{"gitId":"-"},"content":"            ReceiptType \u003d nameof(Approve),","isFullCredit":false},{"lineNumber":91,"author":{"gitId":"-"},"content":"            OrganizationAddress \u003d proposal.OrganizationAddress","isFullCredit":false},{"lineNumber":92,"author":{"gitId":"-"},"content":"        });","isFullCredit":false},{"lineNumber":93,"author":{"gitId":"-"},"content":"        return new Empty();","isFullCredit":false},{"lineNumber":94,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":95,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":96,"author":{"gitId":"-"},"content":"    public override Empty Reject(Hash input)","isFullCredit":false},{"lineNumber":97,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":98,"author":{"gitId":"-"},"content":"        var parliamentMemberAddress \u003d GetAndCheckActualParliamentMemberAddress();","isFullCredit":false},{"lineNumber":99,"author":{"gitId":"-"},"content":"        var proposal \u003d GetValidProposal(input);","isFullCredit":false},{"lineNumber":100,"author":{"gitId":"-"},"content":"        AssertProposalNotYetVotedByMember(proposal, parliamentMemberAddress);","isFullCredit":false},{"lineNumber":101,"author":{"gitId":"-"},"content":"        proposal.Rejections.Add(parliamentMemberAddress);","isFullCredit":false},{"lineNumber":102,"author":{"gitId":"-"},"content":"        State.Proposals[input] \u003d proposal;","isFullCredit":false},{"lineNumber":103,"author":{"gitId":"-"},"content":"        Context.Fire(new ReceiptCreated","isFullCredit":false},{"lineNumber":104,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":105,"author":{"gitId":"-"},"content":"            Address \u003d parliamentMemberAddress,","isFullCredit":false},{"lineNumber":106,"author":{"gitId":"-"},"content":"            ProposalId \u003d input,","isFullCredit":false},{"lineNumber":107,"author":{"gitId":"-"},"content":"            Time \u003d Context.CurrentBlockTime,","isFullCredit":false},{"lineNumber":108,"author":{"gitId":"-"},"content":"            ReceiptType \u003d nameof(Reject),","isFullCredit":false},{"lineNumber":109,"author":{"gitId":"-"},"content":"            OrganizationAddress \u003d proposal.OrganizationAddress","isFullCredit":false},{"lineNumber":110,"author":{"gitId":"-"},"content":"        });","isFullCredit":false},{"lineNumber":111,"author":{"gitId":"-"},"content":"        return new Empty();","isFullCredit":false},{"lineNumber":112,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":113,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":114,"author":{"gitId":"-"},"content":"    public override Empty Abstain(Hash input)","isFullCredit":false},{"lineNumber":115,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":116,"author":{"gitId":"-"},"content":"        var parliamentMemberAddress \u003d GetAndCheckActualParliamentMemberAddress();","isFullCredit":false},{"lineNumber":117,"author":{"gitId":"-"},"content":"        var proposal \u003d GetValidProposal(input);","isFullCredit":false},{"lineNumber":118,"author":{"gitId":"-"},"content":"        AssertProposalNotYetVotedByMember(proposal, parliamentMemberAddress);","isFullCredit":false},{"lineNumber":119,"author":{"gitId":"-"},"content":"        proposal.Abstentions.Add(parliamentMemberAddress);","isFullCredit":false},{"lineNumber":120,"author":{"gitId":"-"},"content":"        State.Proposals[input] \u003d proposal;","isFullCredit":false},{"lineNumber":121,"author":{"gitId":"-"},"content":"        Context.Fire(new ReceiptCreated","isFullCredit":false},{"lineNumber":122,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":123,"author":{"gitId":"-"},"content":"            Address \u003d parliamentMemberAddress,","isFullCredit":false},{"lineNumber":124,"author":{"gitId":"-"},"content":"            ProposalId \u003d input,","isFullCredit":false},{"lineNumber":125,"author":{"gitId":"-"},"content":"            Time \u003d Context.CurrentBlockTime,","isFullCredit":false},{"lineNumber":126,"author":{"gitId":"-"},"content":"            ReceiptType \u003d nameof(Abstain),","isFullCredit":false},{"lineNumber":127,"author":{"gitId":"-"},"content":"            OrganizationAddress \u003d proposal.OrganizationAddress","isFullCredit":false},{"lineNumber":128,"author":{"gitId":"-"},"content":"        });","isFullCredit":false},{"lineNumber":129,"author":{"gitId":"-"},"content":"        return new Empty();","isFullCredit":false},{"lineNumber":130,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":131,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":132,"author":{"gitId":"-"},"content":"    public override Empty Release(Hash proposalId)","isFullCredit":false},{"lineNumber":133,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":134,"author":{"gitId":"-"},"content":"        var proposalInfo \u003d GetValidProposal(proposalId);","isFullCredit":false},{"lineNumber":135,"author":{"gitId":"-"},"content":"        Assert(Context.Sender.Equals(proposalInfo.Proposer), \"No permission.\");","isFullCredit":false},{"lineNumber":136,"author":{"gitId":"-"},"content":"        var organization \u003d State.Organizations[proposalInfo.OrganizationAddress];","isFullCredit":false},{"lineNumber":137,"author":{"gitId":"-"},"content":"        Assert(IsReleaseThresholdReached(proposalInfo, organization), \"Not approved.\");","isFullCredit":false},{"lineNumber":138,"author":{"gitId":"-"},"content":"        Context.SendVirtualInlineBySystemContract(","isFullCredit":false},{"lineNumber":139,"author":{"gitId":"-"},"content":"            CalculateVirtualHash(organization.OrganizationHash, organization.CreationToken), proposalInfo.ToAddress,","isFullCredit":false},{"lineNumber":140,"author":{"gitId":"-"},"content":"            proposalInfo.ContractMethodName, proposalInfo.Params);","isFullCredit":false},{"lineNumber":141,"author":{"gitId":"-"},"content":"        Context.Fire(new ProposalReleased { ProposalId \u003d proposalId });","isFullCredit":false},{"lineNumber":142,"author":{"gitId":"-"},"content":"        State.Proposals.Remove(proposalId);","isFullCredit":false},{"lineNumber":143,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":144,"author":{"gitId":"-"},"content":"        return new Empty();","isFullCredit":false},{"lineNumber":145,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":146,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":147,"author":{"gitId":"-"},"content":"    public override Empty ChangeOrganizationThreshold(ProposalReleaseThreshold input)","isFullCredit":false},{"lineNumber":148,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":149,"author":{"gitId":"-"},"content":"        var organization \u003d State.Organizations[Context.Sender];","isFullCredit":false},{"lineNumber":150,"author":{"gitId":"-"},"content":"        Assert(organization !\u003d null, \"Organization not found.\");","isFullCredit":false},{"lineNumber":151,"author":{"gitId":"-"},"content":"        organization.ProposalReleaseThreshold \u003d input;","isFullCredit":false},{"lineNumber":152,"author":{"gitId":"-"},"content":"        Assert(Validate(organization), \"Invalid organization.\");","isFullCredit":false},{"lineNumber":153,"author":{"gitId":"-"},"content":"        State.Organizations[Context.Sender] \u003d organization;","isFullCredit":false},{"lineNumber":154,"author":{"gitId":"-"},"content":"        Context.Fire(new OrganizationThresholdChanged","isFullCredit":false},{"lineNumber":155,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":156,"author":{"gitId":"-"},"content":"            OrganizationAddress \u003d Context.Sender,","isFullCredit":false},{"lineNumber":157,"author":{"gitId":"-"},"content":"            ProposerReleaseThreshold \u003d input","isFullCredit":false},{"lineNumber":158,"author":{"gitId":"-"},"content":"        });","isFullCredit":false},{"lineNumber":159,"author":{"gitId":"-"},"content":"        return new Empty();","isFullCredit":false},{"lineNumber":160,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":161,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":162,"author":{"gitId":"-"},"content":"    public override Empty ChangeOrganizationProposerWhiteList(ProposerWhiteList input)","isFullCredit":false},{"lineNumber":163,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":164,"author":{"gitId":"-"},"content":"        var defaultOrganizationAddress \u003d State.DefaultOrganizationAddress.Value;","isFullCredit":false},{"lineNumber":165,"author":{"gitId":"-"},"content":"        Assert(defaultOrganizationAddress \u003d\u003d Context.Sender, \"No permission.\");","isFullCredit":false},{"lineNumber":166,"author":{"gitId":"-"},"content":"        var organization \u003d State.Organizations[defaultOrganizationAddress];","isFullCredit":false},{"lineNumber":167,"author":{"gitId":"-"},"content":"        Assert(","isFullCredit":false},{"lineNumber":168,"author":{"gitId":"-"},"content":"            input.Proposers.Count \u003e 0 || !organization.ProposerAuthorityRequired ||","isFullCredit":false},{"lineNumber":169,"author":{"gitId":"-"},"content":"            organization.ParliamentMemberProposingAllowed, \"White list can\u0027t be empty.\");","isFullCredit":false},{"lineNumber":170,"author":{"gitId":"-"},"content":"        State.ProposerWhiteList.Value \u003d input;","isFullCredit":false},{"lineNumber":171,"author":{"gitId":"-"},"content":"        Context.Fire(new OrganizationWhiteListChanged","isFullCredit":false},{"lineNumber":172,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":173,"author":{"gitId":"-"},"content":"            OrganizationAddress \u003d Context.Sender,","isFullCredit":false},{"lineNumber":174,"author":{"gitId":"-"},"content":"            ProposerWhiteList \u003d input","isFullCredit":false},{"lineNumber":175,"author":{"gitId":"-"},"content":"        });","isFullCredit":false},{"lineNumber":176,"author":{"gitId":"-"},"content":"        return new Empty();","isFullCredit":false},{"lineNumber":177,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":178,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":179,"author":{"gitId":"-"},"content":"    public override Empty ClearProposal(Hash input)","isFullCredit":false},{"lineNumber":180,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":181,"author":{"gitId":"-"},"content":"        // anyone can clear proposal if it is expired","isFullCredit":false},{"lineNumber":182,"author":{"gitId":"-"},"content":"        var proposal \u003d State.Proposals[input];","isFullCredit":false},{"lineNumber":183,"author":{"gitId":"-"},"content":"        Assert(proposal !\u003d null \u0026\u0026 Context.CurrentBlockTime \u003e\u003d proposal.ExpiredTime, \"Proposal clear failed\");","isFullCredit":false},{"lineNumber":184,"author":{"gitId":"-"},"content":"        State.Proposals.Remove(input);","isFullCredit":false},{"lineNumber":185,"author":{"gitId":"-"},"content":"        return new Empty();","isFullCredit":false},{"lineNumber":186,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":187,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":188,"author":{"gitId":"-"},"content":"    public override Empty ApproveMultiProposals(ProposalIdList input)","isFullCredit":false},{"lineNumber":189,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":190,"author":{"gitId":"-"},"content":"        AssertCurrentMiner();","isFullCredit":false},{"lineNumber":191,"author":{"gitId":"-"},"content":"        foreach (var proposalId in input.ProposalIds)","isFullCredit":false},{"lineNumber":192,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":193,"author":{"gitId":"-"},"content":"            var proposal \u003d State.Proposals[proposalId];","isFullCredit":false},{"lineNumber":194,"author":{"gitId":"-"},"content":"            if (proposal \u003d\u003d null || !CheckProposalNotExpired(proposal))","isFullCredit":false},{"lineNumber":195,"author":{"gitId":"-"},"content":"                continue;","isFullCredit":false},{"lineNumber":196,"author":{"gitId":"-"},"content":"            Approve(proposalId);","isFullCredit":false},{"lineNumber":197,"author":{"gitId":"-"},"content":"            Context.LogDebug(() \u003d\u003e $\"Proposal {proposalId} approved by {Context.Sender}\");","isFullCredit":false},{"lineNumber":198,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":199,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":200,"author":{"gitId":"-"},"content":"        return new Empty();","isFullCredit":false},{"lineNumber":201,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":202,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":203,"author":{"gitId":"-"},"content":"    public override Empty CreateEmergencyResponseOrganization(Empty input)","isFullCredit":false},{"lineNumber":204,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":205,"author":{"gitId":"-"},"content":"        Assert(State.EmergencyResponseOrganizationAddress.Value \u003d\u003d null,","isFullCredit":false},{"lineNumber":206,"author":{"gitId":"-"},"content":"            \"Emergency Response Organization already exists.\");","isFullCredit":false},{"lineNumber":207,"author":{"gitId":"-"},"content":"        AssertSenderAddressWith(State.DefaultOrganizationAddress.Value);","isFullCredit":false},{"lineNumber":208,"author":{"gitId":"-"},"content":"        CreateEmergencyResponseOrganization();","isFullCredit":false},{"lineNumber":209,"author":{"gitId":"-"},"content":"        return new Empty();","isFullCredit":false},{"lineNumber":210,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":211,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":212,"author":{"gitId":"-"},"content":"    public override Address GetEmergencyResponseOrganizationAddress(Empty input)","isFullCredit":false},{"lineNumber":213,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":214,"author":{"gitId":"-"},"content":"        return State.EmergencyResponseOrganizationAddress.Value;","isFullCredit":false},{"lineNumber":215,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":216,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":217,"author":{"gitId":"-"},"content":"    #region View","isFullCredit":false},{"lineNumber":218,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":219,"author":{"gitId":"-"},"content":"    public override Organization GetOrganization(Address address)","isFullCredit":false},{"lineNumber":220,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":221,"author":{"gitId":"-"},"content":"        var organization \u003d State.Organizations[address];","isFullCredit":false},{"lineNumber":222,"author":{"gitId":"-"},"content":"        return organization ?? new Organization();","isFullCredit":false},{"lineNumber":223,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":224,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":225,"author":{"gitId":"-"},"content":"    public override ProposalOutput GetProposal(Hash proposalId)","isFullCredit":false},{"lineNumber":226,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":227,"author":{"gitId":"-"},"content":"        var proposal \u003d State.Proposals[proposalId];","isFullCredit":false},{"lineNumber":228,"author":{"gitId":"-"},"content":"        if (proposal \u003d\u003d null) return new ProposalOutput();","isFullCredit":false},{"lineNumber":229,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":230,"author":{"gitId":"-"},"content":"        var organization \u003d State.Organizations[proposal.OrganizationAddress];","isFullCredit":false},{"lineNumber":231,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":232,"author":{"gitId":"-"},"content":"        return new ProposalOutput","isFullCredit":false},{"lineNumber":233,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":234,"author":{"gitId":"-"},"content":"            ProposalId \u003d proposalId,","isFullCredit":false},{"lineNumber":235,"author":{"gitId":"-"},"content":"            ContractMethodName \u003d proposal.ContractMethodName,","isFullCredit":false},{"lineNumber":236,"author":{"gitId":"-"},"content":"            ExpiredTime \u003d proposal.ExpiredTime,","isFullCredit":false},{"lineNumber":237,"author":{"gitId":"-"},"content":"            OrganizationAddress \u003d proposal.OrganizationAddress,","isFullCredit":false},{"lineNumber":238,"author":{"gitId":"-"},"content":"            Params \u003d proposal.Params,","isFullCredit":false},{"lineNumber":239,"author":{"gitId":"-"},"content":"            Proposer \u003d proposal.Proposer,","isFullCredit":false},{"lineNumber":240,"author":{"gitId":"-"},"content":"            ToAddress \u003d proposal.ToAddress,","isFullCredit":false},{"lineNumber":241,"author":{"gitId":"-"},"content":"            ToBeReleased \u003d Validate(proposal) \u0026\u0026 IsReleaseThresholdReached(proposal, organization),","isFullCredit":false},{"lineNumber":242,"author":{"gitId":"-"},"content":"            ApprovalCount \u003d proposal.Approvals.Count,","isFullCredit":false},{"lineNumber":243,"author":{"gitId":"-"},"content":"            RejectionCount \u003d proposal.Rejections.Count,","isFullCredit":false},{"lineNumber":244,"author":{"gitId":"eanzhao"},"content":"            AbstentionCount \u003d proposal.Abstentions.Count,","isFullCredit":false},{"lineNumber":245,"author":{"gitId":"eanzhao"},"content":"            Title \u003d proposal.Title,","isFullCredit":false},{"lineNumber":246,"author":{"gitId":"eanzhao"},"content":"            Description \u003d proposal.Description","isFullCredit":false},{"lineNumber":247,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":248,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":249,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":250,"author":{"gitId":"-"},"content":"    public override Address GetDefaultOrganizationAddress(Empty input)","isFullCredit":false},{"lineNumber":251,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":252,"author":{"gitId":"-"},"content":"        Assert(State.Initialized.Value, \"Not initialized.\");","isFullCredit":false},{"lineNumber":253,"author":{"gitId":"-"},"content":"        return State.DefaultOrganizationAddress.Value;","isFullCredit":false},{"lineNumber":254,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":255,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":256,"author":{"gitId":"-"},"content":"    public override Address CalculateOrganizationAddress(CreateOrganizationInput input)","isFullCredit":false},{"lineNumber":257,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":258,"author":{"gitId":"-"},"content":"        var organizationHashAddressPair \u003d CalculateOrganizationHashAddressPair(input);","isFullCredit":false},{"lineNumber":259,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d organizationHashAddressPair.OrganizationAddress;","isFullCredit":false},{"lineNumber":260,"author":{"gitId":"-"},"content":"        return organizationAddress;","isFullCredit":false},{"lineNumber":261,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":262,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":263,"author":{"gitId":"-"},"content":"    public override BoolValue ValidateAddressIsParliamentMember(Address address)","isFullCredit":false},{"lineNumber":264,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":265,"author":{"gitId":"-"},"content":"        return new BoolValue { Value \u003d ValidateParliamentMemberAuthority(address) };","isFullCredit":false},{"lineNumber":266,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":267,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":268,"author":{"gitId":"-"},"content":"    public override BoolValue ValidateProposerInWhiteList(ValidateProposerInWhiteListInput input)","isFullCredit":false},{"lineNumber":269,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":270,"author":{"gitId":"-"},"content":"        return new BoolValue { Value \u003d ValidateAddressInWhiteList(input.Proposer) };","isFullCredit":false},{"lineNumber":271,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":272,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":273,"author":{"gitId":"-"},"content":"    public override ProposerWhiteList GetProposerWhiteList(Empty input)","isFullCredit":false},{"lineNumber":274,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":275,"author":{"gitId":"-"},"content":"        var res \u003d new ProposerWhiteList();","isFullCredit":false},{"lineNumber":276,"author":{"gitId":"-"},"content":"        var whitelist \u003d State.ProposerWhiteList.Value;","isFullCredit":false},{"lineNumber":277,"author":{"gitId":"-"},"content":"        res.Proposers.AddRange(whitelist.Proposers);","isFullCredit":false},{"lineNumber":278,"author":{"gitId":"-"},"content":"        return res;","isFullCredit":false},{"lineNumber":279,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":280,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":281,"author":{"gitId":"-"},"content":"    public override BoolValue ValidateOrganizationExist(Address input)","isFullCredit":false},{"lineNumber":282,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":283,"author":{"gitId":"-"},"content":"        return new BoolValue { Value \u003d State.Organizations[input] !\u003d null };","isFullCredit":false},{"lineNumber":284,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":285,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":286,"author":{"gitId":"-"},"content":"    public override ProposalIdList GetNotVotedProposals(ProposalIdList input)","isFullCredit":false},{"lineNumber":287,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":288,"author":{"gitId":"-"},"content":"        var result \u003d new ProposalIdList();","isFullCredit":false},{"lineNumber":289,"author":{"gitId":"-"},"content":"        foreach (var proposalId in input.ProposalIds)","isFullCredit":false},{"lineNumber":290,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":291,"author":{"gitId":"-"},"content":"            var proposal \u003d State.Proposals[proposalId];","isFullCredit":false},{"lineNumber":292,"author":{"gitId":"-"},"content":"            if (proposal \u003d\u003d null || !Validate(proposal) || CheckProposalAlreadyVotedBy(proposal, Context.Sender))","isFullCredit":false},{"lineNumber":293,"author":{"gitId":"-"},"content":"                continue;","isFullCredit":false},{"lineNumber":294,"author":{"gitId":"-"},"content":"            result.ProposalIds.Add(proposalId);","isFullCredit":false},{"lineNumber":295,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":296,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":297,"author":{"gitId":"-"},"content":"        return result;","isFullCredit":false},{"lineNumber":298,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":299,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":300,"author":{"gitId":"-"},"content":"    public override ProposalIdList GetNotVotedPendingProposals(ProposalIdList input)","isFullCredit":false},{"lineNumber":301,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":302,"author":{"gitId":"-"},"content":"        var result \u003d new ProposalIdList();","isFullCredit":false},{"lineNumber":303,"author":{"gitId":"-"},"content":"        var currentParliament \u003d GetCurrentMinerList();","isFullCredit":false},{"lineNumber":304,"author":{"gitId":"-"},"content":"        foreach (var proposalId in input.ProposalIds)","isFullCredit":false},{"lineNumber":305,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":306,"author":{"gitId":"-"},"content":"            var proposal \u003d State.Proposals[proposalId];","isFullCredit":false},{"lineNumber":307,"author":{"gitId":"-"},"content":"            if (proposal \u003d\u003d null || !Validate(proposal) || CheckProposalAlreadyVotedBy(proposal, Context.Sender))","isFullCredit":false},{"lineNumber":308,"author":{"gitId":"-"},"content":"                continue;","isFullCredit":false},{"lineNumber":309,"author":{"gitId":"-"},"content":"            var organization \u003d State.Organizations[proposal.OrganizationAddress];","isFullCredit":false},{"lineNumber":310,"author":{"gitId":"-"},"content":"            if (organization \u003d\u003d null || !IsProposalStillPending(proposal, organization, currentParliament))","isFullCredit":false},{"lineNumber":311,"author":{"gitId":"-"},"content":"                continue;","isFullCredit":false},{"lineNumber":312,"author":{"gitId":"-"},"content":"            result.ProposalIds.Add(proposalId);","isFullCredit":false},{"lineNumber":313,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":314,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":315,"author":{"gitId":"-"},"content":"        return result;","isFullCredit":false},{"lineNumber":316,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":317,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":318,"author":{"gitId":"-"},"content":"    public override ProposalIdList GetReleaseThresholdReachedProposals(ProposalIdList input)","isFullCredit":false},{"lineNumber":319,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":320,"author":{"gitId":"-"},"content":"        var result \u003d new ProposalIdList();","isFullCredit":false},{"lineNumber":321,"author":{"gitId":"-"},"content":"        foreach (var proposalId in input.ProposalIds)","isFullCredit":false},{"lineNumber":322,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":323,"author":{"gitId":"-"},"content":"            var proposal \u003d State.Proposals[proposalId];","isFullCredit":false},{"lineNumber":324,"author":{"gitId":"-"},"content":"            if (proposal \u003d\u003d null || !Validate(proposal))","isFullCredit":false},{"lineNumber":325,"author":{"gitId":"-"},"content":"                continue;","isFullCredit":false},{"lineNumber":326,"author":{"gitId":"-"},"content":"            var organization \u003d State.Organizations[proposal.OrganizationAddress];","isFullCredit":false},{"lineNumber":327,"author":{"gitId":"-"},"content":"            if (organization \u003d\u003d null || !IsReleaseThresholdReached(proposal, organization))","isFullCredit":false},{"lineNumber":328,"author":{"gitId":"-"},"content":"                continue;","isFullCredit":false},{"lineNumber":329,"author":{"gitId":"-"},"content":"            result.ProposalIds.Add(proposalId);","isFullCredit":false},{"lineNumber":330,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":331,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":332,"author":{"gitId":"-"},"content":"        return result;","isFullCredit":false},{"lineNumber":333,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":334,"author":{"gitId":"-"},"content":"    ","isFullCredit":false},{"lineNumber":335,"author":{"gitId":"-"},"content":"    public override ProposalIdList GetAvailableProposals(ProposalIdList input)","isFullCredit":false},{"lineNumber":336,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":337,"author":{"gitId":"-"},"content":"        var result \u003d new ProposalIdList();","isFullCredit":false},{"lineNumber":338,"author":{"gitId":"-"},"content":"        foreach (var proposalId in input.ProposalIds)","isFullCredit":false},{"lineNumber":339,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":340,"author":{"gitId":"-"},"content":"            var proposal \u003d State.Proposals[proposalId];","isFullCredit":false},{"lineNumber":341,"author":{"gitId":"-"},"content":"            if (proposal \u003d\u003d null || !Validate(proposal))","isFullCredit":false},{"lineNumber":342,"author":{"gitId":"-"},"content":"                continue;","isFullCredit":false},{"lineNumber":343,"author":{"gitId":"-"},"content":"            result.ProposalIds.Add(proposalId);","isFullCredit":false},{"lineNumber":344,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":345,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":346,"author":{"gitId":"-"},"content":"        return result;","isFullCredit":false},{"lineNumber":347,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":348,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":349,"author":{"gitId":"-"},"content":"    #endregion view","isFullCredit":false},{"lineNumber":350,"author":{"gitId":"-"},"content":"}","isFullCredit":false}],"authorContributionMap":{"eanzhao":3,"-":347}},{"path":"contract/AElf.Contracts.Parliament/ParliamentConstants.cs","fileType":"cs","lines":[{"lineNumber":1,"author":{"gitId":"eanzhao"},"content":"namespace AElf.Contracts.Parliament;","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"eanzhao"},"content":"","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"eanzhao"},"content":"public static class ParliamentConstants","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"eanzhao"},"content":"{","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"eanzhao"},"content":"    public const int MaxLengthForTitle \u003d 255;","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"eanzhao"},"content":"    public const int MaxLengthForDescription \u003d 10200;","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"eanzhao"},"content":"    public const int MaxLengthForProposalDescriptionUrl \u003d 255;","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"eanzhao"},"content":"}","isFullCredit":false}],"authorContributionMap":{"eanzhao":8}},{"path":"contract/AElf.Contracts.Parliament/Parliament_Helper.cs","fileType":"cs","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"using System;","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"-"},"content":"using System.Collections.Generic;","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"-"},"content":"using System.Linq;","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"-"},"content":"using AElf.Sdk.CSharp;","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"-"},"content":"using AElf.Standards.ACS3;","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"-"},"content":"using AElf.Types;","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"-"},"content":"using Google.Protobuf.WellKnownTypes;","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"-"},"content":"namespace AElf.Contracts.Parliament;","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"-"},"content":"public partial class ParliamentContract","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"-"},"content":"{","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"-"},"content":"    private List\u003cAddress\u003e GetCurrentMinerList()","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"-"},"content":"        RequireConsensusContractStateSet();","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"-"},"content":"        var miner \u003d State.ConsensusContract.GetCurrentMinerList.Call(new Empty());","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"-"},"content":"        var members \u003d miner.Pubkeys.Select(publicKey \u003d\u003e","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"-"},"content":"            Address.FromPublicKey(publicKey.ToByteArray())).ToList();","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"-"},"content":"        return members;","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"-"},"content":"    private void AssertIsAuthorizedProposer(Address organizationAddress, Address proposer)","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"-"},"content":"        var organization \u003d State.Organizations[organizationAddress];","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"-"},"content":"        Assert(organization !\u003d null, \"No registered organization.\");","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"-"},"content":"        // It is a valid proposer if","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"-"},"content":"        // authority check is disable,","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"-"},"content":"        // or sender is in proposer white list,","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"-"},"content":"        // or sender is one of miners when member proposing allowed.","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"-"},"content":"        Assert(","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"-"},"content":"            !organization.ProposerAuthorityRequired || ValidateAddressInWhiteList(proposer) ||","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"-"},"content":"            (organization.ParliamentMemberProposingAllowed \u0026\u0026 ValidateParliamentMemberAuthority(proposer)),","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"-"},"content":"            \"Unauthorized to propose.\");","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"-"},"content":"    private bool IsReleaseThresholdReached(ProposalInfo proposal, Organization organization)","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"-"},"content":"        var parliamentMembers \u003d GetCurrentMinerList();","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"-"},"content":"        var isRejected \u003d IsProposalRejected(proposal, organization, parliamentMembers);","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"-"},"content":"        if (isRejected)","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"-"},"content":"            return false;","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"-"},"content":"        var isAbstained \u003d IsProposalAbstained(proposal, organization, parliamentMembers);","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"-"},"content":"        if (isAbstained)","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"-"},"content":"            return false;","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"-"},"content":"        return CheckEnoughVoteAndApprovals(proposal, organization, parliamentMembers);","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":49,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":50,"author":{"gitId":"-"},"content":"    private bool IsProposalStillPending(ProposalInfo proposal, Organization organization,","isFullCredit":false},{"lineNumber":51,"author":{"gitId":"-"},"content":"        ICollection\u003cAddress\u003e parliamentMembers)","isFullCredit":false},{"lineNumber":52,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":53,"author":{"gitId":"-"},"content":"        var isRejected \u003d IsProposalRejected(proposal, organization, parliamentMembers);","isFullCredit":false},{"lineNumber":54,"author":{"gitId":"-"},"content":"        if (isRejected)","isFullCredit":false},{"lineNumber":55,"author":{"gitId":"-"},"content":"            return false;","isFullCredit":false},{"lineNumber":56,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":57,"author":{"gitId":"-"},"content":"        var isAbstained \u003d IsProposalAbstained(proposal, organization, parliamentMembers);","isFullCredit":false},{"lineNumber":58,"author":{"gitId":"-"},"content":"        if (isAbstained)","isFullCredit":false},{"lineNumber":59,"author":{"gitId":"-"},"content":"            return false;","isFullCredit":false},{"lineNumber":60,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":61,"author":{"gitId":"-"},"content":"        return !CheckEnoughVoteAndApprovals(proposal, organization, parliamentMembers);","isFullCredit":false},{"lineNumber":62,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":63,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":64,"author":{"gitId":"-"},"content":"    private bool IsProposalRejected(ProposalInfo proposal, Organization organization,","isFullCredit":false},{"lineNumber":65,"author":{"gitId":"-"},"content":"        ICollection\u003cAddress\u003e parliamentMembers)","isFullCredit":false},{"lineNumber":66,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":67,"author":{"gitId":"-"},"content":"        var rejectionMemberCount \u003d proposal.Rejections.Count(parliamentMembers.Contains);","isFullCredit":false},{"lineNumber":68,"author":{"gitId":"-"},"content":"        return rejectionMemberCount * AbstractVoteTotal \u003e","isFullCredit":false},{"lineNumber":69,"author":{"gitId":"-"},"content":"               organization.ProposalReleaseThreshold.MaximalRejectionThreshold * parliamentMembers.Count;","isFullCredit":false},{"lineNumber":70,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":71,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":72,"author":{"gitId":"-"},"content":"    private bool IsProposalAbstained(ProposalInfo proposal, Organization organization,","isFullCredit":false},{"lineNumber":73,"author":{"gitId":"-"},"content":"        ICollection\u003cAddress\u003e parliamentMembers)","isFullCredit":false},{"lineNumber":74,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":75,"author":{"gitId":"-"},"content":"        var abstentionMemberCount \u003d proposal.Abstentions.Count(parliamentMembers.Contains);","isFullCredit":false},{"lineNumber":76,"author":{"gitId":"-"},"content":"        return abstentionMemberCount * AbstractVoteTotal \u003e","isFullCredit":false},{"lineNumber":77,"author":{"gitId":"-"},"content":"               organization.ProposalReleaseThreshold.MaximalAbstentionThreshold * parliamentMembers.Count;","isFullCredit":false},{"lineNumber":78,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":79,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":80,"author":{"gitId":"-"},"content":"    private bool CheckEnoughVoteAndApprovals(ProposalInfo proposal, Organization organization,","isFullCredit":false},{"lineNumber":81,"author":{"gitId":"-"},"content":"        ICollection\u003cAddress\u003e parliamentMembers)","isFullCredit":false},{"lineNumber":82,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":83,"author":{"gitId":"-"},"content":"        var approvedMemberCount \u003d proposal.Approvals.Count(parliamentMembers.Contains);","isFullCredit":false},{"lineNumber":84,"author":{"gitId":"-"},"content":"        var isApprovalEnough \u003d approvedMemberCount * AbstractVoteTotal \u003e\u003d","isFullCredit":false},{"lineNumber":85,"author":{"gitId":"-"},"content":"                               organization.ProposalReleaseThreshold.MinimalApprovalThreshold *","isFullCredit":false},{"lineNumber":86,"author":{"gitId":"-"},"content":"                               parliamentMembers.Count;","isFullCredit":false},{"lineNumber":87,"author":{"gitId":"-"},"content":"        if (!isApprovalEnough)","isFullCredit":false},{"lineNumber":88,"author":{"gitId":"-"},"content":"            return false;","isFullCredit":false},{"lineNumber":89,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":90,"author":{"gitId":"-"},"content":"        var isVoteThresholdReached \u003d IsVoteThresholdReached(proposal, organization, parliamentMembers);","isFullCredit":false},{"lineNumber":91,"author":{"gitId":"-"},"content":"        return isVoteThresholdReached;","isFullCredit":false},{"lineNumber":92,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":93,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":94,"author":{"gitId":"-"},"content":"    private bool IsVoteThresholdReached(ProposalInfo proposal, Organization organization,","isFullCredit":false},{"lineNumber":95,"author":{"gitId":"-"},"content":"        ICollection\u003cAddress\u003e parliamentMembers)","isFullCredit":false},{"lineNumber":96,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":97,"author":{"gitId":"-"},"content":"        var isVoteThresholdReached \u003d","isFullCredit":false},{"lineNumber":98,"author":{"gitId":"-"},"content":"            proposal.Abstentions.Concat(proposal.Approvals).Concat(proposal.Rejections)","isFullCredit":false},{"lineNumber":99,"author":{"gitId":"-"},"content":"                .Count(parliamentMembers.Contains) * AbstractVoteTotal \u003e\u003d","isFullCredit":false},{"lineNumber":100,"author":{"gitId":"-"},"content":"            organization.ProposalReleaseThreshold.MinimalVoteThreshold * parliamentMembers.Count;","isFullCredit":false},{"lineNumber":101,"author":{"gitId":"-"},"content":"        return isVoteThresholdReached;","isFullCredit":false},{"lineNumber":102,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":103,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":104,"author":{"gitId":"-"},"content":"    private void RequireConsensusContractStateSet()","isFullCredit":false},{"lineNumber":105,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":106,"author":{"gitId":"-"},"content":"        if (State.ConsensusContract.Value !\u003d null)","isFullCredit":false},{"lineNumber":107,"author":{"gitId":"-"},"content":"            return;","isFullCredit":false},{"lineNumber":108,"author":{"gitId":"-"},"content":"        State.ConsensusContract.Value \u003d","isFullCredit":false},{"lineNumber":109,"author":{"gitId":"-"},"content":"            Context.GetContractAddressByName(SmartContractConstants.ConsensusContractSystemName);","isFullCredit":false},{"lineNumber":110,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":111,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":112,"author":{"gitId":"-"},"content":"    private Address GetAndCheckActualParliamentMemberAddress()","isFullCredit":false},{"lineNumber":113,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":114,"author":{"gitId":"-"},"content":"        var currentParliament \u003d GetCurrentMinerList();","isFullCredit":false},{"lineNumber":115,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":116,"author":{"gitId":"-"},"content":"        if (currentParliament.Any(r \u003d\u003e r.Equals(Context.Sender))) return Context.Sender;","isFullCredit":false},{"lineNumber":117,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":118,"author":{"gitId":"-"},"content":"        if (State.ElectionContract.Value \u003d\u003d null)","isFullCredit":false},{"lineNumber":119,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":120,"author":{"gitId":"-"},"content":"            var electionContractAddress \u003d","isFullCredit":false},{"lineNumber":121,"author":{"gitId":"-"},"content":"                Context.GetContractAddressByName(SmartContractConstants.ElectionContractSystemName);","isFullCredit":false},{"lineNumber":122,"author":{"gitId":"-"},"content":"            if (electionContractAddress \u003d\u003d null)","isFullCredit":false},{"lineNumber":123,"author":{"gitId":"-"},"content":"                // Election Contract not deployed - only possible in test environment.","isFullCredit":false},{"lineNumber":124,"author":{"gitId":"-"},"content":"                throw new AssertionException(\"Unauthorized sender.\");","isFullCredit":false},{"lineNumber":125,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":126,"author":{"gitId":"-"},"content":"            State.ElectionContract.Value \u003d electionContractAddress;","isFullCredit":false},{"lineNumber":127,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":128,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":129,"author":{"gitId":"-"},"content":"        var managedPubkey \u003d State.ElectionContract.GetManagedPubkeys.Call(Context.Sender);","isFullCredit":false},{"lineNumber":130,"author":{"gitId":"-"},"content":"        if (!managedPubkey.Value.Any()) throw new AssertionException(\"Unauthorized sender.\");","isFullCredit":false},{"lineNumber":131,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":132,"author":{"gitId":"-"},"content":"        if (managedPubkey.Value.Count \u003e 1)","isFullCredit":false},{"lineNumber":133,"author":{"gitId":"-"},"content":"            throw new AssertionException(\"Admin with multiple managed pubkeys cannot handle proposal.\");","isFullCredit":false},{"lineNumber":134,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":135,"author":{"gitId":"-"},"content":"        var actualMemberAddress \u003d Address.FromPublicKey(managedPubkey.Value.Single().ToByteArray());","isFullCredit":false},{"lineNumber":136,"author":{"gitId":"-"},"content":"        if (!currentParliament.Any(r \u003d\u003e r.Equals(actualMemberAddress)))","isFullCredit":false},{"lineNumber":137,"author":{"gitId":"-"},"content":"            throw new AssertionException(\"Unauthorized sender.\");","isFullCredit":false},{"lineNumber":138,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":139,"author":{"gitId":"-"},"content":"        return actualMemberAddress;","isFullCredit":false},{"lineNumber":140,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":141,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":142,"author":{"gitId":"-"},"content":"    private bool Validate(Organization organization)","isFullCredit":false},{"lineNumber":143,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":144,"author":{"gitId":"-"},"content":"        var proposalReleaseThreshold \u003d organization.ProposalReleaseThreshold;","isFullCredit":false},{"lineNumber":145,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":146,"author":{"gitId":"-"},"content":"        return proposalReleaseThreshold.MinimalVoteThreshold \u003c\u003d AbstractVoteTotal \u0026\u0026","isFullCredit":false},{"lineNumber":147,"author":{"gitId":"-"},"content":"               proposalReleaseThreshold.MinimalApprovalThreshold \u003c\u003d proposalReleaseThreshold.MinimalVoteThreshold \u0026\u0026","isFullCredit":false},{"lineNumber":148,"author":{"gitId":"-"},"content":"               proposalReleaseThreshold.MinimalApprovalThreshold \u003e 0 \u0026\u0026","isFullCredit":false},{"lineNumber":149,"author":{"gitId":"-"},"content":"               proposalReleaseThreshold.MaximalAbstentionThreshold \u003e\u003d 0 \u0026\u0026","isFullCredit":false},{"lineNumber":150,"author":{"gitId":"-"},"content":"               proposalReleaseThreshold.MaximalRejectionThreshold \u003e\u003d 0 \u0026\u0026","isFullCredit":false},{"lineNumber":151,"author":{"gitId":"-"},"content":"               proposalReleaseThreshold.MaximalAbstentionThreshold +","isFullCredit":false},{"lineNumber":152,"author":{"gitId":"-"},"content":"               proposalReleaseThreshold.MinimalApprovalThreshold \u003c\u003d AbstractVoteTotal \u0026\u0026","isFullCredit":false},{"lineNumber":153,"author":{"gitId":"-"},"content":"               proposalReleaseThreshold.MaximalRejectionThreshold +","isFullCredit":false},{"lineNumber":154,"author":{"gitId":"-"},"content":"               proposalReleaseThreshold.MinimalApprovalThreshold \u003c\u003d AbstractVoteTotal;","isFullCredit":false},{"lineNumber":155,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":156,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":157,"author":{"gitId":"-"},"content":"    private bool Validate(ProposalInfo proposal)","isFullCredit":false},{"lineNumber":158,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":159,"author":{"gitId":"-"},"content":"        var validDestinationAddress \u003d proposal.ToAddress !\u003d null;","isFullCredit":false},{"lineNumber":160,"author":{"gitId":"-"},"content":"        var validDestinationMethodName \u003d !string.IsNullOrWhiteSpace(proposal.ContractMethodName);","isFullCredit":false},{"lineNumber":161,"author":{"gitId":"-"},"content":"        var validExpiredTime \u003d CheckProposalNotExpired(proposal);","isFullCredit":false},{"lineNumber":162,"author":{"gitId":"-"},"content":"        var hasOrganizationAddress \u003d proposal.OrganizationAddress !\u003d null;","isFullCredit":false},{"lineNumber":163,"author":{"gitId":"-"},"content":"        var validDescriptionUrl \u003d ValidateDescriptionUrlScheme(proposal.ProposalDescriptionUrl);","isFullCredit":false},{"lineNumber":164,"author":{"gitId":"-"},"content":"        return validDestinationAddress \u0026\u0026 validDestinationMethodName \u0026\u0026 validExpiredTime \u0026\u0026","isFullCredit":false},{"lineNumber":165,"author":{"gitId":"-"},"content":"               hasOrganizationAddress \u0026\u0026 validDescriptionUrl;","isFullCredit":false},{"lineNumber":166,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":167,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":168,"author":{"gitId":"-"},"content":"    private bool ValidateDescriptionUrlScheme(string uriString)","isFullCredit":false},{"lineNumber":169,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":170,"author":{"gitId":"-"},"content":"        if (string.IsNullOrEmpty(uriString))","isFullCredit":false},{"lineNumber":171,"author":{"gitId":"-"},"content":"            return true;","isFullCredit":false},{"lineNumber":172,"author":{"gitId":"-"},"content":"        var result \u003d Uri.TryCreate(uriString, UriKind.Absolute, out var uriResult)","isFullCredit":false},{"lineNumber":173,"author":{"gitId":"-"},"content":"                     \u0026\u0026 (uriResult.Scheme \u003d\u003d Uri.UriSchemeHttp || uriResult.Scheme \u003d\u003d Uri.UriSchemeHttps);","isFullCredit":false},{"lineNumber":174,"author":{"gitId":"-"},"content":"        return result;","isFullCredit":false},{"lineNumber":175,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":176,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":177,"author":{"gitId":"-"},"content":"    private bool CheckProposalNotExpired(ProposalInfo proposal)","isFullCredit":false},{"lineNumber":178,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":179,"author":{"gitId":"-"},"content":"        return proposal.ExpiredTime !\u003d null \u0026\u0026 Context.CurrentBlockTime \u003c proposal.ExpiredTime;","isFullCredit":false},{"lineNumber":180,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":181,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":182,"author":{"gitId":"-"},"content":"    private ProposalInfo GetValidProposal(Hash proposalId)","isFullCredit":false},{"lineNumber":183,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":184,"author":{"gitId":"-"},"content":"        var proposal \u003d State.Proposals[proposalId];","isFullCredit":false},{"lineNumber":185,"author":{"gitId":"-"},"content":"        Assert(proposal !\u003d null, \"Proposal not found.\");","isFullCredit":false},{"lineNumber":186,"author":{"gitId":"-"},"content":"        Assert(Validate(proposal), \"Invalid proposal.\");","isFullCredit":false},{"lineNumber":187,"author":{"gitId":"-"},"content":"        return proposal;","isFullCredit":false},{"lineNumber":188,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":189,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":190,"author":{"gitId":"-"},"content":"    private void AssertProposalNotYetVotedByMember(ProposalInfo proposal, Address parliamentMemberAddress)","isFullCredit":false},{"lineNumber":191,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":192,"author":{"gitId":"-"},"content":"        Assert(!CheckProposalAlreadyVotedBy(proposal, parliamentMemberAddress), \"Already approved.\");","isFullCredit":false},{"lineNumber":193,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":194,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":195,"author":{"gitId":"-"},"content":"    private bool CheckProposalAlreadyVotedBy(ProposalInfo proposal, Address address)","isFullCredit":false},{"lineNumber":196,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":197,"author":{"gitId":"-"},"content":"        return proposal.Approvals.Contains(address) || proposal.Rejections.Contains(address) ||","isFullCredit":false},{"lineNumber":198,"author":{"gitId":"-"},"content":"               proposal.Abstentions.Contains(address);","isFullCredit":false},{"lineNumber":199,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":200,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":201,"author":{"gitId":"-"},"content":"    private bool ValidateAddressInWhiteList(Address address)","isFullCredit":false},{"lineNumber":202,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":203,"author":{"gitId":"-"},"content":"        return State.ProposerWhiteList.Value.Proposers.Any(p \u003d\u003e p \u003d\u003d address);","isFullCredit":false},{"lineNumber":204,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":205,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":206,"author":{"gitId":"-"},"content":"    private bool ValidateParliamentMemberAuthority(Address address)","isFullCredit":false},{"lineNumber":207,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":208,"author":{"gitId":"-"},"content":"        var currentMinerList \u003d GetCurrentMinerList();","isFullCredit":false},{"lineNumber":209,"author":{"gitId":"-"},"content":"        return currentMinerList.Any(m \u003d\u003e m \u003d\u003d address);","isFullCredit":false},{"lineNumber":210,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":211,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":212,"author":{"gitId":"-"},"content":"    private void AssertCurrentMiner()","isFullCredit":false},{"lineNumber":213,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":214,"author":{"gitId":"-"},"content":"        RequireConsensusContractStateSet();","isFullCredit":false},{"lineNumber":215,"author":{"gitId":"-"},"content":"        var isCurrentMiner \u003d State.ConsensusContract.IsCurrentMiner.Call(Context.Sender).Value;","isFullCredit":false},{"lineNumber":216,"author":{"gitId":"-"},"content":"        Context.LogDebug(() \u003d\u003e $\"Sender is currentMiner : {isCurrentMiner}.\");","isFullCredit":false},{"lineNumber":217,"author":{"gitId":"-"},"content":"        Assert(isCurrentMiner, \"No permission.\");","isFullCredit":false},{"lineNumber":218,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":219,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":220,"author":{"gitId":"-"},"content":"    private Hash GenerateProposalId(CreateProposalInput input)","isFullCredit":false},{"lineNumber":221,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":222,"author":{"gitId":"-"},"content":"        return Context.GenerateId(Context.Self, input.Token ?? HashHelper.ComputeFrom(input));","isFullCredit":false},{"lineNumber":223,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":224,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":225,"author":{"gitId":"-"},"content":"    private Hash CreateNewProposal(CreateProposalInput input)","isFullCredit":false},{"lineNumber":226,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":227,"author":{"gitId":"eanzhao"},"content":"        CheckCreateProposalInput(input);","isFullCredit":false},{"lineNumber":228,"author":{"gitId":"-"},"content":"        var proposalId \u003d GenerateProposalId(input);","isFullCredit":false},{"lineNumber":229,"author":{"gitId":"-"},"content":"        var proposal \u003d new ProposalInfo","isFullCredit":false},{"lineNumber":230,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":231,"author":{"gitId":"-"},"content":"            ContractMethodName \u003d input.ContractMethodName,","isFullCredit":false},{"lineNumber":232,"author":{"gitId":"-"},"content":"            ExpiredTime \u003d input.ExpiredTime,","isFullCredit":false},{"lineNumber":233,"author":{"gitId":"-"},"content":"            Params \u003d input.Params,","isFullCredit":false},{"lineNumber":234,"author":{"gitId":"-"},"content":"            ToAddress \u003d input.ToAddress,","isFullCredit":false},{"lineNumber":235,"author":{"gitId":"-"},"content":"            OrganizationAddress \u003d input.OrganizationAddress,","isFullCredit":false},{"lineNumber":236,"author":{"gitId":"-"},"content":"            ProposalId \u003d proposalId,","isFullCredit":false},{"lineNumber":237,"author":{"gitId":"-"},"content":"            Proposer \u003d Context.Sender,","isFullCredit":false},{"lineNumber":238,"author":{"gitId":"eanzhao"},"content":"            ProposalDescriptionUrl \u003d input.ProposalDescriptionUrl,","isFullCredit":false},{"lineNumber":239,"author":{"gitId":"eanzhao"},"content":"            Title \u003d input.Title,","isFullCredit":false},{"lineNumber":240,"author":{"gitId":"eanzhao"},"content":"            Description \u003d input.Description","isFullCredit":false},{"lineNumber":241,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":242,"author":{"gitId":"-"},"content":"        Assert(Validate(proposal), \"Invalid proposal.\");","isFullCredit":false},{"lineNumber":243,"author":{"gitId":"-"},"content":"        Assert(State.Proposals[proposalId] \u003d\u003d null, \"Proposal already exists.\");","isFullCredit":false},{"lineNumber":244,"author":{"gitId":"-"},"content":"        State.Proposals[proposalId] \u003d proposal;","isFullCredit":false},{"lineNumber":245,"author":{"gitId":"-"},"content":"        Context.Fire(new ProposalCreated","isFullCredit":false},{"lineNumber":246,"author":{"gitId":"eanzhao"},"content":"        {","isFullCredit":false},{"lineNumber":247,"author":{"gitId":"eanzhao"},"content":"            ProposalId \u003d proposalId, ","isFullCredit":false},{"lineNumber":248,"author":{"gitId":"eanzhao"},"content":"            OrganizationAddress \u003d input.OrganizationAddress,","isFullCredit":false},{"lineNumber":249,"author":{"gitId":"eanzhao"},"content":"            Title \u003d input.Title,","isFullCredit":false},{"lineNumber":250,"author":{"gitId":"eanzhao"},"content":"            Description \u003d input.Description","isFullCredit":false},{"lineNumber":251,"author":{"gitId":"eanzhao"},"content":"        });","isFullCredit":false},{"lineNumber":252,"author":{"gitId":"-"},"content":"        return proposalId;","isFullCredit":false},{"lineNumber":253,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":254,"author":{"gitId":"-"},"content":"    ","isFullCredit":false},{"lineNumber":255,"author":{"gitId":"eanzhao"},"content":"    private void CheckCreateProposalInput(CreateProposalInput input)","isFullCredit":false},{"lineNumber":256,"author":{"gitId":"eanzhao"},"content":"    {","isFullCredit":false},{"lineNumber":257,"author":{"gitId":"eanzhao"},"content":"        // Check the length of title","isFullCredit":false},{"lineNumber":258,"author":{"gitId":"eanzhao"},"content":"        Assert(input.Title.Length \u003c\u003d ParliamentConstants.MaxLengthForTitle, \"Title is too long.\");","isFullCredit":false},{"lineNumber":259,"author":{"gitId":"eanzhao"},"content":"        // Check the length of description","isFullCredit":false},{"lineNumber":260,"author":{"gitId":"eanzhao"},"content":"        Assert(input.Description.Length \u003c\u003d ParliamentConstants.MaxLengthForDescription, \"Description is too long.\");","isFullCredit":false},{"lineNumber":261,"author":{"gitId":"eanzhao"},"content":"        // Check the length of description url","isFullCredit":false},{"lineNumber":262,"author":{"gitId":"eanzhao"},"content":"        Assert(input.ProposalDescriptionUrl.Length \u003c\u003d ParliamentConstants.MaxLengthForProposalDescriptionUrl,","isFullCredit":false},{"lineNumber":263,"author":{"gitId":"eanzhao"},"content":"            \"Description url is too long.\");","isFullCredit":false},{"lineNumber":264,"author":{"gitId":"eanzhao"},"content":"    }","isFullCredit":false},{"lineNumber":265,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":266,"author":{"gitId":"-"},"content":"    private Address CreateNewOrganization(CreateOrganizationInput input)","isFullCredit":false},{"lineNumber":267,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":268,"author":{"gitId":"-"},"content":"        var organizationHashAddressPair \u003d CalculateOrganizationHashAddressPair(input);","isFullCredit":false},{"lineNumber":269,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d organizationHashAddressPair.OrganizationAddress;","isFullCredit":false},{"lineNumber":270,"author":{"gitId":"-"},"content":"        var organizationHash \u003d organizationHashAddressPair.OrganizationHash;","isFullCredit":false},{"lineNumber":271,"author":{"gitId":"-"},"content":"        var organization \u003d new Organization","isFullCredit":false},{"lineNumber":272,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":273,"author":{"gitId":"-"},"content":"            ProposalReleaseThreshold \u003d input.ProposalReleaseThreshold,","isFullCredit":false},{"lineNumber":274,"author":{"gitId":"-"},"content":"            OrganizationAddress \u003d organizationAddress,","isFullCredit":false},{"lineNumber":275,"author":{"gitId":"-"},"content":"            OrganizationHash \u003d organizationHash,","isFullCredit":false},{"lineNumber":276,"author":{"gitId":"-"},"content":"            ProposerAuthorityRequired \u003d input.ProposerAuthorityRequired,","isFullCredit":false},{"lineNumber":277,"author":{"gitId":"-"},"content":"            ParliamentMemberProposingAllowed \u003d input.ParliamentMemberProposingAllowed,","isFullCredit":false},{"lineNumber":278,"author":{"gitId":"-"},"content":"            CreationToken \u003d input.CreationToken","isFullCredit":false},{"lineNumber":279,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":280,"author":{"gitId":"-"},"content":"        Assert(Validate(organization), \"Invalid organization.\");","isFullCredit":false},{"lineNumber":281,"author":{"gitId":"-"},"content":"        if (State.Organizations[organizationAddress] !\u003d null)","isFullCredit":false},{"lineNumber":282,"author":{"gitId":"-"},"content":"            return organizationAddress;","isFullCredit":false},{"lineNumber":283,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":284,"author":{"gitId":"-"},"content":"        State.Organizations[organizationAddress] \u003d organization;","isFullCredit":false},{"lineNumber":285,"author":{"gitId":"-"},"content":"        Context.Fire(new OrganizationCreated","isFullCredit":false},{"lineNumber":286,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":287,"author":{"gitId":"-"},"content":"            OrganizationAddress \u003d organizationAddress","isFullCredit":false},{"lineNumber":288,"author":{"gitId":"-"},"content":"        });","isFullCredit":false},{"lineNumber":289,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":290,"author":{"gitId":"-"},"content":"        return organizationAddress;","isFullCredit":false},{"lineNumber":291,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":292,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":293,"author":{"gitId":"-"},"content":"    private OrganizationHashAddressPair CalculateOrganizationHashAddressPair(","isFullCredit":false},{"lineNumber":294,"author":{"gitId":"-"},"content":"        CreateOrganizationInput createOrganizationInput)","isFullCredit":false},{"lineNumber":295,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":296,"author":{"gitId":"-"},"content":"        var organizationHash \u003d HashHelper.ComputeFrom(createOrganizationInput);","isFullCredit":false},{"lineNumber":297,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d","isFullCredit":false},{"lineNumber":298,"author":{"gitId":"-"},"content":"            Context.ConvertVirtualAddressToContractAddressWithContractHashName(","isFullCredit":false},{"lineNumber":299,"author":{"gitId":"-"},"content":"                CalculateVirtualHash(organizationHash, createOrganizationInput.CreationToken));","isFullCredit":false},{"lineNumber":300,"author":{"gitId":"-"},"content":"        return new OrganizationHashAddressPair","isFullCredit":false},{"lineNumber":301,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":302,"author":{"gitId":"-"},"content":"            OrganizationAddress \u003d organizationAddress,","isFullCredit":false},{"lineNumber":303,"author":{"gitId":"-"},"content":"            OrganizationHash \u003d organizationHash","isFullCredit":false},{"lineNumber":304,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":305,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":306,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":307,"author":{"gitId":"-"},"content":"    private Hash CalculateVirtualHash(Hash organizationHash, Hash creationToken)","isFullCredit":false},{"lineNumber":308,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":309,"author":{"gitId":"-"},"content":"        return creationToken \u003d\u003d null","isFullCredit":false},{"lineNumber":310,"author":{"gitId":"-"},"content":"            ? organizationHash","isFullCredit":false},{"lineNumber":311,"author":{"gitId":"-"},"content":"            : HashHelper.ConcatAndCompute(organizationHash, creationToken);","isFullCredit":false},{"lineNumber":312,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":313,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":314,"author":{"gitId":"-"},"content":"    private void CreateEmergencyResponseOrganization()","isFullCredit":false},{"lineNumber":315,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":316,"author":{"gitId":"-"},"content":"        var createOrganizationInput \u003d new CreateOrganizationInput","isFullCredit":false},{"lineNumber":317,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":318,"author":{"gitId":"-"},"content":"            ProposalReleaseThreshold \u003d new ProposalReleaseThreshold","isFullCredit":false},{"lineNumber":319,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":320,"author":{"gitId":"-"},"content":"                MinimalApprovalThreshold \u003d 9000,","isFullCredit":false},{"lineNumber":321,"author":{"gitId":"-"},"content":"                MinimalVoteThreshold \u003d 9000,","isFullCredit":false},{"lineNumber":322,"author":{"gitId":"-"},"content":"                MaximalAbstentionThreshold \u003d 1000,","isFullCredit":false},{"lineNumber":323,"author":{"gitId":"-"},"content":"                MaximalRejectionThreshold \u003d 1000","isFullCredit":false},{"lineNumber":324,"author":{"gitId":"-"},"content":"            },","isFullCredit":false},{"lineNumber":325,"author":{"gitId":"-"},"content":"            ProposerAuthorityRequired \u003d false,","isFullCredit":false},{"lineNumber":326,"author":{"gitId":"-"},"content":"            ParliamentMemberProposingAllowed \u003d true","isFullCredit":false},{"lineNumber":327,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":328,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":329,"author":{"gitId":"-"},"content":"        State.EmergencyResponseOrganizationAddress.Value \u003d CreateOrganization(createOrganizationInput);","isFullCredit":false},{"lineNumber":330,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":331,"author":{"gitId":"-"},"content":"}","isFullCredit":false}],"authorContributionMap":{"eanzhao":20,"-":311}},{"path":"contract/AElf.Contracts.Referendum/Referendum.cs","fileType":"cs","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"using System.Linq;","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"-"},"content":"using AElf.CSharp.Core;","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"-"},"content":"using AElf.Sdk.CSharp;","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"-"},"content":"using AElf.Standards.ACS3;","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"-"},"content":"using AElf.Types;","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"-"},"content":"using Google.Protobuf.WellKnownTypes;","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"-"},"content":"namespace AElf.Contracts.Referendum;","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"-"},"content":"public partial class ReferendumContract : ReferendumContractImplContainer.ReferendumContractImplBase","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"-"},"content":"{","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"-"},"content":"    public override Address CreateOrganization(CreateOrganizationInput input)","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"-"},"content":"        var organizationHashAddressPair \u003d CalculateOrganizationHashAddressPair(input);","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d organizationHashAddressPair.OrganizationAddress;","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"-"},"content":"        var organizationHash \u003d organizationHashAddressPair.OrganizationHash;","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"-"},"content":"        if (State.Organizations[organizationAddress] !\u003d null)","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"-"},"content":"            return organizationAddress;","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"-"},"content":"        var organization \u003d new Organization","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"-"},"content":"            ProposalReleaseThreshold \u003d input.ProposalReleaseThreshold,","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"-"},"content":"            OrganizationAddress \u003d organizationAddress,","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"-"},"content":"            TokenSymbol \u003d input.TokenSymbol,","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"-"},"content":"            OrganizationHash \u003d organizationHash,","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"-"},"content":"            ProposerWhiteList \u003d input.ProposerWhiteList,","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"-"},"content":"            CreationToken \u003d input.CreationToken","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"-"},"content":"        Assert(Validate(organization), \"Invalid organization data.\");","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"-"},"content":"        if (State.Organizations[organizationAddress] !\u003d null)","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"-"},"content":"            return organizationAddress;","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"-"},"content":"        State.Organizations[organizationAddress] \u003d organization;","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"-"},"content":"        Context.Fire(new OrganizationCreated","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"-"},"content":"            OrganizationAddress \u003d organizationAddress","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"-"},"content":"        });","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"-"},"content":"        return organizationAddress;","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"-"},"content":"    public override Address CreateOrganizationBySystemContract(CreateOrganizationBySystemContractInput input)","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"-"},"content":"        Assert(Context.GetSystemContractNameToAddressMapping().Values.Contains(Context.Sender),","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"-"},"content":"            \"Unauthorized to create organization.\");","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d CreateOrganization(input.OrganizationCreationInput);","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"-"},"content":"        if (!string.IsNullOrEmpty(input.OrganizationAddressFeedbackMethod))","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"-"},"content":"            Context.SendInline(Context.Sender, input.OrganizationAddressFeedbackMethod, organizationAddress);","isFullCredit":false},{"lineNumber":49,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":50,"author":{"gitId":"-"},"content":"        return organizationAddress;","isFullCredit":false},{"lineNumber":51,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":52,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":53,"author":{"gitId":"-"},"content":"    public override Hash CreateProposal(CreateProposalInput input)","isFullCredit":false},{"lineNumber":54,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":55,"author":{"gitId":"-"},"content":"        AssertIsAuthorizedProposer(input.OrganizationAddress, Context.Sender);","isFullCredit":false},{"lineNumber":56,"author":{"gitId":"-"},"content":"        var proposalId \u003d CreateNewProposal(input);","isFullCredit":false},{"lineNumber":57,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":58,"author":{"gitId":"-"},"content":"        return proposalId;","isFullCredit":false},{"lineNumber":59,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":60,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":61,"author":{"gitId":"-"},"content":"    public override Hash CreateProposalBySystemContract(CreateProposalBySystemContractInput input)","isFullCredit":false},{"lineNumber":62,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":63,"author":{"gitId":"-"},"content":"        Assert(Context.GetSystemContractNameToAddressMapping().Values.Contains(Context.Sender),","isFullCredit":false},{"lineNumber":64,"author":{"gitId":"-"},"content":"            \"Not authorized to propose.\");","isFullCredit":false},{"lineNumber":65,"author":{"gitId":"-"},"content":"        AssertIsAuthorizedProposer(input.ProposalInput.OrganizationAddress, input.OriginProposer);","isFullCredit":false},{"lineNumber":66,"author":{"gitId":"-"},"content":"        var proposalId \u003d CreateNewProposal(input.ProposalInput);","isFullCredit":false},{"lineNumber":67,"author":{"gitId":"-"},"content":"        return proposalId;","isFullCredit":false},{"lineNumber":68,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":69,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":70,"author":{"gitId":"-"},"content":"    public override Empty Approve(Hash input)","isFullCredit":false},{"lineNumber":71,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":72,"author":{"gitId":"-"},"content":"        var proposal \u003d GetValidProposal(input);","isFullCredit":false},{"lineNumber":73,"author":{"gitId":"-"},"content":"        var organization \u003d State.Organizations[proposal.OrganizationAddress];","isFullCredit":false},{"lineNumber":74,"author":{"gitId":"-"},"content":"        var allowance \u003d GetAllowance(Context.Sender, organization.TokenSymbol, input);","isFullCredit":false},{"lineNumber":75,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":76,"author":{"gitId":"-"},"content":"        proposal.ApprovalCount \u003d proposal.ApprovalCount.Add(allowance);","isFullCredit":false},{"lineNumber":77,"author":{"gitId":"-"},"content":"        State.Proposals[input] \u003d proposal;","isFullCredit":false},{"lineNumber":78,"author":{"gitId":"-"},"content":"        var referendumReceiptCreated \u003d LockToken(organization.TokenSymbol, allowance, input, Context.Sender,","isFullCredit":false},{"lineNumber":79,"author":{"gitId":"-"},"content":"            proposal.OrganizationAddress);","isFullCredit":false},{"lineNumber":80,"author":{"gitId":"-"},"content":"        referendumReceiptCreated.ReceiptType \u003d nameof(Approve);","isFullCredit":false},{"lineNumber":81,"author":{"gitId":"-"},"content":"        Context.Fire(referendumReceiptCreated);","isFullCredit":false},{"lineNumber":82,"author":{"gitId":"-"},"content":"        return new Empty();","isFullCredit":false},{"lineNumber":83,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":84,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":85,"author":{"gitId":"-"},"content":"    public override Empty Reject(Hash input)","isFullCredit":false},{"lineNumber":86,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":87,"author":{"gitId":"-"},"content":"        var proposal \u003d GetValidProposal(input);","isFullCredit":false},{"lineNumber":88,"author":{"gitId":"-"},"content":"        var organization \u003d State.Organizations[proposal.OrganizationAddress];","isFullCredit":false},{"lineNumber":89,"author":{"gitId":"-"},"content":"        var allowance \u003d GetAllowance(Context.Sender, organization.TokenSymbol, input);","isFullCredit":false},{"lineNumber":90,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":91,"author":{"gitId":"-"},"content":"        proposal.RejectionCount \u003d proposal.RejectionCount.Add(allowance);","isFullCredit":false},{"lineNumber":92,"author":{"gitId":"-"},"content":"        State.Proposals[input] \u003d proposal;","isFullCredit":false},{"lineNumber":93,"author":{"gitId":"-"},"content":"        var referendumReceiptCreated \u003d LockToken(organization.TokenSymbol, allowance, input, Context.Sender,","isFullCredit":false},{"lineNumber":94,"author":{"gitId":"-"},"content":"            proposal.OrganizationAddress);","isFullCredit":false},{"lineNumber":95,"author":{"gitId":"-"},"content":"        referendumReceiptCreated.ReceiptType \u003d nameof(Reject);","isFullCredit":false},{"lineNumber":96,"author":{"gitId":"-"},"content":"        Context.Fire(referendumReceiptCreated);","isFullCredit":false},{"lineNumber":97,"author":{"gitId":"-"},"content":"        return new Empty();","isFullCredit":false},{"lineNumber":98,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":99,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":100,"author":{"gitId":"-"},"content":"    public override Empty Abstain(Hash input)","isFullCredit":false},{"lineNumber":101,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":102,"author":{"gitId":"-"},"content":"        var proposal \u003d GetValidProposal(input);","isFullCredit":false},{"lineNumber":103,"author":{"gitId":"-"},"content":"        var organization \u003d State.Organizations[proposal.OrganizationAddress];","isFullCredit":false},{"lineNumber":104,"author":{"gitId":"-"},"content":"        var allowance \u003d GetAllowance(Context.Sender, organization.TokenSymbol, input);","isFullCredit":false},{"lineNumber":105,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":106,"author":{"gitId":"-"},"content":"        proposal.AbstentionCount \u003d proposal.AbstentionCount.Add(allowance);","isFullCredit":false},{"lineNumber":107,"author":{"gitId":"-"},"content":"        State.Proposals[input] \u003d proposal;","isFullCredit":false},{"lineNumber":108,"author":{"gitId":"-"},"content":"        var referendumReceiptCreated \u003d LockToken(organization.TokenSymbol, allowance, input, Context.Sender,","isFullCredit":false},{"lineNumber":109,"author":{"gitId":"-"},"content":"            proposal.OrganizationAddress);","isFullCredit":false},{"lineNumber":110,"author":{"gitId":"-"},"content":"        referendumReceiptCreated.ReceiptType \u003d nameof(Abstain);","isFullCredit":false},{"lineNumber":111,"author":{"gitId":"-"},"content":"        Context.Fire(referendumReceiptCreated);","isFullCredit":false},{"lineNumber":112,"author":{"gitId":"-"},"content":"        return new Empty();","isFullCredit":false},{"lineNumber":113,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":114,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":115,"author":{"gitId":"-"},"content":"    public override Empty ReclaimVoteToken(Hash input)","isFullCredit":false},{"lineNumber":116,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":117,"author":{"gitId":"-"},"content":"        var proposal \u003d State.Proposals[input];","isFullCredit":false},{"lineNumber":118,"author":{"gitId":"-"},"content":"        Assert(proposal \u003d\u003d null ||","isFullCredit":false},{"lineNumber":119,"author":{"gitId":"-"},"content":"               Context.CurrentBlockTime \u003e\u003d proposal.ExpiredTime, \"Unable to reclaim at this time.\");","isFullCredit":false},{"lineNumber":120,"author":{"gitId":"-"},"content":"        UnlockToken(input, Context.Sender);","isFullCredit":false},{"lineNumber":121,"author":{"gitId":"-"},"content":"        return new Empty();","isFullCredit":false},{"lineNumber":122,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":123,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":124,"author":{"gitId":"-"},"content":"    public override Empty ChangeOrganizationThreshold(ProposalReleaseThreshold input)","isFullCredit":false},{"lineNumber":125,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":126,"author":{"gitId":"-"},"content":"        var organization \u003d State.Organizations[Context.Sender];","isFullCredit":false},{"lineNumber":127,"author":{"gitId":"-"},"content":"        Assert(organization !\u003d null, \"Organization not found.\");","isFullCredit":false},{"lineNumber":128,"author":{"gitId":"-"},"content":"        organization.ProposalReleaseThreshold \u003d input;","isFullCredit":false},{"lineNumber":129,"author":{"gitId":"-"},"content":"        Assert(Validate(organization), \"Invalid organization.\");","isFullCredit":false},{"lineNumber":130,"author":{"gitId":"-"},"content":"        State.Organizations[Context.Sender] \u003d organization;","isFullCredit":false},{"lineNumber":131,"author":{"gitId":"-"},"content":"        Context.Fire(new OrganizationThresholdChanged","isFullCredit":false},{"lineNumber":132,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":133,"author":{"gitId":"-"},"content":"            OrganizationAddress \u003d Context.Sender,","isFullCredit":false},{"lineNumber":134,"author":{"gitId":"-"},"content":"            ProposerReleaseThreshold \u003d input","isFullCredit":false},{"lineNumber":135,"author":{"gitId":"-"},"content":"        });","isFullCredit":false},{"lineNumber":136,"author":{"gitId":"-"},"content":"        return new Empty();","isFullCredit":false},{"lineNumber":137,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":138,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":139,"author":{"gitId":"-"},"content":"    public override Empty ChangeOrganizationProposerWhiteList(ProposerWhiteList input)","isFullCredit":false},{"lineNumber":140,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":141,"author":{"gitId":"-"},"content":"        var organization \u003d State.Organizations[Context.Sender];","isFullCredit":false},{"lineNumber":142,"author":{"gitId":"-"},"content":"        Assert(organization !\u003d null, \"Organization not found.\");","isFullCredit":false},{"lineNumber":143,"author":{"gitId":"-"},"content":"        organization.ProposerWhiteList \u003d input;","isFullCredit":false},{"lineNumber":144,"author":{"gitId":"-"},"content":"        Assert(Validate(organization), \"Invalid organization.\");","isFullCredit":false},{"lineNumber":145,"author":{"gitId":"-"},"content":"        State.Organizations[Context.Sender] \u003d organization;","isFullCredit":false},{"lineNumber":146,"author":{"gitId":"-"},"content":"        Context.Fire(new OrganizationWhiteListChanged","isFullCredit":false},{"lineNumber":147,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":148,"author":{"gitId":"-"},"content":"            OrganizationAddress \u003d Context.Sender,","isFullCredit":false},{"lineNumber":149,"author":{"gitId":"-"},"content":"            ProposerWhiteList \u003d input","isFullCredit":false},{"lineNumber":150,"author":{"gitId":"-"},"content":"        });","isFullCredit":false},{"lineNumber":151,"author":{"gitId":"-"},"content":"        return new Empty();","isFullCredit":false},{"lineNumber":152,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":153,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":154,"author":{"gitId":"-"},"content":"    public override Empty ClearProposal(Hash input)","isFullCredit":false},{"lineNumber":155,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":156,"author":{"gitId":"-"},"content":"        // anyone can clear proposal if it is expired","isFullCredit":false},{"lineNumber":157,"author":{"gitId":"-"},"content":"        var proposal \u003d State.Proposals[input];","isFullCredit":false},{"lineNumber":158,"author":{"gitId":"-"},"content":"        Assert(proposal !\u003d null \u0026\u0026 Context.CurrentBlockTime \u003e\u003d proposal.ExpiredTime, \"Proposal clear failed\");","isFullCredit":false},{"lineNumber":159,"author":{"gitId":"-"},"content":"        State.Proposals.Remove(input);","isFullCredit":false},{"lineNumber":160,"author":{"gitId":"-"},"content":"        return new Empty();","isFullCredit":false},{"lineNumber":161,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":162,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":163,"author":{"gitId":"-"},"content":"    public override Empty Release(Hash input)","isFullCredit":false},{"lineNumber":164,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":165,"author":{"gitId":"-"},"content":"        var proposal \u003d GetValidProposal(input);","isFullCredit":false},{"lineNumber":166,"author":{"gitId":"-"},"content":"        Assert(Context.Sender.Equals(proposal.Proposer), \"No permission.\");","isFullCredit":false},{"lineNumber":167,"author":{"gitId":"-"},"content":"        var organization \u003d State.Organizations[proposal.OrganizationAddress];","isFullCredit":false},{"lineNumber":168,"author":{"gitId":"-"},"content":"        Assert(IsReleaseThresholdReached(proposal, organization), \"Not approved.\");","isFullCredit":false},{"lineNumber":169,"author":{"gitId":"-"},"content":"        Context.SendVirtualInlineBySystemContract(","isFullCredit":false},{"lineNumber":170,"author":{"gitId":"-"},"content":"            CalculateVirtualHash(organization.OrganizationHash, organization.CreationToken), proposal.ToAddress,","isFullCredit":false},{"lineNumber":171,"author":{"gitId":"-"},"content":"            proposal.ContractMethodName, proposal.Params);","isFullCredit":false},{"lineNumber":172,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":173,"author":{"gitId":"-"},"content":"        Context.Fire(new ProposalReleased { ProposalId \u003d input });","isFullCredit":false},{"lineNumber":174,"author":{"gitId":"-"},"content":"        State.Proposals.Remove(input);","isFullCredit":false},{"lineNumber":175,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":176,"author":{"gitId":"-"},"content":"        return new Empty();","isFullCredit":false},{"lineNumber":177,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":178,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":179,"author":{"gitId":"-"},"content":"    #region View","isFullCredit":false},{"lineNumber":180,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":181,"author":{"gitId":"-"},"content":"    public override Organization GetOrganization(Address address)","isFullCredit":false},{"lineNumber":182,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":183,"author":{"gitId":"-"},"content":"        return State.Organizations[address] ?? new Organization();","isFullCredit":false},{"lineNumber":184,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":185,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":186,"author":{"gitId":"-"},"content":"    public override ProposalOutput GetProposal(Hash proposalId)","isFullCredit":false},{"lineNumber":187,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":188,"author":{"gitId":"-"},"content":"        var proposal \u003d State.Proposals[proposalId];","isFullCredit":false},{"lineNumber":189,"author":{"gitId":"-"},"content":"        if (proposal \u003d\u003d null) return new ProposalOutput();","isFullCredit":false},{"lineNumber":190,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":191,"author":{"gitId":"-"},"content":"        var organization \u003d State.Organizations[proposal.OrganizationAddress];","isFullCredit":false},{"lineNumber":192,"author":{"gitId":"-"},"content":"        var readyToRelease \u003d IsReleaseThresholdReached(proposal, organization);","isFullCredit":false},{"lineNumber":193,"author":{"gitId":"-"},"content":"        return new ProposalOutput","isFullCredit":false},{"lineNumber":194,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":195,"author":{"gitId":"-"},"content":"            ProposalId \u003d proposalId,","isFullCredit":false},{"lineNumber":196,"author":{"gitId":"-"},"content":"            ContractMethodName \u003d proposal.ContractMethodName,","isFullCredit":false},{"lineNumber":197,"author":{"gitId":"-"},"content":"            ExpiredTime \u003d proposal.ExpiredTime,","isFullCredit":false},{"lineNumber":198,"author":{"gitId":"-"},"content":"            OrganizationAddress \u003d proposal.OrganizationAddress,","isFullCredit":false},{"lineNumber":199,"author":{"gitId":"-"},"content":"            Params \u003d proposal.Params,","isFullCredit":false},{"lineNumber":200,"author":{"gitId":"-"},"content":"            Proposer \u003d proposal.Proposer,","isFullCredit":false},{"lineNumber":201,"author":{"gitId":"-"},"content":"            ToAddress \u003d proposal.ToAddress,","isFullCredit":false},{"lineNumber":202,"author":{"gitId":"-"},"content":"            ToBeReleased \u003d readyToRelease,","isFullCredit":false},{"lineNumber":203,"author":{"gitId":"-"},"content":"            ApprovalCount \u003d proposal.ApprovalCount,","isFullCredit":false},{"lineNumber":204,"author":{"gitId":"-"},"content":"            RejectionCount \u003d proposal.RejectionCount,","isFullCredit":false},{"lineNumber":205,"author":{"gitId":"eanzhao"},"content":"            AbstentionCount \u003d proposal.AbstentionCount,","isFullCredit":false},{"lineNumber":206,"author":{"gitId":"eanzhao"},"content":"            Title \u003d proposal.Title,","isFullCredit":false},{"lineNumber":207,"author":{"gitId":"eanzhao"},"content":"            Description \u003d proposal.Description","isFullCredit":false},{"lineNumber":208,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":209,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":210,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":211,"author":{"gitId":"-"},"content":"    public override Address CalculateOrganizationAddress(CreateOrganizationInput input)","isFullCredit":false},{"lineNumber":212,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":213,"author":{"gitId":"-"},"content":"        var organizationHashAddressPair \u003d CalculateOrganizationHashAddressPair(input);","isFullCredit":false},{"lineNumber":214,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d organizationHashAddressPair.OrganizationAddress;","isFullCredit":false},{"lineNumber":215,"author":{"gitId":"-"},"content":"        return organizationAddress;","isFullCredit":false},{"lineNumber":216,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":217,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":218,"author":{"gitId":"-"},"content":"    public override BoolValue ValidateOrganizationExist(Address input)","isFullCredit":false},{"lineNumber":219,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":220,"author":{"gitId":"-"},"content":"        return new BoolValue { Value \u003d State.Organizations[input] !\u003d null };","isFullCredit":false},{"lineNumber":221,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":222,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":223,"author":{"gitId":"-"},"content":"    public override BoolValue ValidateProposerInWhiteList(ValidateProposerInWhiteListInput input)","isFullCredit":false},{"lineNumber":224,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":225,"author":{"gitId":"-"},"content":"        var organization \u003d State.Organizations[input.OrganizationAddress];","isFullCredit":false},{"lineNumber":226,"author":{"gitId":"-"},"content":"        return new BoolValue","isFullCredit":false},{"lineNumber":227,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":228,"author":{"gitId":"-"},"content":"            Value \u003d organization.ProposerWhiteList.Contains(input.Proposer)","isFullCredit":false},{"lineNumber":229,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":230,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":231,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":232,"author":{"gitId":"-"},"content":"    public override Address GetProposalVirtualAddress(Hash input)","isFullCredit":false},{"lineNumber":233,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":234,"author":{"gitId":"-"},"content":"        return Context.ConvertVirtualAddressToContractAddress(input);","isFullCredit":false},{"lineNumber":235,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":236,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":237,"author":{"gitId":"-"},"content":"    #endregion","isFullCredit":false},{"lineNumber":238,"author":{"gitId":"-"},"content":"}","isFullCredit":false}],"authorContributionMap":{"eanzhao":3,"-":235}},{"path":"contract/AElf.Contracts.Referendum/ReferendumConstants.cs","fileType":"cs","lines":[{"lineNumber":1,"author":{"gitId":"eanzhao"},"content":"namespace AElf.Contracts.Referendum;","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"eanzhao"},"content":"","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"eanzhao"},"content":"public static class ReferendumConstants","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"eanzhao"},"content":"{","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"eanzhao"},"content":"    public const int MaxLengthForTitle \u003d 255;","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"eanzhao"},"content":"    public const int MaxLengthForDescription \u003d 10200;","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"eanzhao"},"content":"    public const int MaxLengthForProposalDescriptionUrl \u003d 255;","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"eanzhao"},"content":"}","isFullCredit":false}],"authorContributionMap":{"eanzhao":8}},{"path":"contract/AElf.Contracts.Referendum/Referendum_Helper.cs","fileType":"cs","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"using System;","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"-"},"content":"using AElf.Contracts.MultiToken;","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"-"},"content":"using AElf.CSharp.Core;","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"-"},"content":"using AElf.Sdk.CSharp;","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"-"},"content":"using AElf.Standards.ACS3;","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"-"},"content":"using AElf.Types;","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"-"},"content":"namespace AElf.Contracts.Referendum;","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"-"},"content":"public partial class ReferendumContract","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"-"},"content":"{","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"-"},"content":"    private bool IsReleaseThresholdReached(ProposalInfo proposal, Organization organization)","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"-"},"content":"        var proposalReleaseThreshold \u003d organization.ProposalReleaseThreshold;","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"-"},"content":"        var enoughVote \u003d proposal.RejectionCount.Add(proposal.AbstentionCount).Add(proposal.ApprovalCount) \u003e\u003d","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"-"},"content":"                         proposalReleaseThreshold.MinimalVoteThreshold;","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"-"},"content":"        if (!enoughVote)","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"-"},"content":"            return false;","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"-"},"content":"        var isRejected \u003d proposal.RejectionCount \u003e proposalReleaseThreshold.MaximalRejectionThreshold;","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"-"},"content":"        if (isRejected)","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"-"},"content":"            return false;","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"-"},"content":"        var isAbstained \u003d proposal.AbstentionCount \u003e proposalReleaseThreshold.MaximalAbstentionThreshold;","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"-"},"content":"        if (isAbstained)","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"-"},"content":"            return false;","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"-"},"content":"        return proposal.ApprovalCount \u003e\u003d proposalReleaseThreshold.MinimalApprovalThreshold;","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"-"},"content":"    private void RequireTokenContractStateSet()","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"-"},"content":"        if (State.TokenContract.Value !\u003d null)","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"-"},"content":"            return;","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"-"},"content":"        State.TokenContract.Value \u003d","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"-"},"content":"            Context.GetContractAddressByName(SmartContractConstants.TokenContractSystemName);","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"-"},"content":"    private ReferendumReceiptCreated LockToken(string symbol, long amount, Hash proposalId, Address lockedAddress,","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"-"},"content":"        Address organizationAddress)","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"-"},"content":"        Assert(State.LockedTokenAmount[lockedAddress][proposalId] \u003d\u003d null, \"Already locked.\");","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"-"},"content":"        var lockId \u003d Context.GenerateId(Context.Self,","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"-"},"content":"            HashHelper.ConcatAndCompute(proposalId, HashHelper.ComputeFrom(lockedAddress)));","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"-"},"content":"        RequireTokenContractStateSet();","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"-"},"content":"        Context.SendVirtualInline(proposalId, State.TokenContract.Value,","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"-"},"content":"            nameof(TokenContractContainer.TokenContractReferenceState.TransferFrom), new TransferFromInput","isFullCredit":false},{"lineNumber":49,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":50,"author":{"gitId":"-"},"content":"                From \u003d Context.Sender,","isFullCredit":false},{"lineNumber":51,"author":{"gitId":"-"},"content":"                To \u003d GetProposalVirtualAddress(proposalId),","isFullCredit":false},{"lineNumber":52,"author":{"gitId":"-"},"content":"                Symbol \u003d symbol,","isFullCredit":false},{"lineNumber":53,"author":{"gitId":"-"},"content":"                Amount \u003d amount,","isFullCredit":false},{"lineNumber":54,"author":{"gitId":"-"},"content":"                Memo \u003d \"Referendum.\"","isFullCredit":false},{"lineNumber":55,"author":{"gitId":"-"},"content":"            });","isFullCredit":false},{"lineNumber":56,"author":{"gitId":"-"},"content":"        State.LockedTokenAmount[Context.Sender][proposalId] \u003d new Receipt","isFullCredit":false},{"lineNumber":57,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":58,"author":{"gitId":"-"},"content":"            Amount \u003d amount,","isFullCredit":false},{"lineNumber":59,"author":{"gitId":"-"},"content":"            LockId \u003d lockId,","isFullCredit":false},{"lineNumber":60,"author":{"gitId":"-"},"content":"            TokenSymbol \u003d symbol","isFullCredit":false},{"lineNumber":61,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":62,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":63,"author":{"gitId":"-"},"content":"        return new ReferendumReceiptCreated","isFullCredit":false},{"lineNumber":64,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":65,"author":{"gitId":"-"},"content":"            Address \u003d Context.Sender,","isFullCredit":false},{"lineNumber":66,"author":{"gitId":"-"},"content":"            ProposalId \u003d proposalId,","isFullCredit":false},{"lineNumber":67,"author":{"gitId":"-"},"content":"            Amount \u003d amount,","isFullCredit":false},{"lineNumber":68,"author":{"gitId":"-"},"content":"            Symbol \u003d symbol,","isFullCredit":false},{"lineNumber":69,"author":{"gitId":"-"},"content":"            Time \u003d Context.CurrentBlockTime,","isFullCredit":false},{"lineNumber":70,"author":{"gitId":"-"},"content":"            OrganizationAddress \u003d organizationAddress","isFullCredit":false},{"lineNumber":71,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":72,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":73,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":74,"author":{"gitId":"-"},"content":"    private void UnlockToken(Hash proposalId, Address lockedAddress)","isFullCredit":false},{"lineNumber":75,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":76,"author":{"gitId":"-"},"content":"        RequireTokenContractStateSet();","isFullCredit":false},{"lineNumber":77,"author":{"gitId":"-"},"content":"        var receipt \u003d State.LockedTokenAmount[lockedAddress][proposalId];","isFullCredit":false},{"lineNumber":78,"author":{"gitId":"-"},"content":"        Assert(receipt !\u003d null, \"Nothing to reclaim.\");","isFullCredit":false},{"lineNumber":79,"author":{"gitId":"-"},"content":"        Context.SendVirtualInline(proposalId, State.TokenContract.Value,","isFullCredit":false},{"lineNumber":80,"author":{"gitId":"-"},"content":"            nameof(TokenContractContainer.TokenContractReferenceState.Transfer), new TransferInput","isFullCredit":false},{"lineNumber":81,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":82,"author":{"gitId":"-"},"content":"                Amount \u003d receipt.Amount,","isFullCredit":false},{"lineNumber":83,"author":{"gitId":"-"},"content":"                To \u003d Context.Sender,","isFullCredit":false},{"lineNumber":84,"author":{"gitId":"-"},"content":"                Symbol \u003d receipt.TokenSymbol,","isFullCredit":false},{"lineNumber":85,"author":{"gitId":"-"},"content":"                Memo \u003d \"Referendum.\"","isFullCredit":false},{"lineNumber":86,"author":{"gitId":"-"},"content":"            });","isFullCredit":false},{"lineNumber":87,"author":{"gitId":"-"},"content":"        State.LockedTokenAmount[Context.Sender].Remove(proposalId);","isFullCredit":false},{"lineNumber":88,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":89,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":90,"author":{"gitId":"-"},"content":"    private bool Validate(Organization organization)","isFullCredit":false},{"lineNumber":91,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":92,"author":{"gitId":"-"},"content":"        if (string.IsNullOrEmpty(organization.TokenSymbol) || organization.OrganizationAddress \u003d\u003d null ||","isFullCredit":false},{"lineNumber":93,"author":{"gitId":"-"},"content":"            organization.OrganizationHash \u003d\u003d null || organization.ProposerWhiteList.Empty())","isFullCredit":false},{"lineNumber":94,"author":{"gitId":"-"},"content":"            return false;","isFullCredit":false},{"lineNumber":95,"author":{"gitId":"-"},"content":"        Assert(!string.IsNullOrEmpty(GetTokenInfo(organization.TokenSymbol).Symbol), \"Token not exists.\");","isFullCredit":false},{"lineNumber":96,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":97,"author":{"gitId":"-"},"content":"        var proposalReleaseThreshold \u003d organization.ProposalReleaseThreshold;","isFullCredit":false},{"lineNumber":98,"author":{"gitId":"-"},"content":"        return proposalReleaseThreshold.MinimalApprovalThreshold \u003c\u003d proposalReleaseThreshold.MinimalVoteThreshold \u0026\u0026","isFullCredit":false},{"lineNumber":99,"author":{"gitId":"-"},"content":"               proposalReleaseThreshold.MinimalApprovalThreshold \u003e 0 \u0026\u0026","isFullCredit":false},{"lineNumber":100,"author":{"gitId":"-"},"content":"               proposalReleaseThreshold.MaximalAbstentionThreshold \u003e\u003d 0 \u0026\u0026","isFullCredit":false},{"lineNumber":101,"author":{"gitId":"-"},"content":"               proposalReleaseThreshold.MaximalRejectionThreshold \u003e\u003d 0;","isFullCredit":false},{"lineNumber":102,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":103,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":104,"author":{"gitId":"-"},"content":"    private bool Validate(ProposalInfo proposal)","isFullCredit":false},{"lineNumber":105,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":106,"author":{"gitId":"-"},"content":"        var validDestinationAddress \u003d proposal.ToAddress !\u003d null;","isFullCredit":false},{"lineNumber":107,"author":{"gitId":"-"},"content":"        var validDestinationMethodName \u003d !string.IsNullOrWhiteSpace(proposal.ContractMethodName);","isFullCredit":false},{"lineNumber":108,"author":{"gitId":"-"},"content":"        var validExpiredTime \u003d proposal.ExpiredTime !\u003d null \u0026\u0026 Context.CurrentBlockTime \u003c proposal.ExpiredTime;","isFullCredit":false},{"lineNumber":109,"author":{"gitId":"-"},"content":"        var hasOrganizationAddress \u003d proposal.OrganizationAddress !\u003d null;","isFullCredit":false},{"lineNumber":110,"author":{"gitId":"-"},"content":"        var validDescriptionUrl \u003d ValidateDescriptionUrlScheme(proposal.ProposalDescriptionUrl);","isFullCredit":false},{"lineNumber":111,"author":{"gitId":"-"},"content":"        return validDestinationAddress \u0026\u0026 validDestinationMethodName \u0026\u0026 validExpiredTime \u0026\u0026","isFullCredit":false},{"lineNumber":112,"author":{"gitId":"-"},"content":"               hasOrganizationAddress \u0026\u0026 validDescriptionUrl;","isFullCredit":false},{"lineNumber":113,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":114,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":115,"author":{"gitId":"-"},"content":"    private bool ValidateDescriptionUrlScheme(string uriString)","isFullCredit":false},{"lineNumber":116,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":117,"author":{"gitId":"-"},"content":"        if (string.IsNullOrEmpty(uriString))","isFullCredit":false},{"lineNumber":118,"author":{"gitId":"-"},"content":"            return true;","isFullCredit":false},{"lineNumber":119,"author":{"gitId":"-"},"content":"        var result \u003d Uri.TryCreate(uriString, UriKind.Absolute, out var uriResult)","isFullCredit":false},{"lineNumber":120,"author":{"gitId":"-"},"content":"                     \u0026\u0026 (uriResult.Scheme \u003d\u003d Uri.UriSchemeHttp || uriResult.Scheme \u003d\u003d Uri.UriSchemeHttps);","isFullCredit":false},{"lineNumber":121,"author":{"gitId":"-"},"content":"        return result;","isFullCredit":false},{"lineNumber":122,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":123,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":124,"author":{"gitId":"-"},"content":"    private ProposalInfo GetValidProposal(Hash proposalId)","isFullCredit":false},{"lineNumber":125,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":126,"author":{"gitId":"-"},"content":"        var proposal \u003d State.Proposals[proposalId];","isFullCredit":false},{"lineNumber":127,"author":{"gitId":"-"},"content":"        Assert(proposal !\u003d null, \"Invalid proposal id.\");","isFullCredit":false},{"lineNumber":128,"author":{"gitId":"-"},"content":"        Assert(Validate(proposal), \"Invalid proposal.\");","isFullCredit":false},{"lineNumber":129,"author":{"gitId":"-"},"content":"        return proposal;","isFullCredit":false},{"lineNumber":130,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":131,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":132,"author":{"gitId":"-"},"content":"    private TokenInfo GetTokenInfo(string symbol)","isFullCredit":false},{"lineNumber":133,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":134,"author":{"gitId":"-"},"content":"        RequireTokenContractStateSet();","isFullCredit":false},{"lineNumber":135,"author":{"gitId":"-"},"content":"        return State.TokenContract.GetTokenInfo.Call(new GetTokenInfoInput","isFullCredit":false},{"lineNumber":136,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":137,"author":{"gitId":"-"},"content":"            Symbol \u003d symbol","isFullCredit":false},{"lineNumber":138,"author":{"gitId":"-"},"content":"        });","isFullCredit":false},{"lineNumber":139,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":140,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":141,"author":{"gitId":"-"},"content":"    private long GetAllowance(Address owner, string tokenSymbol, Hash proposalId)","isFullCredit":false},{"lineNumber":142,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":143,"author":{"gitId":"-"},"content":"        RequireTokenContractStateSet();","isFullCredit":false},{"lineNumber":144,"author":{"gitId":"-"},"content":"        var allowance \u003d State.TokenContract.GetAllowance.Call(new GetAllowanceInput","isFullCredit":false},{"lineNumber":145,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":146,"author":{"gitId":"-"},"content":"            Owner \u003d owner,","isFullCredit":false},{"lineNumber":147,"author":{"gitId":"-"},"content":"            Spender \u003d GetProposalVirtualAddress(proposalId),","isFullCredit":false},{"lineNumber":148,"author":{"gitId":"-"},"content":"            Symbol \u003d tokenSymbol","isFullCredit":false},{"lineNumber":149,"author":{"gitId":"-"},"content":"        }).Allowance;","isFullCredit":false},{"lineNumber":150,"author":{"gitId":"-"},"content":"        Assert(allowance \u003e 0, \"Allowance not enough.\");","isFullCredit":false},{"lineNumber":151,"author":{"gitId":"-"},"content":"        return allowance;","isFullCredit":false},{"lineNumber":152,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":153,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":154,"author":{"gitId":"-"},"content":"    private Hash GenerateProposalId(CreateProposalInput input)","isFullCredit":false},{"lineNumber":155,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":156,"author":{"gitId":"-"},"content":"        return Context.GenerateId(Context.Self, input.Token ?? HashHelper.ComputeFrom(input));","isFullCredit":false},{"lineNumber":157,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":158,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":159,"author":{"gitId":"-"},"content":"    private Hash CreateNewProposal(CreateProposalInput input)","isFullCredit":false},{"lineNumber":160,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":161,"author":{"gitId":"eanzhao"},"content":"        CheckCreateProposalInput(input);","isFullCredit":false},{"lineNumber":162,"author":{"gitId":"-"},"content":"        var proposalId \u003d GenerateProposalId(input);","isFullCredit":false},{"lineNumber":163,"author":{"gitId":"-"},"content":"        Assert(State.Proposals[proposalId] \u003d\u003d null, \"Proposal already exists.\");","isFullCredit":false},{"lineNumber":164,"author":{"gitId":"-"},"content":"        var proposal \u003d new ProposalInfo","isFullCredit":false},{"lineNumber":165,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":166,"author":{"gitId":"-"},"content":"            ContractMethodName \u003d input.ContractMethodName,","isFullCredit":false},{"lineNumber":167,"author":{"gitId":"-"},"content":"            ToAddress \u003d input.ToAddress,","isFullCredit":false},{"lineNumber":168,"author":{"gitId":"-"},"content":"            ExpiredTime \u003d input.ExpiredTime,","isFullCredit":false},{"lineNumber":169,"author":{"gitId":"-"},"content":"            Params \u003d input.Params,","isFullCredit":false},{"lineNumber":170,"author":{"gitId":"-"},"content":"            OrganizationAddress \u003d input.OrganizationAddress,","isFullCredit":false},{"lineNumber":171,"author":{"gitId":"-"},"content":"            Proposer \u003d Context.Sender,","isFullCredit":false},{"lineNumber":172,"author":{"gitId":"eanzhao"},"content":"            ProposalDescriptionUrl \u003d input.ProposalDescriptionUrl,","isFullCredit":false},{"lineNumber":173,"author":{"gitId":"eanzhao"},"content":"            Title \u003d input.Title,","isFullCredit":false},{"lineNumber":174,"author":{"gitId":"eanzhao"},"content":"            Description \u003d input.Description","isFullCredit":false},{"lineNumber":175,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":176,"author":{"gitId":"-"},"content":"        Assert(Validate(proposal), \"Invalid proposal.\");","isFullCredit":false},{"lineNumber":177,"author":{"gitId":"-"},"content":"        State.Proposals[proposalId] \u003d proposal;","isFullCredit":false},{"lineNumber":178,"author":{"gitId":"eanzhao"},"content":"        Context.Fire(new ProposalCreated","isFullCredit":false},{"lineNumber":179,"author":{"gitId":"eanzhao"},"content":"        {","isFullCredit":false},{"lineNumber":180,"author":{"gitId":"eanzhao"},"content":"            ProposalId \u003d proposalId, ","isFullCredit":false},{"lineNumber":181,"author":{"gitId":"eanzhao"},"content":"            OrganizationAddress \u003d input.OrganizationAddress,","isFullCredit":false},{"lineNumber":182,"author":{"gitId":"eanzhao"},"content":"            Title \u003d input.Title,","isFullCredit":false},{"lineNumber":183,"author":{"gitId":"eanzhao"},"content":"            Description \u003d input.Description","isFullCredit":false},{"lineNumber":184,"author":{"gitId":"eanzhao"},"content":"        });","isFullCredit":false},{"lineNumber":185,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":186,"author":{"gitId":"-"},"content":"        return proposalId;","isFullCredit":false},{"lineNumber":187,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":188,"author":{"gitId":"-"},"content":"    ","isFullCredit":false},{"lineNumber":189,"author":{"gitId":"eanzhao"},"content":"    private void CheckCreateProposalInput(CreateProposalInput input)","isFullCredit":false},{"lineNumber":190,"author":{"gitId":"eanzhao"},"content":"    {","isFullCredit":false},{"lineNumber":191,"author":{"gitId":"eanzhao"},"content":"        // Check the length of title","isFullCredit":false},{"lineNumber":192,"author":{"gitId":"eanzhao"},"content":"        Assert(input.Title.Length \u003c\u003d ReferendumConstants.MaxLengthForTitle, \"Title is too long.\");","isFullCredit":false},{"lineNumber":193,"author":{"gitId":"eanzhao"},"content":"        // Check the length of description","isFullCredit":false},{"lineNumber":194,"author":{"gitId":"eanzhao"},"content":"        Assert(input.Description.Length \u003c\u003d ReferendumConstants.MaxLengthForDescription, \"Description is too long.\");","isFullCredit":false},{"lineNumber":195,"author":{"gitId":"eanzhao"},"content":"        // Check the length of description url","isFullCredit":false},{"lineNumber":196,"author":{"gitId":"eanzhao"},"content":"        Assert(input.ProposalDescriptionUrl.Length \u003c\u003d ReferendumConstants.MaxLengthForProposalDescriptionUrl,","isFullCredit":false},{"lineNumber":197,"author":{"gitId":"eanzhao"},"content":"            \"Description url is too long.\");","isFullCredit":false},{"lineNumber":198,"author":{"gitId":"eanzhao"},"content":"    }","isFullCredit":false},{"lineNumber":199,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":200,"author":{"gitId":"-"},"content":"    private void AssertIsAuthorizedProposer(Address organizationAddress, Address proposer)","isFullCredit":false},{"lineNumber":201,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":202,"author":{"gitId":"-"},"content":"        var organization \u003d State.Organizations[organizationAddress];","isFullCredit":false},{"lineNumber":203,"author":{"gitId":"-"},"content":"        Assert(organization !\u003d null, \"Organization not found.\");","isFullCredit":false},{"lineNumber":204,"author":{"gitId":"-"},"content":"        Assert(organization.ProposerWhiteList.Contains(proposer), \"Unauthorized to propose.\");","isFullCredit":false},{"lineNumber":205,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":206,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":207,"author":{"gitId":"-"},"content":"    private OrganizationHashAddressPair CalculateOrganizationHashAddressPair(","isFullCredit":false},{"lineNumber":208,"author":{"gitId":"-"},"content":"        CreateOrganizationInput createOrganizationInput)","isFullCredit":false},{"lineNumber":209,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":210,"author":{"gitId":"-"},"content":"        var organizationHash \u003d HashHelper.ComputeFrom(createOrganizationInput);","isFullCredit":false},{"lineNumber":211,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d Context.ConvertVirtualAddressToContractAddressWithContractHashName(","isFullCredit":false},{"lineNumber":212,"author":{"gitId":"-"},"content":"            CalculateVirtualHash(organizationHash, createOrganizationInput.CreationToken));","isFullCredit":false},{"lineNumber":213,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":214,"author":{"gitId":"-"},"content":"        return new OrganizationHashAddressPair","isFullCredit":false},{"lineNumber":215,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":216,"author":{"gitId":"-"},"content":"            OrganizationAddress \u003d organizationAddress,","isFullCredit":false},{"lineNumber":217,"author":{"gitId":"-"},"content":"            OrganizationHash \u003d organizationHash","isFullCredit":false},{"lineNumber":218,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":219,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":220,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":221,"author":{"gitId":"-"},"content":"    private Hash CalculateVirtualHash(Hash organizationHash, Hash creationToken)","isFullCredit":false},{"lineNumber":222,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":223,"author":{"gitId":"-"},"content":"        return creationToken \u003d\u003d null","isFullCredit":false},{"lineNumber":224,"author":{"gitId":"-"},"content":"            ? organizationHash","isFullCredit":false},{"lineNumber":225,"author":{"gitId":"-"},"content":"            : HashHelper.ConcatAndCompute(organizationHash, creationToken);","isFullCredit":false},{"lineNumber":226,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":227,"author":{"gitId":"-"},"content":"}","isFullCredit":false}],"authorContributionMap":{"eanzhao":21,"-":206}},{"path":"protobuf/acs3.proto","fileType":"proto","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"/**","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"-"},"content":" * AElf Standards ACS3(Contract Proposal Standard)","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"-"},"content":" *","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"-"},"content":" * Used for governance through proposals.","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"-"},"content":" */","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"-"},"content":"syntax \u003d \"proto3\";","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"-"},"content":"package acs3;","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"-"},"content":"import public \"aelf/core.proto\";","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"-"},"content":"import \"aelf/options.proto\";","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"-"},"content":"import \"google/protobuf/empty.proto\";","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"-"},"content":"import public \"google/protobuf/timestamp.proto\";","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"-"},"content":"import \"google/protobuf/wrappers.proto\";","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"-"},"content":"option (aelf.identity) \u003d \"acs3\";","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"-"},"content":"option csharp_namespace \u003d \"AElf.Standards.ACS3\";","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"-"},"content":"service AuthorizationContract {","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"-"},"content":"    // Create a proposal for which organization members can vote. ","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"-"},"content":"    // When the proposal is released, a transaction will be sent to the specified contract.","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"-"},"content":"    // Return id of the newly created proposal.","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"-"},"content":"    rpc CreateProposal (CreateProposalInput) returns (aelf.Hash) {","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"-"},"content":"    ","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"-"},"content":"    // Approve a proposal according to the proposal ID.","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"-"},"content":"    rpc Approve (aelf.Hash) returns (google.protobuf.Empty) {","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"-"},"content":"    ","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"-"},"content":"    // Reject a proposal according to the proposal ID.","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"-"},"content":"    rpc Reject(aelf.Hash) returns (google.protobuf.Empty) {","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"-"},"content":"    // Abstain a proposal according to the proposal ID.","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"-"},"content":"    rpc Abstain(aelf.Hash) returns (google.protobuf.Empty){","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"-"},"content":"    // Release a proposal according to the proposal ID and send a transaction to the specified contract.","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"-"},"content":"    rpc Release(aelf.Hash) returns (google.protobuf.Empty){","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"-"},"content":"    ","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"-"},"content":"    // Change the thresholds associated with proposals.","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"-"},"content":"    // All fields will be overwritten by the input value and this will affect all current proposals of the organization. ","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"-"},"content":"    // Note: only the organization can execute this through a proposal.","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"-"},"content":"    rpc ChangeOrganizationThreshold(ProposalReleaseThreshold)returns(google.protobuf.Empty) {","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"-"},"content":"    ","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"-"},"content":"    // Change the white list of organization proposer.","isFullCredit":false},{"lineNumber":49,"author":{"gitId":"-"},"content":"    // This method overrides the list of whitelisted proposers.","isFullCredit":false},{"lineNumber":50,"author":{"gitId":"-"},"content":"    rpc ChangeOrganizationProposerWhiteList(ProposerWhiteList) returns (google.protobuf.Empty){","isFullCredit":false},{"lineNumber":51,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":52,"author":{"gitId":"-"},"content":"    ","isFullCredit":false},{"lineNumber":53,"author":{"gitId":"-"},"content":"    // Create a proposal by system contracts,","isFullCredit":false},{"lineNumber":54,"author":{"gitId":"-"},"content":"    // and return id of the newly created proposal.","isFullCredit":false},{"lineNumber":55,"author":{"gitId":"-"},"content":"    rpc CreateProposalBySystemContract(CreateProposalBySystemContractInput) returns (aelf.Hash){","isFullCredit":false},{"lineNumber":56,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":57,"author":{"gitId":"-"},"content":"    ","isFullCredit":false},{"lineNumber":58,"author":{"gitId":"-"},"content":"    // Remove the specified proposal. If the proposal is in effect, the cleanup fails.","isFullCredit":false},{"lineNumber":59,"author":{"gitId":"-"},"content":"    rpc ClearProposal(aelf.Hash) returns (google.protobuf.Empty){","isFullCredit":false},{"lineNumber":60,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":61,"author":{"gitId":"-"},"content":"    ","isFullCredit":false},{"lineNumber":62,"author":{"gitId":"-"},"content":"    // Get the proposal according to the proposal ID.","isFullCredit":false},{"lineNumber":63,"author":{"gitId":"-"},"content":"    rpc GetProposal(aelf.Hash) returns (ProposalOutput) {","isFullCredit":false},{"lineNumber":64,"author":{"gitId":"-"},"content":"        option (aelf.is_view) \u003d true;","isFullCredit":false},{"lineNumber":65,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":66,"author":{"gitId":"-"},"content":"    ","isFullCredit":false},{"lineNumber":67,"author":{"gitId":"-"},"content":"    // Check the existence of an organization.","isFullCredit":false},{"lineNumber":68,"author":{"gitId":"-"},"content":"    rpc ValidateOrganizationExist(aelf.Address) returns (google.protobuf.BoolValue){","isFullCredit":false},{"lineNumber":69,"author":{"gitId":"-"},"content":"        option (aelf.is_view) \u003d true;","isFullCredit":false},{"lineNumber":70,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":71,"author":{"gitId":"-"},"content":"    ","isFullCredit":false},{"lineNumber":72,"author":{"gitId":"-"},"content":"    // Check if the proposer is whitelisted.","isFullCredit":false},{"lineNumber":73,"author":{"gitId":"-"},"content":"    rpc ValidateProposerInWhiteList(ValidateProposerInWhiteListInput) returns (google.protobuf.BoolValue){","isFullCredit":false},{"lineNumber":74,"author":{"gitId":"-"},"content":"        option (aelf.is_view) \u003d true;","isFullCredit":false},{"lineNumber":75,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":76,"author":{"gitId":"-"},"content":"}","isFullCredit":false},{"lineNumber":77,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":78,"author":{"gitId":"-"},"content":"message CreateProposalInput {","isFullCredit":false},{"lineNumber":79,"author":{"gitId":"-"},"content":"    // The name of the method to call after release.","isFullCredit":false},{"lineNumber":80,"author":{"gitId":"-"},"content":"    string contract_method_name \u003d 1;","isFullCredit":false},{"lineNumber":81,"author":{"gitId":"-"},"content":"    // The address of the contract to call after release.","isFullCredit":false},{"lineNumber":82,"author":{"gitId":"-"},"content":"    aelf.Address to_address \u003d 2;","isFullCredit":false},{"lineNumber":83,"author":{"gitId":"-"},"content":"    // The parameter of the method to be called after the release.","isFullCredit":false},{"lineNumber":84,"author":{"gitId":"-"},"content":"    bytes params \u003d 3;","isFullCredit":false},{"lineNumber":85,"author":{"gitId":"-"},"content":"    // The timestamp at which this proposal will expire.","isFullCredit":false},{"lineNumber":86,"author":{"gitId":"-"},"content":"    google.protobuf.Timestamp expired_time \u003d 4;","isFullCredit":false},{"lineNumber":87,"author":{"gitId":"-"},"content":"    // The address of the organization.","isFullCredit":false},{"lineNumber":88,"author":{"gitId":"-"},"content":"    aelf.Address organization_address \u003d 5;","isFullCredit":false},{"lineNumber":89,"author":{"gitId":"-"},"content":"    // Url is used for proposal describing.","isFullCredit":false},{"lineNumber":90,"author":{"gitId":"-"},"content":"    string proposal_description_url \u003d 6;","isFullCredit":false},{"lineNumber":91,"author":{"gitId":"-"},"content":"    // The token is for proposal id generation and with this token, proposal id can be calculated before proposing.","isFullCredit":false},{"lineNumber":92,"author":{"gitId":"-"},"content":"    aelf.Hash token \u003d 7;","isFullCredit":false},{"lineNumber":93,"author":{"gitId":"eanzhao"},"content":"    // Title of this proposal.","isFullCredit":false},{"lineNumber":94,"author":{"gitId":"eanzhao"},"content":"    string title \u003d 8;","isFullCredit":false},{"lineNumber":95,"author":{"gitId":"eanzhao"},"content":"    // Description of this proposal.","isFullCredit":false},{"lineNumber":96,"author":{"gitId":"eanzhao"},"content":"    string description \u003d 9;","isFullCredit":false},{"lineNumber":97,"author":{"gitId":"-"},"content":"}","isFullCredit":false},{"lineNumber":98,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":99,"author":{"gitId":"-"},"content":"message ProposalOutput {","isFullCredit":false},{"lineNumber":100,"author":{"gitId":"-"},"content":"    // The id of the proposal.","isFullCredit":false},{"lineNumber":101,"author":{"gitId":"-"},"content":"    aelf.Hash proposal_id \u003d 1;","isFullCredit":false},{"lineNumber":102,"author":{"gitId":"-"},"content":"    // The method that this proposal will call when being released.","isFullCredit":false},{"lineNumber":103,"author":{"gitId":"-"},"content":"    string contract_method_name \u003d 2;","isFullCredit":false},{"lineNumber":104,"author":{"gitId":"-"},"content":"    // The address of the target contract.","isFullCredit":false},{"lineNumber":105,"author":{"gitId":"-"},"content":"    aelf.Address to_address \u003d 3;","isFullCredit":false},{"lineNumber":106,"author":{"gitId":"-"},"content":"    // The parameters of the release transaction.","isFullCredit":false},{"lineNumber":107,"author":{"gitId":"-"},"content":"    bytes params \u003d 4;","isFullCredit":false},{"lineNumber":108,"author":{"gitId":"-"},"content":"    // The date at which this proposal will expire.","isFullCredit":false},{"lineNumber":109,"author":{"gitId":"-"},"content":"    google.protobuf.Timestamp expired_time \u003d 5;","isFullCredit":false},{"lineNumber":110,"author":{"gitId":"-"},"content":"    // The address of this proposals organization.","isFullCredit":false},{"lineNumber":111,"author":{"gitId":"-"},"content":"    aelf.Address organization_address \u003d 6;","isFullCredit":false},{"lineNumber":112,"author":{"gitId":"-"},"content":"    // The address of the proposer of this proposal.","isFullCredit":false},{"lineNumber":113,"author":{"gitId":"-"},"content":"    aelf.Address proposer \u003d 7;","isFullCredit":false},{"lineNumber":114,"author":{"gitId":"-"},"content":"    // Indicates if this proposal is releasable.","isFullCredit":false},{"lineNumber":115,"author":{"gitId":"-"},"content":"    bool to_be_released \u003d 8;","isFullCredit":false},{"lineNumber":116,"author":{"gitId":"-"},"content":"    // Approval count for this proposal.","isFullCredit":false},{"lineNumber":117,"author":{"gitId":"-"},"content":"    int64 approval_count \u003d 9;","isFullCredit":false},{"lineNumber":118,"author":{"gitId":"-"},"content":"    // Rejection count for this proposal.","isFullCredit":false},{"lineNumber":119,"author":{"gitId":"-"},"content":"    int64 rejection_count \u003d 10;","isFullCredit":false},{"lineNumber":120,"author":{"gitId":"-"},"content":"    // Abstention count for this proposal.","isFullCredit":false},{"lineNumber":121,"author":{"gitId":"-"},"content":"    int64 abstention_count \u003d 11;","isFullCredit":false},{"lineNumber":122,"author":{"gitId":"eanzhao"},"content":"    // Title of this proposal.","isFullCredit":false},{"lineNumber":123,"author":{"gitId":"eanzhao"},"content":"    string title \u003d 12;","isFullCredit":false},{"lineNumber":124,"author":{"gitId":"eanzhao"},"content":"    // Description of this proposal.","isFullCredit":false},{"lineNumber":125,"author":{"gitId":"eanzhao"},"content":"    string description \u003d 13;","isFullCredit":false},{"lineNumber":126,"author":{"gitId":"-"},"content":"}","isFullCredit":false},{"lineNumber":127,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":128,"author":{"gitId":"-"},"content":"message ProposalReleaseThreshold {","isFullCredit":false},{"lineNumber":129,"author":{"gitId":"-"},"content":"    // The value for the minimum approval threshold.","isFullCredit":false},{"lineNumber":130,"author":{"gitId":"-"},"content":"    int64 minimal_approval_threshold \u003d 1;","isFullCredit":false},{"lineNumber":131,"author":{"gitId":"-"},"content":"    // The value for the maximal rejection threshold.","isFullCredit":false},{"lineNumber":132,"author":{"gitId":"-"},"content":"    int64 maximal_rejection_threshold \u003d 2;","isFullCredit":false},{"lineNumber":133,"author":{"gitId":"-"},"content":"    // The value for the maximal abstention threshold.","isFullCredit":false},{"lineNumber":134,"author":{"gitId":"-"},"content":"    int64 maximal_abstention_threshold \u003d 3;","isFullCredit":false},{"lineNumber":135,"author":{"gitId":"-"},"content":"    // The value for the minimal vote threshold.","isFullCredit":false},{"lineNumber":136,"author":{"gitId":"-"},"content":"    int64 minimal_vote_threshold \u003d 4;","isFullCredit":false},{"lineNumber":137,"author":{"gitId":"-"},"content":"}","isFullCredit":false},{"lineNumber":138,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":139,"author":{"gitId":"-"},"content":"message ProposerWhiteList{","isFullCredit":false},{"lineNumber":140,"author":{"gitId":"-"},"content":"    // The address of the proposers","isFullCredit":false},{"lineNumber":141,"author":{"gitId":"-"},"content":"    repeated aelf.Address proposers \u003d 1;","isFullCredit":false},{"lineNumber":142,"author":{"gitId":"-"},"content":"}","isFullCredit":false},{"lineNumber":143,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":144,"author":{"gitId":"-"},"content":"message OrganizationHashAddressPair{","isFullCredit":false},{"lineNumber":145,"author":{"gitId":"-"},"content":"    // The id of organization.","isFullCredit":false},{"lineNumber":146,"author":{"gitId":"-"},"content":"    aelf.Hash organization_hash \u003d 1;","isFullCredit":false},{"lineNumber":147,"author":{"gitId":"-"},"content":"    // The address of organization.","isFullCredit":false},{"lineNumber":148,"author":{"gitId":"-"},"content":"    aelf.Address organization_address \u003d 2;","isFullCredit":false},{"lineNumber":149,"author":{"gitId":"-"},"content":"}","isFullCredit":false},{"lineNumber":150,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":151,"author":{"gitId":"-"},"content":"message CreateProposalBySystemContractInput {","isFullCredit":false},{"lineNumber":152,"author":{"gitId":"-"},"content":"    // The parameters of creating proposal.","isFullCredit":false},{"lineNumber":153,"author":{"gitId":"-"},"content":"    acs3.CreateProposalInput proposal_input \u003d1;","isFullCredit":false},{"lineNumber":154,"author":{"gitId":"-"},"content":"    // The actor that trigger the call.","isFullCredit":false},{"lineNumber":155,"author":{"gitId":"-"},"content":"    aelf.Address origin_proposer \u003d 2;","isFullCredit":false},{"lineNumber":156,"author":{"gitId":"-"},"content":"}","isFullCredit":false},{"lineNumber":157,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":158,"author":{"gitId":"-"},"content":"message ValidateProposerInWhiteListInput{","isFullCredit":false},{"lineNumber":159,"author":{"gitId":"-"},"content":"    // The address to search/check.","isFullCredit":false},{"lineNumber":160,"author":{"gitId":"-"},"content":"    aelf.Address proposer \u003d 1;","isFullCredit":false},{"lineNumber":161,"author":{"gitId":"-"},"content":"    // The address of the organization.","isFullCredit":false},{"lineNumber":162,"author":{"gitId":"-"},"content":"    aelf.Address organization_address \u003d 2;","isFullCredit":false},{"lineNumber":163,"author":{"gitId":"-"},"content":"}","isFullCredit":false},{"lineNumber":164,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":165,"author":{"gitId":"-"},"content":"message ProposalCreated{","isFullCredit":false},{"lineNumber":166,"author":{"gitId":"-"},"content":"    option (aelf.is_event) \u003d true;","isFullCredit":false},{"lineNumber":167,"author":{"gitId":"-"},"content":"    // The id of the created proposal.","isFullCredit":false},{"lineNumber":168,"author":{"gitId":"-"},"content":"    aelf.Hash proposal_id \u003d 1;","isFullCredit":false},{"lineNumber":169,"author":{"gitId":"-"},"content":"    // The organization address of the created proposal.","isFullCredit":false},{"lineNumber":170,"author":{"gitId":"-"},"content":"    aelf.Address organization_address \u003d 2 [(aelf.is_indexed) \u003d true];","isFullCredit":false},{"lineNumber":171,"author":{"gitId":"eanzhao"},"content":"    // Title of this proposal.","isFullCredit":false},{"lineNumber":172,"author":{"gitId":"eanzhao"},"content":"    string title \u003d 3;","isFullCredit":false},{"lineNumber":173,"author":{"gitId":"eanzhao"},"content":"    // Description of this proposal.","isFullCredit":false},{"lineNumber":174,"author":{"gitId":"eanzhao"},"content":"    string description \u003d 4;","isFullCredit":false},{"lineNumber":175,"author":{"gitId":"-"},"content":"}","isFullCredit":false},{"lineNumber":176,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":177,"author":{"gitId":"-"},"content":"message ProposalReleased{","isFullCredit":false},{"lineNumber":178,"author":{"gitId":"-"},"content":"    option (aelf.is_event) \u003d true;","isFullCredit":false},{"lineNumber":179,"author":{"gitId":"-"},"content":"    // The id of the released proposal.","isFullCredit":false},{"lineNumber":180,"author":{"gitId":"-"},"content":"    aelf.Hash proposal_id \u003d 1;","isFullCredit":false},{"lineNumber":181,"author":{"gitId":"-"},"content":"    // The organization address of the released proposal.","isFullCredit":false},{"lineNumber":182,"author":{"gitId":"-"},"content":"    aelf.Address organization_address\u003d2 [(aelf.is_indexed) \u003d true];","isFullCredit":false},{"lineNumber":183,"author":{"gitId":"eanzhao"},"content":"    // Title of this proposal.","isFullCredit":false},{"lineNumber":184,"author":{"gitId":"eanzhao"},"content":"    string title \u003d 3;","isFullCredit":false},{"lineNumber":185,"author":{"gitId":"eanzhao"},"content":"    // Description of this proposal.","isFullCredit":false},{"lineNumber":186,"author":{"gitId":"eanzhao"},"content":"    string description \u003d 4;","isFullCredit":false},{"lineNumber":187,"author":{"gitId":"-"},"content":"}","isFullCredit":false},{"lineNumber":188,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":189,"author":{"gitId":"-"},"content":"message OrganizationCreated{","isFullCredit":false},{"lineNumber":190,"author":{"gitId":"-"},"content":"    option (aelf.is_event) \u003d true;","isFullCredit":false},{"lineNumber":191,"author":{"gitId":"-"},"content":"    // The address of the created organization.","isFullCredit":false},{"lineNumber":192,"author":{"gitId":"-"},"content":"    aelf.Address organization_address \u003d 1;","isFullCredit":false},{"lineNumber":193,"author":{"gitId":"-"},"content":"}","isFullCredit":false},{"lineNumber":194,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":195,"author":{"gitId":"-"},"content":"message ReceiptCreated {","isFullCredit":false},{"lineNumber":196,"author":{"gitId":"-"},"content":"    option (aelf.is_event) \u003d true;","isFullCredit":false},{"lineNumber":197,"author":{"gitId":"-"},"content":"    // The id of the proposal.","isFullCredit":false},{"lineNumber":198,"author":{"gitId":"-"},"content":"    aelf.Hash proposal_id \u003d 1;","isFullCredit":false},{"lineNumber":199,"author":{"gitId":"-"},"content":"    // The sender address.","isFullCredit":false},{"lineNumber":200,"author":{"gitId":"-"},"content":"    aelf.Address address \u003d 2;","isFullCredit":false},{"lineNumber":201,"author":{"gitId":"-"},"content":"    // The type of receipt(Approve, Reject or Abstain).","isFullCredit":false},{"lineNumber":202,"author":{"gitId":"-"},"content":"    string receipt_type \u003d 3;","isFullCredit":false},{"lineNumber":203,"author":{"gitId":"-"},"content":"    // The timestamp of this method call.","isFullCredit":false},{"lineNumber":204,"author":{"gitId":"-"},"content":"    google.protobuf.Timestamp time \u003d 4;","isFullCredit":false},{"lineNumber":205,"author":{"gitId":"-"},"content":"    // The address of the organization.","isFullCredit":false},{"lineNumber":206,"author":{"gitId":"-"},"content":"    aelf.Address organization_address \u003d 5 [(aelf.is_indexed) \u003d true];","isFullCredit":false},{"lineNumber":207,"author":{"gitId":"-"},"content":"}","isFullCredit":false},{"lineNumber":208,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":209,"author":{"gitId":"-"},"content":"message OrganizationWhiteListChanged{","isFullCredit":false},{"lineNumber":210,"author":{"gitId":"-"},"content":"    option (aelf.is_event) \u003d true;","isFullCredit":false},{"lineNumber":211,"author":{"gitId":"-"},"content":"    // The organization address.","isFullCredit":false},{"lineNumber":212,"author":{"gitId":"-"},"content":"    aelf.Address organization_address \u003d 1;","isFullCredit":false},{"lineNumber":213,"author":{"gitId":"-"},"content":"    // The new proposer whitelist.","isFullCredit":false},{"lineNumber":214,"author":{"gitId":"-"},"content":"    ProposerWhiteList proposer_white_list \u003d 2;","isFullCredit":false},{"lineNumber":215,"author":{"gitId":"-"},"content":"}","isFullCredit":false},{"lineNumber":216,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":217,"author":{"gitId":"-"},"content":"message OrganizationThresholdChanged{","isFullCredit":false},{"lineNumber":218,"author":{"gitId":"-"},"content":"    option (aelf.is_event) \u003d true;","isFullCredit":false},{"lineNumber":219,"author":{"gitId":"-"},"content":"    // The organization address","isFullCredit":false},{"lineNumber":220,"author":{"gitId":"-"},"content":"    aelf.Address organization_address \u003d 1;","isFullCredit":false},{"lineNumber":221,"author":{"gitId":"-"},"content":"    // The new release threshold.","isFullCredit":false},{"lineNumber":222,"author":{"gitId":"-"},"content":"    ProposalReleaseThreshold proposer_release_threshold \u003d 2;","isFullCredit":false},{"lineNumber":223,"author":{"gitId":"-"},"content":"}","isFullCredit":false}],"authorContributionMap":{"eanzhao":16,"-":207}},{"path":"protobuf/association_contract.proto","fileType":"proto","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"/**","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"-"},"content":" * Association contract.","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"-"},"content":" */","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"-"},"content":"syntax \u003d \"proto3\";","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"-"},"content":"package Association;","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"-"},"content":"import \"acs3.proto\";","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"-"},"content":"import \"aelf/options.proto\";","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"-"},"content":"import \"google/protobuf/empty.proto\";","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"-"},"content":"import \"google/protobuf/wrappers.proto\";","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"-"},"content":"option csharp_namespace \u003d \"AElf.Contracts.Association\";","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"-"},"content":"service AssociationContract {","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"-"},"content":"    ","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"-"},"content":"    option (aelf.csharp_state) \u003d \"AElf.Contracts.Association.AssociationState\";","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"-"},"content":"    ","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"-"},"content":"    // Create an organization and return its address.  ","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"-"},"content":"    rpc CreateOrganization (CreateOrganizationInput) returns (aelf.Address) {","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"-"},"content":"    ","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"-"},"content":"    // Creates an organization by system contract and return its address. ","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"-"},"content":"    rpc CreateOrganizationBySystemContract(CreateOrganizationBySystemContractInput) returns (aelf.Address){","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"-"},"content":"    ","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"-"},"content":"    // Add organization members.","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"-"},"content":"    rpc AddMember(aelf.Address) returns (google.protobuf.Empty){","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"-"},"content":"    ","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"-"},"content":"    // Remove organization members.","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"-"},"content":"    rpc RemoveMember(aelf.Address) returns (google.protobuf.Empty){","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"-"},"content":"    ","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"-"},"content":"    // Replace organization member with a new member.","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"-"},"content":"    rpc ChangeMember(ChangeMemberInput) returns (google.protobuf.Empty){","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"-"},"content":"    ","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"-"},"content":"    // Get the organization according to the organization address.","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"-"},"content":"    rpc GetOrganization (aelf.Address) returns (Organization) {","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"-"},"content":"        option (aelf.is_view) \u003d true;","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"-"},"content":"    ","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"-"},"content":"    // Calculate the input and return the organization address.","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"-"},"content":"    rpc CalculateOrganizationAddress(CreateOrganizationInput) returns (aelf.Address){","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"-"},"content":"        option (aelf.is_view) \u003d true;","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"-"},"content":"}","isFullCredit":false},{"lineNumber":49,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":50,"author":{"gitId":"-"},"content":"message CreateOrganizationInput{","isFullCredit":false},{"lineNumber":51,"author":{"gitId":"-"},"content":"    // Initial organization members.","isFullCredit":false},{"lineNumber":52,"author":{"gitId":"-"},"content":"    OrganizationMemberList organization_member_list \u003d 1;","isFullCredit":false},{"lineNumber":53,"author":{"gitId":"-"},"content":"    // The threshold for releasing the proposal.","isFullCredit":false},{"lineNumber":54,"author":{"gitId":"-"},"content":"    acs3.ProposalReleaseThreshold proposal_release_threshold \u003d 2;","isFullCredit":false},{"lineNumber":55,"author":{"gitId":"-"},"content":"    // The proposer whitelist.","isFullCredit":false},{"lineNumber":56,"author":{"gitId":"-"},"content":"    acs3.ProposerWhiteList proposer_white_list \u003d 3;","isFullCredit":false},{"lineNumber":57,"author":{"gitId":"-"},"content":"    // The creation token is for organization address generation.","isFullCredit":false},{"lineNumber":58,"author":{"gitId":"-"},"content":"    aelf.Hash creation_token \u003d 4;","isFullCredit":false},{"lineNumber":59,"author":{"gitId":"-"},"content":"}","isFullCredit":false},{"lineNumber":60,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":61,"author":{"gitId":"-"},"content":"message Organization{","isFullCredit":false},{"lineNumber":62,"author":{"gitId":"-"},"content":"    // The organization members.","isFullCredit":false},{"lineNumber":63,"author":{"gitId":"-"},"content":"    OrganizationMemberList organization_member_list \u003d 1;","isFullCredit":false},{"lineNumber":64,"author":{"gitId":"-"},"content":"    // The threshold for releasing the proposal.","isFullCredit":false},{"lineNumber":65,"author":{"gitId":"-"},"content":"    acs3.ProposalReleaseThreshold proposal_release_threshold \u003d 2;","isFullCredit":false},{"lineNumber":66,"author":{"gitId":"-"},"content":"    // The proposer whitelist.","isFullCredit":false},{"lineNumber":67,"author":{"gitId":"-"},"content":"    acs3.ProposerWhiteList proposer_white_list \u003d 3;","isFullCredit":false},{"lineNumber":68,"author":{"gitId":"-"},"content":"    // The address of organization.","isFullCredit":false},{"lineNumber":69,"author":{"gitId":"-"},"content":"    aelf.Address organization_address \u003d 4;","isFullCredit":false},{"lineNumber":70,"author":{"gitId":"-"},"content":"    // The organizations id.","isFullCredit":false},{"lineNumber":71,"author":{"gitId":"-"},"content":"    aelf.Hash organization_hash \u003d 5;","isFullCredit":false},{"lineNumber":72,"author":{"gitId":"-"},"content":"    // The creation token is for organization address generation.","isFullCredit":false},{"lineNumber":73,"author":{"gitId":"-"},"content":"    aelf.Hash creation_token \u003d 6;","isFullCredit":false},{"lineNumber":74,"author":{"gitId":"-"},"content":"}","isFullCredit":false},{"lineNumber":75,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":76,"author":{"gitId":"-"},"content":"message ProposalInfo {","isFullCredit":false},{"lineNumber":77,"author":{"gitId":"-"},"content":"    // The proposal ID.","isFullCredit":false},{"lineNumber":78,"author":{"gitId":"-"},"content":"    aelf.Hash proposal_id \u003d 1;","isFullCredit":false},{"lineNumber":79,"author":{"gitId":"-"},"content":"    // The method that this proposal will call when being released.","isFullCredit":false},{"lineNumber":80,"author":{"gitId":"-"},"content":"    string contract_method_name \u003d 2;","isFullCredit":false},{"lineNumber":81,"author":{"gitId":"-"},"content":"    // The address of the target contract.","isFullCredit":false},{"lineNumber":82,"author":{"gitId":"-"},"content":"    aelf.Address to_address \u003d 3;","isFullCredit":false},{"lineNumber":83,"author":{"gitId":"-"},"content":"    // The parameters of the release transaction.","isFullCredit":false},{"lineNumber":84,"author":{"gitId":"-"},"content":"    bytes params \u003d 4;","isFullCredit":false},{"lineNumber":85,"author":{"gitId":"-"},"content":"    // The date at which this proposal will expire.","isFullCredit":false},{"lineNumber":86,"author":{"gitId":"-"},"content":"    google.protobuf.Timestamp expired_time \u003d 5;","isFullCredit":false},{"lineNumber":87,"author":{"gitId":"-"},"content":"    // The address of the proposer of this proposal.","isFullCredit":false},{"lineNumber":88,"author":{"gitId":"-"},"content":"    aelf.Address proposer \u003d 6;","isFullCredit":false},{"lineNumber":89,"author":{"gitId":"-"},"content":"    // The address of this proposals organization.","isFullCredit":false},{"lineNumber":90,"author":{"gitId":"-"},"content":"    aelf.Address organization_address \u003d 7;","isFullCredit":false},{"lineNumber":91,"author":{"gitId":"-"},"content":"    // Address list of approved.","isFullCredit":false},{"lineNumber":92,"author":{"gitId":"-"},"content":"    repeated aelf.Address approvals \u003d 8;","isFullCredit":false},{"lineNumber":93,"author":{"gitId":"-"},"content":"    // Address list of rejected.","isFullCredit":false},{"lineNumber":94,"author":{"gitId":"-"},"content":"    repeated aelf.Address rejections \u003d 9;","isFullCredit":false},{"lineNumber":95,"author":{"gitId":"-"},"content":"    // Address list of abstained.","isFullCredit":false},{"lineNumber":96,"author":{"gitId":"-"},"content":"    repeated aelf.Address abstentions \u003d 10;","isFullCredit":false},{"lineNumber":97,"author":{"gitId":"-"},"content":"    // Url is used for proposal describing.","isFullCredit":false},{"lineNumber":98,"author":{"gitId":"-"},"content":"    string proposal_description_url \u003d 11;","isFullCredit":false},{"lineNumber":99,"author":{"gitId":"eanzhao"},"content":"    // Title of this proposal.","isFullCredit":false},{"lineNumber":100,"author":{"gitId":"eanzhao"},"content":"    string title \u003d 12;","isFullCredit":false},{"lineNumber":101,"author":{"gitId":"eanzhao"},"content":"    // Description of this proposal.","isFullCredit":false},{"lineNumber":102,"author":{"gitId":"eanzhao"},"content":"    string description \u003d 13;","isFullCredit":false},{"lineNumber":103,"author":{"gitId":"-"},"content":"}","isFullCredit":false},{"lineNumber":104,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":105,"author":{"gitId":"-"},"content":"message OrganizationMemberList {","isFullCredit":false},{"lineNumber":106,"author":{"gitId":"-"},"content":"    // The address of organization members.","isFullCredit":false},{"lineNumber":107,"author":{"gitId":"-"},"content":"    repeated aelf.Address organization_members \u003d 1;","isFullCredit":false},{"lineNumber":108,"author":{"gitId":"-"},"content":"}","isFullCredit":false},{"lineNumber":109,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":110,"author":{"gitId":"-"},"content":"message ChangeMemberInput{","isFullCredit":false},{"lineNumber":111,"author":{"gitId":"-"},"content":"    // The old member address.","isFullCredit":false},{"lineNumber":112,"author":{"gitId":"-"},"content":"    aelf.Address old_member \u003d 1;","isFullCredit":false},{"lineNumber":113,"author":{"gitId":"-"},"content":"    // The new member address.","isFullCredit":false},{"lineNumber":114,"author":{"gitId":"-"},"content":"    aelf.Address new_member \u003d 2;","isFullCredit":false},{"lineNumber":115,"author":{"gitId":"-"},"content":"}","isFullCredit":false},{"lineNumber":116,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":117,"author":{"gitId":"-"},"content":"message CreateOrganizationBySystemContractInput {","isFullCredit":false},{"lineNumber":118,"author":{"gitId":"-"},"content":"    // The parameters of creating organization.","isFullCredit":false},{"lineNumber":119,"author":{"gitId":"-"},"content":"    CreateOrganizationInput organization_creation_input \u003d 1;","isFullCredit":false},{"lineNumber":120,"author":{"gitId":"-"},"content":"    // The organization address callback method which replies the organization address to caller contract.","isFullCredit":false},{"lineNumber":121,"author":{"gitId":"-"},"content":"    string organization_address_feedback_method \u003d 2;","isFullCredit":false},{"lineNumber":122,"author":{"gitId":"-"},"content":"}","isFullCredit":false},{"lineNumber":123,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":124,"author":{"gitId":"-"},"content":"message MemberAdded{","isFullCredit":false},{"lineNumber":125,"author":{"gitId":"-"},"content":"    option (aelf.is_event) \u003d true;","isFullCredit":false},{"lineNumber":126,"author":{"gitId":"-"},"content":"    // The added member address.","isFullCredit":false},{"lineNumber":127,"author":{"gitId":"-"},"content":"    aelf.Address member \u003d 1;","isFullCredit":false},{"lineNumber":128,"author":{"gitId":"-"},"content":"    // The organization address.","isFullCredit":false},{"lineNumber":129,"author":{"gitId":"-"},"content":"    aelf.Address organization_address \u003d 2 [(aelf.is_indexed) \u003d true];    ","isFullCredit":false},{"lineNumber":130,"author":{"gitId":"-"},"content":"}","isFullCredit":false},{"lineNumber":131,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":132,"author":{"gitId":"-"},"content":"message MemberRemoved{","isFullCredit":false},{"lineNumber":133,"author":{"gitId":"-"},"content":"    option (aelf.is_event) \u003d true;","isFullCredit":false},{"lineNumber":134,"author":{"gitId":"-"},"content":"    // The removed member address.","isFullCredit":false},{"lineNumber":135,"author":{"gitId":"-"},"content":"    aelf.Address member \u003d 1;","isFullCredit":false},{"lineNumber":136,"author":{"gitId":"-"},"content":"    // The organization address.","isFullCredit":false},{"lineNumber":137,"author":{"gitId":"-"},"content":"    aelf.Address organization_address \u003d 2 [(aelf.is_indexed) \u003d true];","isFullCredit":false},{"lineNumber":138,"author":{"gitId":"-"},"content":"}","isFullCredit":false},{"lineNumber":139,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":140,"author":{"gitId":"-"},"content":"message MemberChanged{","isFullCredit":false},{"lineNumber":141,"author":{"gitId":"-"},"content":"    option (aelf.is_event) \u003d true;","isFullCredit":false},{"lineNumber":142,"author":{"gitId":"-"},"content":"    // The old member address.","isFullCredit":false},{"lineNumber":143,"author":{"gitId":"-"},"content":"    aelf.Address old_member \u003d 1;","isFullCredit":false},{"lineNumber":144,"author":{"gitId":"-"},"content":"    // The new member address.","isFullCredit":false},{"lineNumber":145,"author":{"gitId":"-"},"content":"    aelf.Address new_member \u003d 2;","isFullCredit":false},{"lineNumber":146,"author":{"gitId":"-"},"content":"    // The organization address.","isFullCredit":false},{"lineNumber":147,"author":{"gitId":"-"},"content":"    aelf.Address organization_address \u003d 3 [(aelf.is_indexed) \u003d true];","isFullCredit":false},{"lineNumber":148,"author":{"gitId":"-"},"content":"}","isFullCredit":false}],"authorContributionMap":{"eanzhao":4,"-":144}},{"path":"protobuf/parliament_contract.proto","fileType":"proto","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"/**","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"-"},"content":" * Parliament contract.","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"-"},"content":" */","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"-"},"content":"syntax \u003d \"proto3\";","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"-"},"content":"package Parliament;","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"-"},"content":"import \"acs3.proto\";","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"-"},"content":"import public \"aelf/options.proto\";","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"-"},"content":"import \"google/protobuf/empty.proto\";","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"-"},"content":"import \"google/protobuf/wrappers.proto\";","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"-"},"content":"option csharp_namespace \u003d \"AElf.Contracts.Parliament\";","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"-"},"content":"service ParliamentContract {","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"-"},"content":"    ","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"-"},"content":"    option (aelf.csharp_state) \u003d \"AElf.Contracts.Parliament.ParliamentState\";","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"-"},"content":"    ","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"-"},"content":"    // Initialize parliament proposer whitelist and create the first parliament organization ","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"-"},"content":"    // with specific proposer_authority_required.","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"-"},"content":"    rpc Initialize(InitializeInput) returns (google.protobuf.Empty) {","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"-"},"content":"    // Create an organization and return its address.  ","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"-"},"content":"    rpc CreateOrganization (CreateOrganizationInput) returns (aelf.Address) {","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"-"},"content":"    ","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"-"},"content":"    // Batch approval proposal.","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"-"},"content":"    rpc ApproveMultiProposals(ProposalIdList) returns (google.protobuf.Empty){","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"-"},"content":"    // Creates an organization by system contract and return its address. ","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"-"},"content":"    rpc CreateOrganizationBySystemContract(CreateOrganizationBySystemContractInput) returns (aelf.Address){","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"-"},"content":"    // Creates an organization to handle emergency events.","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"-"},"content":"    rpc CreateEmergencyResponseOrganization (google.protobuf.Empty) returns (google.protobuf.Empty) {","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"-"},"content":"    // Get the organization according to the organization address.","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"-"},"content":"    rpc GetOrganization (aelf.Address) returns (Organization) {","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"-"},"content":"        option (aelf.is_view) \u003d true;","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"-"},"content":"    ","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"-"},"content":"    // Get the default organization address.","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"-"},"content":"    rpc GetDefaultOrganizationAddress (google.protobuf.Empty) returns (aelf.Address) {","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"-"},"content":"        option (aelf.is_view) \u003d true;","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":49,"author":{"gitId":"-"},"content":"    ","isFullCredit":false},{"lineNumber":50,"author":{"gitId":"-"},"content":"    // Validates if the provided address is a parliament member.","isFullCredit":false},{"lineNumber":51,"author":{"gitId":"-"},"content":"    rpc ValidateAddressIsParliamentMember(aelf.Address) returns (google.protobuf.BoolValue){","isFullCredit":false},{"lineNumber":52,"author":{"gitId":"-"},"content":"         option (aelf.is_view) \u003d true;","isFullCredit":false},{"lineNumber":53,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":54,"author":{"gitId":"-"},"content":"    ","isFullCredit":false},{"lineNumber":55,"author":{"gitId":"-"},"content":"    // Returns the list of whitelisted proposers.","isFullCredit":false},{"lineNumber":56,"author":{"gitId":"-"},"content":"    rpc GetProposerWhiteList(google.protobuf.Empty) returns (acs3.ProposerWhiteList){","isFullCredit":false},{"lineNumber":57,"author":{"gitId":"-"},"content":"        option (aelf.is_view) \u003d true;","isFullCredit":false},{"lineNumber":58,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":59,"author":{"gitId":"-"},"content":"    ","isFullCredit":false},{"lineNumber":60,"author":{"gitId":"-"},"content":"    // Filter still pending ones not yet voted by the sender from provided proposals.","isFullCredit":false},{"lineNumber":61,"author":{"gitId":"-"},"content":"    rpc GetNotVotedPendingProposals(ProposalIdList) returns (ProposalIdList){","isFullCredit":false},{"lineNumber":62,"author":{"gitId":"-"},"content":"        option (aelf.is_view) \u003d true;","isFullCredit":false},{"lineNumber":63,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":64,"author":{"gitId":"-"},"content":"    ","isFullCredit":false},{"lineNumber":65,"author":{"gitId":"-"},"content":"    // Filter not yet voted ones by the sender from provided proposals.","isFullCredit":false},{"lineNumber":66,"author":{"gitId":"-"},"content":"    rpc GetNotVotedProposals(ProposalIdList) returns (ProposalIdList){","isFullCredit":false},{"lineNumber":67,"author":{"gitId":"-"},"content":"        option (aelf.is_view) \u003d true;","isFullCredit":false},{"lineNumber":68,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":69,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":70,"author":{"gitId":"-"},"content":"    // Filter reached release threshold proposals.","isFullCredit":false},{"lineNumber":71,"author":{"gitId":"-"},"content":"    rpc GetReleaseThresholdReachedProposals(ProposalIdList) returns (ProposalIdList){","isFullCredit":false},{"lineNumber":72,"author":{"gitId":"-"},"content":"        option (aelf.is_view) \u003d true;","isFullCredit":false},{"lineNumber":73,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":74,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":75,"author":{"gitId":"-"},"content":"    // Filter available proposals.","isFullCredit":false},{"lineNumber":76,"author":{"gitId":"-"},"content":"    rpc GetAvailableProposals(ProposalIdList) returns (ProposalIdList){","isFullCredit":false},{"lineNumber":77,"author":{"gitId":"-"},"content":"        option (aelf.is_view) \u003d true;","isFullCredit":false},{"lineNumber":78,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":79,"author":{"gitId":"-"},"content":"    ","isFullCredit":false},{"lineNumber":80,"author":{"gitId":"-"},"content":"    // Calculates with input and return the organization address.","isFullCredit":false},{"lineNumber":81,"author":{"gitId":"-"},"content":"    rpc CalculateOrganizationAddress(CreateOrganizationInput) returns (aelf.Address){","isFullCredit":false},{"lineNumber":82,"author":{"gitId":"-"},"content":"        option (aelf.is_view) \u003d true;","isFullCredit":false},{"lineNumber":83,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":84,"author":{"gitId":"-"},"content":"    ","isFullCredit":false},{"lineNumber":85,"author":{"gitId":"-"},"content":"    rpc GetEmergencyResponseOrganizationAddress (google.protobuf.Empty) returns (aelf.Address) {","isFullCredit":false},{"lineNumber":86,"author":{"gitId":"-"},"content":"        option (aelf.is_view) \u003d true;","isFullCredit":false},{"lineNumber":87,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":88,"author":{"gitId":"-"},"content":"}","isFullCredit":false},{"lineNumber":89,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":90,"author":{"gitId":"-"},"content":"message CreateOrganizationInput {","isFullCredit":false},{"lineNumber":91,"author":{"gitId":"-"},"content":"    // The threshold for releasing the proposal.","isFullCredit":false},{"lineNumber":92,"author":{"gitId":"-"},"content":"    acs3.ProposalReleaseThreshold proposal_release_threshold \u003d 1;","isFullCredit":false},{"lineNumber":93,"author":{"gitId":"-"},"content":"    // Setting this to false will allow anyone creating proposals.","isFullCredit":false},{"lineNumber":94,"author":{"gitId":"-"},"content":"    bool proposer_authority_required \u003d 2;","isFullCredit":false},{"lineNumber":95,"author":{"gitId":"-"},"content":"    // Setting this to true can allow parliament member to create proposals.","isFullCredit":false},{"lineNumber":96,"author":{"gitId":"-"},"content":"    bool parliament_member_proposing_allowed \u003d 3;","isFullCredit":false},{"lineNumber":97,"author":{"gitId":"-"},"content":"    // The creation token is for organization address generation.","isFullCredit":false},{"lineNumber":98,"author":{"gitId":"-"},"content":"    aelf.Hash creation_token \u003d 4;","isFullCredit":false},{"lineNumber":99,"author":{"gitId":"-"},"content":"}","isFullCredit":false},{"lineNumber":100,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":101,"author":{"gitId":"-"},"content":"message Organization {","isFullCredit":false},{"lineNumber":102,"author":{"gitId":"-"},"content":"    // Indicates if proposals need authority to be created.","isFullCredit":false},{"lineNumber":103,"author":{"gitId":"-"},"content":"    bool proposer_authority_required \u003d 1;","isFullCredit":false},{"lineNumber":104,"author":{"gitId":"-"},"content":"    // The organization address.","isFullCredit":false},{"lineNumber":105,"author":{"gitId":"-"},"content":"    aelf.Address organization_address \u003d 2;","isFullCredit":false},{"lineNumber":106,"author":{"gitId":"-"},"content":"    // The organization id.","isFullCredit":false},{"lineNumber":107,"author":{"gitId":"-"},"content":"    aelf.Hash organization_hash \u003d 3;","isFullCredit":false},{"lineNumber":108,"author":{"gitId":"-"},"content":"    // The threshold for releasing the proposal.","isFullCredit":false},{"lineNumber":109,"author":{"gitId":"-"},"content":"    acs3.ProposalReleaseThreshold proposal_release_threshold \u003d 4;","isFullCredit":false},{"lineNumber":110,"author":{"gitId":"-"},"content":"    // Indicates if parliament member can propose to this organization.","isFullCredit":false},{"lineNumber":111,"author":{"gitId":"-"},"content":"    bool parliament_member_proposing_allowed \u003d 5;","isFullCredit":false},{"lineNumber":112,"author":{"gitId":"-"},"content":"    // The creation token is for organization address generation.","isFullCredit":false},{"lineNumber":113,"author":{"gitId":"-"},"content":"    aelf.Hash creation_token \u003d 6;","isFullCredit":false},{"lineNumber":114,"author":{"gitId":"-"},"content":"}","isFullCredit":false},{"lineNumber":115,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":116,"author":{"gitId":"-"},"content":"message ProposalInfo {","isFullCredit":false},{"lineNumber":117,"author":{"gitId":"-"},"content":"    // The proposal ID.","isFullCredit":false},{"lineNumber":118,"author":{"gitId":"-"},"content":"    aelf.Hash proposal_id \u003d 1;","isFullCredit":false},{"lineNumber":119,"author":{"gitId":"-"},"content":"    // The method that this proposal will call when being released.","isFullCredit":false},{"lineNumber":120,"author":{"gitId":"-"},"content":"    string contract_method_name \u003d 2;","isFullCredit":false},{"lineNumber":121,"author":{"gitId":"-"},"content":"    // The address of the target contract.","isFullCredit":false},{"lineNumber":122,"author":{"gitId":"-"},"content":"    aelf.Address to_address \u003d 3;","isFullCredit":false},{"lineNumber":123,"author":{"gitId":"-"},"content":"    // The parameters of the release transaction.","isFullCredit":false},{"lineNumber":124,"author":{"gitId":"-"},"content":"    bytes params \u003d 4;","isFullCredit":false},{"lineNumber":125,"author":{"gitId":"-"},"content":"    // The date at which this proposal will expire.","isFullCredit":false},{"lineNumber":126,"author":{"gitId":"-"},"content":"    google.protobuf.Timestamp expired_time \u003d 5;","isFullCredit":false},{"lineNumber":127,"author":{"gitId":"-"},"content":"    // The address of the proposer of this proposal.","isFullCredit":false},{"lineNumber":128,"author":{"gitId":"-"},"content":"    aelf.Address proposer \u003d 6;","isFullCredit":false},{"lineNumber":129,"author":{"gitId":"-"},"content":"    // The address of this proposals organization.","isFullCredit":false},{"lineNumber":130,"author":{"gitId":"-"},"content":"    aelf.Address organization_address \u003d 7;","isFullCredit":false},{"lineNumber":131,"author":{"gitId":"-"},"content":"    // Address list of approved.","isFullCredit":false},{"lineNumber":132,"author":{"gitId":"-"},"content":"    repeated aelf.Address approvals \u003d 8;","isFullCredit":false},{"lineNumber":133,"author":{"gitId":"-"},"content":"    // Address list of rejected.","isFullCredit":false},{"lineNumber":134,"author":{"gitId":"-"},"content":"    repeated aelf.Address rejections \u003d 9;","isFullCredit":false},{"lineNumber":135,"author":{"gitId":"-"},"content":"    // Address list of abstained.","isFullCredit":false},{"lineNumber":136,"author":{"gitId":"-"},"content":"    repeated aelf.Address abstentions \u003d 10;","isFullCredit":false},{"lineNumber":137,"author":{"gitId":"-"},"content":"    // Url is used for proposal describing.","isFullCredit":false},{"lineNumber":138,"author":{"gitId":"-"},"content":"    string proposal_description_url \u003d 11;","isFullCredit":false},{"lineNumber":139,"author":{"gitId":"eanzhao"},"content":"    // Title of this proposal.","isFullCredit":false},{"lineNumber":140,"author":{"gitId":"eanzhao"},"content":"    string title \u003d 12;","isFullCredit":false},{"lineNumber":141,"author":{"gitId":"eanzhao"},"content":"    // Description of this proposal.","isFullCredit":false},{"lineNumber":142,"author":{"gitId":"eanzhao"},"content":"    string description \u003d 13;","isFullCredit":false},{"lineNumber":143,"author":{"gitId":"-"},"content":"}","isFullCredit":false},{"lineNumber":144,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":145,"author":{"gitId":"-"},"content":"message InitializeInput{","isFullCredit":false},{"lineNumber":146,"author":{"gitId":"-"},"content":"    // Privileged proposer would be the first address in parliament proposer whitelist.","isFullCredit":false},{"lineNumber":147,"author":{"gitId":"-"},"content":"    aelf.Address privileged_proposer \u003d 1;","isFullCredit":false},{"lineNumber":148,"author":{"gitId":"-"},"content":"    // The setting indicates if proposals need authority to be created for first/default parliament organization.","isFullCredit":false},{"lineNumber":149,"author":{"gitId":"-"},"content":"    bool proposer_authority_required \u003d 2;","isFullCredit":false},{"lineNumber":150,"author":{"gitId":"-"},"content":"}","isFullCredit":false},{"lineNumber":151,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":152,"author":{"gitId":"-"},"content":"message ProposalIdList{","isFullCredit":false},{"lineNumber":153,"author":{"gitId":"-"},"content":"    // The list of proposal ids.","isFullCredit":false},{"lineNumber":154,"author":{"gitId":"-"},"content":"    repeated aelf.Hash proposal_ids \u003d 1;","isFullCredit":false},{"lineNumber":155,"author":{"gitId":"-"},"content":"}","isFullCredit":false},{"lineNumber":156,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":157,"author":{"gitId":"-"},"content":"message CreateOrganizationBySystemContractInput {","isFullCredit":false},{"lineNumber":158,"author":{"gitId":"-"},"content":"    // The parameters of creating organization.","isFullCredit":false},{"lineNumber":159,"author":{"gitId":"-"},"content":"    CreateOrganizationInput organization_creation_input \u003d 1;","isFullCredit":false},{"lineNumber":160,"author":{"gitId":"-"},"content":"    // The organization address callback method which replies the organization address to caller contract.","isFullCredit":false},{"lineNumber":161,"author":{"gitId":"-"},"content":"    string organization_address_feedback_method \u003d 2;","isFullCredit":false},{"lineNumber":162,"author":{"gitId":"-"},"content":"}","isFullCredit":false}],"authorContributionMap":{"eanzhao":4,"-":158}},{"path":"protobuf/referendum_contract.proto","fileType":"proto","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"/**","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"-"},"content":" * Referendum contract.","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"-"},"content":" */","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"-"},"content":"syntax \u003d \"proto3\";","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"-"},"content":"package Referendum;","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"-"},"content":"import \"aelf/options.proto\";","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"-"},"content":"import \"google/protobuf/empty.proto\";","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"-"},"content":"import \"aelf/core.proto\";","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"-"},"content":"import \"acs3.proto\";","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"-"},"content":"option csharp_namespace \u003d \"AElf.Contracts.Referendum\";","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"-"},"content":"service ReferendumContract {","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"-"},"content":"    option (aelf.csharp_state) \u003d \"AElf.Contracts.Referendum.ReferendumState\";","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"-"},"content":"    // Unlock the token used for voting according to proposal id.","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"-"},"content":"    rpc ReclaimVoteToken (aelf.Hash) returns (google.protobuf.Empty) {","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"-"},"content":"    // Create an organization and return its address.  ","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"-"},"content":"    rpc CreateOrganization (CreateOrganizationInput) returns (aelf.Address) {","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"-"},"content":"    // Creates an organization by system contract and return its address. ","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"-"},"content":"    rpc CreateOrganizationBySystemContract (CreateOrganizationBySystemContractInput) returns (aelf.Address) {","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"-"},"content":"    // Get the organization according to the organization address.","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"-"},"content":"    rpc GetOrganization (aelf.Address) returns (Organization) {","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"-"},"content":"        option (aelf.is_view) \u003d true;","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"-"},"content":"    // Calculate the input and return the organization address.","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"-"},"content":"    rpc CalculateOrganizationAddress (CreateOrganizationInput) returns (aelf.Address) {","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"-"},"content":"        option (aelf.is_view) \u003d true;","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"-"},"content":"    // Get the virtual address of a proposal based on the proposal id.","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"-"},"content":"    rpc GetProposalVirtualAddress (aelf.Hash) returns (aelf.Address) {","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"-"},"content":"}","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"-"},"content":"message CreateOrganizationInput {","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"-"},"content":"    // The token used during proposal operations.","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"-"},"content":"    string token_symbol \u003d 1;","isFullCredit":false},{"lineNumber":49,"author":{"gitId":"-"},"content":"    // The threshold for releasing the proposal.","isFullCredit":false},{"lineNumber":50,"author":{"gitId":"-"},"content":"    acs3.ProposalReleaseThreshold proposal_release_threshold \u003d 2;","isFullCredit":false},{"lineNumber":51,"author":{"gitId":"-"},"content":"    // The proposer whitelist.","isFullCredit":false},{"lineNumber":52,"author":{"gitId":"-"},"content":"    acs3.ProposerWhiteList proposer_white_list \u003d 3;","isFullCredit":false},{"lineNumber":53,"author":{"gitId":"-"},"content":"    // The creation token is for organization address generation.","isFullCredit":false},{"lineNumber":54,"author":{"gitId":"-"},"content":"    aelf.Hash creation_token \u003d 4;","isFullCredit":false},{"lineNumber":55,"author":{"gitId":"-"},"content":"}","isFullCredit":false},{"lineNumber":56,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":57,"author":{"gitId":"-"},"content":"message Organization {","isFullCredit":false},{"lineNumber":58,"author":{"gitId":"-"},"content":"    // The threshold for releasing the proposal.","isFullCredit":false},{"lineNumber":59,"author":{"gitId":"-"},"content":"    acs3.ProposalReleaseThreshold proposal_release_threshold \u003d 1;","isFullCredit":false},{"lineNumber":60,"author":{"gitId":"-"},"content":"    // The token used during proposal operations.","isFullCredit":false},{"lineNumber":61,"author":{"gitId":"-"},"content":"    string token_symbol \u003d 2;","isFullCredit":false},{"lineNumber":62,"author":{"gitId":"-"},"content":"    // The address of organization.","isFullCredit":false},{"lineNumber":63,"author":{"gitId":"-"},"content":"    aelf.Address organization_address \u003d 3;","isFullCredit":false},{"lineNumber":64,"author":{"gitId":"-"},"content":"    // The organizations id.","isFullCredit":false},{"lineNumber":65,"author":{"gitId":"-"},"content":"    aelf.Hash organization_hash \u003d 4;","isFullCredit":false},{"lineNumber":66,"author":{"gitId":"-"},"content":"    // The proposer whitelist.","isFullCredit":false},{"lineNumber":67,"author":{"gitId":"-"},"content":"    acs3.ProposerWhiteList proposer_white_list \u003d 5;","isFullCredit":false},{"lineNumber":68,"author":{"gitId":"-"},"content":"    // The creation token is for organization address generation.","isFullCredit":false},{"lineNumber":69,"author":{"gitId":"-"},"content":"    aelf.Hash creation_token \u003d 6;","isFullCredit":false},{"lineNumber":70,"author":{"gitId":"-"},"content":"}","isFullCredit":false},{"lineNumber":71,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":72,"author":{"gitId":"-"},"content":"message Receipt {","isFullCredit":false},{"lineNumber":73,"author":{"gitId":"-"},"content":"    // The amount of token locked.","isFullCredit":false},{"lineNumber":74,"author":{"gitId":"-"},"content":"    int64 amount \u003d 1;","isFullCredit":false},{"lineNumber":75,"author":{"gitId":"-"},"content":"    // The symbol of token locked.","isFullCredit":false},{"lineNumber":76,"author":{"gitId":"-"},"content":"    string token_symbol \u003d 2;","isFullCredit":false},{"lineNumber":77,"author":{"gitId":"-"},"content":"    // The lock id.","isFullCredit":false},{"lineNumber":78,"author":{"gitId":"-"},"content":"    aelf.Hash lock_id \u003d 3;","isFullCredit":false},{"lineNumber":79,"author":{"gitId":"-"},"content":"}","isFullCredit":false},{"lineNumber":80,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":81,"author":{"gitId":"-"},"content":"message ProposalInfo {","isFullCredit":false},{"lineNumber":82,"author":{"gitId":"-"},"content":"    // The proposal ID.","isFullCredit":false},{"lineNumber":83,"author":{"gitId":"-"},"content":"    aelf.Hash proposal_id \u003d 1;","isFullCredit":false},{"lineNumber":84,"author":{"gitId":"-"},"content":"    // The method that this proposal will call when being released.","isFullCredit":false},{"lineNumber":85,"author":{"gitId":"-"},"content":"    string contract_method_name \u003d 2;","isFullCredit":false},{"lineNumber":86,"author":{"gitId":"-"},"content":"    // The address of the target contract.","isFullCredit":false},{"lineNumber":87,"author":{"gitId":"-"},"content":"    aelf.Address to_address \u003d 3;","isFullCredit":false},{"lineNumber":88,"author":{"gitId":"-"},"content":"    // The parameters of the release transaction.","isFullCredit":false},{"lineNumber":89,"author":{"gitId":"-"},"content":"    bytes params \u003d 4;","isFullCredit":false},{"lineNumber":90,"author":{"gitId":"-"},"content":"    // The date at which this proposal will expire.","isFullCredit":false},{"lineNumber":91,"author":{"gitId":"-"},"content":"    google.protobuf.Timestamp expired_time \u003d 5;","isFullCredit":false},{"lineNumber":92,"author":{"gitId":"-"},"content":"    // The address of the proposer of this proposal.","isFullCredit":false},{"lineNumber":93,"author":{"gitId":"-"},"content":"    aelf.Address proposer \u003d 6;","isFullCredit":false},{"lineNumber":94,"author":{"gitId":"-"},"content":"    // The address of this proposals organization.","isFullCredit":false},{"lineNumber":95,"author":{"gitId":"-"},"content":"    aelf.Address organization_address \u003d 7;","isFullCredit":false},{"lineNumber":96,"author":{"gitId":"-"},"content":"    // The count of approved.","isFullCredit":false},{"lineNumber":97,"author":{"gitId":"-"},"content":"    int64 approval_count \u003d 8;","isFullCredit":false},{"lineNumber":98,"author":{"gitId":"-"},"content":"    // The count of rejected.","isFullCredit":false},{"lineNumber":99,"author":{"gitId":"-"},"content":"    int64 rejection_count \u003d 9;","isFullCredit":false},{"lineNumber":100,"author":{"gitId":"-"},"content":"    // The count of abstained.","isFullCredit":false},{"lineNumber":101,"author":{"gitId":"-"},"content":"    int64 abstention_count \u003d 10;","isFullCredit":false},{"lineNumber":102,"author":{"gitId":"-"},"content":"    // Url is used for proposal describing.","isFullCredit":false},{"lineNumber":103,"author":{"gitId":"-"},"content":"    string proposal_description_url \u003d 11;","isFullCredit":false},{"lineNumber":104,"author":{"gitId":"eanzhao"},"content":"    // Title of this proposal.","isFullCredit":false},{"lineNumber":105,"author":{"gitId":"eanzhao"},"content":"    string title \u003d 12;","isFullCredit":false},{"lineNumber":106,"author":{"gitId":"eanzhao"},"content":"    // Description of this proposal.","isFullCredit":false},{"lineNumber":107,"author":{"gitId":"eanzhao"},"content":"    string description \u003d 13;","isFullCredit":false},{"lineNumber":108,"author":{"gitId":"-"},"content":"}","isFullCredit":false},{"lineNumber":109,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":110,"author":{"gitId":"-"},"content":"message CreateOrganizationBySystemContractInput {","isFullCredit":false},{"lineNumber":111,"author":{"gitId":"-"},"content":"    // The parameters of creating organization.","isFullCredit":false},{"lineNumber":112,"author":{"gitId":"-"},"content":"    CreateOrganizationInput organization_creation_input \u003d 1;","isFullCredit":false},{"lineNumber":113,"author":{"gitId":"-"},"content":"    // The organization address callback method which replies the organization address to caller contract.","isFullCredit":false},{"lineNumber":114,"author":{"gitId":"-"},"content":"    string organization_address_feedback_method \u003d 2;","isFullCredit":false},{"lineNumber":115,"author":{"gitId":"-"},"content":"}","isFullCredit":false},{"lineNumber":116,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":117,"author":{"gitId":"-"},"content":"message ReferendumReceiptCreated {","isFullCredit":false},{"lineNumber":118,"author":{"gitId":"-"},"content":"    option (aelf.is_event) \u003d true;","isFullCredit":false},{"lineNumber":119,"author":{"gitId":"-"},"content":"    // The id of the proposal.","isFullCredit":false},{"lineNumber":120,"author":{"gitId":"-"},"content":"    aelf.Hash proposal_id \u003d 1;","isFullCredit":false},{"lineNumber":121,"author":{"gitId":"-"},"content":"    // The sender address.","isFullCredit":false},{"lineNumber":122,"author":{"gitId":"-"},"content":"    aelf.Address address \u003d 2;","isFullCredit":false},{"lineNumber":123,"author":{"gitId":"-"},"content":"    // The symbol of token locked.","isFullCredit":false},{"lineNumber":124,"author":{"gitId":"-"},"content":"    string symbol \u003d 3;","isFullCredit":false},{"lineNumber":125,"author":{"gitId":"-"},"content":"    // The amount of token locked.","isFullCredit":false},{"lineNumber":126,"author":{"gitId":"-"},"content":"    int64 amount \u003d 4;","isFullCredit":false},{"lineNumber":127,"author":{"gitId":"-"},"content":"    // The type of receipt(Approve, Reject or Abstain).","isFullCredit":false},{"lineNumber":128,"author":{"gitId":"-"},"content":"    string receipt_type \u003d 5;","isFullCredit":false},{"lineNumber":129,"author":{"gitId":"-"},"content":"    // The timestamp of this method call.","isFullCredit":false},{"lineNumber":130,"author":{"gitId":"-"},"content":"    google.protobuf.Timestamp time \u003d 6;","isFullCredit":false},{"lineNumber":131,"author":{"gitId":"-"},"content":"    // The address of the organization.","isFullCredit":false},{"lineNumber":132,"author":{"gitId":"-"},"content":"    aelf.Address organization_address \u003d 7 [(aelf.is_indexed) \u003d true];","isFullCredit":false},{"lineNumber":133,"author":{"gitId":"-"},"content":"}","isFullCredit":false}],"authorContributionMap":{"eanzhao":4,"-":129}},{"path":"test/AElf.Contracts.Association.Tests/AssociationContractTests.cs","fileType":"cs","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"using System.Linq;","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"-"},"content":"using System.Threading.Tasks;","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"-"},"content":"using AElf.Contracts.MultiToken;","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"-"},"content":"using AElf.ContractTestBase.ContractTestKit;","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"-"},"content":"using AElf.Cryptography.ECDSA;","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"-"},"content":"using AElf.CSharp.Core.Extension;","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"-"},"content":"using AElf.GovernmentSystem;","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"-"},"content":"using AElf.Kernel;","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"-"},"content":"using AElf.Kernel.Blockchain.Application;","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"-"},"content":"using AElf.Kernel.SmartContract.Application;","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"-"},"content":"using AElf.Standards.ACS1;","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"-"},"content":"using AElf.Standards.ACS3;","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"-"},"content":"using AElf.Types;","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"-"},"content":"using Google.Protobuf;","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"-"},"content":"using Google.Protobuf.WellKnownTypes;","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"-"},"content":"using Shouldly;","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"-"},"content":"using Xunit;","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"-"},"content":"namespace AElf.Contracts.Association;","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"-"},"content":"public class AssociationContractTests : AssociationContractTestBase\u003cAssociationContractTestAElfModule\u003e","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"-"},"content":"{","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"-"},"content":"    private readonly IBlockchainService _blockchainService;","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"-"},"content":"    private readonly TestDemoSmartContractAddressNameProvider _smartContractAddressNameProvider;","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"-"},"content":"    private readonly ISmartContractAddressService _smartContractAddressService;","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"-"},"content":"    public AssociationContractTests()","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"-"},"content":"        _smartContractAddressService \u003d GetRequiredService\u003cISmartContractAddressService\u003e();","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"-"},"content":"        _blockchainService \u003d GetRequiredService\u003cIBlockchainService\u003e();","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"-"},"content":"        _smartContractAddressNameProvider \u003d GetRequiredService\u003cTestDemoSmartContractAddressNameProvider\u003e();","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"-"},"content":"    public async Task Get_Organization_Test()","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"-"},"content":"        //failed case","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"-"},"content":"            var organization \u003d","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"-"},"content":"                await AssociationContractStub.GetOrganization.CallAsync(Accounts[0].Address);","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"-"},"content":"            organization.ShouldBe(new Organization());","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"-"},"content":"    public async Task CreateOrganization_Success_Test()","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"-"},"content":"        var minimalApproveThreshold \u003d 2;","isFullCredit":false},{"lineNumber":49,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 3;","isFullCredit":false},{"lineNumber":50,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 1;","isFullCredit":false},{"lineNumber":51,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 1;","isFullCredit":false},{"lineNumber":52,"author":{"gitId":"-"},"content":"        var createOrganizationInput \u003d new CreateOrganizationInput","isFullCredit":false},{"lineNumber":53,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":54,"author":{"gitId":"-"},"content":"            OrganizationMemberList \u003d new OrganizationMemberList","isFullCredit":false},{"lineNumber":55,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":56,"author":{"gitId":"-"},"content":"                OrganizationMembers \u003d { Reviewer1, Reviewer2, Reviewer3 }","isFullCredit":false},{"lineNumber":57,"author":{"gitId":"-"},"content":"            },","isFullCredit":false},{"lineNumber":58,"author":{"gitId":"-"},"content":"            ProposalReleaseThreshold \u003d new ProposalReleaseThreshold","isFullCredit":false},{"lineNumber":59,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":60,"author":{"gitId":"-"},"content":"                MinimalApprovalThreshold \u003d minimalApproveThreshold,","isFullCredit":false},{"lineNumber":61,"author":{"gitId":"-"},"content":"                MinimalVoteThreshold \u003d minimalVoteThreshold,","isFullCredit":false},{"lineNumber":62,"author":{"gitId":"-"},"content":"                MaximalAbstentionThreshold \u003d maximalAbstentionThreshold,","isFullCredit":false},{"lineNumber":63,"author":{"gitId":"-"},"content":"                MaximalRejectionThreshold \u003d maximalRejectionThreshold","isFullCredit":false},{"lineNumber":64,"author":{"gitId":"-"},"content":"            },","isFullCredit":false},{"lineNumber":65,"author":{"gitId":"-"},"content":"            ProposerWhiteList \u003d new ProposerWhiteList","isFullCredit":false},{"lineNumber":66,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":67,"author":{"gitId":"-"},"content":"                Proposers \u003d { Reviewer1 }","isFullCredit":false},{"lineNumber":68,"author":{"gitId":"-"},"content":"            }","isFullCredit":false},{"lineNumber":69,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":70,"author":{"gitId":"-"},"content":"        var transactionResult \u003d","isFullCredit":false},{"lineNumber":71,"author":{"gitId":"-"},"content":"            await AssociationContractStub.CreateOrganization.SendAsync(createOrganizationInput);","isFullCredit":false},{"lineNumber":72,"author":{"gitId":"-"},"content":"        transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":73,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d transactionResult.Output;","isFullCredit":false},{"lineNumber":74,"author":{"gitId":"-"},"content":"        var getOrganization \u003d await AssociationContractStub.GetOrganization.CallAsync(organizationAddress);","isFullCredit":false},{"lineNumber":75,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":76,"author":{"gitId":"-"},"content":"        getOrganization.OrganizationAddress.ShouldBe(organizationAddress);","isFullCredit":false},{"lineNumber":77,"author":{"gitId":"-"},"content":"        getOrganization.ProposerWhiteList.ShouldBe(createOrganizationInput.ProposerWhiteList);","isFullCredit":false},{"lineNumber":78,"author":{"gitId":"-"},"content":"        getOrganization.ProposalReleaseThreshold.ShouldBe(createOrganizationInput.ProposalReleaseThreshold);","isFullCredit":false},{"lineNumber":79,"author":{"gitId":"-"},"content":"        getOrganization.OrganizationMemberList.ShouldBe(createOrganizationInput.OrganizationMemberList);","isFullCredit":false},{"lineNumber":80,"author":{"gitId":"-"},"content":"        getOrganization.OrganizationHash.ShouldBe(HashHelper.ComputeFrom(createOrganizationInput));","isFullCredit":false},{"lineNumber":81,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":82,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":83,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":84,"author":{"gitId":"-"},"content":"    public async Task Create_OrganizationOnMultiChains_Test()","isFullCredit":false},{"lineNumber":85,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":86,"author":{"gitId":"-"},"content":"        //failed case","isFullCredit":false},{"lineNumber":87,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":88,"author":{"gitId":"-"},"content":"            var organization \u003d","isFullCredit":false},{"lineNumber":89,"author":{"gitId":"-"},"content":"                await AssociationContractStub.GetOrganization.CallAsync(Accounts[0].Address);","isFullCredit":false},{"lineNumber":90,"author":{"gitId":"-"},"content":"            organization.ShouldBe(new Organization());","isFullCredit":false},{"lineNumber":91,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":92,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":93,"author":{"gitId":"-"},"content":"        //normal case","isFullCredit":false},{"lineNumber":94,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":95,"author":{"gitId":"-"},"content":"            var minimalApproveThreshold \u003d 2;","isFullCredit":false},{"lineNumber":96,"author":{"gitId":"-"},"content":"            var minimalVoteThreshold \u003d 3;","isFullCredit":false},{"lineNumber":97,"author":{"gitId":"-"},"content":"            var maximalAbstentionThreshold \u003d 1;","isFullCredit":false},{"lineNumber":98,"author":{"gitId":"-"},"content":"            var maximalRejectionThreshold \u003d 1;","isFullCredit":false},{"lineNumber":99,"author":{"gitId":"-"},"content":"            var createOrganizationInput \u003d new CreateOrganizationInput","isFullCredit":false},{"lineNumber":100,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":101,"author":{"gitId":"-"},"content":"                OrganizationMemberList \u003d new OrganizationMemberList","isFullCredit":false},{"lineNumber":102,"author":{"gitId":"-"},"content":"                {","isFullCredit":false},{"lineNumber":103,"author":{"gitId":"-"},"content":"                    OrganizationMembers \u003d { Reviewer1, Reviewer2, Reviewer3 }","isFullCredit":false},{"lineNumber":104,"author":{"gitId":"-"},"content":"                },","isFullCredit":false},{"lineNumber":105,"author":{"gitId":"-"},"content":"                ProposalReleaseThreshold \u003d new ProposalReleaseThreshold","isFullCredit":false},{"lineNumber":106,"author":{"gitId":"-"},"content":"                {","isFullCredit":false},{"lineNumber":107,"author":{"gitId":"-"},"content":"                    MinimalApprovalThreshold \u003d minimalApproveThreshold,","isFullCredit":false},{"lineNumber":108,"author":{"gitId":"-"},"content":"                    MinimalVoteThreshold \u003d minimalVoteThreshold,","isFullCredit":false},{"lineNumber":109,"author":{"gitId":"-"},"content":"                    MaximalAbstentionThreshold \u003d maximalAbstentionThreshold,","isFullCredit":false},{"lineNumber":110,"author":{"gitId":"-"},"content":"                    MaximalRejectionThreshold \u003d maximalRejectionThreshold","isFullCredit":false},{"lineNumber":111,"author":{"gitId":"-"},"content":"                },","isFullCredit":false},{"lineNumber":112,"author":{"gitId":"-"},"content":"                ProposerWhiteList \u003d new ProposerWhiteList","isFullCredit":false},{"lineNumber":113,"author":{"gitId":"-"},"content":"                {","isFullCredit":false},{"lineNumber":114,"author":{"gitId":"-"},"content":"                    Proposers \u003d { Reviewer1 }","isFullCredit":false},{"lineNumber":115,"author":{"gitId":"-"},"content":"                }","isFullCredit":false},{"lineNumber":116,"author":{"gitId":"-"},"content":"            };","isFullCredit":false},{"lineNumber":117,"author":{"gitId":"-"},"content":"            var transactionResult \u003d","isFullCredit":false},{"lineNumber":118,"author":{"gitId":"-"},"content":"                await AssociationContractStub.CreateOrganization.SendAsync(createOrganizationInput);","isFullCredit":false},{"lineNumber":119,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":120,"author":{"gitId":"-"},"content":"            var organizationAddress \u003d transactionResult.Output;","isFullCredit":false},{"lineNumber":121,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":122,"author":{"gitId":"-"},"content":"            var testKit \u003d CreateContractTestKit\u003cAssociationContractTestAElfModule\u003e(new ChainInitializationDto","isFullCredit":false},{"lineNumber":123,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":124,"author":{"gitId":"-"},"content":"                ChainId \u003d 1","isFullCredit":false},{"lineNumber":125,"author":{"gitId":"-"},"content":"            });","isFullCredit":false},{"lineNumber":126,"author":{"gitId":"-"},"content":"            SystemContractAddresses[AssociationSmartContractAddressNameProvider.Name]","isFullCredit":false},{"lineNumber":127,"author":{"gitId":"-"},"content":"                .ShouldNotBe(testKit.SystemContractAddresses[AssociationSmartContractAddressNameProvider.Name]);","isFullCredit":false},{"lineNumber":128,"author":{"gitId":"-"},"content":"            var otherChainAssociationContractStub \u003d","isFullCredit":false},{"lineNumber":129,"author":{"gitId":"-"},"content":"                testKit.GetTester\u003cAssociationContractImplContainer.AssociationContractImplStub\u003e(","isFullCredit":false},{"lineNumber":130,"author":{"gitId":"-"},"content":"                    testKit.SystemContractAddresses[AssociationSmartContractAddressNameProvider.Name],","isFullCredit":false},{"lineNumber":131,"author":{"gitId":"-"},"content":"                    DefaultSenderKeyPair);","isFullCredit":false},{"lineNumber":132,"author":{"gitId":"-"},"content":"            var executionResult \u003d","isFullCredit":false},{"lineNumber":133,"author":{"gitId":"-"},"content":"                await otherChainAssociationContractStub.CreateOrganization.SendAsync(createOrganizationInput);","isFullCredit":false},{"lineNumber":134,"author":{"gitId":"-"},"content":"            var organizationAddressOnAnotherChain \u003d executionResult.Output;","isFullCredit":false},{"lineNumber":135,"author":{"gitId":"-"},"content":"            organizationAddressOnAnotherChain.ShouldBe(organizationAddress);","isFullCredit":false},{"lineNumber":136,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":137,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":138,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":139,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":140,"author":{"gitId":"-"},"content":"    public async Task Get_Proposal_Test()","isFullCredit":false},{"lineNumber":141,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":142,"author":{"gitId":"-"},"content":"        //failed case","isFullCredit":false},{"lineNumber":143,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":144,"author":{"gitId":"-"},"content":"            var proposal \u003d await AssociationContractStub.GetProposal.CallAsync(HashHelper.ComputeFrom(\"Test\"));","isFullCredit":false},{"lineNumber":145,"author":{"gitId":"-"},"content":"            proposal.ShouldBe(new ProposalOutput());","isFullCredit":false},{"lineNumber":146,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":147,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":148,"author":{"gitId":"-"},"content":"        //normal case","isFullCredit":false},{"lineNumber":149,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":150,"author":{"gitId":"-"},"content":"            var minimalApproveThreshold \u003d 2;","isFullCredit":false},{"lineNumber":151,"author":{"gitId":"-"},"content":"            var minimalVoteThreshold \u003d 3;","isFullCredit":false},{"lineNumber":152,"author":{"gitId":"-"},"content":"            var maximalAbstentionThreshold \u003d 1;","isFullCredit":false},{"lineNumber":153,"author":{"gitId":"-"},"content":"            var maximalRejectionThreshold \u003d 1;","isFullCredit":false},{"lineNumber":154,"author":{"gitId":"-"},"content":"            var organizationAddress \u003d await CreateOrganizationAsync(minimalApproveThreshold, minimalVoteThreshold,","isFullCredit":false},{"lineNumber":155,"author":{"gitId":"-"},"content":"                maximalAbstentionThreshold, maximalRejectionThreshold, Reviewer1);","isFullCredit":false},{"lineNumber":156,"author":{"gitId":"-"},"content":"            var transferInput \u003d new TransferInput","isFullCredit":false},{"lineNumber":157,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":158,"author":{"gitId":"-"},"content":"                Symbol \u003d \"ELF\",","isFullCredit":false},{"lineNumber":159,"author":{"gitId":"-"},"content":"                Amount \u003d 100,","isFullCredit":false},{"lineNumber":160,"author":{"gitId":"-"},"content":"                To \u003d Reviewer1,","isFullCredit":false},{"lineNumber":161,"author":{"gitId":"-"},"content":"                Memo \u003d \"Transfer\"","isFullCredit":false},{"lineNumber":162,"author":{"gitId":"-"},"content":"            };","isFullCredit":false},{"lineNumber":163,"author":{"gitId":"-"},"content":"            var proposalId \u003d await CreateProposalAsync(Reviewer1KeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":164,"author":{"gitId":"-"},"content":"            var getProposal \u003d await AssociationContractStub.GetProposal.SendAsync(proposalId);","isFullCredit":false},{"lineNumber":165,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":166,"author":{"gitId":"-"},"content":"            getProposal.Output.Proposer.ShouldBe(Reviewer1);","isFullCredit":false},{"lineNumber":167,"author":{"gitId":"-"},"content":"            getProposal.Output.ContractMethodName.ShouldBe(nameof(TokenContractStub.Transfer));","isFullCredit":false},{"lineNumber":168,"author":{"gitId":"-"},"content":"            getProposal.Output.ProposalId.ShouldBe(proposalId);","isFullCredit":false},{"lineNumber":169,"author":{"gitId":"-"},"content":"            getProposal.Output.OrganizationAddress.ShouldBe(organizationAddress);","isFullCredit":false},{"lineNumber":170,"author":{"gitId":"-"},"content":"            getProposal.Output.ToAddress.ShouldBe(TokenContractAddress);","isFullCredit":false},{"lineNumber":171,"author":{"gitId":"-"},"content":"            getProposal.Output.Params.ShouldBe(transferInput.ToByteString());","isFullCredit":false},{"lineNumber":172,"author":{"gitId":"eanzhao"},"content":"            getProposal.Output.Title.ShouldNotBeNullOrEmpty();","isFullCredit":false},{"lineNumber":173,"author":{"gitId":"eanzhao"},"content":"            getProposal.Output.Description.ShouldNotBeNullOrEmpty();","isFullCredit":false},{"lineNumber":174,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":175,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":176,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":177,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":178,"author":{"gitId":"-"},"content":"    public async Task Create_Organization_Failed_Test()","isFullCredit":false},{"lineNumber":179,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":180,"author":{"gitId":"-"},"content":"        //invalid MinimalApprovalThreshold","isFullCredit":false},{"lineNumber":181,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":182,"author":{"gitId":"-"},"content":"            var minimalApproveThreshold \u003d 0;","isFullCredit":false},{"lineNumber":183,"author":{"gitId":"-"},"content":"            var minimalVoteThreshold \u003d 3;","isFullCredit":false},{"lineNumber":184,"author":{"gitId":"-"},"content":"            var maximalAbstentionThreshold \u003d 0;","isFullCredit":false},{"lineNumber":185,"author":{"gitId":"-"},"content":"            var maximalRejectionThreshold \u003d 0;","isFullCredit":false},{"lineNumber":186,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":187,"author":{"gitId":"-"},"content":"            var createOrganizationInput \u003d GenerateCreateOrganizationInput(minimalApproveThreshold,","isFullCredit":false},{"lineNumber":188,"author":{"gitId":"-"},"content":"                minimalVoteThreshold,","isFullCredit":false},{"lineNumber":189,"author":{"gitId":"-"},"content":"                maximalAbstentionThreshold, maximalRejectionThreshold, Reviewer1);","isFullCredit":false},{"lineNumber":190,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":191,"author":{"gitId":"-"},"content":"            var transactionResult \u003d","isFullCredit":false},{"lineNumber":192,"author":{"gitId":"-"},"content":"                await AssociationContractStub.CreateOrganization.SendWithExceptionAsync(createOrganizationInput);","isFullCredit":false},{"lineNumber":193,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":194,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Error.Contains(\"Invalid organization.\").ShouldBeTrue();","isFullCredit":false},{"lineNumber":195,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":196,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":197,"author":{"gitId":"-"},"content":"        //invalid MinimalApprovalThreshold","isFullCredit":false},{"lineNumber":198,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":199,"author":{"gitId":"-"},"content":"            var minimalApproveThreshold \u003d 4;","isFullCredit":false},{"lineNumber":200,"author":{"gitId":"-"},"content":"            var minimalVoteThreshold \u003d 3;","isFullCredit":false},{"lineNumber":201,"author":{"gitId":"-"},"content":"            var maximalAbstentionThreshold \u003d 0;","isFullCredit":false},{"lineNumber":202,"author":{"gitId":"-"},"content":"            var maximalRejectionThreshold \u003d 0;","isFullCredit":false},{"lineNumber":203,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":204,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":205,"author":{"gitId":"-"},"content":"            var createOrganizationInput \u003d GenerateCreateOrganizationInput(minimalApproveThreshold,","isFullCredit":false},{"lineNumber":206,"author":{"gitId":"-"},"content":"                minimalVoteThreshold,","isFullCredit":false},{"lineNumber":207,"author":{"gitId":"-"},"content":"                maximalAbstentionThreshold, maximalRejectionThreshold, Reviewer1);","isFullCredit":false},{"lineNumber":208,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":209,"author":{"gitId":"-"},"content":"            var transactionResult \u003d","isFullCredit":false},{"lineNumber":210,"author":{"gitId":"-"},"content":"                await AssociationContractStub.CreateOrganization.SendWithExceptionAsync(createOrganizationInput);","isFullCredit":false},{"lineNumber":211,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":212,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Error.Contains(\"Invalid organization.\").ShouldBeTrue();","isFullCredit":false},{"lineNumber":213,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":214,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":215,"author":{"gitId":"-"},"content":"        //invalid MinimalApprovalThreshold","isFullCredit":false},{"lineNumber":216,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":217,"author":{"gitId":"-"},"content":"            var minimalApproveThreshold \u003d 2;","isFullCredit":false},{"lineNumber":218,"author":{"gitId":"-"},"content":"            var minimalVoteThreshold \u003d 1;","isFullCredit":false},{"lineNumber":219,"author":{"gitId":"-"},"content":"            var maximalAbstentionThreshold \u003d 0;","isFullCredit":false},{"lineNumber":220,"author":{"gitId":"-"},"content":"            var maximalRejectionThreshold \u003d 0;","isFullCredit":false},{"lineNumber":221,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":222,"author":{"gitId":"-"},"content":"            var createOrganizationInput \u003d GenerateCreateOrganizationInput(minimalApproveThreshold,","isFullCredit":false},{"lineNumber":223,"author":{"gitId":"-"},"content":"                minimalVoteThreshold,","isFullCredit":false},{"lineNumber":224,"author":{"gitId":"-"},"content":"                maximalAbstentionThreshold, maximalRejectionThreshold, Reviewer1);","isFullCredit":false},{"lineNumber":225,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":226,"author":{"gitId":"-"},"content":"            var transactionResult \u003d","isFullCredit":false},{"lineNumber":227,"author":{"gitId":"-"},"content":"                await AssociationContractStub.CreateOrganization.SendWithExceptionAsync(createOrganizationInput);","isFullCredit":false},{"lineNumber":228,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":229,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Error.Contains(\"Invalid organization.\").ShouldBeTrue();","isFullCredit":false},{"lineNumber":230,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":231,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":232,"author":{"gitId":"-"},"content":"        //invalid minimalVoteThreshold","isFullCredit":false},{"lineNumber":233,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":234,"author":{"gitId":"-"},"content":"            var minimalApproveThreshold \u003d 1;","isFullCredit":false},{"lineNumber":235,"author":{"gitId":"-"},"content":"            var minimalVoteThreshold \u003d 0;","isFullCredit":false},{"lineNumber":236,"author":{"gitId":"-"},"content":"            var maximalAbstentionThreshold \u003d 0;","isFullCredit":false},{"lineNumber":237,"author":{"gitId":"-"},"content":"            var maximalRejectionThreshold \u003d 0;","isFullCredit":false},{"lineNumber":238,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":239,"author":{"gitId":"-"},"content":"            var createOrganizationInput \u003d GenerateCreateOrganizationInput(minimalApproveThreshold,","isFullCredit":false},{"lineNumber":240,"author":{"gitId":"-"},"content":"                minimalVoteThreshold,","isFullCredit":false},{"lineNumber":241,"author":{"gitId":"-"},"content":"                maximalAbstentionThreshold, maximalRejectionThreshold, Reviewer1);","isFullCredit":false},{"lineNumber":242,"author":{"gitId":"-"},"content":"            var transactionResult \u003d","isFullCredit":false},{"lineNumber":243,"author":{"gitId":"-"},"content":"                await AssociationContractStub.CreateOrganization.SendWithExceptionAsync(createOrganizationInput);","isFullCredit":false},{"lineNumber":244,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":245,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Error.Contains(\"Invalid organization.\").ShouldBeTrue();","isFullCredit":false},{"lineNumber":246,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":247,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":248,"author":{"gitId":"-"},"content":"        //invalid maximalAbstentionThreshold","isFullCredit":false},{"lineNumber":249,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":250,"author":{"gitId":"-"},"content":"            var minimalApproveThreshold \u003d 1;","isFullCredit":false},{"lineNumber":251,"author":{"gitId":"-"},"content":"            var minimalVoteThreshold \u003d 3;","isFullCredit":false},{"lineNumber":252,"author":{"gitId":"-"},"content":"            var maximalAbstentionThreshold \u003d 4;","isFullCredit":false},{"lineNumber":253,"author":{"gitId":"-"},"content":"            var maximalRejectionThreshold \u003d 0;","isFullCredit":false},{"lineNumber":254,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":255,"author":{"gitId":"-"},"content":"            var createOrganizationInput \u003d GenerateCreateOrganizationInput(minimalApproveThreshold,","isFullCredit":false},{"lineNumber":256,"author":{"gitId":"-"},"content":"                minimalVoteThreshold,","isFullCredit":false},{"lineNumber":257,"author":{"gitId":"-"},"content":"                maximalAbstentionThreshold, maximalRejectionThreshold, Reviewer1);","isFullCredit":false},{"lineNumber":258,"author":{"gitId":"-"},"content":"            var transactionResult \u003d","isFullCredit":false},{"lineNumber":259,"author":{"gitId":"-"},"content":"                await AssociationContractStub.CreateOrganization.SendWithExceptionAsync(createOrganizationInput);","isFullCredit":false},{"lineNumber":260,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":261,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Error.Contains(\"Invalid organization.\").ShouldBeTrue();","isFullCredit":false},{"lineNumber":262,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":263,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":264,"author":{"gitId":"-"},"content":"        //invalid minimalVoteThreshold + maximalAbstentionThreshold","isFullCredit":false},{"lineNumber":265,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":266,"author":{"gitId":"-"},"content":"            var minimalApproveThreshold \u003d 3;","isFullCredit":false},{"lineNumber":267,"author":{"gitId":"-"},"content":"            var minimalVoteThreshold \u003d 3;","isFullCredit":false},{"lineNumber":268,"author":{"gitId":"-"},"content":"            var maximalAbstentionThreshold \u003d 1;","isFullCredit":false},{"lineNumber":269,"author":{"gitId":"-"},"content":"            var maximalRejectionThreshold \u003d 0;","isFullCredit":false},{"lineNumber":270,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":271,"author":{"gitId":"-"},"content":"            var createOrganizationInput \u003d GenerateCreateOrganizationInput(minimalApproveThreshold,","isFullCredit":false},{"lineNumber":272,"author":{"gitId":"-"},"content":"                minimalVoteThreshold,","isFullCredit":false},{"lineNumber":273,"author":{"gitId":"-"},"content":"                maximalAbstentionThreshold, maximalRejectionThreshold, Reviewer1);","isFullCredit":false},{"lineNumber":274,"author":{"gitId":"-"},"content":"            var transactionResult \u003d","isFullCredit":false},{"lineNumber":275,"author":{"gitId":"-"},"content":"                await AssociationContractStub.CreateOrganization.SendWithExceptionAsync(createOrganizationInput);","isFullCredit":false},{"lineNumber":276,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":277,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Error.Contains(\"Invalid organization.\").ShouldBeTrue();","isFullCredit":false},{"lineNumber":278,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":279,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":280,"author":{"gitId":"-"},"content":"        //invalid minimalVoteThreshold + maximalRejectionThreshold","isFullCredit":false},{"lineNumber":281,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":282,"author":{"gitId":"-"},"content":"            var minimalApproveThreshold \u003d 3;","isFullCredit":false},{"lineNumber":283,"author":{"gitId":"-"},"content":"            var minimalVoteThreshold \u003d 3;","isFullCredit":false},{"lineNumber":284,"author":{"gitId":"-"},"content":"            var maximalAbstentionThreshold \u003d 0;","isFullCredit":false},{"lineNumber":285,"author":{"gitId":"-"},"content":"            var maximalRejectionThreshold \u003d 1;","isFullCredit":false},{"lineNumber":286,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":287,"author":{"gitId":"-"},"content":"            var createOrganizationInput \u003d GenerateCreateOrganizationInput(minimalApproveThreshold,","isFullCredit":false},{"lineNumber":288,"author":{"gitId":"-"},"content":"                minimalVoteThreshold,","isFullCredit":false},{"lineNumber":289,"author":{"gitId":"-"},"content":"                maximalAbstentionThreshold, maximalRejectionThreshold, Reviewer1);","isFullCredit":false},{"lineNumber":290,"author":{"gitId":"-"},"content":"            var transactionResult \u003d","isFullCredit":false},{"lineNumber":291,"author":{"gitId":"-"},"content":"                await AssociationContractStub.CreateOrganization.SendWithExceptionAsync(createOrganizationInput);","isFullCredit":false},{"lineNumber":292,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":293,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Error.Contains(\"Invalid organization.\").ShouldBeTrue();","isFullCredit":false},{"lineNumber":294,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":295,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":296,"author":{"gitId":"-"},"content":"        // empty proposer white list","isFullCredit":false},{"lineNumber":297,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":298,"author":{"gitId":"-"},"content":"            var minimalApproveThreshold \u003d 1;","isFullCredit":false},{"lineNumber":299,"author":{"gitId":"-"},"content":"            var minimalVoteThreshold \u003d 2;","isFullCredit":false},{"lineNumber":300,"author":{"gitId":"-"},"content":"            var maximalAbstentionThreshold \u003d 0;","isFullCredit":false},{"lineNumber":301,"author":{"gitId":"-"},"content":"            var maximalRejectionThreshold \u003d 0;","isFullCredit":false},{"lineNumber":302,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":303,"author":{"gitId":"-"},"content":"            var createOrganizationInput \u003d GenerateCreateOrganizationInput(minimalApproveThreshold,","isFullCredit":false},{"lineNumber":304,"author":{"gitId":"-"},"content":"                minimalVoteThreshold,","isFullCredit":false},{"lineNumber":305,"author":{"gitId":"-"},"content":"                maximalAbstentionThreshold, maximalRejectionThreshold);","isFullCredit":false},{"lineNumber":306,"author":{"gitId":"-"},"content":"            var transactionResult \u003d","isFullCredit":false},{"lineNumber":307,"author":{"gitId":"-"},"content":"                await AssociationContractStub.CreateOrganization.SendWithExceptionAsync(createOrganizationInput);","isFullCredit":false},{"lineNumber":308,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":309,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Error.Contains(\"Invalid organization.\").ShouldBeTrue();","isFullCredit":false},{"lineNumber":310,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":311,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":312,"author":{"gitId":"-"},"content":"        // empty organization members","isFullCredit":false},{"lineNumber":313,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":314,"author":{"gitId":"-"},"content":"            var minimalApproveThreshold \u003d 1;","isFullCredit":false},{"lineNumber":315,"author":{"gitId":"-"},"content":"            var minimalVoteThreshold \u003d 2;","isFullCredit":false},{"lineNumber":316,"author":{"gitId":"-"},"content":"            var maximalAbstentionThreshold \u003d 0;","isFullCredit":false},{"lineNumber":317,"author":{"gitId":"-"},"content":"            var maximalRejectionThreshold \u003d 0;","isFullCredit":false},{"lineNumber":318,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":319,"author":{"gitId":"-"},"content":"            var createOrganizationInput \u003d GenerateCreateOrganizationInput(minimalApproveThreshold,","isFullCredit":false},{"lineNumber":320,"author":{"gitId":"-"},"content":"                minimalVoteThreshold,","isFullCredit":false},{"lineNumber":321,"author":{"gitId":"-"},"content":"                maximalAbstentionThreshold, maximalRejectionThreshold, Reviewer1);","isFullCredit":false},{"lineNumber":322,"author":{"gitId":"-"},"content":"            createOrganizationInput.OrganizationMemberList \u003d new OrganizationMemberList();","isFullCredit":false},{"lineNumber":323,"author":{"gitId":"-"},"content":"            var transactionResult \u003d","isFullCredit":false},{"lineNumber":324,"author":{"gitId":"-"},"content":"                await AssociationContractStub.CreateOrganization.SendWithExceptionAsync(createOrganizationInput);","isFullCredit":false},{"lineNumber":325,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":326,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Error.Contains(\"Invalid organization.\").ShouldBeTrue();","isFullCredit":false},{"lineNumber":327,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":328,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":329,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":330,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":331,"author":{"gitId":"-"},"content":"    public async Task Create_Proposal_Failed_Test()","isFullCredit":false},{"lineNumber":332,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":333,"author":{"gitId":"-"},"content":"        var minimalApproveThreshold \u003d 2;","isFullCredit":false},{"lineNumber":334,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 3;","isFullCredit":false},{"lineNumber":335,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 1;","isFullCredit":false},{"lineNumber":336,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 1;","isFullCredit":false},{"lineNumber":337,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApproveThreshold, minimalVoteThreshold,","isFullCredit":false},{"lineNumber":338,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, Reviewer1);","isFullCredit":false},{"lineNumber":339,"author":{"gitId":"-"},"content":"        var associationContractStub \u003d GetAssociationContractTester(Reviewer1KeyPair);","isFullCredit":false},{"lineNumber":340,"author":{"gitId":"-"},"content":"        var blockTime \u003d BlockTimeProvider.GetBlockTime();","isFullCredit":false},{"lineNumber":341,"author":{"gitId":"-"},"content":"        var createProposalInput \u003d new CreateProposalInput","isFullCredit":false},{"lineNumber":342,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":343,"author":{"gitId":"-"},"content":"            ToAddress \u003d Accounts[0].Address,","isFullCredit":false},{"lineNumber":344,"author":{"gitId":"-"},"content":"            Params \u003d ByteString.CopyFromUtf8(\"Test\"),","isFullCredit":false},{"lineNumber":345,"author":{"gitId":"-"},"content":"            ExpiredTime \u003d blockTime.AddDays(1),","isFullCredit":false},{"lineNumber":346,"author":{"gitId":"-"},"content":"            OrganizationAddress \u003d organizationAddress","isFullCredit":false},{"lineNumber":347,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":348,"author":{"gitId":"-"},"content":"        //\"Invalid proposal.\"","isFullCredit":false},{"lineNumber":349,"author":{"gitId":"-"},"content":"        //ContractMethodName is null or white space","isFullCredit":false},{"lineNumber":350,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":351,"author":{"gitId":"-"},"content":"            var transactionResult \u003d","isFullCredit":false},{"lineNumber":352,"author":{"gitId":"-"},"content":"                await associationContractStub.CreateProposal.SendWithExceptionAsync(createProposalInput);","isFullCredit":false},{"lineNumber":353,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":354,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Error.Contains(\"Invalid proposal.\").ShouldBeTrue();","isFullCredit":false},{"lineNumber":355,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":356,"author":{"gitId":"-"},"content":"        //ToAddress is null","isFullCredit":false},{"lineNumber":357,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":358,"author":{"gitId":"-"},"content":"            createProposalInput.ContractMethodName \u003d \"Test\";","isFullCredit":false},{"lineNumber":359,"author":{"gitId":"-"},"content":"            createProposalInput.ToAddress \u003d null;","isFullCredit":false},{"lineNumber":360,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":361,"author":{"gitId":"-"},"content":"            var transactionResult \u003d","isFullCredit":false},{"lineNumber":362,"author":{"gitId":"-"},"content":"                await associationContractStub.CreateProposal.SendWithExceptionAsync(createProposalInput);","isFullCredit":false},{"lineNumber":363,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":364,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Error.Contains(\"Invalid proposal.\").ShouldBeTrue();","isFullCredit":false},{"lineNumber":365,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":366,"author":{"gitId":"-"},"content":"        //ExpiredTime is null","isFullCredit":false},{"lineNumber":367,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":368,"author":{"gitId":"-"},"content":"            createProposalInput.ExpiredTime \u003d null;","isFullCredit":false},{"lineNumber":369,"author":{"gitId":"-"},"content":"            createProposalInput.ToAddress \u003d Accounts[0].Address;","isFullCredit":false},{"lineNumber":370,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":371,"author":{"gitId":"-"},"content":"            var transactionResult \u003d","isFullCredit":false},{"lineNumber":372,"author":{"gitId":"-"},"content":"                await associationContractStub.CreateProposal.SendWithExceptionAsync(createProposalInput);","isFullCredit":false},{"lineNumber":373,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":374,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Error.Contains(\"Invalid proposal.\").ShouldBeTrue();","isFullCredit":false},{"lineNumber":375,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":376,"author":{"gitId":"-"},"content":"        //\"Expired proposal.\"","isFullCredit":false},{"lineNumber":377,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":378,"author":{"gitId":"-"},"content":"            createProposalInput.ExpiredTime \u003d blockTime.AddMilliseconds(5);","isFullCredit":false},{"lineNumber":379,"author":{"gitId":"-"},"content":"            BlockTimeProvider.SetBlockTime(TimestampHelper.GetUtcNow().AddSeconds(10));","isFullCredit":false},{"lineNumber":380,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":381,"author":{"gitId":"-"},"content":"            var transactionResult \u003d","isFullCredit":false},{"lineNumber":382,"author":{"gitId":"-"},"content":"                await associationContractStub.CreateProposal.SendWithExceptionAsync(createProposalInput);","isFullCredit":false},{"lineNumber":383,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":384,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":385,"author":{"gitId":"-"},"content":"        //\"No registered organization.\"","isFullCredit":false},{"lineNumber":386,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":387,"author":{"gitId":"-"},"content":"            createProposalInput.ExpiredTime \u003d BlockTimeProvider.GetBlockTime().AddDays(1);","isFullCredit":false},{"lineNumber":388,"author":{"gitId":"-"},"content":"            createProposalInput.OrganizationAddress \u003d Accounts[1].Address;","isFullCredit":false},{"lineNumber":389,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":390,"author":{"gitId":"-"},"content":"            var transactionResult \u003d","isFullCredit":false},{"lineNumber":391,"author":{"gitId":"-"},"content":"                await associationContractStub.CreateProposal.SendWithExceptionAsync(createProposalInput);","isFullCredit":false},{"lineNumber":392,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":393,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Error.Contains(\"No registered organization.\").ShouldBeTrue();","isFullCredit":false},{"lineNumber":394,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":395,"author":{"gitId":"-"},"content":"        //\"Unable to propose.\"","isFullCredit":false},{"lineNumber":396,"author":{"gitId":"-"},"content":"        //Reviewer is not permission to propose","isFullCredit":false},{"lineNumber":397,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":398,"author":{"gitId":"-"},"content":"            createProposalInput.OrganizationAddress \u003d organizationAddress;","isFullCredit":false},{"lineNumber":399,"author":{"gitId":"-"},"content":"            var anotherAssociationContractStub \u003d GetAssociationContractTester(DefaultSenderKeyPair);","isFullCredit":false},{"lineNumber":400,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":401,"author":{"gitId":"-"},"content":"            var transactionResult \u003d","isFullCredit":false},{"lineNumber":402,"author":{"gitId":"-"},"content":"                await anotherAssociationContractStub.CreateProposal.SendWithExceptionAsync(createProposalInput);","isFullCredit":false},{"lineNumber":403,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":404,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":405,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":406,"author":{"gitId":"-"},"content":"        //\"Proposal with same input.\"","isFullCredit":false},{"lineNumber":407,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":408,"author":{"gitId":"-"},"content":"            var transactionResult1 \u003d","isFullCredit":false},{"lineNumber":409,"author":{"gitId":"-"},"content":"                await associationContractStub.CreateProposal.SendAsync(createProposalInput);","isFullCredit":false},{"lineNumber":410,"author":{"gitId":"-"},"content":"            transactionResult1.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":411,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":412,"author":{"gitId":"-"},"content":"            var transactionResult2 \u003d","isFullCredit":false},{"lineNumber":413,"author":{"gitId":"-"},"content":"                await associationContractStub.CreateProposal.SendAsync(createProposalInput);","isFullCredit":false},{"lineNumber":414,"author":{"gitId":"-"},"content":"            transactionResult2.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":415,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":416,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":417,"author":{"gitId":"-"},"content":"        // \"Proposal with invalid url\"","isFullCredit":false},{"lineNumber":418,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":419,"author":{"gitId":"-"},"content":"            var anotherAssociationContractStub \u003d GetAssociationContractTester(DefaultSenderKeyPair);","isFullCredit":false},{"lineNumber":420,"author":{"gitId":"-"},"content":"            createProposalInput.ProposalDescriptionUrl \u003d \"test.com\";","isFullCredit":false},{"lineNumber":421,"author":{"gitId":"-"},"content":"            var transactionResult \u003d","isFullCredit":false},{"lineNumber":422,"author":{"gitId":"-"},"content":"                await anotherAssociationContractStub.CreateProposal.SendWithExceptionAsync(createProposalInput);","isFullCredit":false},{"lineNumber":423,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":424,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":425,"author":{"gitId":"-"},"content":"            createProposalInput.ProposalDescriptionUrl \u003d \"https://test.com/test%abcd%\u0026wxyz\";","isFullCredit":false},{"lineNumber":426,"author":{"gitId":"-"},"content":"            var transactionResult2 \u003d","isFullCredit":false},{"lineNumber":427,"author":{"gitId":"-"},"content":"                await associationContractStub.CreateProposal.SendAsync(createProposalInput);","isFullCredit":false},{"lineNumber":428,"author":{"gitId":"-"},"content":"            transactionResult2.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":429,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":430,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":431,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":432,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":433,"author":{"gitId":"-"},"content":"    public async Task Approve_Proposal_NotFoundProposal_Test()","isFullCredit":false},{"lineNumber":434,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":435,"author":{"gitId":"-"},"content":"        var transactionResult \u003d","isFullCredit":false},{"lineNumber":436,"author":{"gitId":"-"},"content":"            await AssociationContractStub.Approve.SendWithExceptionAsync(HashHelper.ComputeFrom(\"Test\"));","isFullCredit":false},{"lineNumber":437,"author":{"gitId":"-"},"content":"        transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":438,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":439,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":440,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":441,"author":{"gitId":"-"},"content":"    public async Task Approve_Proposal_NotAuthorizedApproval_Test()","isFullCredit":false},{"lineNumber":442,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":443,"author":{"gitId":"-"},"content":"        var minimalApproveThreshold \u003d 2;","isFullCredit":false},{"lineNumber":444,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 3;","isFullCredit":false},{"lineNumber":445,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 1;","isFullCredit":false},{"lineNumber":446,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 1;","isFullCredit":false},{"lineNumber":447,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApproveThreshold, minimalVoteThreshold,","isFullCredit":false},{"lineNumber":448,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, Reviewer1);","isFullCredit":false},{"lineNumber":449,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":450,"author":{"gitId":"-"},"content":"        var proposalId \u003d await CreateProposalAsync(Reviewer1KeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":451,"author":{"gitId":"-"},"content":"        var associationContractStub \u003d GetAssociationContractTester(DefaultSenderKeyPair);","isFullCredit":false},{"lineNumber":452,"author":{"gitId":"-"},"content":"        var transactionResult \u003d await associationContractStub.Approve.SendWithExceptionAsync(proposalId);","isFullCredit":false},{"lineNumber":453,"author":{"gitId":"-"},"content":"        transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":454,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":455,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":456,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":457,"author":{"gitId":"-"},"content":"    public async Task ClearProposal_Fail_Test()","isFullCredit":false},{"lineNumber":458,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":459,"author":{"gitId":"-"},"content":"        // proposal does not exist","isFullCredit":false},{"lineNumber":460,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":461,"author":{"gitId":"-"},"content":"            var ret \u003d await AssociationContractStub.ClearProposal.SendWithExceptionAsync(new Hash());","isFullCredit":false},{"lineNumber":462,"author":{"gitId":"-"},"content":"            ret.TransactionResult.Error.ShouldContain(\"Proposal clear failed\");","isFullCredit":false},{"lineNumber":463,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":464,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":465,"author":{"gitId":"-"},"content":"        //proposal does not expire","isFullCredit":false},{"lineNumber":466,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":467,"author":{"gitId":"-"},"content":"            var minimalApproveThreshold \u003d 2;","isFullCredit":false},{"lineNumber":468,"author":{"gitId":"-"},"content":"            var minimalVoteThreshold \u003d 3;","isFullCredit":false},{"lineNumber":469,"author":{"gitId":"-"},"content":"            var maximalAbstentionThreshold \u003d 1;","isFullCredit":false},{"lineNumber":470,"author":{"gitId":"-"},"content":"            var maximalRejectionThreshold \u003d 1;","isFullCredit":false},{"lineNumber":471,"author":{"gitId":"-"},"content":"            var organizationAddress \u003d await CreateOrganizationAsync(minimalApproveThreshold, minimalVoteThreshold,","isFullCredit":false},{"lineNumber":472,"author":{"gitId":"-"},"content":"                maximalAbstentionThreshold, maximalRejectionThreshold, DefaultSender);","isFullCredit":false},{"lineNumber":473,"author":{"gitId":"-"},"content":"            var proposalId \u003d await CreateProposalAsync(DefaultSenderKeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":474,"author":{"gitId":"-"},"content":"            var ret \u003d await AssociationContractStub.ClearProposal.SendWithExceptionAsync(proposalId);","isFullCredit":false},{"lineNumber":475,"author":{"gitId":"-"},"content":"            ret.TransactionResult.Error.ShouldContain(\"Proposal clear failed\");","isFullCredit":false},{"lineNumber":476,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":477,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":478,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":479,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":480,"author":{"gitId":"-"},"content":"    public async Task Approve_Proposal_ExpiredTime_Test()","isFullCredit":false},{"lineNumber":481,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":482,"author":{"gitId":"-"},"content":"        var minimalApproveThreshold \u003d 2;","isFullCredit":false},{"lineNumber":483,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 3;","isFullCredit":false},{"lineNumber":484,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 1;","isFullCredit":false},{"lineNumber":485,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 1;","isFullCredit":false},{"lineNumber":486,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApproveThreshold, minimalVoteThreshold,","isFullCredit":false},{"lineNumber":487,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, Reviewer1);","isFullCredit":false},{"lineNumber":488,"author":{"gitId":"-"},"content":"        var proposalId \u003d await CreateProposalAsync(Reviewer1KeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":489,"author":{"gitId":"-"},"content":"        var associationContractStub \u003d GetAssociationContractTester(Reviewer1KeyPair);","isFullCredit":false},{"lineNumber":490,"author":{"gitId":"-"},"content":"        BlockTimeProvider.SetBlockTime(BlockTimeProvider.GetBlockTime().AddDays(5));","isFullCredit":false},{"lineNumber":491,"author":{"gitId":"-"},"content":"        var error \u003d await associationContractStub.Approve.CallWithExceptionAsync(proposalId);","isFullCredit":false},{"lineNumber":492,"author":{"gitId":"-"},"content":"        error.Value.ShouldContain(\"Invalid proposal.\");","isFullCredit":false},{"lineNumber":493,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":494,"author":{"gitId":"-"},"content":"        //Clear expire proposal","isFullCredit":false},{"lineNumber":495,"author":{"gitId":"-"},"content":"        var result \u003d await associationContractStub.ClearProposal.SendAsync(proposalId);","isFullCredit":false},{"lineNumber":496,"author":{"gitId":"-"},"content":"        result.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":497,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":498,"author":{"gitId":"-"},"content":"        var queryProposal \u003d await AssociationContractStub.GetProposal.CallAsync(proposalId);","isFullCredit":false},{"lineNumber":499,"author":{"gitId":"-"},"content":"        queryProposal.ShouldBe(new ProposalOutput());","isFullCredit":false},{"lineNumber":500,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":501,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":502,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":503,"author":{"gitId":"-"},"content":"    public async Task Approve_Proposal_ApprovalAlreadyExists_Test()","isFullCredit":false},{"lineNumber":504,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":505,"author":{"gitId":"-"},"content":"        var minimalApproveThreshold \u003d 2;","isFullCredit":false},{"lineNumber":506,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 3;","isFullCredit":false},{"lineNumber":507,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 1;","isFullCredit":false},{"lineNumber":508,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 1;","isFullCredit":false},{"lineNumber":509,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApproveThreshold, minimalVoteThreshold,","isFullCredit":false},{"lineNumber":510,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, Reviewer1);","isFullCredit":false},{"lineNumber":511,"author":{"gitId":"-"},"content":"        var proposalId \u003d await CreateProposalAsync(Reviewer1KeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":512,"author":{"gitId":"-"},"content":"        var associationContractStub \u003d GetAssociationContractTester(Reviewer1KeyPair);","isFullCredit":false},{"lineNumber":513,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":514,"author":{"gitId":"-"},"content":"        var transactionResult1 \u003d","isFullCredit":false},{"lineNumber":515,"author":{"gitId":"-"},"content":"            await associationContractStub.Approve.SendAsync(proposalId);","isFullCredit":false},{"lineNumber":516,"author":{"gitId":"-"},"content":"        transactionResult1.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":517,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":518,"author":{"gitId":"-"},"content":"        var transactionResult2 \u003d","isFullCredit":false},{"lineNumber":519,"author":{"gitId":"-"},"content":"            await associationContractStub.Approve.SendWithExceptionAsync(proposalId);","isFullCredit":false},{"lineNumber":520,"author":{"gitId":"-"},"content":"        transactionResult2.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":521,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":522,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":523,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":524,"author":{"gitId":"-"},"content":"    public async Task Approve_Proposal_Failed_Test()","isFullCredit":false},{"lineNumber":525,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":526,"author":{"gitId":"-"},"content":"        //not found","isFullCredit":false},{"lineNumber":527,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":528,"author":{"gitId":"-"},"content":"            var transactionResult \u003d","isFullCredit":false},{"lineNumber":529,"author":{"gitId":"-"},"content":"                await AssociationContractStub.Approve.SendWithExceptionAsync(HashHelper.ComputeFrom(\"Test\"));","isFullCredit":false},{"lineNumber":530,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":531,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":532,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":533,"author":{"gitId":"-"},"content":"        var minimalApproveThreshold \u003d 2;","isFullCredit":false},{"lineNumber":534,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 3;","isFullCredit":false},{"lineNumber":535,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 1;","isFullCredit":false},{"lineNumber":536,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 1;","isFullCredit":false},{"lineNumber":537,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApproveThreshold, minimalVoteThreshold,","isFullCredit":false},{"lineNumber":538,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, Reviewer1);","isFullCredit":false},{"lineNumber":539,"author":{"gitId":"-"},"content":"        var proposalId \u003d await CreateProposalAsync(Reviewer1KeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":540,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":541,"author":{"gitId":"-"},"content":"        //not authorize","isFullCredit":false},{"lineNumber":542,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":543,"author":{"gitId":"-"},"content":"            var associationContractStub \u003d GetAssociationContractTester(DefaultSenderKeyPair);","isFullCredit":false},{"lineNumber":544,"author":{"gitId":"-"},"content":"            var transactionResult \u003d await associationContractStub.Approve.SendWithExceptionAsync(proposalId);","isFullCredit":false},{"lineNumber":545,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":546,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":547,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":548,"author":{"gitId":"-"},"content":"        //expired time","isFullCredit":false},{"lineNumber":549,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":550,"author":{"gitId":"-"},"content":"            var associationContractStub \u003d GetAssociationContractTester(Reviewer1KeyPair);","isFullCredit":false},{"lineNumber":551,"author":{"gitId":"-"},"content":"            BlockTimeProvider.SetBlockTime(BlockTimeProvider.GetBlockTime().AddDays(5));","isFullCredit":false},{"lineNumber":552,"author":{"gitId":"-"},"content":"            var error \u003d await associationContractStub.Approve.CallWithExceptionAsync(proposalId);","isFullCredit":false},{"lineNumber":553,"author":{"gitId":"-"},"content":"            error.Value.ShouldContain(\"Invalid proposal.\");","isFullCredit":false},{"lineNumber":554,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":555,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":556,"author":{"gitId":"-"},"content":"        //already exist","isFullCredit":false},{"lineNumber":557,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":558,"author":{"gitId":"-"},"content":"            var associationContractStub \u003d GetAssociationContractTester(Reviewer1KeyPair);","isFullCredit":false},{"lineNumber":559,"author":{"gitId":"-"},"content":"            BlockTimeProvider.SetBlockTime(BlockTimeProvider.GetBlockTime().AddDays(-5));","isFullCredit":false},{"lineNumber":560,"author":{"gitId":"-"},"content":"            var transactionResult1 \u003d","isFullCredit":false},{"lineNumber":561,"author":{"gitId":"-"},"content":"                await associationContractStub.Approve.SendAsync(proposalId);","isFullCredit":false},{"lineNumber":562,"author":{"gitId":"-"},"content":"            transactionResult1.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":563,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":564,"author":{"gitId":"-"},"content":"            var transactionResult2 \u003d","isFullCredit":false},{"lineNumber":565,"author":{"gitId":"-"},"content":"                await associationContractStub.Reject.SendWithExceptionAsync(proposalId);","isFullCredit":false},{"lineNumber":566,"author":{"gitId":"-"},"content":"            transactionResult2.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":567,"author":{"gitId":"-"},"content":"            transactionResult2.TransactionResult.Error.Contains(\"Sender already voted\").ShouldBeTrue();","isFullCredit":false},{"lineNumber":568,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":569,"author":{"gitId":"-"},"content":"            var transactionResult3 \u003d","isFullCredit":false},{"lineNumber":570,"author":{"gitId":"-"},"content":"                await associationContractStub.Abstain.SendWithExceptionAsync(proposalId);","isFullCredit":false},{"lineNumber":571,"author":{"gitId":"-"},"content":"            transactionResult3.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":572,"author":{"gitId":"-"},"content":"            transactionResult3.TransactionResult.Error.Contains(\"Sender already voted\").ShouldBeTrue();","isFullCredit":false},{"lineNumber":573,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":574,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":575,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":576,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":577,"author":{"gitId":"-"},"content":"    public async Task Check_Proposal_ToBeRelease()","isFullCredit":false},{"lineNumber":578,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":579,"author":{"gitId":"-"},"content":"        var minimalApproveThreshold \u003d 1;","isFullCredit":false},{"lineNumber":580,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 3;","isFullCredit":false},{"lineNumber":581,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 1;","isFullCredit":false},{"lineNumber":582,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 1;","isFullCredit":false},{"lineNumber":583,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApproveThreshold, minimalVoteThreshold,","isFullCredit":false},{"lineNumber":584,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, Reviewer1);","isFullCredit":false},{"lineNumber":585,"author":{"gitId":"-"},"content":"        //Abstain probability \u003e\u003d maximalAbstentionThreshold","isFullCredit":false},{"lineNumber":586,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":587,"author":{"gitId":"-"},"content":"            var proposalId \u003d await CreateProposalAsync(Reviewer1KeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":588,"author":{"gitId":"-"},"content":"            var associationContractStub \u003d GetAssociationContractTester(Reviewer1KeyPair);","isFullCredit":false},{"lineNumber":589,"author":{"gitId":"-"},"content":"            await AbstainAsync(Reviewer2KeyPair, proposalId);","isFullCredit":false},{"lineNumber":590,"author":{"gitId":"-"},"content":"            await AbstainAsync(Reviewer3KeyPair, proposalId);","isFullCredit":false},{"lineNumber":591,"author":{"gitId":"-"},"content":"            await ApproveAsync(Reviewer1KeyPair, proposalId);","isFullCredit":false},{"lineNumber":592,"author":{"gitId":"-"},"content":"            var result \u003d await associationContractStub.GetProposal.CallAsync(proposalId);","isFullCredit":false},{"lineNumber":593,"author":{"gitId":"-"},"content":"            result.ToBeReleased.ShouldBeFalse();","isFullCredit":false},{"lineNumber":594,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":595,"author":{"gitId":"-"},"content":"        //Rejection probability \u003e maximalRejectionThreshold","isFullCredit":false},{"lineNumber":596,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":597,"author":{"gitId":"-"},"content":"            var proposalId \u003d await CreateProposalAsync(Reviewer1KeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":598,"author":{"gitId":"-"},"content":"            var associationContractStub \u003d GetAssociationContractTester(Reviewer1KeyPair);","isFullCredit":false},{"lineNumber":599,"author":{"gitId":"-"},"content":"            await RejectAsync(Reviewer1KeyPair, proposalId);","isFullCredit":false},{"lineNumber":600,"author":{"gitId":"-"},"content":"            await RejectAsync(Reviewer2KeyPair, proposalId);","isFullCredit":false},{"lineNumber":601,"author":{"gitId":"-"},"content":"            await ApproveAsync(Reviewer3KeyPair, proposalId);","isFullCredit":false},{"lineNumber":602,"author":{"gitId":"-"},"content":"            var result \u003d await associationContractStub.GetProposal.CallAsync(proposalId);","isFullCredit":false},{"lineNumber":603,"author":{"gitId":"-"},"content":"            result.ToBeReleased.ShouldBeFalse();","isFullCredit":false},{"lineNumber":604,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":605,"author":{"gitId":"-"},"content":"        //Approve probability \u003e minimalApprovalThreshold \u0026\u0026 voted count \u003e\u003d minimalVoteThreshold","isFullCredit":false},{"lineNumber":606,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":607,"author":{"gitId":"-"},"content":"            var proposalId \u003d await CreateProposalAsync(Reviewer1KeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":608,"author":{"gitId":"-"},"content":"            var associationContractStub \u003d GetAssociationContractTester(Reviewer1KeyPair);","isFullCredit":false},{"lineNumber":609,"author":{"gitId":"-"},"content":"            await AbstainAsync(Reviewer1KeyPair, proposalId);","isFullCredit":false},{"lineNumber":610,"author":{"gitId":"-"},"content":"            await RejectAsync(Reviewer2KeyPair, proposalId);","isFullCredit":false},{"lineNumber":611,"author":{"gitId":"-"},"content":"            await ApproveAsync(Reviewer3KeyPair, proposalId);","isFullCredit":false},{"lineNumber":612,"author":{"gitId":"-"},"content":"            var result \u003d await associationContractStub.GetProposal.CallAsync(proposalId);","isFullCredit":false},{"lineNumber":613,"author":{"gitId":"-"},"content":"            result.ToBeReleased.ShouldBeTrue();","isFullCredit":false},{"lineNumber":614,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":615,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":616,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":617,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":618,"author":{"gitId":"-"},"content":"    public async Task Release_Proposal_Failed_Test()","isFullCredit":false},{"lineNumber":619,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":620,"author":{"gitId":"-"},"content":"        //not found","isFullCredit":false},{"lineNumber":621,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":622,"author":{"gitId":"-"},"content":"            var fakeId \u003d HashHelper.ComputeFrom(\"test\");","isFullCredit":false},{"lineNumber":623,"author":{"gitId":"-"},"content":"            var associationContractStub \u003d GetAssociationContractTester(Reviewer2KeyPair);","isFullCredit":false},{"lineNumber":624,"author":{"gitId":"-"},"content":"            var result \u003d await associationContractStub.Release.SendWithExceptionAsync(fakeId);","isFullCredit":false},{"lineNumber":625,"author":{"gitId":"-"},"content":"            //Proposal not found","isFullCredit":false},{"lineNumber":626,"author":{"gitId":"-"},"content":"            result.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":627,"author":{"gitId":"-"},"content":"            result.TransactionResult.Error.Contains(\"Invalid proposal id.\").ShouldBeTrue();","isFullCredit":false},{"lineNumber":628,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":629,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":630,"author":{"gitId":"-"},"content":"        var minimalApproveThreshold \u003d 2;","isFullCredit":false},{"lineNumber":631,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 3;","isFullCredit":false},{"lineNumber":632,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 1;","isFullCredit":false},{"lineNumber":633,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 1;","isFullCredit":false},{"lineNumber":634,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApproveThreshold, minimalVoteThreshold,","isFullCredit":false},{"lineNumber":635,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, Reviewer1);","isFullCredit":false},{"lineNumber":636,"author":{"gitId":"-"},"content":"        var proposalId \u003d await CreateProposalAsync(Reviewer1KeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":637,"author":{"gitId":"-"},"content":"        await TransferToOrganizationAddressAsync(organizationAddress);","isFullCredit":false},{"lineNumber":638,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":639,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":640,"author":{"gitId":"-"},"content":"            await ApproveAsync(Reviewer1KeyPair, proposalId);","isFullCredit":false},{"lineNumber":641,"author":{"gitId":"-"},"content":"            var associationContractStub \u003d GetAssociationContractTester(Reviewer1KeyPair);","isFullCredit":false},{"lineNumber":642,"author":{"gitId":"-"},"content":"            var result \u003d await associationContractStub.Release.SendWithExceptionAsync(proposalId);","isFullCredit":false},{"lineNumber":643,"author":{"gitId":"-"},"content":"            result.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":644,"author":{"gitId":"-"},"content":"            result.TransactionResult.Error.Contains(\"Not approved.\").ShouldBeTrue();","isFullCredit":false},{"lineNumber":645,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":646,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":647,"author":{"gitId":"-"},"content":"        //wrong sender","isFullCredit":false},{"lineNumber":648,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":649,"author":{"gitId":"-"},"content":"            await ApproveAsync(Reviewer3KeyPair, proposalId);","isFullCredit":false},{"lineNumber":650,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":651,"author":{"gitId":"-"},"content":"            var associationContractStub \u003d GetAssociationContractTester(Reviewer2KeyPair);","isFullCredit":false},{"lineNumber":652,"author":{"gitId":"-"},"content":"            var result \u003d await associationContractStub.Release.SendWithExceptionAsync(proposalId);","isFullCredit":false},{"lineNumber":653,"author":{"gitId":"-"},"content":"            result.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":654,"author":{"gitId":"-"},"content":"            result.TransactionResult.Error.ShouldContain(\"No permission.\");","isFullCredit":false},{"lineNumber":655,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":656,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":657,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":658,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":659,"author":{"gitId":"-"},"content":"    public async Task Release_Proposal_Success_Test()","isFullCredit":false},{"lineNumber":660,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":661,"author":{"gitId":"-"},"content":"        var minimalApproveThreshold \u003d 2;","isFullCredit":false},{"lineNumber":662,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 3;","isFullCredit":false},{"lineNumber":663,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 1;","isFullCredit":false},{"lineNumber":664,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 1;","isFullCredit":false},{"lineNumber":665,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApproveThreshold, minimalVoteThreshold,","isFullCredit":false},{"lineNumber":666,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, Reviewer1);","isFullCredit":false},{"lineNumber":667,"author":{"gitId":"-"},"content":"        var proposalId \u003d await CreateProposalAsync(Reviewer1KeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":668,"author":{"gitId":"-"},"content":"        await TransferToOrganizationAddressAsync(organizationAddress);","isFullCredit":false},{"lineNumber":669,"author":{"gitId":"-"},"content":"        await ApproveAsync(Reviewer3KeyPair, proposalId);","isFullCredit":false},{"lineNumber":670,"author":{"gitId":"-"},"content":"        await ApproveAsync(Reviewer2KeyPair, proposalId);","isFullCredit":false},{"lineNumber":671,"author":{"gitId":"-"},"content":"        await ApproveAsync(Reviewer1KeyPair, proposalId);","isFullCredit":false},{"lineNumber":672,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":673,"author":{"gitId":"-"},"content":"        var associationContractStub \u003d GetAssociationContractTester(Reviewer1KeyPair);","isFullCredit":false},{"lineNumber":674,"author":{"gitId":"-"},"content":"        var result \u003d await associationContractStub.Release.SendAsync(proposalId);","isFullCredit":false},{"lineNumber":675,"author":{"gitId":"-"},"content":"        result.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":676,"author":{"gitId":"-"},"content":"        // Check inline transaction result","isFullCredit":false},{"lineNumber":677,"author":{"gitId":"-"},"content":"        var getBalance \u003d TokenContractStub.GetBalance.CallAsync(new GetBalanceInput","isFullCredit":false},{"lineNumber":678,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":679,"author":{"gitId":"-"},"content":"            Symbol \u003d \"ELF\",","isFullCredit":false},{"lineNumber":680,"author":{"gitId":"-"},"content":"            Owner \u003d Reviewer1","isFullCredit":false},{"lineNumber":681,"author":{"gitId":"-"},"content":"        }).Result.Balance;","isFullCredit":false},{"lineNumber":682,"author":{"gitId":"-"},"content":"        getBalance.ShouldBe(100);","isFullCredit":false},{"lineNumber":683,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":684,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":685,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":686,"author":{"gitId":"-"},"content":"    public async Task Release_Proposal_AlreadyReleased_Test()","isFullCredit":false},{"lineNumber":687,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":688,"author":{"gitId":"-"},"content":"        var minimalApproveThreshold \u003d 2;","isFullCredit":false},{"lineNumber":689,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 3;","isFullCredit":false},{"lineNumber":690,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 1;","isFullCredit":false},{"lineNumber":691,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 1;","isFullCredit":false},{"lineNumber":692,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApproveThreshold, minimalVoteThreshold,","isFullCredit":false},{"lineNumber":693,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, Reviewer1);","isFullCredit":false},{"lineNumber":694,"author":{"gitId":"-"},"content":"        var proposalId \u003d await CreateProposalAsync(Reviewer1KeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":695,"author":{"gitId":"-"},"content":"        await TransferToOrganizationAddressAsync(organizationAddress);","isFullCredit":false},{"lineNumber":696,"author":{"gitId":"-"},"content":"        await ApproveAsync(Reviewer3KeyPair, proposalId);","isFullCredit":false},{"lineNumber":697,"author":{"gitId":"-"},"content":"        await ApproveAsync(Reviewer2KeyPair, proposalId);","isFullCredit":false},{"lineNumber":698,"author":{"gitId":"-"},"content":"        await ApproveAsync(Reviewer1KeyPair, proposalId);","isFullCredit":false},{"lineNumber":699,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":700,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":701,"author":{"gitId":"-"},"content":"            var associationContractStub \u003d GetAssociationContractTester(Reviewer1KeyPair);","isFullCredit":false},{"lineNumber":702,"author":{"gitId":"-"},"content":"            var result \u003d await associationContractStub.Release.SendAsync(proposalId);","isFullCredit":false},{"lineNumber":703,"author":{"gitId":"-"},"content":"            result.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":704,"author":{"gitId":"-"},"content":"            var proposalReleased \u003d ProposalReleased.Parser.ParseFrom(result.TransactionResult.Logs","isFullCredit":false},{"lineNumber":705,"author":{"gitId":"-"},"content":"                    .First(l \u003d\u003e l.Name.Contains(nameof(ProposalReleased))).NonIndexed)","isFullCredit":false},{"lineNumber":706,"author":{"gitId":"-"},"content":"                .ProposalId;","isFullCredit":false},{"lineNumber":707,"author":{"gitId":"-"},"content":"            proposalReleased.ShouldBe(proposalId);","isFullCredit":false},{"lineNumber":708,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":709,"author":{"gitId":"-"},"content":"            //After release,the proposal will be deleted","isFullCredit":false},{"lineNumber":710,"author":{"gitId":"-"},"content":"            var getProposal \u003d await associationContractStub.GetProposal.CallAsync(proposalId);","isFullCredit":false},{"lineNumber":711,"author":{"gitId":"-"},"content":"            getProposal.ShouldBe(new ProposalOutput());","isFullCredit":false},{"lineNumber":712,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":713,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":714,"author":{"gitId":"-"},"content":"        //approve the same proposal again","isFullCredit":false},{"lineNumber":715,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":716,"author":{"gitId":"-"},"content":"            var associationContractStub1 \u003d GetAssociationContractTester(Reviewer3KeyPair);","isFullCredit":false},{"lineNumber":717,"author":{"gitId":"-"},"content":"            var transactionResult \u003d","isFullCredit":false},{"lineNumber":718,"author":{"gitId":"-"},"content":"                await associationContractStub1.Approve.SendWithExceptionAsync(proposalId);","isFullCredit":false},{"lineNumber":719,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":720,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Error.ShouldContain(\"Invalid proposal\");","isFullCredit":false},{"lineNumber":721,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":722,"author":{"gitId":"-"},"content":"            //release the same proposal again","isFullCredit":false},{"lineNumber":723,"author":{"gitId":"-"},"content":"            var associationContractStub2 \u003d GetAssociationContractTester(Reviewer2KeyPair);","isFullCredit":false},{"lineNumber":724,"author":{"gitId":"-"},"content":"            var transactionResult2 \u003d await associationContractStub2.Release.SendWithExceptionAsync(proposalId);","isFullCredit":false},{"lineNumber":725,"author":{"gitId":"-"},"content":"            transactionResult2.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":726,"author":{"gitId":"-"},"content":"            transactionResult2.TransactionResult.Error.ShouldContain(\"Invalid proposal id.\");","isFullCredit":false},{"lineNumber":727,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":728,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":729,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":730,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":731,"author":{"gitId":"-"},"content":"    public async Task ChangeOrganizationThreshold_With_Invalid_Sender_Test()","isFullCredit":false},{"lineNumber":732,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":733,"author":{"gitId":"-"},"content":"        var ret \u003d","isFullCredit":false},{"lineNumber":734,"author":{"gitId":"-"},"content":"            await AssociationContractStub.ChangeOrganizationThreshold.SendWithExceptionAsync(","isFullCredit":false},{"lineNumber":735,"author":{"gitId":"-"},"content":"                new ProposalReleaseThreshold());","isFullCredit":false},{"lineNumber":736,"author":{"gitId":"-"},"content":"        ret.TransactionResult.Error.ShouldContain(\"Organization not found\");","isFullCredit":false},{"lineNumber":737,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":738,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":739,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":740,"author":{"gitId":"-"},"content":"    public async Task Change_OrganizationThreshold_Test()","isFullCredit":false},{"lineNumber":741,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":742,"author":{"gitId":"-"},"content":"        var minimalApproveThreshold \u003d 1;","isFullCredit":false},{"lineNumber":743,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 1;","isFullCredit":false},{"lineNumber":744,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 1;","isFullCredit":false},{"lineNumber":745,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 1;","isFullCredit":false},{"lineNumber":746,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApproveThreshold, minimalVoteThreshold,","isFullCredit":false},{"lineNumber":747,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, Reviewer1);","isFullCredit":false},{"lineNumber":748,"author":{"gitId":"-"},"content":"        var proposalId \u003d await CreateProposalAsync(Reviewer1KeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":749,"author":{"gitId":"-"},"content":"        await ApproveAsync(Reviewer1KeyPair, proposalId);","isFullCredit":false},{"lineNumber":750,"author":{"gitId":"-"},"content":"        var proposal \u003d await AssociationContractStub.GetProposal.CallAsync(proposalId);","isFullCredit":false},{"lineNumber":751,"author":{"gitId":"-"},"content":"        proposal.ToBeReleased.ShouldBeTrue();","isFullCredit":false},{"lineNumber":752,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":753,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":754,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":755,"author":{"gitId":"-"},"content":"            var proposalReleaseThresholdInput \u003d new ProposalReleaseThreshold","isFullCredit":false},{"lineNumber":756,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":757,"author":{"gitId":"-"},"content":"                MinimalVoteThreshold \u003d 2","isFullCredit":false},{"lineNumber":758,"author":{"gitId":"-"},"content":"            };","isFullCredit":false},{"lineNumber":759,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":760,"author":{"gitId":"-"},"content":"            var associationContractStub \u003d GetAssociationContractTester(Reviewer1KeyPair);","isFullCredit":false},{"lineNumber":761,"author":{"gitId":"-"},"content":"            var changeProposalId \u003d await CreateAssociationProposalAsync(Reviewer1KeyPair,","isFullCredit":false},{"lineNumber":762,"author":{"gitId":"-"},"content":"                proposalReleaseThresholdInput,","isFullCredit":false},{"lineNumber":763,"author":{"gitId":"-"},"content":"                nameof(associationContractStub.ChangeOrganizationThreshold), organizationAddress);","isFullCredit":false},{"lineNumber":764,"author":{"gitId":"-"},"content":"            await ApproveAsync(Reviewer1KeyPair, changeProposalId);","isFullCredit":false},{"lineNumber":765,"author":{"gitId":"-"},"content":"            var result \u003d await associationContractStub.Release.SendWithExceptionAsync(changeProposalId);","isFullCredit":false},{"lineNumber":766,"author":{"gitId":"-"},"content":"            result.TransactionResult.Error.ShouldContain(\"Invalid organization.\");","isFullCredit":false},{"lineNumber":767,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":768,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":769,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":770,"author":{"gitId":"-"},"content":"            var proposalReleaseThresholdInput \u003d new ProposalReleaseThreshold","isFullCredit":false},{"lineNumber":771,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":772,"author":{"gitId":"-"},"content":"                MinimalVoteThreshold \u003d 2,","isFullCredit":false},{"lineNumber":773,"author":{"gitId":"-"},"content":"                MinimalApprovalThreshold \u003d minimalApproveThreshold","isFullCredit":false},{"lineNumber":774,"author":{"gitId":"-"},"content":"            };","isFullCredit":false},{"lineNumber":775,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":776,"author":{"gitId":"-"},"content":"            var associationContractStub \u003d GetAssociationContractTester(Reviewer1KeyPair);","isFullCredit":false},{"lineNumber":777,"author":{"gitId":"-"},"content":"            var changeProposalId \u003d await CreateAssociationProposalAsync(Reviewer1KeyPair,","isFullCredit":false},{"lineNumber":778,"author":{"gitId":"-"},"content":"                proposalReleaseThresholdInput,","isFullCredit":false},{"lineNumber":779,"author":{"gitId":"-"},"content":"                nameof(associationContractStub.ChangeOrganizationThreshold), organizationAddress);","isFullCredit":false},{"lineNumber":780,"author":{"gitId":"-"},"content":"            await ApproveAsync(Reviewer1KeyPair, changeProposalId);","isFullCredit":false},{"lineNumber":781,"author":{"gitId":"-"},"content":"            var result \u003d await associationContractStub.Release.SendAsync(changeProposalId);","isFullCredit":false},{"lineNumber":782,"author":{"gitId":"-"},"content":"            result.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":783,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":784,"author":{"gitId":"-"},"content":"            proposal \u003d await associationContractStub.GetProposal.CallAsync(proposalId);","isFullCredit":false},{"lineNumber":785,"author":{"gitId":"-"},"content":"            proposal.ToBeReleased.ShouldBeFalse();","isFullCredit":false},{"lineNumber":786,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":787,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":788,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":789,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":790,"author":{"gitId":"-"},"content":"    public async Task Change_OrganizationProposalWhitelist_Test()","isFullCredit":false},{"lineNumber":791,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":792,"author":{"gitId":"-"},"content":"        var minimalApproveThreshold \u003d 1;","isFullCredit":false},{"lineNumber":793,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 1;","isFullCredit":false},{"lineNumber":794,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 1;","isFullCredit":false},{"lineNumber":795,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 1;","isFullCredit":false},{"lineNumber":796,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApproveThreshold, minimalVoteThreshold,","isFullCredit":false},{"lineNumber":797,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, Reviewer1);","isFullCredit":false},{"lineNumber":798,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":799,"author":{"gitId":"-"},"content":"        var proposerWhiteList \u003d new ProposerWhiteList","isFullCredit":false},{"lineNumber":800,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":801,"author":{"gitId":"-"},"content":"            Proposers \u003d { Reviewer2 }","isFullCredit":false},{"lineNumber":802,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":803,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":804,"author":{"gitId":"-"},"content":"        var associationContractStub \u003d GetAssociationContractTester(Reviewer1KeyPair);","isFullCredit":false},{"lineNumber":805,"author":{"gitId":"-"},"content":"        var changeProposalId \u003d await CreateAssociationProposalAsync(Reviewer1KeyPair, proposerWhiteList,","isFullCredit":false},{"lineNumber":806,"author":{"gitId":"-"},"content":"            nameof(associationContractStub.ChangeOrganizationProposerWhiteList), organizationAddress);","isFullCredit":false},{"lineNumber":807,"author":{"gitId":"-"},"content":"        await ApproveAsync(Reviewer1KeyPair, changeProposalId);","isFullCredit":false},{"lineNumber":808,"author":{"gitId":"-"},"content":"        var releaseResult \u003d await associationContractStub.Release.SendAsync(changeProposalId);","isFullCredit":false},{"lineNumber":809,"author":{"gitId":"-"},"content":"        releaseResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":810,"author":{"gitId":"-"},"content":"        await TransferToOrganizationAddressAsync(organizationAddress);","isFullCredit":false},{"lineNumber":811,"author":{"gitId":"-"},"content":"        var transferInput \u003d new TransferInput","isFullCredit":false},{"lineNumber":812,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":813,"author":{"gitId":"-"},"content":"            Symbol \u003d \"ELF\",","isFullCredit":false},{"lineNumber":814,"author":{"gitId":"-"},"content":"            Amount \u003d 100,","isFullCredit":false},{"lineNumber":815,"author":{"gitId":"-"},"content":"            To \u003d Reviewer1,","isFullCredit":false},{"lineNumber":816,"author":{"gitId":"-"},"content":"            Memo \u003d \"Transfer\"","isFullCredit":false},{"lineNumber":817,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":818,"author":{"gitId":"-"},"content":"        associationContractStub \u003d GetAssociationContractTester(Reviewer1KeyPair);","isFullCredit":false},{"lineNumber":819,"author":{"gitId":"-"},"content":"        var createProposalInput \u003d new CreateProposalInput","isFullCredit":false},{"lineNumber":820,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":821,"author":{"gitId":"-"},"content":"            ContractMethodName \u003d nameof(TokenContractStub.Approve),","isFullCredit":false},{"lineNumber":822,"author":{"gitId":"-"},"content":"            ToAddress \u003d TokenContractAddress,","isFullCredit":false},{"lineNumber":823,"author":{"gitId":"-"},"content":"            Params \u003d transferInput.ToByteString(),","isFullCredit":false},{"lineNumber":824,"author":{"gitId":"-"},"content":"            ExpiredTime \u003d BlockTimeProvider.GetBlockTime().AddDays(2),","isFullCredit":false},{"lineNumber":825,"author":{"gitId":"-"},"content":"            OrganizationAddress \u003d organizationAddress","isFullCredit":false},{"lineNumber":826,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":827,"author":{"gitId":"-"},"content":"        var result \u003d await associationContractStub.CreateProposal.SendWithExceptionAsync(createProposalInput);","isFullCredit":false},{"lineNumber":828,"author":{"gitId":"-"},"content":"        result.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":829,"author":{"gitId":"-"},"content":"        result.TransactionResult.Error.ShouldContain(\"Unauthorized to propose.\");","isFullCredit":false},{"lineNumber":830,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":831,"author":{"gitId":"-"},"content":"        //Verify association proposal","isFullCredit":false},{"lineNumber":832,"author":{"gitId":"-"},"content":"        var verifyResult \u003d await associationContractStub.ValidateProposerInWhiteList.CallAsync(","isFullCredit":false},{"lineNumber":833,"author":{"gitId":"-"},"content":"            new ValidateProposerInWhiteListInput","isFullCredit":false},{"lineNumber":834,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":835,"author":{"gitId":"-"},"content":"                OrganizationAddress \u003d organizationAddress,","isFullCredit":false},{"lineNumber":836,"author":{"gitId":"-"},"content":"                Proposer \u003d Reviewer2","isFullCredit":false},{"lineNumber":837,"author":{"gitId":"-"},"content":"            });","isFullCredit":false},{"lineNumber":838,"author":{"gitId":"-"},"content":"        verifyResult.Value.ShouldBeTrue();","isFullCredit":false},{"lineNumber":839,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":840,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":841,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":842,"author":{"gitId":"-"},"content":"    public async Task ChangeMethodFeeController_With_Invalid_Organization_Test()","isFullCredit":false},{"lineNumber":843,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":844,"author":{"gitId":"-"},"content":"        var methodFeeController \u003d await AssociationContractStub.GetMethodFeeController.CallAsync(new Empty());","isFullCredit":false},{"lineNumber":845,"author":{"gitId":"-"},"content":"        var defaultOrganization \u003d await ParliamentContractStub.GetDefaultOrganizationAddress.CallAsync(new Empty());","isFullCredit":false},{"lineNumber":846,"author":{"gitId":"-"},"content":"        methodFeeController.OwnerAddress.ShouldBe(defaultOrganization);","isFullCredit":false},{"lineNumber":847,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":848,"author":{"gitId":"-"},"content":"        const string proposalCreationMethodName \u003d nameof(AssociationContractStub.ChangeMethodFeeController);","isFullCredit":false},{"lineNumber":849,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":850,"author":{"gitId":"-"},"content":"        var proposalId \u003d await CreateFeeProposalAsync(AssociationContractAddress,","isFullCredit":false},{"lineNumber":851,"author":{"gitId":"-"},"content":"            methodFeeController.OwnerAddress, proposalCreationMethodName, new AuthorityInfo","isFullCredit":false},{"lineNumber":852,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":853,"author":{"gitId":"-"},"content":"                OwnerAddress \u003d ParliamentContractAddress,","isFullCredit":false},{"lineNumber":854,"author":{"gitId":"-"},"content":"                ContractAddress \u003d ParliamentContractAddress","isFullCredit":false},{"lineNumber":855,"author":{"gitId":"-"},"content":"            });","isFullCredit":false},{"lineNumber":856,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":857,"author":{"gitId":"-"},"content":"        await ApproveWithMinersAsync(proposalId);","isFullCredit":false},{"lineNumber":858,"author":{"gitId":"-"},"content":"        var releaseResult \u003d await ParliamentContractStub.Release.SendWithExceptionAsync(proposalId);","isFullCredit":false},{"lineNumber":859,"author":{"gitId":"-"},"content":"        releaseResult.TransactionResult.Error.ShouldContain(\"Invalid authority input\");","isFullCredit":false},{"lineNumber":860,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":861,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":862,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":863,"author":{"gitId":"-"},"content":"    public async Task ChangeMethodFeeController_Test()","isFullCredit":false},{"lineNumber":864,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":865,"author":{"gitId":"-"},"content":"        var createOrganizationResult \u003d","isFullCredit":false},{"lineNumber":866,"author":{"gitId":"-"},"content":"            await ParliamentContractStub.CreateOrganization.SendAsync(","isFullCredit":false},{"lineNumber":867,"author":{"gitId":"-"},"content":"                new Parliament.CreateOrganizationInput","isFullCredit":false},{"lineNumber":868,"author":{"gitId":"-"},"content":"                {","isFullCredit":false},{"lineNumber":869,"author":{"gitId":"-"},"content":"                    ProposalReleaseThreshold \u003d new ProposalReleaseThreshold","isFullCredit":false},{"lineNumber":870,"author":{"gitId":"-"},"content":"                    {","isFullCredit":false},{"lineNumber":871,"author":{"gitId":"-"},"content":"                        MinimalApprovalThreshold \u003d 1000,","isFullCredit":false},{"lineNumber":872,"author":{"gitId":"-"},"content":"                        MinimalVoteThreshold \u003d 1000","isFullCredit":false},{"lineNumber":873,"author":{"gitId":"-"},"content":"                    }","isFullCredit":false},{"lineNumber":874,"author":{"gitId":"-"},"content":"                });","isFullCredit":false},{"lineNumber":875,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d Address.Parser.ParseFrom(createOrganizationResult.TransactionResult.ReturnValue);","isFullCredit":false},{"lineNumber":876,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":877,"author":{"gitId":"-"},"content":"        var methodFeeController \u003d await AssociationContractStub.GetMethodFeeController.CallAsync(new Empty());","isFullCredit":false},{"lineNumber":878,"author":{"gitId":"-"},"content":"        var defaultOrganization \u003d await ParliamentContractStub.GetDefaultOrganizationAddress.CallAsync(new Empty());","isFullCredit":false},{"lineNumber":879,"author":{"gitId":"-"},"content":"        methodFeeController.OwnerAddress.ShouldBe(defaultOrganization);","isFullCredit":false},{"lineNumber":880,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":881,"author":{"gitId":"-"},"content":"        const string proposalCreationMethodName \u003d nameof(AssociationContractStub.ChangeMethodFeeController);","isFullCredit":false},{"lineNumber":882,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":883,"author":{"gitId":"-"},"content":"        var proposalId \u003d await CreateFeeProposalAsync(AssociationContractAddress,","isFullCredit":false},{"lineNumber":884,"author":{"gitId":"-"},"content":"            methodFeeController.OwnerAddress, proposalCreationMethodName, new AuthorityInfo","isFullCredit":false},{"lineNumber":885,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":886,"author":{"gitId":"-"},"content":"                OwnerAddress \u003d organizationAddress,","isFullCredit":false},{"lineNumber":887,"author":{"gitId":"-"},"content":"                ContractAddress \u003d ParliamentContractAddress","isFullCredit":false},{"lineNumber":888,"author":{"gitId":"-"},"content":"            });","isFullCredit":false},{"lineNumber":889,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":890,"author":{"gitId":"-"},"content":"        await ApproveWithMinersAsync(proposalId);","isFullCredit":false},{"lineNumber":891,"author":{"gitId":"-"},"content":"        var releaseResult \u003d await ParliamentContractStub.Release.SendAsync(proposalId);","isFullCredit":false},{"lineNumber":892,"author":{"gitId":"-"},"content":"        releaseResult.TransactionResult.Error.ShouldBeNullOrEmpty();","isFullCredit":false},{"lineNumber":893,"author":{"gitId":"-"},"content":"        releaseResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":894,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":895,"author":{"gitId":"-"},"content":"        var newMethodFeeController \u003d await AssociationContractStub.GetMethodFeeController.CallAsync(new Empty());","isFullCredit":false},{"lineNumber":896,"author":{"gitId":"-"},"content":"        Assert.True(newMethodFeeController.OwnerAddress \u003d\u003d organizationAddress);","isFullCredit":false},{"lineNumber":897,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":898,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":899,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":900,"author":{"gitId":"-"},"content":"    public async Task ChangeMethodFeeController_WithoutAuth_Test()","isFullCredit":false},{"lineNumber":901,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":902,"author":{"gitId":"-"},"content":"        var createOrganizationResult \u003d","isFullCredit":false},{"lineNumber":903,"author":{"gitId":"-"},"content":"            await ParliamentContractStub.CreateOrganization.SendAsync(","isFullCredit":false},{"lineNumber":904,"author":{"gitId":"-"},"content":"                new Parliament.CreateOrganizationInput","isFullCredit":false},{"lineNumber":905,"author":{"gitId":"-"},"content":"                {","isFullCredit":false},{"lineNumber":906,"author":{"gitId":"-"},"content":"                    ProposalReleaseThreshold \u003d new ProposalReleaseThreshold","isFullCredit":false},{"lineNumber":907,"author":{"gitId":"-"},"content":"                    {","isFullCredit":false},{"lineNumber":908,"author":{"gitId":"-"},"content":"                        MinimalApprovalThreshold \u003d 1000,","isFullCredit":false},{"lineNumber":909,"author":{"gitId":"-"},"content":"                        MinimalVoteThreshold \u003d 1000","isFullCredit":false},{"lineNumber":910,"author":{"gitId":"-"},"content":"                    }","isFullCredit":false},{"lineNumber":911,"author":{"gitId":"-"},"content":"                });","isFullCredit":false},{"lineNumber":912,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d Address.Parser.ParseFrom(createOrganizationResult.TransactionResult.ReturnValue);","isFullCredit":false},{"lineNumber":913,"author":{"gitId":"-"},"content":"        var result \u003d await AssociationContractStub.ChangeMethodFeeController.SendWithExceptionAsync(","isFullCredit":false},{"lineNumber":914,"author":{"gitId":"-"},"content":"            new AuthorityInfo","isFullCredit":false},{"lineNumber":915,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":916,"author":{"gitId":"-"},"content":"                OwnerAddress \u003d organizationAddress,","isFullCredit":false},{"lineNumber":917,"author":{"gitId":"-"},"content":"                ContractAddress \u003d ParliamentContractAddress","isFullCredit":false},{"lineNumber":918,"author":{"gitId":"-"},"content":"            });","isFullCredit":false},{"lineNumber":919,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":920,"author":{"gitId":"-"},"content":"        result.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":921,"author":{"gitId":"-"},"content":"        result.TransactionResult.Error.Contains(\"Unauthorized behavior.\").ShouldBeTrue();","isFullCredit":false},{"lineNumber":922,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":923,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":924,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":925,"author":{"gitId":"-"},"content":"    public async Task SetMethodFee_Fail_Test()","isFullCredit":false},{"lineNumber":926,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":927,"author":{"gitId":"-"},"content":"        // fee \u003c 0","isFullCredit":false},{"lineNumber":928,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":929,"author":{"gitId":"-"},"content":"            var invalidMethodFees \u003d GetValidMethodFees();","isFullCredit":false},{"lineNumber":930,"author":{"gitId":"-"},"content":"            invalidMethodFees.Fees[0].BasicFee \u003d -1;","isFullCredit":false},{"lineNumber":931,"author":{"gitId":"-"},"content":"            var ret \u003d await AssociationContractStub.SetMethodFee.SendWithExceptionAsync(invalidMethodFees);","isFullCredit":false},{"lineNumber":932,"author":{"gitId":"-"},"content":"            ret.TransactionResult.Error.ShouldContain(\"Invalid amount\");","isFullCredit":false},{"lineNumber":933,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":934,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":935,"author":{"gitId":"-"},"content":"        // token does not exist","isFullCredit":false},{"lineNumber":936,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":937,"author":{"gitId":"-"},"content":"            var invalidMethodFees \u003d GetValidMethodFees();","isFullCredit":false},{"lineNumber":938,"author":{"gitId":"-"},"content":"            invalidMethodFees.Fees[0].Symbol \u003d \"NOTEXIST\";","isFullCredit":false},{"lineNumber":939,"author":{"gitId":"-"},"content":"            var ret \u003d await AssociationContractStub.SetMethodFee.SendWithExceptionAsync(invalidMethodFees);","isFullCredit":false},{"lineNumber":940,"author":{"gitId":"-"},"content":"            ret.TransactionResult.Error.ShouldContain(\"Token is not found\");","isFullCredit":false},{"lineNumber":941,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":942,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":943,"author":{"gitId":"-"},"content":"        // token is not profitable","isFullCredit":false},{"lineNumber":944,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":945,"author":{"gitId":"-"},"content":"            var tokenSymbol \u003d \"DLS\";","isFullCredit":false},{"lineNumber":946,"author":{"gitId":"-"},"content":"            var invalidMethodFees \u003d GetValidMethodFees();","isFullCredit":false},{"lineNumber":947,"author":{"gitId":"-"},"content":"            invalidMethodFees.Fees[0].Symbol \u003d tokenSymbol;","isFullCredit":false},{"lineNumber":948,"author":{"gitId":"-"},"content":"            ","isFullCredit":false},{"lineNumber":949,"author":{"gitId":"-"},"content":"            var defaultOrganization \u003d await ParliamentContractStub.GetDefaultOrganizationAddress.CallAsync(new Empty());","isFullCredit":false},{"lineNumber":950,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":951,"author":{"gitId":"-"},"content":"            var proposalId \u003d await CreateFeeProposalAsync(TokenContractAddress,","isFullCredit":false},{"lineNumber":952,"author":{"gitId":"-"},"content":"                defaultOrganization, nameof(TokenContractStub.Create), new CreateInput","isFullCredit":false},{"lineNumber":953,"author":{"gitId":"-"},"content":"                {","isFullCredit":false},{"lineNumber":954,"author":{"gitId":"-"},"content":"                    Symbol \u003d tokenSymbol,","isFullCredit":false},{"lineNumber":955,"author":{"gitId":"-"},"content":"                    TokenName \u003d \"name\",","isFullCredit":false},{"lineNumber":956,"author":{"gitId":"-"},"content":"                    Issuer \u003d DefaultSender,","isFullCredit":false},{"lineNumber":957,"author":{"gitId":"-"},"content":"                    TotalSupply \u003d 1000_000,","isFullCredit":false},{"lineNumber":958,"author":{"gitId":"-"},"content":"                    Owner \u003d DefaultSender,","isFullCredit":false},{"lineNumber":959,"author":{"gitId":"-"},"content":"                });","isFullCredit":false},{"lineNumber":960,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":961,"author":{"gitId":"-"},"content":"            await ApproveWithMinersAsync(proposalId);","isFullCredit":false},{"lineNumber":962,"author":{"gitId":"-"},"content":"            await ParliamentContractStub.Release.SendAsync(proposalId);","isFullCredit":false},{"lineNumber":963,"author":{"gitId":"-"},"content":"            ","isFullCredit":false},{"lineNumber":964,"author":{"gitId":"-"},"content":"            var ret \u003d await AssociationContractStub.SetMethodFee.SendWithExceptionAsync(invalidMethodFees);","isFullCredit":false},{"lineNumber":965,"author":{"gitId":"-"},"content":"            ret.TransactionResult.Error.ShouldContain($\"Token {tokenSymbol} cannot set as method fee.\");","isFullCredit":false},{"lineNumber":966,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":967,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":968,"author":{"gitId":"-"},"content":"        // without authority","isFullCredit":false},{"lineNumber":969,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":970,"author":{"gitId":"-"},"content":"            var invalidMethodFees \u003d GetValidMethodFees();","isFullCredit":false},{"lineNumber":971,"author":{"gitId":"-"},"content":"            var ret \u003d await AssociationContractStub.SetMethodFee.SendWithExceptionAsync(invalidMethodFees);","isFullCredit":false},{"lineNumber":972,"author":{"gitId":"-"},"content":"            ret.TransactionResult.Error.ShouldContain(\"Unauthorized to set method fee\");","isFullCredit":false},{"lineNumber":973,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":974,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":975,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":976,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":977,"author":{"gitId":"-"},"content":"    public async Task SetMethodFee_Test()","isFullCredit":false},{"lineNumber":978,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":979,"author":{"gitId":"-"},"content":"        var input \u003d new MethodFees","isFullCredit":false},{"lineNumber":980,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":981,"author":{"gitId":"-"},"content":"            MethodName \u003d nameof(AssociationContractStub.CreateOrganization),","isFullCredit":false},{"lineNumber":982,"author":{"gitId":"-"},"content":"            Fees \u003d","isFullCredit":false},{"lineNumber":983,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":984,"author":{"gitId":"-"},"content":"                new MethodFee","isFullCredit":false},{"lineNumber":985,"author":{"gitId":"-"},"content":"                {","isFullCredit":false},{"lineNumber":986,"author":{"gitId":"-"},"content":"                    Symbol \u003d \"ELF\",","isFullCredit":false},{"lineNumber":987,"author":{"gitId":"-"},"content":"                    BasicFee \u003d 5000_0000L","isFullCredit":false},{"lineNumber":988,"author":{"gitId":"-"},"content":"                }","isFullCredit":false},{"lineNumber":989,"author":{"gitId":"-"},"content":"            }","isFullCredit":false},{"lineNumber":990,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":991,"author":{"gitId":"-"},"content":"        var defaultOrganization \u003d await ParliamentContractStub.GetDefaultOrganizationAddress.CallAsync(new Empty());","isFullCredit":false},{"lineNumber":992,"author":{"gitId":"-"},"content":"        var proposal \u003d await ParliamentContractStub.CreateProposal.SendAsync(new CreateProposalInput","isFullCredit":false},{"lineNumber":993,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":994,"author":{"gitId":"-"},"content":"            ContractMethodName \u003d nameof(AssociationContractStub.SetMethodFee),","isFullCredit":false},{"lineNumber":995,"author":{"gitId":"-"},"content":"            ToAddress \u003d AssociationContractAddress,","isFullCredit":false},{"lineNumber":996,"author":{"gitId":"-"},"content":"            Params \u003d input.ToByteString(),","isFullCredit":false},{"lineNumber":997,"author":{"gitId":"-"},"content":"            ExpiredTime \u003d BlockTimeProvider.GetBlockTime().AddDays(1),","isFullCredit":false},{"lineNumber":998,"author":{"gitId":"-"},"content":"            OrganizationAddress \u003d defaultOrganization","isFullCredit":false},{"lineNumber":999,"author":{"gitId":"-"},"content":"        });","isFullCredit":false},{"lineNumber":1000,"author":{"gitId":"-"},"content":"        var proposalId \u003d proposal.Output;","isFullCredit":false},{"lineNumber":1001,"author":{"gitId":"-"},"content":"        await ApproveWithMinersAsync(proposalId);","isFullCredit":false},{"lineNumber":1002,"author":{"gitId":"-"},"content":"        await ParliamentContractStub.Release.SendAsync(proposalId);","isFullCredit":false},{"lineNumber":1003,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1004,"author":{"gitId":"-"},"content":"        //Query result","isFullCredit":false},{"lineNumber":1005,"author":{"gitId":"-"},"content":"        var transactionFee \u003d await AssociationContractStub.GetMethodFee.CallAsync(new StringValue","isFullCredit":false},{"lineNumber":1006,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1007,"author":{"gitId":"-"},"content":"            Value \u003d nameof(AssociationContractStub.CreateOrganization)","isFullCredit":false},{"lineNumber":1008,"author":{"gitId":"-"},"content":"        });","isFullCredit":false},{"lineNumber":1009,"author":{"gitId":"-"},"content":"        var feeItem \u003d transactionFee.Fees.First();","isFullCredit":false},{"lineNumber":1010,"author":{"gitId":"-"},"content":"        feeItem.Symbol.ShouldBe(\"ELF\");","isFullCredit":false},{"lineNumber":1011,"author":{"gitId":"-"},"content":"        feeItem.BasicFee.ShouldBe(5000_0000L);","isFullCredit":false},{"lineNumber":1012,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1013,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1014,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":1015,"author":{"gitId":"-"},"content":"    public async Task CreateOrganizationBySystemContract_Test()","isFullCredit":false},{"lineNumber":1016,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1017,"author":{"gitId":"-"},"content":"        var minimalApproveThreshold \u003d 2;","isFullCredit":false},{"lineNumber":1018,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 3;","isFullCredit":false},{"lineNumber":1019,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 1;","isFullCredit":false},{"lineNumber":1020,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 1;","isFullCredit":false},{"lineNumber":1021,"author":{"gitId":"-"},"content":"        var createOrganizationInput \u003d new CreateOrganizationInput","isFullCredit":false},{"lineNumber":1022,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1023,"author":{"gitId":"-"},"content":"            OrganizationMemberList \u003d new OrganizationMemberList","isFullCredit":false},{"lineNumber":1024,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":1025,"author":{"gitId":"-"},"content":"                OrganizationMembers \u003d { DefaultSender, Reviewer1, Reviewer2, Reviewer3 }","isFullCredit":false},{"lineNumber":1026,"author":{"gitId":"-"},"content":"            },","isFullCredit":false},{"lineNumber":1027,"author":{"gitId":"-"},"content":"            ProposalReleaseThreshold \u003d new ProposalReleaseThreshold","isFullCredit":false},{"lineNumber":1028,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":1029,"author":{"gitId":"-"},"content":"                MinimalApprovalThreshold \u003d minimalApproveThreshold,","isFullCredit":false},{"lineNumber":1030,"author":{"gitId":"-"},"content":"                MinimalVoteThreshold \u003d minimalVoteThreshold,","isFullCredit":false},{"lineNumber":1031,"author":{"gitId":"-"},"content":"                MaximalAbstentionThreshold \u003d maximalAbstentionThreshold,","isFullCredit":false},{"lineNumber":1032,"author":{"gitId":"-"},"content":"                MaximalRejectionThreshold \u003d maximalRejectionThreshold","isFullCredit":false},{"lineNumber":1033,"author":{"gitId":"-"},"content":"            },","isFullCredit":false},{"lineNumber":1034,"author":{"gitId":"-"},"content":"            ProposerWhiteList \u003d new ProposerWhiteList","isFullCredit":false},{"lineNumber":1035,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":1036,"author":{"gitId":"-"},"content":"                Proposers \u003d { DefaultSender }","isFullCredit":false},{"lineNumber":1037,"author":{"gitId":"-"},"content":"            }","isFullCredit":false},{"lineNumber":1038,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":1039,"author":{"gitId":"-"},"content":"        var input \u003d new CreateOrganizationBySystemContractInput","isFullCredit":false},{"lineNumber":1040,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1041,"author":{"gitId":"-"},"content":"            OrganizationCreationInput \u003d createOrganizationInput,","isFullCredit":false},{"lineNumber":1042,"author":{"gitId":"-"},"content":"            OrganizationAddressFeedbackMethod \u003d \"\"","isFullCredit":false},{"lineNumber":1043,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":1044,"author":{"gitId":"-"},"content":"        //Unauthorized to create organization","isFullCredit":false},{"lineNumber":1045,"author":{"gitId":"-"},"content":"        var addressByCalculate \u003d","isFullCredit":false},{"lineNumber":1046,"author":{"gitId":"-"},"content":"            await AssociationContractStub.CalculateOrganizationAddress.SendAsync(createOrganizationInput);","isFullCredit":false},{"lineNumber":1047,"author":{"gitId":"-"},"content":"        var transactionResult \u003d","isFullCredit":false},{"lineNumber":1048,"author":{"gitId":"-"},"content":"            await AssociationContractStub.CreateOrganizationBySystemContract.SendWithExceptionAsync(input);","isFullCredit":false},{"lineNumber":1049,"author":{"gitId":"-"},"content":"        transactionResult.TransactionResult.Error.ShouldContain(\"Unauthorized\");","isFullCredit":false},{"lineNumber":1050,"author":{"gitId":"-"},"content":"        //success","isFullCredit":false},{"lineNumber":1051,"author":{"gitId":"-"},"content":"        var chain \u003d _blockchainService.GetChainAsync();","isFullCredit":false},{"lineNumber":1052,"author":{"gitId":"-"},"content":"        var blockIndex \u003d new BlockIndex","isFullCredit":false},{"lineNumber":1053,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1054,"author":{"gitId":"-"},"content":"            BlockHash \u003d chain.Result.BestChainHash,","isFullCredit":false},{"lineNumber":1055,"author":{"gitId":"-"},"content":"            BlockHeight \u003d chain.Result.BestChainHeight","isFullCredit":false},{"lineNumber":1056,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":1057,"author":{"gitId":"-"},"content":"        await _smartContractAddressService.SetSmartContractAddressAsync(blockIndex,","isFullCredit":false},{"lineNumber":1058,"author":{"gitId":"-"},"content":"            _smartContractAddressNameProvider.ContractStringName, DefaultSender);","isFullCredit":false},{"lineNumber":1059,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1060,"author":{"gitId":"-"},"content":"        var transactionResult1 \u003d","isFullCredit":false},{"lineNumber":1061,"author":{"gitId":"-"},"content":"            await AssociationContractStub.CreateOrganizationBySystemContract.SendAsync(input);","isFullCredit":false},{"lineNumber":1062,"author":{"gitId":"-"},"content":"        transactionResult1.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":1063,"author":{"gitId":"-"},"content":"        transactionResult1.Output.ShouldBe(addressByCalculate.Output);","isFullCredit":false},{"lineNumber":1064,"author":{"gitId":"-"},"content":"        var boolResult \u003d","isFullCredit":false},{"lineNumber":1065,"author":{"gitId":"-"},"content":"            await AssociationContractStub.ValidateOrganizationExist.SendAsync(addressByCalculate.Output);","isFullCredit":false},{"lineNumber":1066,"author":{"gitId":"-"},"content":"        boolResult.Output.Value.ShouldBeTrue();","isFullCredit":false},{"lineNumber":1067,"author":{"gitId":"-"},"content":"        //invalid contract","isFullCredit":false},{"lineNumber":1068,"author":{"gitId":"-"},"content":"        var method \u003d \"OrganizationAddressFeedbackMethodName\";","isFullCredit":false},{"lineNumber":1069,"author":{"gitId":"-"},"content":"        var input2 \u003d new CreateOrganizationBySystemContractInput","isFullCredit":false},{"lineNumber":1070,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1071,"author":{"gitId":"-"},"content":"            OrganizationCreationInput \u003d createOrganizationInput,","isFullCredit":false},{"lineNumber":1072,"author":{"gitId":"-"},"content":"            OrganizationAddressFeedbackMethod \u003d method","isFullCredit":false},{"lineNumber":1073,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":1074,"author":{"gitId":"-"},"content":"        var transactionResult2 \u003d","isFullCredit":false},{"lineNumber":1075,"author":{"gitId":"-"},"content":"            await AssociationContractStub.CreateOrganizationBySystemContract.SendWithExceptionAsync(input2);","isFullCredit":false},{"lineNumber":1076,"author":{"gitId":"-"},"content":"        transactionResult2.TransactionResult.Error.ShouldContain(\"invalid\");","isFullCredit":false},{"lineNumber":1077,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1078,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1079,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":1080,"author":{"gitId":"-"},"content":"    public async Task CreateProposalBySystemContract_With_Invalid_Organization_Test()","isFullCredit":false},{"lineNumber":1081,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1082,"author":{"gitId":"-"},"content":"        var input \u003d new CreateProposalBySystemContractInput","isFullCredit":false},{"lineNumber":1083,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1084,"author":{"gitId":"-"},"content":"            OriginProposer \u003d DefaultSender","isFullCredit":false},{"lineNumber":1085,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":1086,"author":{"gitId":"-"},"content":"        var chain \u003d _blockchainService.GetChainAsync();","isFullCredit":false},{"lineNumber":1087,"author":{"gitId":"-"},"content":"        var blockIndex \u003d new BlockIndex","isFullCredit":false},{"lineNumber":1088,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1089,"author":{"gitId":"-"},"content":"            BlockHash \u003d chain.Result.BestChainHash,","isFullCredit":false},{"lineNumber":1090,"author":{"gitId":"-"},"content":"            BlockHeight \u003d chain.Result.BestChainHeight","isFullCredit":false},{"lineNumber":1091,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":1092,"author":{"gitId":"-"},"content":"        await _smartContractAddressService.SetSmartContractAddressAsync(blockIndex,","isFullCredit":false},{"lineNumber":1093,"author":{"gitId":"-"},"content":"            _smartContractAddressNameProvider.ContractStringName, DefaultSender);","isFullCredit":false},{"lineNumber":1094,"author":{"gitId":"-"},"content":"        // invalid organization address","isFullCredit":false},{"lineNumber":1095,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1096,"author":{"gitId":"-"},"content":"            var proposalInput \u003d GetValidProposalInput(AssociationContractAddress);","isFullCredit":false},{"lineNumber":1097,"author":{"gitId":"-"},"content":"            input.ProposalInput \u003d proposalInput;","isFullCredit":false},{"lineNumber":1098,"author":{"gitId":"-"},"content":"            var ret \u003d","isFullCredit":false},{"lineNumber":1099,"author":{"gitId":"-"},"content":"                await AssociationContractStub.CreateProposalBySystemContract.SendWithExceptionAsync(input);","isFullCredit":false},{"lineNumber":1100,"author":{"gitId":"-"},"content":"            ret.TransactionResult.Error.ShouldContain(\"No registered organization\");","isFullCredit":false},{"lineNumber":1101,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":1102,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1103,"author":{"gitId":"-"},"content":"        //invalid organization proposer","isFullCredit":false},{"lineNumber":1104,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1105,"author":{"gitId":"-"},"content":"            var proposer \u003d Address.FromPublicKey(Accounts[2].KeyPair.PublicKey);","isFullCredit":false},{"lineNumber":1106,"author":{"gitId":"-"},"content":"            var minimalApproveThreshold \u003d 2;","isFullCredit":false},{"lineNumber":1107,"author":{"gitId":"-"},"content":"            var minimalVoteThreshold \u003d 3;","isFullCredit":false},{"lineNumber":1108,"author":{"gitId":"-"},"content":"            var maximalAbstentionThreshold \u003d 1;","isFullCredit":false},{"lineNumber":1109,"author":{"gitId":"-"},"content":"            var maximalRejectionThreshold \u003d 1;","isFullCredit":false},{"lineNumber":1110,"author":{"gitId":"-"},"content":"            var organizationAddress \u003d await CreateOrganizationAsync(minimalApproveThreshold, minimalVoteThreshold,","isFullCredit":false},{"lineNumber":1111,"author":{"gitId":"-"},"content":"                maximalAbstentionThreshold, maximalRejectionThreshold, proposer);","isFullCredit":false},{"lineNumber":1112,"author":{"gitId":"-"},"content":"            var proposalInput \u003d GetValidProposalInput(organizationAddress);","isFullCredit":false},{"lineNumber":1113,"author":{"gitId":"-"},"content":"            input.ProposalInput \u003d proposalInput;","isFullCredit":false},{"lineNumber":1114,"author":{"gitId":"-"},"content":"            var ret \u003d","isFullCredit":false},{"lineNumber":1115,"author":{"gitId":"-"},"content":"                await AssociationContractStub.CreateProposalBySystemContract.SendWithExceptionAsync(input);","isFullCredit":false},{"lineNumber":1116,"author":{"gitId":"-"},"content":"            ret.TransactionResult.Error.ShouldContain(\"Unauthorized to propose\");","isFullCredit":false},{"lineNumber":1117,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":1118,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1119,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1120,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":1121,"author":{"gitId":"-"},"content":"    public async Task CreateProposalBySystemContract_With_Invalid_Proposal_Test()","isFullCredit":false},{"lineNumber":1122,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1123,"author":{"gitId":"-"},"content":"        var input \u003d new CreateProposalBySystemContractInput","isFullCredit":false},{"lineNumber":1124,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1125,"author":{"gitId":"-"},"content":"            OriginProposer \u003d DefaultSender","isFullCredit":false},{"lineNumber":1126,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":1127,"author":{"gitId":"-"},"content":"        var chain \u003d _blockchainService.GetChainAsync();","isFullCredit":false},{"lineNumber":1128,"author":{"gitId":"-"},"content":"        var blockIndex \u003d new BlockIndex","isFullCredit":false},{"lineNumber":1129,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1130,"author":{"gitId":"-"},"content":"            BlockHash \u003d chain.Result.BestChainHash,","isFullCredit":false},{"lineNumber":1131,"author":{"gitId":"-"},"content":"            BlockHeight \u003d chain.Result.BestChainHeight","isFullCredit":false},{"lineNumber":1132,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":1133,"author":{"gitId":"-"},"content":"        await _smartContractAddressService.SetSmartContractAddressAsync(blockIndex,","isFullCredit":false},{"lineNumber":1134,"author":{"gitId":"-"},"content":"            _smartContractAddressNameProvider.ContractStringName, DefaultSender);","isFullCredit":false},{"lineNumber":1135,"author":{"gitId":"-"},"content":"        var minimalApproveThreshold \u003d 2;","isFullCredit":false},{"lineNumber":1136,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 3;","isFullCredit":false},{"lineNumber":1137,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 1;","isFullCredit":false},{"lineNumber":1138,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 1;","isFullCredit":false},{"lineNumber":1139,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApproveThreshold, minimalVoteThreshold,","isFullCredit":false},{"lineNumber":1140,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, DefaultSender);","isFullCredit":false},{"lineNumber":1141,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1142,"author":{"gitId":"-"},"content":"        // invalid contract method name","isFullCredit":false},{"lineNumber":1143,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1144,"author":{"gitId":"-"},"content":"            var proposalInput \u003d GetValidProposalInput(organizationAddress);","isFullCredit":false},{"lineNumber":1145,"author":{"gitId":"-"},"content":"            proposalInput.ContractMethodName \u003d string.Empty;","isFullCredit":false},{"lineNumber":1146,"author":{"gitId":"-"},"content":"            input.ProposalInput \u003d proposalInput;","isFullCredit":false},{"lineNumber":1147,"author":{"gitId":"-"},"content":"            var ret \u003d","isFullCredit":false},{"lineNumber":1148,"author":{"gitId":"-"},"content":"                await AssociationContractStub.CreateProposalBySystemContract.SendWithExceptionAsync(input);","isFullCredit":false},{"lineNumber":1149,"author":{"gitId":"-"},"content":"            ret.TransactionResult.Error.ShouldContain(\"Invalid proposal\");","isFullCredit":false},{"lineNumber":1150,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":1151,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1152,"author":{"gitId":"-"},"content":"        // invalid expire time","isFullCredit":false},{"lineNumber":1153,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1154,"author":{"gitId":"-"},"content":"            var proposalInput \u003d GetValidProposalInput(organizationAddress);","isFullCredit":false},{"lineNumber":1155,"author":{"gitId":"-"},"content":"            proposalInput.ExpiredTime \u003d new Timestamp();","isFullCredit":false},{"lineNumber":1156,"author":{"gitId":"-"},"content":"            input.ProposalInput \u003d proposalInput;","isFullCredit":false},{"lineNumber":1157,"author":{"gitId":"-"},"content":"            var ret \u003d","isFullCredit":false},{"lineNumber":1158,"author":{"gitId":"-"},"content":"                await AssociationContractStub.CreateProposalBySystemContract.SendWithExceptionAsync(input);","isFullCredit":false},{"lineNumber":1159,"author":{"gitId":"-"},"content":"            ret.TransactionResult.Error.ShouldContain(\"Invalid proposal\");","isFullCredit":false},{"lineNumber":1160,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":1161,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1162,"author":{"gitId":"-"},"content":"        // invalid url","isFullCredit":false},{"lineNumber":1163,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1164,"author":{"gitId":"-"},"content":"            var proposalInput \u003d GetValidProposalInput(organizationAddress);","isFullCredit":false},{"lineNumber":1165,"author":{"gitId":"-"},"content":"            proposalInput.ProposalDescriptionUrl \u003d \"TPP.og\";","isFullCredit":false},{"lineNumber":1166,"author":{"gitId":"-"},"content":"            input.ProposalInput \u003d proposalInput;","isFullCredit":false},{"lineNumber":1167,"author":{"gitId":"-"},"content":"            var ret \u003d","isFullCredit":false},{"lineNumber":1168,"author":{"gitId":"-"},"content":"                await AssociationContractStub.CreateProposalBySystemContract.SendWithExceptionAsync(input);","isFullCredit":false},{"lineNumber":1169,"author":{"gitId":"-"},"content":"            ret.TransactionResult.Error.ShouldContain(\"Invalid proposal\");","isFullCredit":false},{"lineNumber":1170,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":1171,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1172,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1173,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":1174,"author":{"gitId":"-"},"content":"    public async Task CreateProposalBySystemContract_Test()","isFullCredit":false},{"lineNumber":1175,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1176,"author":{"gitId":"-"},"content":"        var minimalApproveThreshold \u003d 2;","isFullCredit":false},{"lineNumber":1177,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 3;","isFullCredit":false},{"lineNumber":1178,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 1;","isFullCredit":false},{"lineNumber":1179,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 1;","isFullCredit":false},{"lineNumber":1180,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApproveThreshold, minimalVoteThreshold,","isFullCredit":false},{"lineNumber":1181,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, DefaultSender);","isFullCredit":false},{"lineNumber":1182,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1183,"author":{"gitId":"-"},"content":"        var transferInput \u003d new TransferInput","isFullCredit":false},{"lineNumber":1184,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1185,"author":{"gitId":"-"},"content":"            Symbol \u003d \"ELF\",","isFullCredit":false},{"lineNumber":1186,"author":{"gitId":"-"},"content":"            Amount \u003d 100,","isFullCredit":false},{"lineNumber":1187,"author":{"gitId":"-"},"content":"            To \u003d Reviewer1,","isFullCredit":false},{"lineNumber":1188,"author":{"gitId":"-"},"content":"            Memo \u003d \"Transfer\"","isFullCredit":false},{"lineNumber":1189,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":1190,"author":{"gitId":"-"},"content":"        var createProposalInput \u003d new CreateProposalInput","isFullCredit":false},{"lineNumber":1191,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1192,"author":{"gitId":"-"},"content":"            ContractMethodName \u003d nameof(TokenContractStub.Transfer),","isFullCredit":false},{"lineNumber":1193,"author":{"gitId":"-"},"content":"            ToAddress \u003d TokenContractAddress,","isFullCredit":false},{"lineNumber":1194,"author":{"gitId":"-"},"content":"            Params \u003d transferInput.ToByteString(),","isFullCredit":false},{"lineNumber":1195,"author":{"gitId":"-"},"content":"            ExpiredTime \u003d BlockTimeProvider.GetBlockTime().AddDays(2),","isFullCredit":false},{"lineNumber":1196,"author":{"gitId":"-"},"content":"            OrganizationAddress \u003d organizationAddress","isFullCredit":false},{"lineNumber":1197,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":1198,"author":{"gitId":"-"},"content":"        var input \u003d new CreateProposalBySystemContractInput","isFullCredit":false},{"lineNumber":1199,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1200,"author":{"gitId":"-"},"content":"            ProposalInput \u003d createProposalInput, OriginProposer \u003d DefaultSender","isFullCredit":false},{"lineNumber":1201,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":1202,"author":{"gitId":"-"},"content":"        var chain \u003d _blockchainService.GetChainAsync();","isFullCredit":false},{"lineNumber":1203,"author":{"gitId":"-"},"content":"        var blockIndex \u003d new BlockIndex","isFullCredit":false},{"lineNumber":1204,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1205,"author":{"gitId":"-"},"content":"            BlockHash \u003d chain.Result.BestChainHash,","isFullCredit":false},{"lineNumber":1206,"author":{"gitId":"-"},"content":"            BlockHeight \u003d chain.Result.BestChainHeight","isFullCredit":false},{"lineNumber":1207,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":1208,"author":{"gitId":"-"},"content":"        //Unauthorized to propose","isFullCredit":false},{"lineNumber":1209,"author":{"gitId":"-"},"content":"        var transactionResult \u003d","isFullCredit":false},{"lineNumber":1210,"author":{"gitId":"-"},"content":"            await AssociationContractStub.CreateProposalBySystemContract.SendWithExceptionAsync(input);","isFullCredit":false},{"lineNumber":1211,"author":{"gitId":"-"},"content":"        transactionResult.TransactionResult.Error.ShouldContain(\"Not authorized to propose\");","isFullCredit":false},{"lineNumber":1212,"author":{"gitId":"-"},"content":"        //success","isFullCredit":false},{"lineNumber":1213,"author":{"gitId":"-"},"content":"        await _smartContractAddressService.SetSmartContractAddressAsync(blockIndex,","isFullCredit":false},{"lineNumber":1214,"author":{"gitId":"-"},"content":"            _smartContractAddressNameProvider.ContractStringName, DefaultSender);","isFullCredit":false},{"lineNumber":1215,"author":{"gitId":"-"},"content":"        var transactionResult2 \u003d","isFullCredit":false},{"lineNumber":1216,"author":{"gitId":"-"},"content":"            await AssociationContractStub.CreateProposalBySystemContract.SendAsync(input);","isFullCredit":false},{"lineNumber":1217,"author":{"gitId":"-"},"content":"        transactionResult2.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":1218,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1219,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1220,"author":{"gitId":"-"},"content":"    private async Task\u003cHash\u003e CreateProposalAsync(ECKeyPair proposalKeyPair, Address organizationAddress)","isFullCredit":false},{"lineNumber":1221,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1222,"author":{"gitId":"-"},"content":"        var transferInput \u003d new TransferInput","isFullCredit":false},{"lineNumber":1223,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1224,"author":{"gitId":"-"},"content":"            Symbol \u003d \"ELF\",","isFullCredit":false},{"lineNumber":1225,"author":{"gitId":"-"},"content":"            Amount \u003d 100,","isFullCredit":false},{"lineNumber":1226,"author":{"gitId":"-"},"content":"            To \u003d Reviewer1,","isFullCredit":false},{"lineNumber":1227,"author":{"gitId":"-"},"content":"            Memo \u003d \"Transfer\"","isFullCredit":false},{"lineNumber":1228,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":1229,"author":{"gitId":"-"},"content":"        var associationContractStub \u003d GetAssociationContractTester(proposalKeyPair);","isFullCredit":false},{"lineNumber":1230,"author":{"gitId":"-"},"content":"        var createProposalInput \u003d new CreateProposalInput","isFullCredit":false},{"lineNumber":1231,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1232,"author":{"gitId":"-"},"content":"            ContractMethodName \u003d nameof(TokenContractStub.Transfer),","isFullCredit":false},{"lineNumber":1233,"author":{"gitId":"-"},"content":"            ToAddress \u003d TokenContractAddress,","isFullCredit":false},{"lineNumber":1234,"author":{"gitId":"-"},"content":"            Params \u003d transferInput.ToByteString(),","isFullCredit":false},{"lineNumber":1235,"author":{"gitId":"-"},"content":"            ExpiredTime \u003d BlockTimeProvider.GetBlockTime().AddDays(2),","isFullCredit":false},{"lineNumber":1236,"author":{"gitId":"eanzhao"},"content":"            OrganizationAddress \u003d organizationAddress,","isFullCredit":false},{"lineNumber":1237,"author":{"gitId":"eanzhao"},"content":"            Title \u003d \"Token Transfer\",","isFullCredit":false},{"lineNumber":1238,"author":{"gitId":"eanzhao"},"content":"            Description \u003d \"Transfer 100 ELF to Reviewer1\u0027s address\",","isFullCredit":false},{"lineNumber":1239,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":1240,"author":{"gitId":"-"},"content":"        var proposal \u003d await associationContractStub.CreateProposal.SendAsync(createProposalInput);","isFullCredit":false},{"lineNumber":1241,"author":{"gitId":"-"},"content":"        var proposalCreated \u003d ProposalCreated.Parser.ParseFrom(proposal.TransactionResult.Logs","isFullCredit":false},{"lineNumber":1242,"author":{"gitId":"-"},"content":"                .First(l \u003d\u003e l.Name.Contains(nameof(ProposalCreated))).NonIndexed)","isFullCredit":false},{"lineNumber":1243,"author":{"gitId":"-"},"content":"            .ProposalId;","isFullCredit":false},{"lineNumber":1244,"author":{"gitId":"-"},"content":"        proposal.Output.ShouldBe(proposalCreated);","isFullCredit":false},{"lineNumber":1245,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1246,"author":{"gitId":"-"},"content":"        return proposal.Output;","isFullCredit":false},{"lineNumber":1247,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1248,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1249,"author":{"gitId":"-"},"content":"    private async Task\u003cHash\u003e CreateAssociationProposalAsync(ECKeyPair proposalKeyPair, IMessage input,","isFullCredit":false},{"lineNumber":1250,"author":{"gitId":"-"},"content":"        string method, Address organizationAddress)","isFullCredit":false},{"lineNumber":1251,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1252,"author":{"gitId":"-"},"content":"        var associationContractStub \u003d GetAssociationContractTester(proposalKeyPair);","isFullCredit":false},{"lineNumber":1253,"author":{"gitId":"-"},"content":"        var createProposalInput \u003d new CreateProposalInput","isFullCredit":false},{"lineNumber":1254,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1255,"author":{"gitId":"-"},"content":"            ContractMethodName \u003d method,","isFullCredit":false},{"lineNumber":1256,"author":{"gitId":"-"},"content":"            ToAddress \u003d AssociationContractAddress,","isFullCredit":false},{"lineNumber":1257,"author":{"gitId":"-"},"content":"            Params \u003d input.ToByteString(),","isFullCredit":false},{"lineNumber":1258,"author":{"gitId":"-"},"content":"            ExpiredTime \u003d BlockTimeProvider.GetBlockTime().AddDays(2),","isFullCredit":false},{"lineNumber":1259,"author":{"gitId":"-"},"content":"            OrganizationAddress \u003d organizationAddress","isFullCredit":false},{"lineNumber":1260,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":1261,"author":{"gitId":"-"},"content":"        var proposal \u003d await associationContractStub.CreateProposal.SendAsync(createProposalInput);","isFullCredit":false},{"lineNumber":1262,"author":{"gitId":"-"},"content":"        var proposalCreated \u003d ProposalCreated.Parser.ParseFrom(proposal.TransactionResult.Logs","isFullCredit":false},{"lineNumber":1263,"author":{"gitId":"-"},"content":"                .First(l \u003d\u003e l.Name.Contains(nameof(ProposalCreated))).NonIndexed)","isFullCredit":false},{"lineNumber":1264,"author":{"gitId":"-"},"content":"            .ProposalId;","isFullCredit":false},{"lineNumber":1265,"author":{"gitId":"-"},"content":"        proposal.Output.ShouldBe(proposalCreated);","isFullCredit":false},{"lineNumber":1266,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1267,"author":{"gitId":"-"},"content":"        return proposal.Output;","isFullCredit":false},{"lineNumber":1268,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1269,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1270,"author":{"gitId":"-"},"content":"    private async Task\u003cAddress\u003e CreateOrganizationAsync(int minimalApproveThreshold, int minimalVoteThreshold,","isFullCredit":false},{"lineNumber":1271,"author":{"gitId":"-"},"content":"        int maximalAbstentionThreshold, int maximalRejectionThreshold, params Address[] proposers)","isFullCredit":false},{"lineNumber":1272,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1273,"author":{"gitId":"-"},"content":"        var createOrganizationInput \u003d GenerateCreateOrganizationInput(minimalApproveThreshold, minimalVoteThreshold,","isFullCredit":false},{"lineNumber":1274,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, proposers);","isFullCredit":false},{"lineNumber":1275,"author":{"gitId":"-"},"content":"        var transactionResult \u003d","isFullCredit":false},{"lineNumber":1276,"author":{"gitId":"-"},"content":"            await AssociationContractStub.CreateOrganization.SendAsync(createOrganizationInput);","isFullCredit":false},{"lineNumber":1277,"author":{"gitId":"-"},"content":"        transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":1278,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1279,"author":{"gitId":"-"},"content":"        return transactionResult.Output;","isFullCredit":false},{"lineNumber":1280,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1281,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1282,"author":{"gitId":"-"},"content":"    private CreateOrganizationInput GenerateCreateOrganizationInput(int minimalApproveThreshold,","isFullCredit":false},{"lineNumber":1283,"author":{"gitId":"-"},"content":"        int minimalVoteThreshold,","isFullCredit":false},{"lineNumber":1284,"author":{"gitId":"-"},"content":"        int maximalAbstentionThreshold, int maximalRejectionThreshold, params Address[] proposers)","isFullCredit":false},{"lineNumber":1285,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1286,"author":{"gitId":"-"},"content":"        var createOrganizationInput \u003d new CreateOrganizationInput","isFullCredit":false},{"lineNumber":1287,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1288,"author":{"gitId":"-"},"content":"            OrganizationMemberList \u003d new OrganizationMemberList","isFullCredit":false},{"lineNumber":1289,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":1290,"author":{"gitId":"-"},"content":"                OrganizationMembers \u003d { Reviewer1, Reviewer2, Reviewer3 }","isFullCredit":false},{"lineNumber":1291,"author":{"gitId":"-"},"content":"            },","isFullCredit":false},{"lineNumber":1292,"author":{"gitId":"-"},"content":"            ProposalReleaseThreshold \u003d new ProposalReleaseThreshold","isFullCredit":false},{"lineNumber":1293,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":1294,"author":{"gitId":"-"},"content":"                MinimalApprovalThreshold \u003d minimalApproveThreshold,","isFullCredit":false},{"lineNumber":1295,"author":{"gitId":"-"},"content":"                MinimalVoteThreshold \u003d minimalVoteThreshold,","isFullCredit":false},{"lineNumber":1296,"author":{"gitId":"-"},"content":"                MaximalAbstentionThreshold \u003d maximalAbstentionThreshold,","isFullCredit":false},{"lineNumber":1297,"author":{"gitId":"-"},"content":"                MaximalRejectionThreshold \u003d maximalRejectionThreshold","isFullCredit":false},{"lineNumber":1298,"author":{"gitId":"-"},"content":"            },","isFullCredit":false},{"lineNumber":1299,"author":{"gitId":"-"},"content":"            ProposerWhiteList \u003d new ProposerWhiteList","isFullCredit":false},{"lineNumber":1300,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":1301,"author":{"gitId":"-"},"content":"                Proposers \u003d { proposers }","isFullCredit":false},{"lineNumber":1302,"author":{"gitId":"-"},"content":"            }","isFullCredit":false},{"lineNumber":1303,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":1304,"author":{"gitId":"-"},"content":"        return createOrganizationInput;","isFullCredit":false},{"lineNumber":1305,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1306,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1307,"author":{"gitId":"-"},"content":"    private async Task TransferToOrganizationAddressAsync(Address organizationAddress)","isFullCredit":false},{"lineNumber":1308,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1309,"author":{"gitId":"-"},"content":"        await TokenContractStub.Transfer.SendAsync(new TransferInput","isFullCredit":false},{"lineNumber":1310,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1311,"author":{"gitId":"-"},"content":"            Symbol \u003d \"ELF\",","isFullCredit":false},{"lineNumber":1312,"author":{"gitId":"-"},"content":"            Amount \u003d 200,","isFullCredit":false},{"lineNumber":1313,"author":{"gitId":"-"},"content":"            To \u003d organizationAddress,","isFullCredit":false},{"lineNumber":1314,"author":{"gitId":"-"},"content":"            Memo \u003d \"transfer organization address\"","isFullCredit":false},{"lineNumber":1315,"author":{"gitId":"-"},"content":"        });","isFullCredit":false},{"lineNumber":1316,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1317,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1318,"author":{"gitId":"-"},"content":"    private async Task ApproveAsync(ECKeyPair reviewer, Hash proposalId)","isFullCredit":false},{"lineNumber":1319,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1320,"author":{"gitId":"-"},"content":"        var associationContractStub \u003d GetAssociationContractTester(reviewer);","isFullCredit":false},{"lineNumber":1321,"author":{"gitId":"-"},"content":"        var utcNow \u003d TimestampHelper.GetUtcNow();","isFullCredit":false},{"lineNumber":1322,"author":{"gitId":"-"},"content":"        BlockTimeProvider.SetBlockTime(utcNow);","isFullCredit":false},{"lineNumber":1323,"author":{"gitId":"-"},"content":"        var transactionResult \u003d","isFullCredit":false},{"lineNumber":1324,"author":{"gitId":"-"},"content":"            await associationContractStub.Approve.SendAsync(proposalId);","isFullCredit":false},{"lineNumber":1325,"author":{"gitId":"-"},"content":"        transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":1326,"author":{"gitId":"-"},"content":"        var receiptCreated \u003d ReceiptCreated.Parser.ParseFrom(transactionResult.TransactionResult.Logs","isFullCredit":false},{"lineNumber":1327,"author":{"gitId":"-"},"content":"            .FirstOrDefault(l \u003d\u003e l.Name \u003d\u003d nameof(ReceiptCreated))","isFullCredit":false},{"lineNumber":1328,"author":{"gitId":"-"},"content":"            ?.NonIndexed);","isFullCredit":false},{"lineNumber":1329,"author":{"gitId":"-"},"content":"        ValidateReceiptCreated(receiptCreated, Address.FromPublicKey(reviewer.PublicKey), proposalId, utcNow,","isFullCredit":false},{"lineNumber":1330,"author":{"gitId":"-"},"content":"            nameof(associationContractStub.Approve));","isFullCredit":false},{"lineNumber":1331,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1332,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1333,"author":{"gitId":"-"},"content":"    private async Task RejectAsync(ECKeyPair reviewer, Hash proposalId)","isFullCredit":false},{"lineNumber":1334,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1335,"author":{"gitId":"-"},"content":"        var associationContractStub \u003d GetAssociationContractTester(reviewer);","isFullCredit":false},{"lineNumber":1336,"author":{"gitId":"-"},"content":"        var utcNow \u003d TimestampHelper.GetUtcNow();","isFullCredit":false},{"lineNumber":1337,"author":{"gitId":"-"},"content":"        BlockTimeProvider.SetBlockTime(utcNow);","isFullCredit":false},{"lineNumber":1338,"author":{"gitId":"-"},"content":"        var transactionResult \u003d","isFullCredit":false},{"lineNumber":1339,"author":{"gitId":"-"},"content":"            await associationContractStub.Reject.SendAsync(proposalId);","isFullCredit":false},{"lineNumber":1340,"author":{"gitId":"-"},"content":"        transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":1341,"author":{"gitId":"-"},"content":"        var receiptCreated \u003d ReceiptCreated.Parser.ParseFrom(transactionResult.TransactionResult.Logs","isFullCredit":false},{"lineNumber":1342,"author":{"gitId":"-"},"content":"            .FirstOrDefault(l \u003d\u003e l.Name \u003d\u003d nameof(ReceiptCreated))","isFullCredit":false},{"lineNumber":1343,"author":{"gitId":"-"},"content":"            ?.NonIndexed);","isFullCredit":false},{"lineNumber":1344,"author":{"gitId":"-"},"content":"        ValidateReceiptCreated(receiptCreated, Address.FromPublicKey(reviewer.PublicKey), proposalId, utcNow,","isFullCredit":false},{"lineNumber":1345,"author":{"gitId":"-"},"content":"            nameof(associationContractStub.Reject));","isFullCredit":false},{"lineNumber":1346,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1347,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1348,"author":{"gitId":"-"},"content":"    private async Task AbstainAsync(ECKeyPair reviewer, Hash proposalId)","isFullCredit":false},{"lineNumber":1349,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1350,"author":{"gitId":"-"},"content":"        var associationContractStub \u003d GetAssociationContractTester(reviewer);","isFullCredit":false},{"lineNumber":1351,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1352,"author":{"gitId":"-"},"content":"        var utcNow \u003d TimestampHelper.GetUtcNow();","isFullCredit":false},{"lineNumber":1353,"author":{"gitId":"-"},"content":"        BlockTimeProvider.SetBlockTime(utcNow);","isFullCredit":false},{"lineNumber":1354,"author":{"gitId":"-"},"content":"        var transactionResult \u003d","isFullCredit":false},{"lineNumber":1355,"author":{"gitId":"-"},"content":"            await associationContractStub.Abstain.SendAsync(proposalId);","isFullCredit":false},{"lineNumber":1356,"author":{"gitId":"-"},"content":"        transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":1357,"author":{"gitId":"-"},"content":"        var receiptCreated \u003d ReceiptCreated.Parser.ParseFrom(transactionResult.TransactionResult.Logs","isFullCredit":false},{"lineNumber":1358,"author":{"gitId":"-"},"content":"            .FirstOrDefault(l \u003d\u003e l.Name \u003d\u003d nameof(ReceiptCreated))","isFullCredit":false},{"lineNumber":1359,"author":{"gitId":"-"},"content":"            ?.NonIndexed);","isFullCredit":false},{"lineNumber":1360,"author":{"gitId":"-"},"content":"        ValidateReceiptCreated(receiptCreated, Address.FromPublicKey(reviewer.PublicKey), proposalId, utcNow,","isFullCredit":false},{"lineNumber":1361,"author":{"gitId":"-"},"content":"            nameof(associationContractStub.Abstain));","isFullCredit":false},{"lineNumber":1362,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1363,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1364,"author":{"gitId":"-"},"content":"    private void ValidateReceiptCreated(ReceiptCreated receiptCreated, Address sender, Hash proposalId,","isFullCredit":false},{"lineNumber":1365,"author":{"gitId":"-"},"content":"        Timestamp blockTime, string receiptType)","isFullCredit":false},{"lineNumber":1366,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1367,"author":{"gitId":"-"},"content":"        receiptCreated.Address.ShouldBe(sender);","isFullCredit":false},{"lineNumber":1368,"author":{"gitId":"-"},"content":"        receiptCreated.ProposalId.ShouldBe(proposalId);","isFullCredit":false},{"lineNumber":1369,"author":{"gitId":"-"},"content":"        receiptCreated.Time.ShouldBe(blockTime);","isFullCredit":false},{"lineNumber":1370,"author":{"gitId":"-"},"content":"        receiptCreated.ReceiptType.ShouldBe(receiptType);","isFullCredit":false},{"lineNumber":1371,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1372,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1373,"author":{"gitId":"-"},"content":"    protected async Task\u003cHash\u003e CreateFeeProposalAsync(Address contractAddress, Address organizationAddress,","isFullCredit":false},{"lineNumber":1374,"author":{"gitId":"-"},"content":"        string methodName, IMessage input)","isFullCredit":false},{"lineNumber":1375,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1376,"author":{"gitId":"-"},"content":"        var proposal \u003d new CreateProposalInput","isFullCredit":false},{"lineNumber":1377,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1378,"author":{"gitId":"-"},"content":"            OrganizationAddress \u003d organizationAddress,","isFullCredit":false},{"lineNumber":1379,"author":{"gitId":"-"},"content":"            ContractMethodName \u003d methodName,","isFullCredit":false},{"lineNumber":1380,"author":{"gitId":"-"},"content":"            ExpiredTime \u003d TimestampHelper.GetUtcNow().AddHours(1),","isFullCredit":false},{"lineNumber":1381,"author":{"gitId":"-"},"content":"            Params \u003d input.ToByteString(),","isFullCredit":false},{"lineNumber":1382,"author":{"gitId":"-"},"content":"            ToAddress \u003d contractAddress","isFullCredit":false},{"lineNumber":1383,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":1384,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1385,"author":{"gitId":"-"},"content":"        var createResult \u003d await ParliamentContractStub.CreateProposal.SendAsync(proposal);","isFullCredit":false},{"lineNumber":1386,"author":{"gitId":"-"},"content":"        var proposalId \u003d createResult.Output;","isFullCredit":false},{"lineNumber":1387,"author":{"gitId":"-"},"content":"        return proposalId;","isFullCredit":false},{"lineNumber":1388,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1389,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1390,"author":{"gitId":"-"},"content":"    protected async Task ApproveWithMinersAsync(Hash proposalId)","isFullCredit":false},{"lineNumber":1391,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1392,"author":{"gitId":"-"},"content":"        foreach (var bp in InitialCoreDataCenterKeyPairs)","isFullCredit":false},{"lineNumber":1393,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1394,"author":{"gitId":"-"},"content":"            var tester \u003d GetParliamentContractTester(bp);","isFullCredit":false},{"lineNumber":1395,"author":{"gitId":"-"},"content":"            var approveResult \u003d await tester.Approve.SendAsync(proposalId);","isFullCredit":false},{"lineNumber":1396,"author":{"gitId":"-"},"content":"            approveResult.TransactionResult.Error.ShouldBeNullOrEmpty();","isFullCredit":false},{"lineNumber":1397,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":1398,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1399,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1400,"author":{"gitId":"-"},"content":"    private CreateProposalInput GetValidProposalInput(Address organizationAddress)","isFullCredit":false},{"lineNumber":1401,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1402,"author":{"gitId":"-"},"content":"        var transferInput \u003d new TransferInput","isFullCredit":false},{"lineNumber":1403,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1404,"author":{"gitId":"-"},"content":"            Symbol \u003d \"ELF\",","isFullCredit":false},{"lineNumber":1405,"author":{"gitId":"-"},"content":"            Amount \u003d 100,","isFullCredit":false},{"lineNumber":1406,"author":{"gitId":"-"},"content":"            To \u003d Reviewer1,","isFullCredit":false},{"lineNumber":1407,"author":{"gitId":"-"},"content":"            Memo \u003d \"Transfer\"","isFullCredit":false},{"lineNumber":1408,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":1409,"author":{"gitId":"-"},"content":"        return new CreateProposalInput","isFullCredit":false},{"lineNumber":1410,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1411,"author":{"gitId":"-"},"content":"            ContractMethodName \u003d nameof(TokenContractStub.Transfer),","isFullCredit":false},{"lineNumber":1412,"author":{"gitId":"-"},"content":"            ToAddress \u003d TokenContractAddress,","isFullCredit":false},{"lineNumber":1413,"author":{"gitId":"-"},"content":"            Params \u003d transferInput.ToByteString(),","isFullCredit":false},{"lineNumber":1414,"author":{"gitId":"-"},"content":"            ExpiredTime \u003d BlockTimeProvider.GetBlockTime().AddDays(2),","isFullCredit":false},{"lineNumber":1415,"author":{"gitId":"-"},"content":"            OrganizationAddress \u003d organizationAddress","isFullCredit":false},{"lineNumber":1416,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":1417,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1418,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1419,"author":{"gitId":"-"},"content":"    private MethodFees GetValidMethodFees()","isFullCredit":false},{"lineNumber":1420,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1421,"author":{"gitId":"-"},"content":"        return new MethodFees","isFullCredit":false},{"lineNumber":1422,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1423,"author":{"gitId":"-"},"content":"            MethodName \u003d \"Test\",","isFullCredit":false},{"lineNumber":1424,"author":{"gitId":"-"},"content":"            Fees \u003d","isFullCredit":false},{"lineNumber":1425,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":1426,"author":{"gitId":"-"},"content":"                new MethodFee","isFullCredit":false},{"lineNumber":1427,"author":{"gitId":"-"},"content":"                {","isFullCredit":false},{"lineNumber":1428,"author":{"gitId":"-"},"content":"                    Symbol \u003d \"ELF\",","isFullCredit":false},{"lineNumber":1429,"author":{"gitId":"-"},"content":"                    BasicFee \u003d 10","isFullCredit":false},{"lineNumber":1430,"author":{"gitId":"-"},"content":"                }","isFullCredit":false},{"lineNumber":1431,"author":{"gitId":"-"},"content":"            }","isFullCredit":false},{"lineNumber":1432,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":1433,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1434,"author":{"gitId":"-"},"content":"}","isFullCredit":false}],"authorContributionMap":{"eanzhao":5,"-":1429}},{"path":"test/AElf.Contracts.Parliament.Tests/ParliamentContractTest.cs","fileType":"cs","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"using System;","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"-"},"content":"using System.Linq;","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"-"},"content":"using System.Threading.Tasks;","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"-"},"content":"using AElf.Contracts.MultiToken;","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"-"},"content":"using AElf.Cryptography.ECDSA;","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"-"},"content":"using AElf.CSharp.Core.Extension;","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"-"},"content":"using AElf.Kernel;","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"-"},"content":"using AElf.Kernel.Blockchain.Application;","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"-"},"content":"using AElf.Kernel.SmartContract;","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"-"},"content":"using AElf.Kernel.SmartContract.Application;","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"-"},"content":"using AElf.Standards.ACS1;","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"-"},"content":"using AElf.Standards.ACS3;","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"-"},"content":"using AElf.Types;","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"-"},"content":"using Google.Protobuf;","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"-"},"content":"using Google.Protobuf.WellKnownTypes;","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"-"},"content":"using Shouldly;","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"-"},"content":"using Xunit;","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"-"},"content":"namespace AElf.Contracts.Parliament;","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"-"},"content":"public class ParliamentContractTest : ParliamentContractTestBase","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"-"},"content":"{","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"-"},"content":"    private readonly IBlockchainService _blockchainService;","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"-"},"content":"    private readonly ISmartContractAddressNameProvider _smartContractAddressNameProvider;","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"-"},"content":"    private readonly ISmartContractAddressService _smartContractAddressService;","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"-"},"content":"    public ParliamentContractTest()","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"-"},"content":"        _blockchainService \u003d GetRequiredService\u003cIBlockchainService\u003e();","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"-"},"content":"        _smartContractAddressService \u003d GetRequiredService\u003cISmartContractAddressService\u003e();","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"-"},"content":"        _smartContractAddressNameProvider \u003d GetRequiredService\u003cISmartContractAddressNameProvider\u003e();","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"-"},"content":"        InitializeContracts();","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"-"},"content":"    public async Task ParliamentContract_InitializeTwice_Test()","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"-"},"content":"        var result \u003d await ParliamentContractStub.Initialize.SendWithExceptionAsync(new InitializeInput());","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"-"},"content":"        result.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"-"},"content":"        result.TransactionResult.Error.Contains(\"Already initialized.\").ShouldBeTrue();","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"-"},"content":"    public async Task Get_Organization_Test()","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"-"},"content":"        // await InitializeParliamentContracts();","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"-"},"content":"        var minimalApprovalThreshold \u003d 10000 / MinersCount;","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 2000 / MinersCount;","isFullCredit":false},{"lineNumber":49,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 3000 / MinersCount;","isFullCredit":false},{"lineNumber":50,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 11000 / MinersCount;","isFullCredit":false},{"lineNumber":51,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":52,"author":{"gitId":"-"},"content":"        var createOrganizationInput \u003d new CreateOrganizationInput","isFullCredit":false},{"lineNumber":53,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":54,"author":{"gitId":"-"},"content":"            ProposalReleaseThreshold \u003d new ProposalReleaseThreshold","isFullCredit":false},{"lineNumber":55,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":56,"author":{"gitId":"-"},"content":"                MinimalApprovalThreshold \u003d minimalApprovalThreshold,","isFullCredit":false},{"lineNumber":57,"author":{"gitId":"-"},"content":"                MaximalAbstentionThreshold \u003d maximalAbstentionThreshold,","isFullCredit":false},{"lineNumber":58,"author":{"gitId":"-"},"content":"                MaximalRejectionThreshold \u003d maximalRejectionThreshold,","isFullCredit":false},{"lineNumber":59,"author":{"gitId":"-"},"content":"                MinimalVoteThreshold \u003d minimalVoteThreshold","isFullCredit":false},{"lineNumber":60,"author":{"gitId":"-"},"content":"            }","isFullCredit":false},{"lineNumber":61,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":62,"author":{"gitId":"-"},"content":"        var minerParliamentContractStub \u003d GetParliamentContractTester(InitialMinersKeyPairs.First());","isFullCredit":false},{"lineNumber":63,"author":{"gitId":"-"},"content":"        var transactionResult \u003d","isFullCredit":false},{"lineNumber":64,"author":{"gitId":"-"},"content":"            await minerParliamentContractStub.CreateOrganization.SendAsync(createOrganizationInput);","isFullCredit":false},{"lineNumber":65,"author":{"gitId":"-"},"content":"        var organizationCalculated \u003d ParliamentContractStub.CalculateOrganizationAddress","isFullCredit":false},{"lineNumber":66,"author":{"gitId":"-"},"content":"            .CallAsync(createOrganizationInput).Result;","isFullCredit":false},{"lineNumber":67,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d transactionResult.Output;","isFullCredit":false},{"lineNumber":68,"author":{"gitId":"-"},"content":"        organizationCalculated.ShouldBe(organizationAddress);","isFullCredit":false},{"lineNumber":69,"author":{"gitId":"-"},"content":"        var getOrganization \u003d await ParliamentContractStub.GetOrganization.CallAsync(organizationAddress);","isFullCredit":false},{"lineNumber":70,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":71,"author":{"gitId":"-"},"content":"        getOrganization.OrganizationAddress.ShouldBe(organizationAddress);","isFullCredit":false},{"lineNumber":72,"author":{"gitId":"-"},"content":"        getOrganization.ProposalReleaseThreshold.MinimalApprovalThreshold.ShouldBe(minimalApprovalThreshold);","isFullCredit":false},{"lineNumber":73,"author":{"gitId":"-"},"content":"        getOrganization.ProposalReleaseThreshold.MinimalVoteThreshold.ShouldBe(minimalVoteThreshold);","isFullCredit":false},{"lineNumber":74,"author":{"gitId":"-"},"content":"        getOrganization.ProposalReleaseThreshold.MaximalAbstentionThreshold.ShouldBe(maximalAbstentionThreshold);","isFullCredit":false},{"lineNumber":75,"author":{"gitId":"-"},"content":"        getOrganization.ProposalReleaseThreshold.MaximalRejectionThreshold.ShouldBe(maximalRejectionThreshold);","isFullCredit":false},{"lineNumber":76,"author":{"gitId":"-"},"content":"        getOrganization.OrganizationHash.ShouldBe(HashHelper.ComputeFrom(createOrganizationInput));","isFullCredit":false},{"lineNumber":77,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":78,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":79,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":80,"author":{"gitId":"-"},"content":"    public async Task Get_OrganizationFailed_Test()","isFullCredit":false},{"lineNumber":81,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":82,"author":{"gitId":"-"},"content":"        var organization \u003d","isFullCredit":false},{"lineNumber":83,"author":{"gitId":"-"},"content":"            await ParliamentContractStub.GetOrganization.CallAsync(Accounts[0].Address);","isFullCredit":false},{"lineNumber":84,"author":{"gitId":"-"},"content":"        organization.ShouldBe(new Organization());","isFullCredit":false},{"lineNumber":85,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":86,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":87,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":88,"author":{"gitId":"-"},"content":"    public async Task Get_Proposal_Test()","isFullCredit":false},{"lineNumber":89,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":90,"author":{"gitId":"-"},"content":"        // await InitializeParliamentContracts();","isFullCredit":false},{"lineNumber":91,"author":{"gitId":"-"},"content":"        var minimalApprovalThreshold \u003d 6667;","isFullCredit":false},{"lineNumber":92,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 2000;","isFullCredit":false},{"lineNumber":93,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 3000;","isFullCredit":false},{"lineNumber":94,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 8000;","isFullCredit":false},{"lineNumber":95,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApprovalThreshold,","isFullCredit":false},{"lineNumber":96,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, minimalVoteThreshold);","isFullCredit":false},{"lineNumber":97,"author":{"gitId":"-"},"content":"        var transferInput \u003d new TransferInput","isFullCredit":false},{"lineNumber":98,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":99,"author":{"gitId":"-"},"content":"            Symbol \u003d \"ELF\",","isFullCredit":false},{"lineNumber":100,"author":{"gitId":"-"},"content":"            Amount \u003d 100,","isFullCredit":false},{"lineNumber":101,"author":{"gitId":"-"},"content":"            To \u003d Tester","isFullCredit":false},{"lineNumber":102,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":103,"author":{"gitId":"-"},"content":"        var proposalId \u003d await CreateProposalAsync(DefaultSenderKeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":104,"author":{"gitId":"-"},"content":"        var getProposal \u003d await ParliamentContractStub.GetProposal.SendAsync(proposalId);","isFullCredit":false},{"lineNumber":105,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":106,"author":{"gitId":"-"},"content":"        getProposal.Output.Proposer.ShouldBe(DefaultSender);","isFullCredit":false},{"lineNumber":107,"author":{"gitId":"-"},"content":"        getProposal.Output.ContractMethodName.ShouldBe(nameof(TokenContractStub.Transfer));","isFullCredit":false},{"lineNumber":108,"author":{"gitId":"-"},"content":"        getProposal.Output.ProposalId.ShouldBe(proposalId);","isFullCredit":false},{"lineNumber":109,"author":{"gitId":"-"},"content":"        getProposal.Output.OrganizationAddress.ShouldBe(organizationAddress);","isFullCredit":false},{"lineNumber":110,"author":{"gitId":"-"},"content":"        getProposal.Output.ToAddress.ShouldBe(TokenContractAddress);","isFullCredit":false},{"lineNumber":111,"author":{"gitId":"eanzhao"},"content":"        getProposal.Output.Title.ShouldNotBeNullOrEmpty();","isFullCredit":false},{"lineNumber":112,"author":{"gitId":"eanzhao"},"content":"        getProposal.Output.Description.ShouldNotBeNullOrEmpty();","isFullCredit":false},{"lineNumber":113,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":114,"author":{"gitId":"-"},"content":"        var transferParam \u003d TransferInput.Parser.ParseFrom(getProposal.Output.Params);","isFullCredit":false},{"lineNumber":115,"author":{"gitId":"-"},"content":"        transferParam.Symbol.ShouldBe(transferInput.Symbol);","isFullCredit":false},{"lineNumber":116,"author":{"gitId":"-"},"content":"        transferParam.Amount.ShouldBe(transferInput.Amount);","isFullCredit":false},{"lineNumber":117,"author":{"gitId":"-"},"content":"        transferParam.To.ShouldBe(transferInput.To);","isFullCredit":false},{"lineNumber":118,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":119,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":120,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":121,"author":{"gitId":"-"},"content":"    public async Task ApproveMultiProposals_Without_Authority_Test()","isFullCredit":false},{"lineNumber":122,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":123,"author":{"gitId":"-"},"content":"        var invalidSenderStub \u003d","isFullCredit":false},{"lineNumber":124,"author":{"gitId":"-"},"content":"            GetTester\u003cParliamentContractImplContainer.ParliamentContractImplStub\u003e(ParliamentContractAddress,","isFullCredit":false},{"lineNumber":125,"author":{"gitId":"-"},"content":"                TesterKeyPair);","isFullCredit":false},{"lineNumber":126,"author":{"gitId":"-"},"content":"        var approveRet \u003d","isFullCredit":false},{"lineNumber":127,"author":{"gitId":"-"},"content":"            await invalidSenderStub.ApproveMultiProposals.SendWithExceptionAsync(new ProposalIdList());","isFullCredit":false},{"lineNumber":128,"author":{"gitId":"-"},"content":"        approveRet.TransactionResult.Error.ShouldContain(\"No permission\");","isFullCredit":false},{"lineNumber":129,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":130,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":131,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":132,"author":{"gitId":"-"},"content":"    public async Task ApproveMultiProposals_Test()","isFullCredit":false},{"lineNumber":133,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":134,"author":{"gitId":"-"},"content":"        // await InitializeParliamentContracts();","isFullCredit":false},{"lineNumber":135,"author":{"gitId":"-"},"content":"        var minimalApprovalThreshold \u003d 6667;","isFullCredit":false},{"lineNumber":136,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 2000;","isFullCredit":false},{"lineNumber":137,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 3000;","isFullCredit":false},{"lineNumber":138,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 8000;","isFullCredit":false},{"lineNumber":139,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApprovalThreshold,","isFullCredit":false},{"lineNumber":140,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, minimalVoteThreshold);","isFullCredit":false},{"lineNumber":141,"author":{"gitId":"-"},"content":"        var proposalId1 \u003d await CreateProposalAsync(DefaultSenderKeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":142,"author":{"gitId":"-"},"content":"        var proposalId2 \u003d await CreateProposalAsync(DefaultSenderKeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":143,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":144,"author":{"gitId":"-"},"content":"        ParliamentContractStub \u003d GetParliamentContractTester(InitialMinersKeyPairs[0]);","isFullCredit":false},{"lineNumber":145,"author":{"gitId":"-"},"content":"        var transactionResult \u003d","isFullCredit":false},{"lineNumber":146,"author":{"gitId":"-"},"content":"            await ParliamentContractStub.ApproveMultiProposals.SendAsync(new ProposalIdList","isFullCredit":false},{"lineNumber":147,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":148,"author":{"gitId":"-"},"content":"                ProposalIds \u003d { proposalId1, proposalId2 }","isFullCredit":false},{"lineNumber":149,"author":{"gitId":"-"},"content":"            });","isFullCredit":false},{"lineNumber":150,"author":{"gitId":"-"},"content":"        transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":151,"author":{"gitId":"-"},"content":"        var proposal1 \u003d await ParliamentContractStub.GetProposal.CallAsync(proposalId1);","isFullCredit":false},{"lineNumber":152,"author":{"gitId":"-"},"content":"        proposal1.ApprovalCount.ShouldBe(1);","isFullCredit":false},{"lineNumber":153,"author":{"gitId":"-"},"content":"        var proposal2 \u003d await ParliamentContractStub.GetProposal.CallAsync(proposalId1);","isFullCredit":false},{"lineNumber":154,"author":{"gitId":"-"},"content":"        proposal2.ApprovalCount.ShouldBe(1);","isFullCredit":false},{"lineNumber":155,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":156,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":157,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":158,"author":{"gitId":"-"},"content":"    public async Task Get_ProposalFailed_Test()","isFullCredit":false},{"lineNumber":159,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":160,"author":{"gitId":"-"},"content":"        var proposalOutput \u003d await ParliamentContractStub.GetProposal.CallAsync(HashHelper.ComputeFrom(\"Test\"));","isFullCredit":false},{"lineNumber":161,"author":{"gitId":"-"},"content":"        proposalOutput.ShouldBe(new ProposalOutput());","isFullCredit":false},{"lineNumber":162,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":163,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":164,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":165,"author":{"gitId":"-"},"content":"    public async Task Create_OrganizationFailed_Test()","isFullCredit":false},{"lineNumber":166,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":167,"author":{"gitId":"-"},"content":"        // await InitializeParliamentContracts();","isFullCredit":false},{"lineNumber":168,"author":{"gitId":"-"},"content":"        var minimalApprovalThreshold \u003d 6667;","isFullCredit":false},{"lineNumber":169,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 2000;","isFullCredit":false},{"lineNumber":170,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 3000;","isFullCredit":false},{"lineNumber":171,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 8000;","isFullCredit":false},{"lineNumber":172,"author":{"gitId":"-"},"content":"        var proposalReleaseThreshold \u003d new ProposalReleaseThreshold","isFullCredit":false},{"lineNumber":173,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":174,"author":{"gitId":"-"},"content":"            MinimalApprovalThreshold \u003d minimalApprovalThreshold,","isFullCredit":false},{"lineNumber":175,"author":{"gitId":"-"},"content":"            MaximalAbstentionThreshold \u003d maximalAbstentionThreshold,","isFullCredit":false},{"lineNumber":176,"author":{"gitId":"-"},"content":"            MaximalRejectionThreshold \u003d maximalRejectionThreshold,","isFullCredit":false},{"lineNumber":177,"author":{"gitId":"-"},"content":"            MinimalVoteThreshold \u003d minimalVoteThreshold","isFullCredit":false},{"lineNumber":178,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":179,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":180,"author":{"gitId":"-"},"content":"        var createOrganizationInput \u003d new CreateOrganizationInput","isFullCredit":false},{"lineNumber":181,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":182,"author":{"gitId":"-"},"content":"            ProposalReleaseThreshold \u003d proposalReleaseThreshold.Clone()","isFullCredit":false},{"lineNumber":183,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":184,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":185,"author":{"gitId":"-"},"content":"        var minerParliamentContractStub \u003d GetParliamentContractTester(InitialMinersKeyPairs[0]);","isFullCredit":false},{"lineNumber":186,"author":{"gitId":"-"},"content":"        ","isFullCredit":false},{"lineNumber":187,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":188,"author":{"gitId":"-"},"content":"            createOrganizationInput.ProposalReleaseThreshold \u003d proposalReleaseThreshold;","isFullCredit":false},{"lineNumber":189,"author":{"gitId":"-"},"content":"            createOrganizationInput.ProposalReleaseThreshold.MinimalApprovalThreshold \u003d 10000;","isFullCredit":false},{"lineNumber":190,"author":{"gitId":"-"},"content":"            createOrganizationInput.ProposalReleaseThreshold.MinimalVoteThreshold \u003d 10000;","isFullCredit":false},{"lineNumber":191,"author":{"gitId":"-"},"content":"            createOrganizationInput.ProposalReleaseThreshold.MaximalAbstentionThreshold \u003d 0;","isFullCredit":false},{"lineNumber":192,"author":{"gitId":"-"},"content":"            createOrganizationInput.ProposalReleaseThreshold.MaximalRejectionThreshold \u003d 0;","isFullCredit":false},{"lineNumber":193,"author":{"gitId":"-"},"content":"            var transactionResult \u003d","isFullCredit":false},{"lineNumber":194,"author":{"gitId":"-"},"content":"                await minerParliamentContractStub.CreateOrganization.SendAsync(createOrganizationInput);","isFullCredit":false},{"lineNumber":195,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":196,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":197,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":198,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":199,"author":{"gitId":"-"},"content":"            createOrganizationInput.ProposalReleaseThreshold \u003d proposalReleaseThreshold;","isFullCredit":false},{"lineNumber":200,"author":{"gitId":"-"},"content":"            createOrganizationInput.ProposalReleaseThreshold.MinimalApprovalThreshold \u003d 0;","isFullCredit":false},{"lineNumber":201,"author":{"gitId":"-"},"content":"            var transactionResult \u003d","isFullCredit":false},{"lineNumber":202,"author":{"gitId":"-"},"content":"                await minerParliamentContractStub.CreateOrganization.SendWithExceptionAsync(createOrganizationInput);","isFullCredit":false},{"lineNumber":203,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":204,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Error.Contains(\"Invalid organization.\").ShouldBeTrue();","isFullCredit":false},{"lineNumber":205,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":206,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":207,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":208,"author":{"gitId":"-"},"content":"            createOrganizationInput.ProposalReleaseThreshold \u003d proposalReleaseThreshold;","isFullCredit":false},{"lineNumber":209,"author":{"gitId":"-"},"content":"            createOrganizationInput.ProposalReleaseThreshold.MinimalApprovalThreshold \u003d -1;","isFullCredit":false},{"lineNumber":210,"author":{"gitId":"-"},"content":"            var transactionResult \u003d","isFullCredit":false},{"lineNumber":211,"author":{"gitId":"-"},"content":"                await minerParliamentContractStub.CreateOrganization.SendWithExceptionAsync(createOrganizationInput);","isFullCredit":false},{"lineNumber":212,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":213,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Error.Contains(\"Invalid organization.\").ShouldBeTrue();","isFullCredit":false},{"lineNumber":214,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":215,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":216,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":217,"author":{"gitId":"-"},"content":"            createOrganizationInput.ProposalReleaseThreshold \u003d proposalReleaseThreshold;","isFullCredit":false},{"lineNumber":218,"author":{"gitId":"-"},"content":"            createOrganizationInput.ProposalReleaseThreshold.MaximalAbstentionThreshold \u003d -1;","isFullCredit":false},{"lineNumber":219,"author":{"gitId":"-"},"content":"            var transactionResult \u003d","isFullCredit":false},{"lineNumber":220,"author":{"gitId":"-"},"content":"                await minerParliamentContractStub.CreateOrganization.SendWithExceptionAsync(createOrganizationInput);","isFullCredit":false},{"lineNumber":221,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":222,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Error.Contains(\"Invalid organization.\").ShouldBeTrue();","isFullCredit":false},{"lineNumber":223,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":224,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":225,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":226,"author":{"gitId":"-"},"content":"            createOrganizationInput.ProposalReleaseThreshold \u003d proposalReleaseThreshold;","isFullCredit":false},{"lineNumber":227,"author":{"gitId":"-"},"content":"            createOrganizationInput.ProposalReleaseThreshold.MaximalAbstentionThreshold \u003d 3334;","isFullCredit":false},{"lineNumber":228,"author":{"gitId":"-"},"content":"            var transactionResult \u003d","isFullCredit":false},{"lineNumber":229,"author":{"gitId":"-"},"content":"                await minerParliamentContractStub.CreateOrganization.SendWithExceptionAsync(createOrganizationInput);","isFullCredit":false},{"lineNumber":230,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":231,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Error.Contains(\"Invalid organization.\").ShouldBeTrue();","isFullCredit":false},{"lineNumber":232,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":233,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":234,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":235,"author":{"gitId":"-"},"content":"            createOrganizationInput.ProposalReleaseThreshold \u003d proposalReleaseThreshold;","isFullCredit":false},{"lineNumber":236,"author":{"gitId":"-"},"content":"            createOrganizationInput.ProposalReleaseThreshold.MaximalRejectionThreshold \u003d 3334;","isFullCredit":false},{"lineNumber":237,"author":{"gitId":"-"},"content":"            var transactionResult \u003d","isFullCredit":false},{"lineNumber":238,"author":{"gitId":"-"},"content":"                await minerParliamentContractStub.CreateOrganization.SendWithExceptionAsync(createOrganizationInput);","isFullCredit":false},{"lineNumber":239,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":240,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Error.Contains(\"Invalid organization.\").ShouldBeTrue();","isFullCredit":false},{"lineNumber":241,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":242,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":243,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":244,"author":{"gitId":"-"},"content":"            createOrganizationInput.ProposalReleaseThreshold \u003d proposalReleaseThreshold;","isFullCredit":false},{"lineNumber":245,"author":{"gitId":"-"},"content":"            createOrganizationInput.ProposalReleaseThreshold.MinimalApprovalThreshold \u003d 10001;","isFullCredit":false},{"lineNumber":246,"author":{"gitId":"-"},"content":"            var transactionResult \u003d","isFullCredit":false},{"lineNumber":247,"author":{"gitId":"-"},"content":"                await minerParliamentContractStub.CreateOrganization.SendWithExceptionAsync(createOrganizationInput);","isFullCredit":false},{"lineNumber":248,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":249,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Error.Contains(\"Invalid organization.\").ShouldBeTrue();","isFullCredit":false},{"lineNumber":250,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":251,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":252,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":253,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":254,"author":{"gitId":"-"},"content":"    public async Task Create_ProposalFailed_Test()","isFullCredit":false},{"lineNumber":255,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":256,"author":{"gitId":"-"},"content":"        // await InitializeParliamentContracts();","isFullCredit":false},{"lineNumber":257,"author":{"gitId":"-"},"content":"        var minimalApprovalThreshold \u003d 6667;","isFullCredit":false},{"lineNumber":258,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 2000;","isFullCredit":false},{"lineNumber":259,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 3000;","isFullCredit":false},{"lineNumber":260,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 8000;","isFullCredit":false},{"lineNumber":261,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApprovalThreshold,","isFullCredit":false},{"lineNumber":262,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, minimalVoteThreshold);","isFullCredit":false},{"lineNumber":263,"author":{"gitId":"-"},"content":"        var blockTime \u003d BlockTimeProvider.GetBlockTime();","isFullCredit":false},{"lineNumber":264,"author":{"gitId":"-"},"content":"        var createProposalInput \u003d new CreateProposalInput","isFullCredit":false},{"lineNumber":265,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":266,"author":{"gitId":"-"},"content":"            ToAddress \u003d Accounts[0].Address,","isFullCredit":false},{"lineNumber":267,"author":{"gitId":"-"},"content":"            Params \u003d ByteString.CopyFromUtf8(\"Test\"),","isFullCredit":false},{"lineNumber":268,"author":{"gitId":"-"},"content":"            ExpiredTime \u003d blockTime.AddDays(1),","isFullCredit":false},{"lineNumber":269,"author":{"gitId":"-"},"content":"            OrganizationAddress \u003d organizationAddress","isFullCredit":false},{"lineNumber":270,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":271,"author":{"gitId":"-"},"content":"        //\"Invalid proposal.\"","isFullCredit":false},{"lineNumber":272,"author":{"gitId":"-"},"content":"        //ContractMethodName is null or white space","isFullCredit":false},{"lineNumber":273,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":274,"author":{"gitId":"-"},"content":"            var transactionResult \u003d","isFullCredit":false},{"lineNumber":275,"author":{"gitId":"-"},"content":"                await ParliamentContractStub.CreateProposal.SendWithExceptionAsync(createProposalInput);","isFullCredit":false},{"lineNumber":276,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":277,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Error.Contains(\"Invalid proposal.\").ShouldBeTrue();","isFullCredit":false},{"lineNumber":278,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":279,"author":{"gitId":"-"},"content":"        //ToAddress is null","isFullCredit":false},{"lineNumber":280,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":281,"author":{"gitId":"-"},"content":"            createProposalInput.ContractMethodName \u003d \"Test\";","isFullCredit":false},{"lineNumber":282,"author":{"gitId":"-"},"content":"            createProposalInput.ToAddress \u003d null;","isFullCredit":false},{"lineNumber":283,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":284,"author":{"gitId":"-"},"content":"            var transactionResult \u003d","isFullCredit":false},{"lineNumber":285,"author":{"gitId":"-"},"content":"                await ParliamentContractStub.CreateProposal.SendWithExceptionAsync(createProposalInput);","isFullCredit":false},{"lineNumber":286,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":287,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Error.Contains(\"Invalid proposal.\").ShouldBeTrue();","isFullCredit":false},{"lineNumber":288,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":289,"author":{"gitId":"-"},"content":"        //ExpiredTime is null","isFullCredit":false},{"lineNumber":290,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":291,"author":{"gitId":"-"},"content":"            createProposalInput.ExpiredTime \u003d null;","isFullCredit":false},{"lineNumber":292,"author":{"gitId":"-"},"content":"            createProposalInput.ToAddress \u003d Accounts[0].Address;","isFullCredit":false},{"lineNumber":293,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":294,"author":{"gitId":"-"},"content":"            var transactionResult \u003d","isFullCredit":false},{"lineNumber":295,"author":{"gitId":"-"},"content":"                await ParliamentContractStub.CreateProposal.SendWithExceptionAsync(createProposalInput);","isFullCredit":false},{"lineNumber":296,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":297,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Error.Contains(\"Invalid proposal.\").ShouldBeTrue();","isFullCredit":false},{"lineNumber":298,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":299,"author":{"gitId":"-"},"content":"        //\"Expired proposal.\"","isFullCredit":false},{"lineNumber":300,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":301,"author":{"gitId":"-"},"content":"            createProposalInput.ExpiredTime \u003d TimestampHelper.GetUtcNow().AddMinutes(-10);","isFullCredit":false},{"lineNumber":302,"author":{"gitId":"-"},"content":"            var transactionResult \u003d","isFullCredit":false},{"lineNumber":303,"author":{"gitId":"-"},"content":"                await ParliamentContractStub.CreateProposal.SendWithExceptionAsync(createProposalInput);","isFullCredit":false},{"lineNumber":304,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":305,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":306,"author":{"gitId":"-"},"content":"        //\"No registered organization.\"","isFullCredit":false},{"lineNumber":307,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":308,"author":{"gitId":"-"},"content":"            createProposalInput.ExpiredTime \u003d BlockTimeProvider.GetBlockTime().AddDays(1);","isFullCredit":false},{"lineNumber":309,"author":{"gitId":"-"},"content":"            createProposalInput.OrganizationAddress \u003d Accounts[1].Address;","isFullCredit":false},{"lineNumber":310,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":311,"author":{"gitId":"-"},"content":"            var transactionResult \u003d","isFullCredit":false},{"lineNumber":312,"author":{"gitId":"-"},"content":"                await ParliamentContractStub.CreateProposal.SendWithExceptionAsync(createProposalInput);","isFullCredit":false},{"lineNumber":313,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":314,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Error.Contains(\"No registered organization.\").ShouldBeTrue();","isFullCredit":false},{"lineNumber":315,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":316,"author":{"gitId":"-"},"content":"        //\"Proposal with same input.\"","isFullCredit":false},{"lineNumber":317,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":318,"author":{"gitId":"-"},"content":"            createProposalInput.OrganizationAddress \u003d organizationAddress;","isFullCredit":false},{"lineNumber":319,"author":{"gitId":"-"},"content":"            var transactionResult1 \u003d await ParliamentContractStub.CreateProposal.SendAsync(createProposalInput);","isFullCredit":false},{"lineNumber":320,"author":{"gitId":"-"},"content":"            transactionResult1.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":321,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":322,"author":{"gitId":"-"},"content":"            var transactionResult2 \u003d await ParliamentContractStub.CreateProposal.SendAsync(createProposalInput);","isFullCredit":false},{"lineNumber":323,"author":{"gitId":"-"},"content":"            transactionResult2.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":324,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":325,"author":{"gitId":"-"},"content":"        // invalid proposal description url","isFullCredit":false},{"lineNumber":326,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":327,"author":{"gitId":"-"},"content":"            createProposalInput.ProposalDescriptionUrl \u003d \"www.abc.com\";","isFullCredit":false},{"lineNumber":328,"author":{"gitId":"-"},"content":"            var transactionResult \u003d","isFullCredit":false},{"lineNumber":329,"author":{"gitId":"-"},"content":"                await ParliamentContractStub.CreateProposal.SendWithExceptionAsync(createProposalInput);","isFullCredit":false},{"lineNumber":330,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":331,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Error.Contains(\"Invalid proposal.\").ShouldBeTrue();","isFullCredit":false},{"lineNumber":332,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":333,"author":{"gitId":"-"},"content":"            createProposalInput.ProposalDescriptionUrl \u003d \"http://www.abc.com\";","isFullCredit":false},{"lineNumber":334,"author":{"gitId":"-"},"content":"            var transactionResult1 \u003d await ParliamentContractStub.CreateProposal.SendAsync(createProposalInput);","isFullCredit":false},{"lineNumber":335,"author":{"gitId":"-"},"content":"            transactionResult1.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":336,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":337,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":338,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":339,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":340,"author":{"gitId":"-"},"content":"    public async Task Approve_Proposal_NotFoundProposal_Test()","isFullCredit":false},{"lineNumber":341,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":342,"author":{"gitId":"-"},"content":"        var transactionResult \u003d","isFullCredit":false},{"lineNumber":343,"author":{"gitId":"-"},"content":"            await ParliamentContractStub.Approve.SendWithExceptionAsync(HashHelper.ComputeFrom(\"Test\"));","isFullCredit":false},{"lineNumber":344,"author":{"gitId":"-"},"content":"        transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":345,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":346,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":347,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":348,"author":{"gitId":"-"},"content":"    public async Task Approve_Proposal_NotAuthorizedApproval_Test()","isFullCredit":false},{"lineNumber":349,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":350,"author":{"gitId":"-"},"content":"        // await InitializeParliamentContracts();","isFullCredit":false},{"lineNumber":351,"author":{"gitId":"-"},"content":"        var minimalApprovalThreshold \u003d 6667;","isFullCredit":false},{"lineNumber":352,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 2000;","isFullCredit":false},{"lineNumber":353,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 3000;","isFullCredit":false},{"lineNumber":354,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 8000;","isFullCredit":false},{"lineNumber":355,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApprovalThreshold,","isFullCredit":false},{"lineNumber":356,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, minimalVoteThreshold);","isFullCredit":false},{"lineNumber":357,"author":{"gitId":"-"},"content":"        var proposalId \u003d await CreateProposalAsync(DefaultSenderKeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":358,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":359,"author":{"gitId":"-"},"content":"        ParliamentContractStub \u003d GetParliamentContractTester(TesterKeyPair);","isFullCredit":false},{"lineNumber":360,"author":{"gitId":"-"},"content":"        var transactionResult \u003d await ParliamentContractStub.Approve.SendWithExceptionAsync(proposalId);","isFullCredit":false},{"lineNumber":361,"author":{"gitId":"-"},"content":"        transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":362,"author":{"gitId":"-"},"content":"        transactionResult.TransactionResult.Error.Contains(\"Unauthorized sender.\").ShouldBeTrue();","isFullCredit":false},{"lineNumber":363,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":364,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":365,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":366,"author":{"gitId":"-"},"content":"    public async Task Approve_Proposal_ExpiredTime_Test()","isFullCredit":false},{"lineNumber":367,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":368,"author":{"gitId":"-"},"content":"        // await InitializeParliamentContracts();","isFullCredit":false},{"lineNumber":369,"author":{"gitId":"-"},"content":"        var minimalApprovalThreshold \u003d 6667;","isFullCredit":false},{"lineNumber":370,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 2000;","isFullCredit":false},{"lineNumber":371,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 3000;","isFullCredit":false},{"lineNumber":372,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 8000;","isFullCredit":false},{"lineNumber":373,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApprovalThreshold,","isFullCredit":false},{"lineNumber":374,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, minimalVoteThreshold);","isFullCredit":false},{"lineNumber":375,"author":{"gitId":"-"},"content":"        var proposalId \u003d await CreateProposalAsync(DefaultSenderKeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":376,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":377,"author":{"gitId":"-"},"content":"        var parliamentContractStub \u003d GetParliamentContractTester(InitialMinersKeyPairs[0]);","isFullCredit":false},{"lineNumber":378,"author":{"gitId":"-"},"content":"        BlockTimeProvider.SetBlockTime(BlockTimeProvider.GetBlockTime().AddDays(5));","isFullCredit":false},{"lineNumber":379,"author":{"gitId":"-"},"content":"        var error \u003d await parliamentContractStub.Approve.CallWithExceptionAsync(proposalId);","isFullCredit":false},{"lineNumber":380,"author":{"gitId":"-"},"content":"        error.Value.ShouldContain(\"Invalid proposal.\");","isFullCredit":false},{"lineNumber":381,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":382,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":383,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":384,"author":{"gitId":"-"},"content":"    public async Task Approve_Proposal_ApprovalAlreadyExists_Test()","isFullCredit":false},{"lineNumber":385,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":386,"author":{"gitId":"-"},"content":"        // await InitializeParliamentContracts();","isFullCredit":false},{"lineNumber":387,"author":{"gitId":"-"},"content":"        var minimalApprovalThreshold \u003d 6667;","isFullCredit":false},{"lineNumber":388,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 2000;","isFullCredit":false},{"lineNumber":389,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 3000;","isFullCredit":false},{"lineNumber":390,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 8000;","isFullCredit":false},{"lineNumber":391,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApprovalThreshold,","isFullCredit":false},{"lineNumber":392,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, minimalVoteThreshold);","isFullCredit":false},{"lineNumber":393,"author":{"gitId":"-"},"content":"        var proposalId \u003d await CreateProposalAsync(DefaultSenderKeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":394,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":395,"author":{"gitId":"-"},"content":"        ParliamentContractStub \u003d GetParliamentContractTester(InitialMinersKeyPairs[0]);","isFullCredit":false},{"lineNumber":396,"author":{"gitId":"-"},"content":"        var transactionResult1 \u003d","isFullCredit":false},{"lineNumber":397,"author":{"gitId":"-"},"content":"            await ParliamentContractStub.Approve.SendAsync(proposalId);","isFullCredit":false},{"lineNumber":398,"author":{"gitId":"-"},"content":"        transactionResult1.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":399,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":400,"author":{"gitId":"-"},"content":"        var transactionResult2 \u003d","isFullCredit":false},{"lineNumber":401,"author":{"gitId":"-"},"content":"            await ParliamentContractStub.Reject.SendWithExceptionAsync(proposalId);","isFullCredit":false},{"lineNumber":402,"author":{"gitId":"-"},"content":"        transactionResult2.TransactionResult.Error.Contains(\"Already approved\").ShouldBeTrue();","isFullCredit":false},{"lineNumber":403,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":404,"author":{"gitId":"-"},"content":"        var transactionResult3 \u003d","isFullCredit":false},{"lineNumber":405,"author":{"gitId":"-"},"content":"            await ParliamentContractStub.Abstain.SendWithExceptionAsync(proposalId);","isFullCredit":false},{"lineNumber":406,"author":{"gitId":"-"},"content":"        transactionResult3.TransactionResult.Error.Contains(\"Already approved\").ShouldBeTrue();","isFullCredit":false},{"lineNumber":407,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":408,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":409,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":410,"author":{"gitId":"-"},"content":"    public async Task Reject_Without_Authority_Test()","isFullCredit":false},{"lineNumber":411,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":412,"author":{"gitId":"-"},"content":"        // await InitializeParliamentContracts();","isFullCredit":false},{"lineNumber":413,"author":{"gitId":"-"},"content":"        var minimalApprovalThreshold \u003d 6667;","isFullCredit":false},{"lineNumber":414,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 2000;","isFullCredit":false},{"lineNumber":415,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 3000;","isFullCredit":false},{"lineNumber":416,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 8000;","isFullCredit":false},{"lineNumber":417,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApprovalThreshold,","isFullCredit":false},{"lineNumber":418,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, minimalVoteThreshold);","isFullCredit":false},{"lineNumber":419,"author":{"gitId":"-"},"content":"        var proposalId \u003d await CreateProposalAsync(DefaultSenderKeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":420,"author":{"gitId":"-"},"content":"        ParliamentContractStub \u003d GetParliamentContractTester(TesterKeyPair);","isFullCredit":false},{"lineNumber":421,"author":{"gitId":"-"},"content":"        var transactionResult1 \u003d","isFullCredit":false},{"lineNumber":422,"author":{"gitId":"-"},"content":"            await ParliamentContractStub.Reject.SendWithExceptionAsync(proposalId);","isFullCredit":false},{"lineNumber":423,"author":{"gitId":"-"},"content":"        transactionResult1.TransactionResult.Error.ShouldContain(\"Unauthorized sender\");","isFullCredit":false},{"lineNumber":424,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":425,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":426,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":427,"author":{"gitId":"-"},"content":"    public async Task Reject_With_Invalid_Proposal_Test()","isFullCredit":false},{"lineNumber":428,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":429,"author":{"gitId":"-"},"content":"        // await InitializeParliamentContracts();","isFullCredit":false},{"lineNumber":430,"author":{"gitId":"-"},"content":"        var minimalApprovalThreshold \u003d 6667;","isFullCredit":false},{"lineNumber":431,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 2000;","isFullCredit":false},{"lineNumber":432,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 3000;","isFullCredit":false},{"lineNumber":433,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 8000;","isFullCredit":false},{"lineNumber":434,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApprovalThreshold,","isFullCredit":false},{"lineNumber":435,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, minimalVoteThreshold);","isFullCredit":false},{"lineNumber":436,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":437,"author":{"gitId":"-"},"content":"        ParliamentContractStub \u003d GetParliamentContractTester(InitialMinersKeyPairs[0]);","isFullCredit":false},{"lineNumber":438,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":439,"author":{"gitId":"-"},"content":"        // proposal does not exist","isFullCredit":false},{"lineNumber":440,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":441,"author":{"gitId":"-"},"content":"            var transactionResult1 \u003d await ParliamentContractStub.Reject.SendWithExceptionAsync(new Hash());","isFullCredit":false},{"lineNumber":442,"author":{"gitId":"-"},"content":"            transactionResult1.TransactionResult.Error.ShouldContain(\"Proposal not found\");","isFullCredit":false},{"lineNumber":443,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":444,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":445,"author":{"gitId":"-"},"content":"        //proposal expired","isFullCredit":false},{"lineNumber":446,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":447,"author":{"gitId":"-"},"content":"            var proposalId \u003d await CreateProposalAsync(DefaultSenderKeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":448,"author":{"gitId":"-"},"content":"            BlockTimeProvider.SetBlockTime(BlockTimeProvider.GetBlockTime().AddDays(5));","isFullCredit":false},{"lineNumber":449,"author":{"gitId":"-"},"content":"            var transactionResult1 \u003d","isFullCredit":false},{"lineNumber":450,"author":{"gitId":"-"},"content":"                await ParliamentContractStub.Reject.SendWithExceptionAsync(proposalId);","isFullCredit":false},{"lineNumber":451,"author":{"gitId":"-"},"content":"            transactionResult1.TransactionResult.Error.ShouldContain(\"Invalid proposal\");","isFullCredit":false},{"lineNumber":452,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":453,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":454,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":455,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":456,"author":{"gitId":"-"},"content":"    public async Task Reject_Approved_Proposal_Test()","isFullCredit":false},{"lineNumber":457,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":458,"author":{"gitId":"-"},"content":"        // await InitializeParliamentContracts();","isFullCredit":false},{"lineNumber":459,"author":{"gitId":"-"},"content":"        var minimalApprovalThreshold \u003d 6667;","isFullCredit":false},{"lineNumber":460,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 2000;","isFullCredit":false},{"lineNumber":461,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 3000;","isFullCredit":false},{"lineNumber":462,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 8000;","isFullCredit":false},{"lineNumber":463,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApprovalThreshold,","isFullCredit":false},{"lineNumber":464,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, minimalVoteThreshold);","isFullCredit":false},{"lineNumber":465,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":466,"author":{"gitId":"-"},"content":"        ParliamentContractStub \u003d GetParliamentContractTester(InitialMinersKeyPairs[0]);","isFullCredit":false},{"lineNumber":467,"author":{"gitId":"-"},"content":"        var proposalId \u003d await CreateProposalAsync(DefaultSenderKeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":468,"author":{"gitId":"-"},"content":"        await ParliamentContractStub.Approve.SendAsync(proposalId);","isFullCredit":false},{"lineNumber":469,"author":{"gitId":"-"},"content":"        var transactionResult1 \u003d","isFullCredit":false},{"lineNumber":470,"author":{"gitId":"-"},"content":"            await ParliamentContractStub.Reject.SendWithExceptionAsync(proposalId);","isFullCredit":false},{"lineNumber":471,"author":{"gitId":"-"},"content":"        transactionResult1.TransactionResult.Error.ShouldContain(\"Already approved\");","isFullCredit":false},{"lineNumber":472,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":473,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":474,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":475,"author":{"gitId":"-"},"content":"    public async Task Reject_Success_Test()","isFullCredit":false},{"lineNumber":476,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":477,"author":{"gitId":"-"},"content":"        // await InitializeParliamentContracts();","isFullCredit":false},{"lineNumber":478,"author":{"gitId":"-"},"content":"        var minimalApprovalThreshold \u003d 6667;","isFullCredit":false},{"lineNumber":479,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 2000;","isFullCredit":false},{"lineNumber":480,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 3000;","isFullCredit":false},{"lineNumber":481,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 8000;","isFullCredit":false},{"lineNumber":482,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApprovalThreshold,","isFullCredit":false},{"lineNumber":483,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, minimalVoteThreshold);","isFullCredit":false},{"lineNumber":484,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":485,"author":{"gitId":"-"},"content":"        ParliamentContractStub \u003d GetParliamentContractTester(InitialMinersKeyPairs[0]);","isFullCredit":false},{"lineNumber":486,"author":{"gitId":"-"},"content":"        var proposalId \u003d await CreateProposalAsync(DefaultSenderKeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":487,"author":{"gitId":"-"},"content":"        await ParliamentContractStub.Reject.SendAsync(proposalId);","isFullCredit":false},{"lineNumber":488,"author":{"gitId":"-"},"content":"        var proposal \u003d await ParliamentContractStub.GetProposal.CallAsync(proposalId);","isFullCredit":false},{"lineNumber":489,"author":{"gitId":"-"},"content":"        proposal.RejectionCount.ShouldBe(1);","isFullCredit":false},{"lineNumber":490,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":491,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":492,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":493,"author":{"gitId":"-"},"content":"    public async Task Abstain_Without_Authority_Test()","isFullCredit":false},{"lineNumber":494,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":495,"author":{"gitId":"-"},"content":"        // await InitializeParliamentContracts();","isFullCredit":false},{"lineNumber":496,"author":{"gitId":"-"},"content":"        var minimalApprovalThreshold \u003d 6667;","isFullCredit":false},{"lineNumber":497,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 2000;","isFullCredit":false},{"lineNumber":498,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 3000;","isFullCredit":false},{"lineNumber":499,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 8000;","isFullCredit":false},{"lineNumber":500,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApprovalThreshold,","isFullCredit":false},{"lineNumber":501,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, minimalVoteThreshold);","isFullCredit":false},{"lineNumber":502,"author":{"gitId":"-"},"content":"        var proposalId \u003d await CreateProposalAsync(DefaultSenderKeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":503,"author":{"gitId":"-"},"content":"        ParliamentContractStub \u003d GetParliamentContractTester(TesterKeyPair);","isFullCredit":false},{"lineNumber":504,"author":{"gitId":"-"},"content":"        var transactionResult1 \u003d","isFullCredit":false},{"lineNumber":505,"author":{"gitId":"-"},"content":"            await ParliamentContractStub.Abstain.SendWithExceptionAsync(proposalId);","isFullCredit":false},{"lineNumber":506,"author":{"gitId":"-"},"content":"        transactionResult1.TransactionResult.Error.ShouldContain(\"Unauthorized sender\");","isFullCredit":false},{"lineNumber":507,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":508,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":509,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":510,"author":{"gitId":"-"},"content":"    public async Task Abstain_With_Invalid_Proposal_Test()","isFullCredit":false},{"lineNumber":511,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":512,"author":{"gitId":"-"},"content":"        // await InitializeParliamentContracts();","isFullCredit":false},{"lineNumber":513,"author":{"gitId":"-"},"content":"        var minimalApprovalThreshold \u003d 6667;","isFullCredit":false},{"lineNumber":514,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 2000;","isFullCredit":false},{"lineNumber":515,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 3000;","isFullCredit":false},{"lineNumber":516,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 8000;","isFullCredit":false},{"lineNumber":517,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApprovalThreshold,","isFullCredit":false},{"lineNumber":518,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, minimalVoteThreshold);","isFullCredit":false},{"lineNumber":519,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":520,"author":{"gitId":"-"},"content":"        ParliamentContractStub \u003d GetParliamentContractTester(InitialMinersKeyPairs[0]);","isFullCredit":false},{"lineNumber":521,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":522,"author":{"gitId":"-"},"content":"        // proposal does not exist","isFullCredit":false},{"lineNumber":523,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":524,"author":{"gitId":"-"},"content":"            var transactionResult1 \u003d await ParliamentContractStub.Abstain.SendWithExceptionAsync(new Hash());","isFullCredit":false},{"lineNumber":525,"author":{"gitId":"-"},"content":"            transactionResult1.TransactionResult.Error.ShouldContain(\"Proposal not found\");","isFullCredit":false},{"lineNumber":526,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":527,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":528,"author":{"gitId":"-"},"content":"        //proposal expired","isFullCredit":false},{"lineNumber":529,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":530,"author":{"gitId":"-"},"content":"            var proposalId \u003d await CreateProposalAsync(DefaultSenderKeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":531,"author":{"gitId":"-"},"content":"            BlockTimeProvider.SetBlockTime(BlockTimeProvider.GetBlockTime().AddDays(5));","isFullCredit":false},{"lineNumber":532,"author":{"gitId":"-"},"content":"            var transactionResult1 \u003d","isFullCredit":false},{"lineNumber":533,"author":{"gitId":"-"},"content":"                await ParliamentContractStub.Abstain.SendWithExceptionAsync(proposalId);","isFullCredit":false},{"lineNumber":534,"author":{"gitId":"-"},"content":"            transactionResult1.TransactionResult.Error.ShouldContain(\"Invalid proposal\");","isFullCredit":false},{"lineNumber":535,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":536,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":537,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":538,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":539,"author":{"gitId":"-"},"content":"    public async Task Abstain_Approved_Proposal_Test()","isFullCredit":false},{"lineNumber":540,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":541,"author":{"gitId":"-"},"content":"        // await InitializeParliamentContracts();","isFullCredit":false},{"lineNumber":542,"author":{"gitId":"-"},"content":"        var minimalApprovalThreshold \u003d 6667;","isFullCredit":false},{"lineNumber":543,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 2000;","isFullCredit":false},{"lineNumber":544,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 3000;","isFullCredit":false},{"lineNumber":545,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 8000;","isFullCredit":false},{"lineNumber":546,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApprovalThreshold,","isFullCredit":false},{"lineNumber":547,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, minimalVoteThreshold);","isFullCredit":false},{"lineNumber":548,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":549,"author":{"gitId":"-"},"content":"        ParliamentContractStub \u003d GetParliamentContractTester(InitialMinersKeyPairs[0]);","isFullCredit":false},{"lineNumber":550,"author":{"gitId":"-"},"content":"        var proposalId \u003d await CreateProposalAsync(DefaultSenderKeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":551,"author":{"gitId":"-"},"content":"        await ParliamentContractStub.Approve.SendAsync(proposalId);","isFullCredit":false},{"lineNumber":552,"author":{"gitId":"-"},"content":"        var transactionResult1 \u003d","isFullCredit":false},{"lineNumber":553,"author":{"gitId":"-"},"content":"            await ParliamentContractStub.Abstain.SendWithExceptionAsync(proposalId);","isFullCredit":false},{"lineNumber":554,"author":{"gitId":"-"},"content":"        transactionResult1.TransactionResult.Error.ShouldContain(\"Already approved\");","isFullCredit":false},{"lineNumber":555,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":556,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":557,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":558,"author":{"gitId":"-"},"content":"    public async Task Abstain_Success_Test()","isFullCredit":false},{"lineNumber":559,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":560,"author":{"gitId":"-"},"content":"        // await InitializeParliamentContracts();","isFullCredit":false},{"lineNumber":561,"author":{"gitId":"-"},"content":"        var minimalApprovalThreshold \u003d 6667;","isFullCredit":false},{"lineNumber":562,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 2000;","isFullCredit":false},{"lineNumber":563,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 3000;","isFullCredit":false},{"lineNumber":564,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 8000;","isFullCredit":false},{"lineNumber":565,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApprovalThreshold,","isFullCredit":false},{"lineNumber":566,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, minimalVoteThreshold);","isFullCredit":false},{"lineNumber":567,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":568,"author":{"gitId":"-"},"content":"        ParliamentContractStub \u003d GetParliamentContractTester(InitialMinersKeyPairs[0]);","isFullCredit":false},{"lineNumber":569,"author":{"gitId":"-"},"content":"        var proposalId \u003d await CreateProposalAsync(DefaultSenderKeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":570,"author":{"gitId":"-"},"content":"        await ParliamentContractStub.Abstain.SendAsync(proposalId);","isFullCredit":false},{"lineNumber":571,"author":{"gitId":"-"},"content":"        var proposal \u003d await ParliamentContractStub.GetProposal.CallAsync(proposalId);","isFullCredit":false},{"lineNumber":572,"author":{"gitId":"-"},"content":"        proposal.AbstentionCount.ShouldBe(1);","isFullCredit":false},{"lineNumber":573,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":574,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":575,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":576,"author":{"gitId":"-"},"content":"    public async Task Check_Proposal_ToBeReleased()","isFullCredit":false},{"lineNumber":577,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":578,"author":{"gitId":"-"},"content":"        // await InitializeParliamentContracts();","isFullCredit":false},{"lineNumber":579,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":580,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":581,"author":{"gitId":"-"},"content":"            var minimalApprovalThreshold \u003d 3000;","isFullCredit":false},{"lineNumber":582,"author":{"gitId":"-"},"content":"            var maximalAbstentionThreshold \u003d 3000;","isFullCredit":false},{"lineNumber":583,"author":{"gitId":"-"},"content":"            var maximalRejectionThreshold \u003d 3000;","isFullCredit":false},{"lineNumber":584,"author":{"gitId":"-"},"content":"            var minimalVoteThreshold \u003d 6000;","isFullCredit":false},{"lineNumber":585,"author":{"gitId":"-"},"content":"            var organizationAddress \u003d await CreateOrganizationAsync(minimalApprovalThreshold,","isFullCredit":false},{"lineNumber":586,"author":{"gitId":"-"},"content":"                maximalAbstentionThreshold, maximalRejectionThreshold, minimalVoteThreshold);","isFullCredit":false},{"lineNumber":587,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":588,"author":{"gitId":"-"},"content":"            // Rejection probability \u003e maximalRejectionThreshold","isFullCredit":false},{"lineNumber":589,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":590,"author":{"gitId":"-"},"content":"                var proposalId \u003d await CreateProposalAsync(DefaultSenderKeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":591,"author":{"gitId":"-"},"content":"                await TransferToOrganizationAddressAsync(organizationAddress);","isFullCredit":false},{"lineNumber":592,"author":{"gitId":"-"},"content":"                //Voted reviewer is not enough","isFullCredit":false},{"lineNumber":593,"author":{"gitId":"-"},"content":"                await ApproveAsync(InitialMinersKeyPairs[0], proposalId);","isFullCredit":false},{"lineNumber":594,"author":{"gitId":"-"},"content":"                ParliamentContractStub \u003d GetParliamentContractTester(DefaultSenderKeyPair);","isFullCredit":false},{"lineNumber":595,"author":{"gitId":"-"},"content":"                var proposal \u003d await ParliamentContractStub.GetProposal.CallAsync(proposalId);","isFullCredit":false},{"lineNumber":596,"author":{"gitId":"-"},"content":"                proposal.ToBeReleased.ShouldBeFalse();","isFullCredit":false},{"lineNumber":597,"author":{"gitId":"-"},"content":"                //Approve probability \u003e minimalApprovalThreshold","isFullCredit":false},{"lineNumber":598,"author":{"gitId":"-"},"content":"                await ApproveAsync(InitialMinersKeyPairs[1], proposalId);","isFullCredit":false},{"lineNumber":599,"author":{"gitId":"-"},"content":"                ParliamentContractStub \u003d GetParliamentContractTester(DefaultSenderKeyPair);","isFullCredit":false},{"lineNumber":600,"author":{"gitId":"-"},"content":"                proposal \u003d await ParliamentContractStub.GetProposal.CallAsync(proposalId);","isFullCredit":false},{"lineNumber":601,"author":{"gitId":"-"},"content":"                proposal.ToBeReleased.ShouldBeTrue();","isFullCredit":false},{"lineNumber":602,"author":{"gitId":"-"},"content":"                //Rejection probability \u003e maximalRejectionThreshold","isFullCredit":false},{"lineNumber":603,"author":{"gitId":"-"},"content":"                await RejectionAsync(InitialMinersKeyPairs[2], proposalId);","isFullCredit":false},{"lineNumber":604,"author":{"gitId":"-"},"content":"                ParliamentContractStub \u003d GetParliamentContractTester(DefaultSenderKeyPair);","isFullCredit":false},{"lineNumber":605,"author":{"gitId":"-"},"content":"                proposal \u003d await ParliamentContractStub.GetProposal.CallAsync(proposalId);","isFullCredit":false},{"lineNumber":606,"author":{"gitId":"-"},"content":"                proposal.ToBeReleased.ShouldBeFalse();","isFullCredit":false},{"lineNumber":607,"author":{"gitId":"-"},"content":"            }","isFullCredit":false},{"lineNumber":608,"author":{"gitId":"-"},"content":"            // Abstain probability \u003e maximalAbstentionThreshold","isFullCredit":false},{"lineNumber":609,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":610,"author":{"gitId":"-"},"content":"                var proposalId \u003d await CreateProposalAsync(DefaultSenderKeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":611,"author":{"gitId":"-"},"content":"                await TransferToOrganizationAddressAsync(organizationAddress);","isFullCredit":false},{"lineNumber":612,"author":{"gitId":"-"},"content":"                //Voted reviewer is not enough","isFullCredit":false},{"lineNumber":613,"author":{"gitId":"-"},"content":"                await ApproveAsync(InitialMinersKeyPairs[0], proposalId);","isFullCredit":false},{"lineNumber":614,"author":{"gitId":"-"},"content":"                ParliamentContractStub \u003d GetParliamentContractTester(DefaultSenderKeyPair);","isFullCredit":false},{"lineNumber":615,"author":{"gitId":"-"},"content":"                var proposal \u003d await ParliamentContractStub.GetProposal.CallAsync(proposalId);","isFullCredit":false},{"lineNumber":616,"author":{"gitId":"-"},"content":"                proposal.ToBeReleased.ShouldBeFalse();","isFullCredit":false},{"lineNumber":617,"author":{"gitId":"-"},"content":"                //Approve probability \u003e minimalApprovalThreshold","isFullCredit":false},{"lineNumber":618,"author":{"gitId":"-"},"content":"                await ApproveAsync(InitialMinersKeyPairs[1], proposalId);","isFullCredit":false},{"lineNumber":619,"author":{"gitId":"-"},"content":"                ParliamentContractStub \u003d GetParliamentContractTester(DefaultSenderKeyPair);","isFullCredit":false},{"lineNumber":620,"author":{"gitId":"-"},"content":"                proposal \u003d await ParliamentContractStub.GetProposal.CallAsync(proposalId);","isFullCredit":false},{"lineNumber":621,"author":{"gitId":"-"},"content":"                proposal.ToBeReleased.ShouldBeTrue();","isFullCredit":false},{"lineNumber":622,"author":{"gitId":"-"},"content":"                //Abstain probability \u003e maximalAbstentionThreshold","isFullCredit":false},{"lineNumber":623,"author":{"gitId":"-"},"content":"                await AbstainAsync(InitialMinersKeyPairs[2], proposalId);","isFullCredit":false},{"lineNumber":624,"author":{"gitId":"-"},"content":"                ParliamentContractStub \u003d GetParliamentContractTester(DefaultSenderKeyPair);","isFullCredit":false},{"lineNumber":625,"author":{"gitId":"-"},"content":"                proposal \u003d await ParliamentContractStub.GetProposal.CallAsync(proposalId);","isFullCredit":false},{"lineNumber":626,"author":{"gitId":"-"},"content":"                proposal.ToBeReleased.ShouldBeFalse();","isFullCredit":false},{"lineNumber":627,"author":{"gitId":"-"},"content":"            }","isFullCredit":false},{"lineNumber":628,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":629,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":630,"author":{"gitId":"-"},"content":"            var minimalApprovalThreshold \u003d 3000;","isFullCredit":false},{"lineNumber":631,"author":{"gitId":"-"},"content":"            var maximalAbstentionThreshold \u003d 6000;","isFullCredit":false},{"lineNumber":632,"author":{"gitId":"-"},"content":"            var maximalRejectionThreshold \u003d 3000;","isFullCredit":false},{"lineNumber":633,"author":{"gitId":"-"},"content":"            var minimalVoteThreshold \u003d 6000;","isFullCredit":false},{"lineNumber":634,"author":{"gitId":"-"},"content":"            var organizationAddress \u003d await CreateOrganizationAsync(minimalApprovalThreshold,","isFullCredit":false},{"lineNumber":635,"author":{"gitId":"-"},"content":"                maximalAbstentionThreshold, maximalRejectionThreshold, minimalVoteThreshold);","isFullCredit":false},{"lineNumber":636,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":637,"author":{"gitId":"-"},"content":"                var proposalId \u003d await CreateProposalAsync(DefaultSenderKeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":638,"author":{"gitId":"-"},"content":"                await TransferToOrganizationAddressAsync(organizationAddress);","isFullCredit":false},{"lineNumber":639,"author":{"gitId":"-"},"content":"                //Approve probability \u003e minimalApprovalThreshold","isFullCredit":false},{"lineNumber":640,"author":{"gitId":"-"},"content":"                await AbstainAsync(InitialMinersKeyPairs[0], proposalId);","isFullCredit":false},{"lineNumber":641,"author":{"gitId":"-"},"content":"                await ApproveAsync(InitialMinersKeyPairs[1], proposalId);","isFullCredit":false},{"lineNumber":642,"author":{"gitId":"-"},"content":"                ParliamentContractStub \u003d GetParliamentContractTester(DefaultSenderKeyPair);","isFullCredit":false},{"lineNumber":643,"author":{"gitId":"-"},"content":"                var proposal \u003d await ParliamentContractStub.GetProposal.CallAsync(proposalId);","isFullCredit":false},{"lineNumber":644,"author":{"gitId":"-"},"content":"                proposal.ToBeReleased.ShouldBeTrue();","isFullCredit":false},{"lineNumber":645,"author":{"gitId":"-"},"content":"            }","isFullCredit":false},{"lineNumber":646,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":647,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":648,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":649,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":650,"author":{"gitId":"-"},"content":"    public async Task Release_NotEnoughApprove_Test()","isFullCredit":false},{"lineNumber":651,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":652,"author":{"gitId":"-"},"content":"        // await InitializeParliamentContracts();","isFullCredit":false},{"lineNumber":653,"author":{"gitId":"-"},"content":"        var minimalApprovalThreshold \u003d 6667;","isFullCredit":false},{"lineNumber":654,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 2000;","isFullCredit":false},{"lineNumber":655,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 3000;","isFullCredit":false},{"lineNumber":656,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 8000;","isFullCredit":false},{"lineNumber":657,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApprovalThreshold,","isFullCredit":false},{"lineNumber":658,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, minimalVoteThreshold);","isFullCredit":false},{"lineNumber":659,"author":{"gitId":"-"},"content":"        var proposalId \u003d await CreateProposalAsync(DefaultSenderKeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":660,"author":{"gitId":"-"},"content":"        await TransferToOrganizationAddressAsync(organizationAddress);","isFullCredit":false},{"lineNumber":661,"author":{"gitId":"-"},"content":"        //Reviewer Shares \u003c ReleaseThreshold, release failed","isFullCredit":false},{"lineNumber":662,"author":{"gitId":"-"},"content":"        await ApproveAsync(InitialMinersKeyPairs[0], proposalId);","isFullCredit":false},{"lineNumber":663,"author":{"gitId":"-"},"content":"        ParliamentContractStub \u003d GetParliamentContractTester(DefaultSenderKeyPair);","isFullCredit":false},{"lineNumber":664,"author":{"gitId":"-"},"content":"        var result \u003d await ParliamentContractStub.Release.SendWithExceptionAsync(proposalId);","isFullCredit":false},{"lineNumber":665,"author":{"gitId":"-"},"content":"        result.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":666,"author":{"gitId":"-"},"content":"        result.TransactionResult.Error.Contains(\"Not approved.\").ShouldBeTrue();","isFullCredit":false},{"lineNumber":667,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":668,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":669,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":670,"author":{"gitId":"-"},"content":"    public async Task Release_NotFound_Test()","isFullCredit":false},{"lineNumber":671,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":672,"author":{"gitId":"-"},"content":"        var proposalId \u003d HashHelper.ComputeFrom(\"test\");","isFullCredit":false},{"lineNumber":673,"author":{"gitId":"-"},"content":"        var result \u003d await ParliamentContractStub.Release.SendWithExceptionAsync(proposalId);","isFullCredit":false},{"lineNumber":674,"author":{"gitId":"-"},"content":"        //Proposal not found","isFullCredit":false},{"lineNumber":675,"author":{"gitId":"-"},"content":"        result.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":676,"author":{"gitId":"-"},"content":"        result.TransactionResult.Error.Contains(\"Proposal not found.\").ShouldBeTrue();","isFullCredit":false},{"lineNumber":677,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":678,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":679,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":680,"author":{"gitId":"-"},"content":"    public async Task Release_WrongSender_Test()","isFullCredit":false},{"lineNumber":681,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":682,"author":{"gitId":"-"},"content":"        // await InitializeParliamentContracts();","isFullCredit":false},{"lineNumber":683,"author":{"gitId":"-"},"content":"        var minimalApprovalThreshold \u003d 6667;","isFullCredit":false},{"lineNumber":684,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 2000;","isFullCredit":false},{"lineNumber":685,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 3000;","isFullCredit":false},{"lineNumber":686,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 8000;","isFullCredit":false},{"lineNumber":687,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApprovalThreshold,","isFullCredit":false},{"lineNumber":688,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, minimalVoteThreshold);","isFullCredit":false},{"lineNumber":689,"author":{"gitId":"-"},"content":"        var proposalId \u003d await CreateProposalAsync(DefaultSenderKeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":690,"author":{"gitId":"-"},"content":"        await TransferToOrganizationAddressAsync(organizationAddress);","isFullCredit":false},{"lineNumber":691,"author":{"gitId":"-"},"content":"        await ApproveAsync(InitialMinersKeyPairs[0], proposalId);","isFullCredit":false},{"lineNumber":692,"author":{"gitId":"-"},"content":"        await ApproveAsync(InitialMinersKeyPairs[1], proposalId);","isFullCredit":false},{"lineNumber":693,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":694,"author":{"gitId":"-"},"content":"        ParliamentContractStub \u003d GetParliamentContractTester(TesterKeyPair);","isFullCredit":false},{"lineNumber":695,"author":{"gitId":"-"},"content":"        var result \u003d await ParliamentContractStub.Release.SendWithExceptionAsync(proposalId);","isFullCredit":false},{"lineNumber":696,"author":{"gitId":"-"},"content":"        result.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":697,"author":{"gitId":"-"},"content":"        result.TransactionResult.Error.Contains(\"No permission.\").ShouldBeTrue();","isFullCredit":false},{"lineNumber":698,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":699,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":700,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":701,"author":{"gitId":"-"},"content":"    public async Task Release_Expired_Proposal_Test()","isFullCredit":false},{"lineNumber":702,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":703,"author":{"gitId":"-"},"content":"        // await InitializeParliamentContracts();","isFullCredit":false},{"lineNumber":704,"author":{"gitId":"-"},"content":"        var minimalApprovalThreshold \u003d 6667;","isFullCredit":false},{"lineNumber":705,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 2000;","isFullCredit":false},{"lineNumber":706,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 3000;","isFullCredit":false},{"lineNumber":707,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 8000;","isFullCredit":false},{"lineNumber":708,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApprovalThreshold,","isFullCredit":false},{"lineNumber":709,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, minimalVoteThreshold);","isFullCredit":false},{"lineNumber":710,"author":{"gitId":"-"},"content":"        var proposalId \u003d await CreateProposalAsync(DefaultSenderKeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":711,"author":{"gitId":"-"},"content":"        ParliamentContractStub \u003d GetParliamentContractTester(DefaultSenderKeyPair);","isFullCredit":false},{"lineNumber":712,"author":{"gitId":"-"},"content":"        BlockTimeProvider.SetBlockTime(BlockTimeProvider.GetBlockTime().AddDays(5));","isFullCredit":false},{"lineNumber":713,"author":{"gitId":"-"},"content":"        var result \u003d await ParliamentContractStub.Release.SendWithExceptionAsync(proposalId);","isFullCredit":false},{"lineNumber":714,"author":{"gitId":"-"},"content":"        result.TransactionResult.Error.ShouldContain(\"Invalid proposal\");","isFullCredit":false},{"lineNumber":715,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":716,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":717,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":718,"author":{"gitId":"-"},"content":"    public async Task Release_Proposal_Test()","isFullCredit":false},{"lineNumber":719,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":720,"author":{"gitId":"-"},"content":"        // await InitializeParliamentContracts();","isFullCredit":false},{"lineNumber":721,"author":{"gitId":"-"},"content":"        var minimalApprovalThreshold \u003d 6667;","isFullCredit":false},{"lineNumber":722,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 2000;","isFullCredit":false},{"lineNumber":723,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 3000;","isFullCredit":false},{"lineNumber":724,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 8000;","isFullCredit":false},{"lineNumber":725,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApprovalThreshold,","isFullCredit":false},{"lineNumber":726,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, minimalVoteThreshold);","isFullCredit":false},{"lineNumber":727,"author":{"gitId":"-"},"content":"        var proposalId \u003d await CreateProposalAsync(DefaultSenderKeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":728,"author":{"gitId":"-"},"content":"        await TransferToOrganizationAddressAsync(organizationAddress);","isFullCredit":false},{"lineNumber":729,"author":{"gitId":"-"},"content":"        await ApproveAsync(InitialMinersKeyPairs[0], proposalId);","isFullCredit":false},{"lineNumber":730,"author":{"gitId":"-"},"content":"        await ApproveAsync(InitialMinersKeyPairs[1], proposalId);","isFullCredit":false},{"lineNumber":731,"author":{"gitId":"-"},"content":"        await ApproveAsync(InitialMinersKeyPairs[2], proposalId);","isFullCredit":false},{"lineNumber":732,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":733,"author":{"gitId":"-"},"content":"        ParliamentContractStub \u003d GetParliamentContractTester(DefaultSenderKeyPair);","isFullCredit":false},{"lineNumber":734,"author":{"gitId":"-"},"content":"        var result \u003d await ParliamentContractStub.Release.SendAsync(proposalId);","isFullCredit":false},{"lineNumber":735,"author":{"gitId":"-"},"content":"        result.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":736,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":737,"author":{"gitId":"-"},"content":"        // Check inline transaction result","isFullCredit":false},{"lineNumber":738,"author":{"gitId":"-"},"content":"        var getBalance \u003d TokenContractStub.GetBalance.CallAsync(new GetBalanceInput","isFullCredit":false},{"lineNumber":739,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":740,"author":{"gitId":"-"},"content":"            Symbol \u003d \"ELF\",","isFullCredit":false},{"lineNumber":741,"author":{"gitId":"-"},"content":"            Owner \u003d Tester","isFullCredit":false},{"lineNumber":742,"author":{"gitId":"-"},"content":"        }).Result.Balance;","isFullCredit":false},{"lineNumber":743,"author":{"gitId":"-"},"content":"        getBalance.ShouldBe(100);","isFullCredit":false},{"lineNumber":744,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":745,"author":{"gitId":"-"},"content":"        var proposalInfo \u003d await ParliamentContractStub.GetProposal.CallAsync(proposalId);","isFullCredit":false},{"lineNumber":746,"author":{"gitId":"-"},"content":"        proposalInfo.ShouldBe(new ProposalOutput());","isFullCredit":false},{"lineNumber":747,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":748,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":749,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":750,"author":{"gitId":"-"},"content":"    public async Task Release_Proposal_AlreadyReleased_Test()","isFullCredit":false},{"lineNumber":751,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":752,"author":{"gitId":"-"},"content":"        // await InitializeParliamentContracts();","isFullCredit":false},{"lineNumber":753,"author":{"gitId":"-"},"content":"        var minimalApprovalThreshold \u003d 6667;","isFullCredit":false},{"lineNumber":754,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 2000;","isFullCredit":false},{"lineNumber":755,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 3000;","isFullCredit":false},{"lineNumber":756,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 8000;","isFullCredit":false},{"lineNumber":757,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApprovalThreshold,","isFullCredit":false},{"lineNumber":758,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, minimalVoteThreshold);","isFullCredit":false},{"lineNumber":759,"author":{"gitId":"-"},"content":"        var proposalId \u003d await CreateProposalAsync(DefaultSenderKeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":760,"author":{"gitId":"-"},"content":"        await TransferToOrganizationAddressAsync(organizationAddress);","isFullCredit":false},{"lineNumber":761,"author":{"gitId":"-"},"content":"        await ApproveAsync(InitialMinersKeyPairs[0], proposalId);","isFullCredit":false},{"lineNumber":762,"author":{"gitId":"-"},"content":"        await ApproveAsync(InitialMinersKeyPairs[1], proposalId);","isFullCredit":false},{"lineNumber":763,"author":{"gitId":"-"},"content":"        await ApproveAsync(InitialMinersKeyPairs[2], proposalId);","isFullCredit":false},{"lineNumber":764,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":765,"author":{"gitId":"-"},"content":"        ParliamentContractStub \u003d GetParliamentContractTester(DefaultSenderKeyPair);","isFullCredit":false},{"lineNumber":766,"author":{"gitId":"-"},"content":"        var txResult1 \u003d await ParliamentContractStub.Release.SendAsync(proposalId);","isFullCredit":false},{"lineNumber":767,"author":{"gitId":"-"},"content":"        txResult1.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":768,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":769,"author":{"gitId":"-"},"content":"        ParliamentContractStub \u003d GetParliamentContractTester(InitialMinersKeyPairs[2]);","isFullCredit":false},{"lineNumber":770,"author":{"gitId":"-"},"content":"        var transactionResult2 \u003d","isFullCredit":false},{"lineNumber":771,"author":{"gitId":"-"},"content":"            await ParliamentContractStub.Approve.SendWithExceptionAsync(proposalId);","isFullCredit":false},{"lineNumber":772,"author":{"gitId":"-"},"content":"        transactionResult2.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":773,"author":{"gitId":"-"},"content":"        transactionResult2.TransactionResult.Error.Contains(\"Proposal not found.\").ShouldBeTrue();","isFullCredit":false},{"lineNumber":774,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":775,"author":{"gitId":"-"},"content":"        ParliamentContractStub \u003d GetParliamentContractTester(DefaultSenderKeyPair);","isFullCredit":false},{"lineNumber":776,"author":{"gitId":"-"},"content":"        var transactionResult3 \u003d","isFullCredit":false},{"lineNumber":777,"author":{"gitId":"-"},"content":"            await ParliamentContractStub.Release.SendWithExceptionAsync(proposalId);","isFullCredit":false},{"lineNumber":778,"author":{"gitId":"-"},"content":"        transactionResult3.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":779,"author":{"gitId":"-"},"content":"        transactionResult3.TransactionResult.Error.Contains(\"Proposal not found.\").ShouldBeTrue();","isFullCredit":false},{"lineNumber":780,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":781,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":782,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":783,"author":{"gitId":"-"},"content":"    public async Task Change_OrganizationThreshold_With_Invalid_Sender_Test()","isFullCredit":false},{"lineNumber":784,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":785,"author":{"gitId":"-"},"content":"        var changeOrganizationThresholdRet \u003d","isFullCredit":false},{"lineNumber":786,"author":{"gitId":"-"},"content":"            await ParliamentContractStub.ChangeOrganizationThreshold.SendWithExceptionAsync(","isFullCredit":false},{"lineNumber":787,"author":{"gitId":"-"},"content":"                new ProposalReleaseThreshold());","isFullCredit":false},{"lineNumber":788,"author":{"gitId":"-"},"content":"        changeOrganizationThresholdRet.TransactionResult.Error.ShouldContain(\"Organization not found\");","isFullCredit":false},{"lineNumber":789,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":790,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":791,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":792,"author":{"gitId":"-"},"content":"    public async Task Change_OrganizationThreshold_Test()","isFullCredit":false},{"lineNumber":793,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":794,"author":{"gitId":"-"},"content":"        // await InitializeParliamentContracts();","isFullCredit":false},{"lineNumber":795,"author":{"gitId":"-"},"content":"        var minimalApprovalThreshold \u003d 3000;","isFullCredit":false},{"lineNumber":796,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 3000;","isFullCredit":false},{"lineNumber":797,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 3000;","isFullCredit":false},{"lineNumber":798,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 3000;","isFullCredit":false},{"lineNumber":799,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApprovalThreshold,","isFullCredit":false},{"lineNumber":800,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, minimalVoteThreshold);","isFullCredit":false},{"lineNumber":801,"author":{"gitId":"-"},"content":"        var proposalId \u003d await CreateProposalAsync(DefaultSenderKeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":802,"author":{"gitId":"-"},"content":"        await ApproveAsync(InitialMinersKeyPairs[0], proposalId);","isFullCredit":false},{"lineNumber":803,"author":{"gitId":"-"},"content":"        var proposal \u003d await ParliamentContractStub.GetProposal.CallAsync(proposalId);","isFullCredit":false},{"lineNumber":804,"author":{"gitId":"-"},"content":"        proposal.ToBeReleased.ShouldBeTrue();","isFullCredit":false},{"lineNumber":805,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":806,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":807,"author":{"gitId":"-"},"content":"            var proposalReleaseThresholdInput \u003d new ProposalReleaseThreshold","isFullCredit":false},{"lineNumber":808,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":809,"author":{"gitId":"-"},"content":"                MinimalVoteThreshold \u003d 6000","isFullCredit":false},{"lineNumber":810,"author":{"gitId":"-"},"content":"            };","isFullCredit":false},{"lineNumber":811,"author":{"gitId":"-"},"content":"            var createProposalInput \u003d new CreateProposalInput","isFullCredit":false},{"lineNumber":812,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":813,"author":{"gitId":"-"},"content":"                ContractMethodName \u003d nameof(ParliamentContractStub.ChangeOrganizationThreshold),","isFullCredit":false},{"lineNumber":814,"author":{"gitId":"-"},"content":"                ToAddress \u003d ParliamentContractAddress,","isFullCredit":false},{"lineNumber":815,"author":{"gitId":"-"},"content":"                Params \u003d proposalReleaseThresholdInput.ToByteString(),","isFullCredit":false},{"lineNumber":816,"author":{"gitId":"-"},"content":"                ExpiredTime \u003d BlockTimeProvider.GetBlockTime().AddDays(2),","isFullCredit":false},{"lineNumber":817,"author":{"gitId":"-"},"content":"                OrganizationAddress \u003d organizationAddress","isFullCredit":false},{"lineNumber":818,"author":{"gitId":"-"},"content":"            };","isFullCredit":false},{"lineNumber":819,"author":{"gitId":"-"},"content":"            var changeProposal \u003d await ParliamentContractStub.CreateProposal.SendAsync(createProposalInput);","isFullCredit":false},{"lineNumber":820,"author":{"gitId":"-"},"content":"            changeProposal.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":821,"author":{"gitId":"-"},"content":"            var changeProposalId \u003d changeProposal.Output;","isFullCredit":false},{"lineNumber":822,"author":{"gitId":"-"},"content":"            await ApproveAsync(InitialMinersKeyPairs[0], changeProposalId);","isFullCredit":false},{"lineNumber":823,"author":{"gitId":"-"},"content":"            var result \u003d await ParliamentContractStub.Release.SendWithExceptionAsync(changeProposalId);","isFullCredit":false},{"lineNumber":824,"author":{"gitId":"-"},"content":"            result.TransactionResult.Error.ShouldContain(\"Invalid organization.\");","isFullCredit":false},{"lineNumber":825,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":826,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":827,"author":{"gitId":"-"},"content":"            var proposalReleaseThresholdInput \u003d new ProposalReleaseThreshold","isFullCredit":false},{"lineNumber":828,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":829,"author":{"gitId":"-"},"content":"                MinimalVoteThreshold \u003d 6000,","isFullCredit":false},{"lineNumber":830,"author":{"gitId":"-"},"content":"                MinimalApprovalThreshold \u003d minimalApprovalThreshold","isFullCredit":false},{"lineNumber":831,"author":{"gitId":"-"},"content":"            };","isFullCredit":false},{"lineNumber":832,"author":{"gitId":"-"},"content":"            var createProposalInput \u003d new CreateProposalInput","isFullCredit":false},{"lineNumber":833,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":834,"author":{"gitId":"-"},"content":"                ContractMethodName \u003d nameof(ParliamentContractStub.ChangeOrganizationThreshold),","isFullCredit":false},{"lineNumber":835,"author":{"gitId":"-"},"content":"                ToAddress \u003d ParliamentContractAddress,","isFullCredit":false},{"lineNumber":836,"author":{"gitId":"-"},"content":"                Params \u003d proposalReleaseThresholdInput.ToByteString(),","isFullCredit":false},{"lineNumber":837,"author":{"gitId":"-"},"content":"                ExpiredTime \u003d BlockTimeProvider.GetBlockTime().AddDays(2),","isFullCredit":false},{"lineNumber":838,"author":{"gitId":"-"},"content":"                OrganizationAddress \u003d organizationAddress","isFullCredit":false},{"lineNumber":839,"author":{"gitId":"-"},"content":"            };","isFullCredit":false},{"lineNumber":840,"author":{"gitId":"-"},"content":"            var changeProposal \u003d await ParliamentContractStub.CreateProposal.SendAsync(createProposalInput);","isFullCredit":false},{"lineNumber":841,"author":{"gitId":"-"},"content":"            changeProposal.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":842,"author":{"gitId":"-"},"content":"            var changeProposalId \u003d changeProposal.Output;","isFullCredit":false},{"lineNumber":843,"author":{"gitId":"-"},"content":"            await ApproveAsync(InitialMinersKeyPairs[0], changeProposalId);","isFullCredit":false},{"lineNumber":844,"author":{"gitId":"-"},"content":"            var result \u003d await ParliamentContractStub.Release.SendAsync(changeProposalId);","isFullCredit":false},{"lineNumber":845,"author":{"gitId":"-"},"content":"            result.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":846,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":847,"author":{"gitId":"-"},"content":"            var organizationInfo \u003d await ParliamentContractStub.GetOrganization.CallAsync(organizationAddress);","isFullCredit":false},{"lineNumber":848,"author":{"gitId":"-"},"content":"            organizationInfo.ProposalReleaseThreshold.MinimalVoteThreshold.ShouldBe(proposalReleaseThresholdInput","isFullCredit":false},{"lineNumber":849,"author":{"gitId":"-"},"content":"                .MinimalVoteThreshold);","isFullCredit":false},{"lineNumber":850,"author":{"gitId":"-"},"content":"            organizationInfo.ProposalReleaseThreshold.MinimalApprovalThreshold.ShouldBe(minimalApprovalThreshold);","isFullCredit":false},{"lineNumber":851,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":852,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":853,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":854,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":855,"author":{"gitId":"-"},"content":"    public async Task Check_ValidProposal_Test()","isFullCredit":false},{"lineNumber":856,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":857,"author":{"gitId":"-"},"content":"        // await InitializeParliamentContracts();","isFullCredit":false},{"lineNumber":858,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":859,"author":{"gitId":"-"},"content":"        var minimalApprovalThreshold \u003d 6000;","isFullCredit":false},{"lineNumber":860,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 2000;","isFullCredit":false},{"lineNumber":861,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 3000;","isFullCredit":false},{"lineNumber":862,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 6000;","isFullCredit":false},{"lineNumber":863,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApprovalThreshold,","isFullCredit":false},{"lineNumber":864,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, minimalVoteThreshold);","isFullCredit":false},{"lineNumber":865,"author":{"gitId":"-"},"content":"        var proposalId \u003d await CreateProposalAsync(DefaultSenderKeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":866,"author":{"gitId":"-"},"content":"        await TransferToOrganizationAddressAsync(organizationAddress);","isFullCredit":false},{"lineNumber":867,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":868,"author":{"gitId":"-"},"content":"        //Get valid Proposal","isFullCredit":false},{"lineNumber":869,"author":{"gitId":"-"},"content":"        var parliamentContractStub \u003d GetParliamentContractTester(InitialMinersKeyPairs[2]);","isFullCredit":false},{"lineNumber":870,"author":{"gitId":"-"},"content":"        var validProposals \u003d await parliamentContractStub.GetNotVotedPendingProposals.CallAsync(new ProposalIdList","isFullCredit":false},{"lineNumber":871,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":872,"author":{"gitId":"-"},"content":"            ProposalIds \u003d { proposalId }","isFullCredit":false},{"lineNumber":873,"author":{"gitId":"-"},"content":"        });","isFullCredit":false},{"lineNumber":874,"author":{"gitId":"-"},"content":"        validProposals.ProposalIds.Count.ShouldBe(1);","isFullCredit":false},{"lineNumber":875,"author":{"gitId":"-"},"content":"        var notVotedProposals \u003d await parliamentContractStub.GetNotVotedProposals.CallAsync(new ProposalIdList","isFullCredit":false},{"lineNumber":876,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":877,"author":{"gitId":"-"},"content":"            ProposalIds \u003d { proposalId }","isFullCredit":false},{"lineNumber":878,"author":{"gitId":"-"},"content":"        });","isFullCredit":false},{"lineNumber":879,"author":{"gitId":"-"},"content":"        notVotedProposals.ProposalIds.Count.ShouldBe(1);","isFullCredit":false},{"lineNumber":880,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":881,"author":{"gitId":"-"},"content":"        await ApproveAsync(InitialMinersKeyPairs[0], proposalId);","isFullCredit":false},{"lineNumber":882,"author":{"gitId":"-"},"content":"        await ApproveAsync(InitialMinersKeyPairs[1], proposalId);","isFullCredit":false},{"lineNumber":883,"author":{"gitId":"-"},"content":"        validProposals \u003d await parliamentContractStub.GetNotVotedPendingProposals.CallAsync(new ProposalIdList","isFullCredit":false},{"lineNumber":884,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":885,"author":{"gitId":"-"},"content":"            ProposalIds \u003d { proposalId }","isFullCredit":false},{"lineNumber":886,"author":{"gitId":"-"},"content":"        });","isFullCredit":false},{"lineNumber":887,"author":{"gitId":"-"},"content":"        validProposals.ProposalIds.Count.ShouldBe(0);","isFullCredit":false},{"lineNumber":888,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":889,"author":{"gitId":"-"},"content":"        parliamentContractStub \u003d GetParliamentContractTester(InitialMinersKeyPairs[2]);","isFullCredit":false},{"lineNumber":890,"author":{"gitId":"-"},"content":"        validProposals \u003d await parliamentContractStub.GetNotVotedPendingProposals.CallAsync(new ProposalIdList","isFullCredit":false},{"lineNumber":891,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":892,"author":{"gitId":"-"},"content":"            ProposalIds \u003d { proposalId }","isFullCredit":false},{"lineNumber":893,"author":{"gitId":"-"},"content":"        });","isFullCredit":false},{"lineNumber":894,"author":{"gitId":"-"},"content":"        validProposals.ProposalIds.Count.ShouldBe(0);","isFullCredit":false},{"lineNumber":895,"author":{"gitId":"-"},"content":"        notVotedProposals \u003d await parliamentContractStub.GetNotVotedProposals.CallAsync(new ProposalIdList","isFullCredit":false},{"lineNumber":896,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":897,"author":{"gitId":"-"},"content":"            ProposalIds \u003d { proposalId }","isFullCredit":false},{"lineNumber":898,"author":{"gitId":"-"},"content":"        });","isFullCredit":false},{"lineNumber":899,"author":{"gitId":"-"},"content":"        notVotedProposals.ProposalIds.Count.ShouldBe(1);","isFullCredit":false},{"lineNumber":900,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":901,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":902,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":903,"author":{"gitId":"-"},"content":"    public async Task Clear_NotExpiredProposal_Test()","isFullCredit":false},{"lineNumber":904,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":905,"author":{"gitId":"-"},"content":"        // await InitializeParliamentContracts();","isFullCredit":false},{"lineNumber":906,"author":{"gitId":"-"},"content":"        var defaultParliamentAddress \u003d","isFullCredit":false},{"lineNumber":907,"author":{"gitId":"-"},"content":"            await ParliamentContractStub.GetDefaultOrganizationAddress.CallAsync(new Empty());","isFullCredit":false},{"lineNumber":908,"author":{"gitId":"-"},"content":"        var miner \u003d InitialMinersKeyPairs[1];","isFullCredit":false},{"lineNumber":909,"author":{"gitId":"-"},"content":"        // proposal does not exist","isFullCredit":false},{"lineNumber":910,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":911,"author":{"gitId":"-"},"content":"            var clearProposalRet \u003d await ParliamentContractStub.ClearProposal.SendWithExceptionAsync(new Hash());","isFullCredit":false},{"lineNumber":912,"author":{"gitId":"-"},"content":"            clearProposalRet.TransactionResult.Error.ShouldContain(\"Proposal clear failed\");","isFullCredit":false},{"lineNumber":913,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":914,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":915,"author":{"gitId":"-"},"content":"        // proposal is not expired","isFullCredit":false},{"lineNumber":916,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":917,"author":{"gitId":"-"},"content":"            var proposalId \u003d await CreateProposalAsync(miner, defaultParliamentAddress);","isFullCredit":false},{"lineNumber":918,"author":{"gitId":"-"},"content":"            var clearProposalRet \u003d await ParliamentContractStub.ClearProposal.SendWithExceptionAsync(proposalId);","isFullCredit":false},{"lineNumber":919,"author":{"gitId":"-"},"content":"            clearProposalRet.TransactionResult.Error.ShouldContain(\"Proposal clear failed\");","isFullCredit":false},{"lineNumber":920,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":921,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":922,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":923,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":924,"author":{"gitId":"-"},"content":"    public async Task Clear_ExpiredProposal_Test()","isFullCredit":false},{"lineNumber":925,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":926,"author":{"gitId":"-"},"content":"        // await InitializeParliamentContracts();","isFullCredit":false},{"lineNumber":927,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":928,"author":{"gitId":"-"},"content":"        var minimalApprovalThreshold \u003d 6667;","isFullCredit":false},{"lineNumber":929,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 2000;","isFullCredit":false},{"lineNumber":930,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 3000;","isFullCredit":false},{"lineNumber":931,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 8000;","isFullCredit":false},{"lineNumber":932,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApprovalThreshold,","isFullCredit":false},{"lineNumber":933,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, minimalVoteThreshold);","isFullCredit":false},{"lineNumber":934,"author":{"gitId":"-"},"content":"        var proposalId \u003d await CreateProposalAsync(DefaultSenderKeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":935,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":936,"author":{"gitId":"-"},"content":"        ParliamentContractStub \u003d GetParliamentContractTester(InitialMinersKeyPairs[0]);","isFullCredit":false},{"lineNumber":937,"author":{"gitId":"-"},"content":"        BlockTimeProvider.SetBlockTime(BlockTimeProvider.GetBlockTime().AddDays(5));","isFullCredit":false},{"lineNumber":938,"author":{"gitId":"-"},"content":"        var error \u003d await ParliamentContractStub.Approve.CallWithExceptionAsync(proposalId);","isFullCredit":false},{"lineNumber":939,"author":{"gitId":"-"},"content":"        error.Value.ShouldContain(\"Invalid proposal.\");","isFullCredit":false},{"lineNumber":940,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":941,"author":{"gitId":"-"},"content":"        var clear \u003d await ParliamentContractStub.ClearProposal.SendAsync(proposalId);","isFullCredit":false},{"lineNumber":942,"author":{"gitId":"-"},"content":"        clear.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":943,"author":{"gitId":"-"},"content":"        var proposal \u003d await ParliamentContractStub.GetProposal.CallAsync(proposalId);","isFullCredit":false},{"lineNumber":944,"author":{"gitId":"-"},"content":"        proposal.ShouldBe(new ProposalOutput());","isFullCredit":false},{"lineNumber":945,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":946,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":947,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":948,"author":{"gitId":"-"},"content":"    public async Task ChangeMethodFeeController_Test()","isFullCredit":false},{"lineNumber":949,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":950,"author":{"gitId":"-"},"content":"        // await InitializeParliamentContracts();","isFullCredit":false},{"lineNumber":951,"author":{"gitId":"-"},"content":"        var parliamentContractStub \u003d GetParliamentContractTester(InitialMinersKeyPairs[0]);","isFullCredit":false},{"lineNumber":952,"author":{"gitId":"-"},"content":"        var createOrganizationResult \u003d","isFullCredit":false},{"lineNumber":953,"author":{"gitId":"-"},"content":"            await parliamentContractStub.CreateOrganization.SendAsync(","isFullCredit":false},{"lineNumber":954,"author":{"gitId":"-"},"content":"                new CreateOrganizationInput","isFullCredit":false},{"lineNumber":955,"author":{"gitId":"-"},"content":"                {","isFullCredit":false},{"lineNumber":956,"author":{"gitId":"-"},"content":"                    ProposalReleaseThreshold \u003d new ProposalReleaseThreshold","isFullCredit":false},{"lineNumber":957,"author":{"gitId":"-"},"content":"                    {","isFullCredit":false},{"lineNumber":958,"author":{"gitId":"-"},"content":"                        MinimalApprovalThreshold \u003d 1000,","isFullCredit":false},{"lineNumber":959,"author":{"gitId":"-"},"content":"                        MinimalVoteThreshold \u003d 1000","isFullCredit":false},{"lineNumber":960,"author":{"gitId":"-"},"content":"                    }","isFullCredit":false},{"lineNumber":961,"author":{"gitId":"-"},"content":"                });","isFullCredit":false},{"lineNumber":962,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d Address.Parser.ParseFrom(createOrganizationResult.TransactionResult.ReturnValue);","isFullCredit":false},{"lineNumber":963,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":964,"author":{"gitId":"-"},"content":"        var methodFeeController \u003d await parliamentContractStub.GetMethodFeeController.CallAsync(new Empty());","isFullCredit":false},{"lineNumber":965,"author":{"gitId":"-"},"content":"        var defaultOrganization \u003d await ParliamentContractStub.GetDefaultOrganizationAddress.CallAsync(new Empty());","isFullCredit":false},{"lineNumber":966,"author":{"gitId":"-"},"content":"        methodFeeController.OwnerAddress.ShouldBe(defaultOrganization);","isFullCredit":false},{"lineNumber":967,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":968,"author":{"gitId":"-"},"content":"        const string proposalCreationMethodName \u003d nameof(parliamentContractStub.ChangeMethodFeeController);","isFullCredit":false},{"lineNumber":969,"author":{"gitId":"-"},"content":"        var proposalId \u003d await CreateFeeProposalAsync(ParliamentContractAddress,","isFullCredit":false},{"lineNumber":970,"author":{"gitId":"-"},"content":"            methodFeeController.OwnerAddress, proposalCreationMethodName, new AuthorityInfo","isFullCredit":false},{"lineNumber":971,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":972,"author":{"gitId":"-"},"content":"                OwnerAddress \u003d organizationAddress,","isFullCredit":false},{"lineNumber":973,"author":{"gitId":"-"},"content":"                ContractAddress \u003d ParliamentContractAddress","isFullCredit":false},{"lineNumber":974,"author":{"gitId":"-"},"content":"            });","isFullCredit":false},{"lineNumber":975,"author":{"gitId":"-"},"content":"        await ApproveAsync(InitialMinersKeyPairs[0], proposalId);","isFullCredit":false},{"lineNumber":976,"author":{"gitId":"-"},"content":"        await ApproveAsync(InitialMinersKeyPairs[1], proposalId);","isFullCredit":false},{"lineNumber":977,"author":{"gitId":"-"},"content":"        await ApproveAsync(InitialMinersKeyPairs[2], proposalId);","isFullCredit":false},{"lineNumber":978,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":979,"author":{"gitId":"-"},"content":"        var releaseResult \u003d await parliamentContractStub.Release.SendAsync(proposalId);","isFullCredit":false},{"lineNumber":980,"author":{"gitId":"-"},"content":"        releaseResult.TransactionResult.Error.ShouldBeNullOrEmpty();","isFullCredit":false},{"lineNumber":981,"author":{"gitId":"-"},"content":"        releaseResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":982,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":983,"author":{"gitId":"-"},"content":"        var newMethodFeeController \u003d await parliamentContractStub.GetMethodFeeController.CallAsync(new Empty());","isFullCredit":false},{"lineNumber":984,"author":{"gitId":"-"},"content":"        newMethodFeeController.OwnerAddress.ShouldBe(organizationAddress);","isFullCredit":false},{"lineNumber":985,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":986,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":987,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":988,"author":{"gitId":"-"},"content":"    public async Task ChangeMethodFeeController_WithoutAuth_Test()","isFullCredit":false},{"lineNumber":989,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":990,"author":{"gitId":"-"},"content":"        // await InitializeParliamentContracts();","isFullCredit":false},{"lineNumber":991,"author":{"gitId":"-"},"content":"        var minimalApprovalThreshold \u003d 6667;","isFullCredit":false},{"lineNumber":992,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 2000;","isFullCredit":false},{"lineNumber":993,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 3000;","isFullCredit":false},{"lineNumber":994,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 8000;","isFullCredit":false},{"lineNumber":995,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApprovalThreshold,","isFullCredit":false},{"lineNumber":996,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, minimalVoteThreshold);","isFullCredit":false},{"lineNumber":997,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":998,"author":{"gitId":"-"},"content":"        var parliamentContractStub \u003d GetParliamentContractTester(InitialMinersKeyPairs[0]);","isFullCredit":false},{"lineNumber":999,"author":{"gitId":"-"},"content":"        var result \u003d await parliamentContractStub.ChangeMethodFeeController.SendWithExceptionAsync(","isFullCredit":false},{"lineNumber":1000,"author":{"gitId":"-"},"content":"            new AuthorityInfo","isFullCredit":false},{"lineNumber":1001,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":1002,"author":{"gitId":"-"},"content":"                OwnerAddress \u003d organizationAddress,","isFullCredit":false},{"lineNumber":1003,"author":{"gitId":"-"},"content":"                ContractAddress \u003d ParliamentContractAddress","isFullCredit":false},{"lineNumber":1004,"author":{"gitId":"-"},"content":"            });","isFullCredit":false},{"lineNumber":1005,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1006,"author":{"gitId":"-"},"content":"        result.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":1007,"author":{"gitId":"-"},"content":"        result.TransactionResult.Error.Contains(\"Unauthorized behavior.\").ShouldBeTrue();","isFullCredit":false},{"lineNumber":1008,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1009,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1010,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":1011,"author":{"gitId":"-"},"content":"    public async Task ChangeMethodFeeController_With_Invalid_Authority_Test()","isFullCredit":false},{"lineNumber":1012,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1013,"author":{"gitId":"-"},"content":"        // await InitializeParliamentContracts();","isFullCredit":false},{"lineNumber":1014,"author":{"gitId":"-"},"content":"        var parliamentContractStub \u003d GetParliamentContractTester(InitialMinersKeyPairs[0]);","isFullCredit":false},{"lineNumber":1015,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1016,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1017,"author":{"gitId":"-"},"content":"        var methodFeeController \u003d await parliamentContractStub.GetMethodFeeController.CallAsync(new Empty());","isFullCredit":false},{"lineNumber":1018,"author":{"gitId":"-"},"content":"        var defaultOrganization \u003d await ParliamentContractStub.GetDefaultOrganizationAddress.CallAsync(new Empty());","isFullCredit":false},{"lineNumber":1019,"author":{"gitId":"-"},"content":"        methodFeeController.OwnerAddress.ShouldBe(defaultOrganization);","isFullCredit":false},{"lineNumber":1020,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1021,"author":{"gitId":"-"},"content":"        const string proposalCreationMethodName \u003d nameof(parliamentContractStub.ChangeMethodFeeController);","isFullCredit":false},{"lineNumber":1022,"author":{"gitId":"-"},"content":"        var proposalId \u003d await CreateFeeProposalAsync(ParliamentContractAddress,","isFullCredit":false},{"lineNumber":1023,"author":{"gitId":"-"},"content":"            methodFeeController.OwnerAddress, proposalCreationMethodName, new AuthorityInfo","isFullCredit":false},{"lineNumber":1024,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":1025,"author":{"gitId":"-"},"content":"                OwnerAddress \u003d ParliamentContractAddress,","isFullCredit":false},{"lineNumber":1026,"author":{"gitId":"-"},"content":"                ContractAddress \u003d ParliamentContractAddress","isFullCredit":false},{"lineNumber":1027,"author":{"gitId":"-"},"content":"            });","isFullCredit":false},{"lineNumber":1028,"author":{"gitId":"-"},"content":"        await ApproveAsync(InitialMinersKeyPairs[0], proposalId);","isFullCredit":false},{"lineNumber":1029,"author":{"gitId":"-"},"content":"        await ApproveAsync(InitialMinersKeyPairs[1], proposalId);","isFullCredit":false},{"lineNumber":1030,"author":{"gitId":"-"},"content":"        await ApproveAsync(InitialMinersKeyPairs[2], proposalId);","isFullCredit":false},{"lineNumber":1031,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1032,"author":{"gitId":"-"},"content":"        var releaseResult \u003d await parliamentContractStub.Release.SendWithExceptionAsync(proposalId);","isFullCredit":false},{"lineNumber":1033,"author":{"gitId":"-"},"content":"        releaseResult.TransactionResult.Error.ShouldContain(\"Invalid authority input\");","isFullCredit":false},{"lineNumber":1034,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1035,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1036,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":1037,"author":{"gitId":"-"},"content":"    public async Task SetMethodFee_With_Invalid_Input_Test()","isFullCredit":false},{"lineNumber":1038,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1039,"author":{"gitId":"-"},"content":"        // token symbol does not exist","isFullCredit":false},{"lineNumber":1040,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1041,"author":{"gitId":"-"},"content":"            var tokenSymbol \u003d \"NOTEXIST\";","isFullCredit":false},{"lineNumber":1042,"author":{"gitId":"-"},"content":"            var setMethodFeeRet \u003d await ParliamentContractStub.SetMethodFee.SendWithExceptionAsync(new MethodFees","isFullCredit":false},{"lineNumber":1043,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":1044,"author":{"gitId":"-"},"content":"                MethodName \u003d nameof(ParliamentContractStub.Abstain),","isFullCredit":false},{"lineNumber":1045,"author":{"gitId":"-"},"content":"                Fees \u003d","isFullCredit":false},{"lineNumber":1046,"author":{"gitId":"-"},"content":"                {","isFullCredit":false},{"lineNumber":1047,"author":{"gitId":"-"},"content":"                    new MethodFee","isFullCredit":false},{"lineNumber":1048,"author":{"gitId":"-"},"content":"                    {","isFullCredit":false},{"lineNumber":1049,"author":{"gitId":"-"},"content":"                        Symbol \u003d tokenSymbol,","isFullCredit":false},{"lineNumber":1050,"author":{"gitId":"-"},"content":"                        BasicFee \u003d 100","isFullCredit":false},{"lineNumber":1051,"author":{"gitId":"-"},"content":"                    }","isFullCredit":false},{"lineNumber":1052,"author":{"gitId":"-"},"content":"                }","isFullCredit":false},{"lineNumber":1053,"author":{"gitId":"-"},"content":"            });","isFullCredit":false},{"lineNumber":1054,"author":{"gitId":"-"},"content":"            setMethodFeeRet.TransactionResult.Error.ShouldContain(\"token is not found\");","isFullCredit":false},{"lineNumber":1055,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":1056,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1057,"author":{"gitId":"-"},"content":"        // amount \u003c 0","isFullCredit":false},{"lineNumber":1058,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1059,"author":{"gitId":"-"},"content":"            var invalidAmount \u003d -1;","isFullCredit":false},{"lineNumber":1060,"author":{"gitId":"-"},"content":"            var setMethodFeeRet \u003d await ParliamentContractStub.SetMethodFee.SendWithExceptionAsync(new MethodFees","isFullCredit":false},{"lineNumber":1061,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":1062,"author":{"gitId":"-"},"content":"                MethodName \u003d nameof(ParliamentContractStub.Abstain),","isFullCredit":false},{"lineNumber":1063,"author":{"gitId":"-"},"content":"                Fees \u003d","isFullCredit":false},{"lineNumber":1064,"author":{"gitId":"-"},"content":"                {","isFullCredit":false},{"lineNumber":1065,"author":{"gitId":"-"},"content":"                    new MethodFee","isFullCredit":false},{"lineNumber":1066,"author":{"gitId":"-"},"content":"                    {","isFullCredit":false},{"lineNumber":1067,"author":{"gitId":"-"},"content":"                        Symbol \u003d \"ELF\",","isFullCredit":false},{"lineNumber":1068,"author":{"gitId":"-"},"content":"                        BasicFee \u003d invalidAmount","isFullCredit":false},{"lineNumber":1069,"author":{"gitId":"-"},"content":"                    }","isFullCredit":false},{"lineNumber":1070,"author":{"gitId":"-"},"content":"                }","isFullCredit":false},{"lineNumber":1071,"author":{"gitId":"-"},"content":"            });","isFullCredit":false},{"lineNumber":1072,"author":{"gitId":"-"},"content":"            setMethodFeeRet.TransactionResult.Error.ShouldContain(\"Invalid amount\");","isFullCredit":false},{"lineNumber":1073,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":1074,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1075,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1076,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":1077,"author":{"gitId":"-"},"content":"    public async Task SetMethodFee_Without_Authority_Test()","isFullCredit":false},{"lineNumber":1078,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1079,"author":{"gitId":"-"},"content":"        // await InitializeParliamentContracts();","isFullCredit":false},{"lineNumber":1080,"author":{"gitId":"-"},"content":"        var setMethodFeeRet \u003d await ParliamentContractStub.SetMethodFee.SendWithExceptionAsync(new MethodFees","isFullCredit":false},{"lineNumber":1081,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1082,"author":{"gitId":"-"},"content":"            MethodName \u003d nameof(ParliamentContractStub.Abstain),","isFullCredit":false},{"lineNumber":1083,"author":{"gitId":"-"},"content":"            Fees \u003d","isFullCredit":false},{"lineNumber":1084,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":1085,"author":{"gitId":"-"},"content":"                new MethodFee","isFullCredit":false},{"lineNumber":1086,"author":{"gitId":"-"},"content":"                {","isFullCredit":false},{"lineNumber":1087,"author":{"gitId":"-"},"content":"                    Symbol \u003d \"ELF\",","isFullCredit":false},{"lineNumber":1088,"author":{"gitId":"-"},"content":"                    BasicFee \u003d 100","isFullCredit":false},{"lineNumber":1089,"author":{"gitId":"-"},"content":"                }","isFullCredit":false},{"lineNumber":1090,"author":{"gitId":"-"},"content":"            }","isFullCredit":false},{"lineNumber":1091,"author":{"gitId":"-"},"content":"        });","isFullCredit":false},{"lineNumber":1092,"author":{"gitId":"-"},"content":"        setMethodFeeRet.TransactionResult.Error.ShouldContain(\"Unauthorized to set method fee\");","isFullCredit":false},{"lineNumber":1093,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1094,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1095,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":1096,"author":{"gitId":"-"},"content":"    public async Task SetMethodFee_Success_Test()","isFullCredit":false},{"lineNumber":1097,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1098,"author":{"gitId":"-"},"content":"        // await InitializeParliamentContracts();","isFullCredit":false},{"lineNumber":1099,"author":{"gitId":"-"},"content":"        var parliamentContractStub \u003d GetParliamentContractTester(InitialMinersKeyPairs[0]);","isFullCredit":false},{"lineNumber":1100,"author":{"gitId":"-"},"content":"        var methodFeeController \u003d await parliamentContractStub.GetMethodFeeController.CallAsync(new Empty());","isFullCredit":false},{"lineNumber":1101,"author":{"gitId":"-"},"content":"        var methodFeeName \u003d nameof(parliamentContractStub.Abstain);","isFullCredit":false},{"lineNumber":1102,"author":{"gitId":"-"},"content":"        var tokenSymbol \u003d \"ELF\";","isFullCredit":false},{"lineNumber":1103,"author":{"gitId":"-"},"content":"        var fee \u003d 100;","isFullCredit":false},{"lineNumber":1104,"author":{"gitId":"-"},"content":"        var methodFees \u003d new MethodFees","isFullCredit":false},{"lineNumber":1105,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1106,"author":{"gitId":"-"},"content":"            MethodName \u003d methodFeeName,","isFullCredit":false},{"lineNumber":1107,"author":{"gitId":"-"},"content":"            Fees \u003d","isFullCredit":false},{"lineNumber":1108,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":1109,"author":{"gitId":"-"},"content":"                new MethodFee","isFullCredit":false},{"lineNumber":1110,"author":{"gitId":"-"},"content":"                {","isFullCredit":false},{"lineNumber":1111,"author":{"gitId":"-"},"content":"                    Symbol \u003d tokenSymbol,","isFullCredit":false},{"lineNumber":1112,"author":{"gitId":"-"},"content":"                    BasicFee \u003d fee","isFullCredit":false},{"lineNumber":1113,"author":{"gitId":"-"},"content":"                }","isFullCredit":false},{"lineNumber":1114,"author":{"gitId":"-"},"content":"            }","isFullCredit":false},{"lineNumber":1115,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":1116,"author":{"gitId":"-"},"content":"        const string proposalCreationMethodName \u003d nameof(parliamentContractStub.SetMethodFee);","isFullCredit":false},{"lineNumber":1117,"author":{"gitId":"-"},"content":"        var proposalId \u003d await CreateFeeProposalAsync(ParliamentContractAddress,","isFullCredit":false},{"lineNumber":1118,"author":{"gitId":"-"},"content":"            methodFeeController.OwnerAddress, proposalCreationMethodName, methodFees);","isFullCredit":false},{"lineNumber":1119,"author":{"gitId":"-"},"content":"        await ApproveAsync(InitialMinersKeyPairs[0], proposalId);","isFullCredit":false},{"lineNumber":1120,"author":{"gitId":"-"},"content":"        await ApproveAsync(InitialMinersKeyPairs[1], proposalId);","isFullCredit":false},{"lineNumber":1121,"author":{"gitId":"-"},"content":"        await ApproveAsync(InitialMinersKeyPairs[2], proposalId);","isFullCredit":false},{"lineNumber":1122,"author":{"gitId":"-"},"content":"        await parliamentContractStub.Release.SendAsync(proposalId);","isFullCredit":false},{"lineNumber":1123,"author":{"gitId":"-"},"content":"        var methodFee \u003d await parliamentContractStub.GetMethodFee.CallAsync(new StringValue","isFullCredit":false},{"lineNumber":1124,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1125,"author":{"gitId":"-"},"content":"            Value \u003d methodFeeName","isFullCredit":false},{"lineNumber":1126,"author":{"gitId":"-"},"content":"        });","isFullCredit":false},{"lineNumber":1127,"author":{"gitId":"-"},"content":"        methodFee.MethodName.ShouldBe(methodFeeName);","isFullCredit":false},{"lineNumber":1128,"author":{"gitId":"-"},"content":"        methodFee.Fees.Count.ShouldBe(1);","isFullCredit":false},{"lineNumber":1129,"author":{"gitId":"-"},"content":"        methodFee.Fees[0].Symbol.ShouldBe(tokenSymbol);","isFullCredit":false},{"lineNumber":1130,"author":{"gitId":"-"},"content":"        methodFee.Fees[0].BasicFee.ShouldBe(fee);","isFullCredit":false},{"lineNumber":1131,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1132,"author":{"gitId":"-"},"content":"        // method name \u003d ApproveMultiProposals","isFullCredit":false},{"lineNumber":1133,"author":{"gitId":"-"},"content":"        var specialMethodName \u003d nameof(parliamentContractStub.ApproveMultiProposals);","isFullCredit":false},{"lineNumber":1134,"author":{"gitId":"-"},"content":"        methodFees.MethodName \u003d specialMethodName;","isFullCredit":false},{"lineNumber":1135,"author":{"gitId":"-"},"content":"        proposalId \u003d await CreateFeeProposalAsync(ParliamentContractAddress,","isFullCredit":false},{"lineNumber":1136,"author":{"gitId":"-"},"content":"            methodFeeController.OwnerAddress, proposalCreationMethodName, methodFees);","isFullCredit":false},{"lineNumber":1137,"author":{"gitId":"-"},"content":"        await ApproveAsync(InitialMinersKeyPairs[0], proposalId);","isFullCredit":false},{"lineNumber":1138,"author":{"gitId":"-"},"content":"        await ApproveAsync(InitialMinersKeyPairs[1], proposalId);","isFullCredit":false},{"lineNumber":1139,"author":{"gitId":"-"},"content":"        await ApproveAsync(InitialMinersKeyPairs[2], proposalId);","isFullCredit":false},{"lineNumber":1140,"author":{"gitId":"-"},"content":"        await parliamentContractStub.Release.SendAsync(proposalId);","isFullCredit":false},{"lineNumber":1141,"author":{"gitId":"-"},"content":"        methodFee \u003d await parliamentContractStub.GetMethodFee.CallAsync(new StringValue","isFullCredit":false},{"lineNumber":1142,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1143,"author":{"gitId":"-"},"content":"            Value \u003d specialMethodName","isFullCredit":false},{"lineNumber":1144,"author":{"gitId":"-"},"content":"        });","isFullCredit":false},{"lineNumber":1145,"author":{"gitId":"-"},"content":"        methodFee.Fees.Count.ShouldBe(0);","isFullCredit":false},{"lineNumber":1146,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1147,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1148,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":1149,"author":{"gitId":"-"},"content":"    public async Task CreateOrganizationBySystemContract_Fail_Test()","isFullCredit":false},{"lineNumber":1150,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1151,"author":{"gitId":"-"},"content":"        var createOrganizationRet \u003d","isFullCredit":false},{"lineNumber":1152,"author":{"gitId":"-"},"content":"            await ParliamentContractStub.CreateOrganizationBySystemContract.SendWithExceptionAsync(","isFullCredit":false},{"lineNumber":1153,"author":{"gitId":"-"},"content":"                new CreateOrganizationBySystemContractInput());","isFullCredit":false},{"lineNumber":1154,"author":{"gitId":"-"},"content":"        createOrganizationRet.TransactionResult.Error.ShouldContain(\"Unauthorized\");","isFullCredit":false},{"lineNumber":1155,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1156,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1157,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":1158,"author":{"gitId":"-"},"content":"    public async Task CreateOrganizationBySystemContract_Success_Test()","isFullCredit":false},{"lineNumber":1159,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1160,"author":{"gitId":"-"},"content":"        var chain \u003d _blockchainService.GetChainAsync();","isFullCredit":false},{"lineNumber":1161,"author":{"gitId":"-"},"content":"        var blockIndex \u003d new BlockIndex","isFullCredit":false},{"lineNumber":1162,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1163,"author":{"gitId":"-"},"content":"            BlockHash \u003d chain.Result.BestChainHash,","isFullCredit":false},{"lineNumber":1164,"author":{"gitId":"-"},"content":"            BlockHeight \u003d chain.Result.BestChainHeight","isFullCredit":false},{"lineNumber":1165,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":1166,"author":{"gitId":"-"},"content":"        await _smartContractAddressService.SetSmartContractAddressAsync(blockIndex,","isFullCredit":false},{"lineNumber":1167,"author":{"gitId":"-"},"content":"            _smartContractAddressNameProvider.ContractStringName, DefaultSender);","isFullCredit":false},{"lineNumber":1168,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1169,"author":{"gitId":"-"},"content":"        var createOrganizationInput \u003d new CreateOrganizationBySystemContractInput","isFullCredit":false},{"lineNumber":1170,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1171,"author":{"gitId":"-"},"content":"            OrganizationCreationInput \u003d new CreateOrganizationInput","isFullCredit":false},{"lineNumber":1172,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":1173,"author":{"gitId":"-"},"content":"                ProposalReleaseThreshold \u003d new ProposalReleaseThreshold","isFullCredit":false},{"lineNumber":1174,"author":{"gitId":"-"},"content":"                {","isFullCredit":false},{"lineNumber":1175,"author":{"gitId":"-"},"content":"                    MinimalApprovalThreshold \u003d 1000,","isFullCredit":false},{"lineNumber":1176,"author":{"gitId":"-"},"content":"                    MinimalVoteThreshold \u003d 1000","isFullCredit":false},{"lineNumber":1177,"author":{"gitId":"-"},"content":"                }","isFullCredit":false},{"lineNumber":1178,"author":{"gitId":"-"},"content":"            },","isFullCredit":false},{"lineNumber":1179,"author":{"gitId":"-"},"content":"            OrganizationAddressFeedbackMethod \u003d string.Empty","isFullCredit":false},{"lineNumber":1180,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":1181,"author":{"gitId":"-"},"content":"        var createOrganizationRet \u003d","isFullCredit":false},{"lineNumber":1182,"author":{"gitId":"-"},"content":"            await ParliamentContractStub.CreateOrganizationBySystemContract.SendAsync(createOrganizationInput);","isFullCredit":false},{"lineNumber":1183,"author":{"gitId":"-"},"content":"        createOrganizationRet.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":1184,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1185,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1186,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":1187,"author":{"gitId":"-"},"content":"    public async Task ValidateOrganizationExist_Test()","isFullCredit":false},{"lineNumber":1188,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1189,"author":{"gitId":"-"},"content":"        // await InitializeParliamentContracts();","isFullCredit":false},{"lineNumber":1190,"author":{"gitId":"-"},"content":"        var minimalApprovalThreshold \u003d 6667;","isFullCredit":false},{"lineNumber":1191,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 2000;","isFullCredit":false},{"lineNumber":1192,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 3000;","isFullCredit":false},{"lineNumber":1193,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 8000;","isFullCredit":false},{"lineNumber":1194,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApprovalThreshold,","isFullCredit":false},{"lineNumber":1195,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, minimalVoteThreshold);","isFullCredit":false},{"lineNumber":1196,"author":{"gitId":"-"},"content":"        var isOrganizationExist \u003d","isFullCredit":false},{"lineNumber":1197,"author":{"gitId":"-"},"content":"            await ParliamentContractStub.ValidateOrganizationExist.CallAsync(organizationAddress);","isFullCredit":false},{"lineNumber":1198,"author":{"gitId":"-"},"content":"        isOrganizationExist.Value.ShouldBeTrue();","isFullCredit":false},{"lineNumber":1199,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1200,"author":{"gitId":"-"},"content":"        isOrganizationExist \u003d","isFullCredit":false},{"lineNumber":1201,"author":{"gitId":"-"},"content":"            await ParliamentContractStub.ValidateOrganizationExist.CallAsync(ParliamentContractAddress);","isFullCredit":false},{"lineNumber":1202,"author":{"gitId":"-"},"content":"        isOrganizationExist.Value.ShouldBeFalse();","isFullCredit":false},{"lineNumber":1203,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1204,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1205,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":1206,"author":{"gitId":"-"},"content":"    public async Task ValidateProposerInWhiteList_Test()","isFullCredit":false},{"lineNumber":1207,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1208,"author":{"gitId":"-"},"content":"        var proposer \u003d DefaultSender;","isFullCredit":false},{"lineNumber":1209,"author":{"gitId":"-"},"content":"        // await ParliamentContractStub.Initialize.SendAsync(new InitializeInput","isFullCredit":false},{"lineNumber":1210,"author":{"gitId":"-"},"content":"        // {","isFullCredit":false},{"lineNumber":1211,"author":{"gitId":"-"},"content":"        //     PrivilegedProposer \u003d proposer","isFullCredit":false},{"lineNumber":1212,"author":{"gitId":"-"},"content":"        // });","isFullCredit":false},{"lineNumber":1213,"author":{"gitId":"-"},"content":"        var isProposerInWhitelist \u003d","isFullCredit":false},{"lineNumber":1214,"author":{"gitId":"-"},"content":"            await ParliamentContractStub.ValidateProposerInWhiteList.CallAsync(new ValidateProposerInWhiteListInput","isFullCredit":false},{"lineNumber":1215,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":1216,"author":{"gitId":"-"},"content":"                Proposer \u003d proposer","isFullCredit":false},{"lineNumber":1217,"author":{"gitId":"-"},"content":"            });","isFullCredit":false},{"lineNumber":1218,"author":{"gitId":"-"},"content":"        isProposerInWhitelist.Value.ShouldBeTrue();","isFullCredit":false},{"lineNumber":1219,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1220,"author":{"gitId":"-"},"content":"        isProposerInWhitelist \u003d","isFullCredit":false},{"lineNumber":1221,"author":{"gitId":"-"},"content":"            await ParliamentContractStub.ValidateProposerInWhiteList.CallAsync(new ValidateProposerInWhiteListInput());","isFullCredit":false},{"lineNumber":1222,"author":{"gitId":"-"},"content":"        isProposerInWhitelist.Value.ShouldBeFalse();","isFullCredit":false},{"lineNumber":1223,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1224,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1225,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":1226,"author":{"gitId":"-"},"content":"    public async Task CreateProposalBySystemContract_Fail_Test()","isFullCredit":false},{"lineNumber":1227,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1228,"author":{"gitId":"-"},"content":"        // not be authorized","isFullCredit":false},{"lineNumber":1229,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1230,"author":{"gitId":"-"},"content":"            var ret \u003d await ParliamentContractStub.CreateProposalBySystemContract.SendWithExceptionAsync(","isFullCredit":false},{"lineNumber":1231,"author":{"gitId":"-"},"content":"                new CreateProposalBySystemContractInput());","isFullCredit":false},{"lineNumber":1232,"author":{"gitId":"-"},"content":"            ret.TransactionResult.Error.ShouldContain(\"Unauthorized to propose\");","isFullCredit":false},{"lineNumber":1233,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":1234,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1235,"author":{"gitId":"-"},"content":"        var chain \u003d _blockchainService.GetChainAsync();","isFullCredit":false},{"lineNumber":1236,"author":{"gitId":"-"},"content":"        var blockIndex \u003d new BlockIndex","isFullCredit":false},{"lineNumber":1237,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1238,"author":{"gitId":"-"},"content":"            BlockHash \u003d chain.Result.BestChainHash,","isFullCredit":false},{"lineNumber":1239,"author":{"gitId":"-"},"content":"            BlockHeight \u003d chain.Result.BestChainHeight","isFullCredit":false},{"lineNumber":1240,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":1241,"author":{"gitId":"-"},"content":"        await _smartContractAddressService.SetSmartContractAddressAsync(blockIndex,","isFullCredit":false},{"lineNumber":1242,"author":{"gitId":"-"},"content":"            _smartContractAddressNameProvider.ContractStringName, DefaultSender);","isFullCredit":false},{"lineNumber":1243,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1244,"author":{"gitId":"-"},"content":"        // invalid organization","isFullCredit":false},{"lineNumber":1245,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1246,"author":{"gitId":"-"},"content":"            var invalidInput \u003d new CreateProposalBySystemContractInput","isFullCredit":false},{"lineNumber":1247,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":1248,"author":{"gitId":"-"},"content":"                ProposalInput \u003d new CreateProposalInput","isFullCredit":false},{"lineNumber":1249,"author":{"gitId":"-"},"content":"                {","isFullCredit":false},{"lineNumber":1250,"author":{"gitId":"-"},"content":"                    OrganizationAddress \u003d ParliamentContractAddress","isFullCredit":false},{"lineNumber":1251,"author":{"gitId":"-"},"content":"                },","isFullCredit":false},{"lineNumber":1252,"author":{"gitId":"-"},"content":"                OriginProposer \u003d DefaultSender","isFullCredit":false},{"lineNumber":1253,"author":{"gitId":"-"},"content":"            };","isFullCredit":false},{"lineNumber":1254,"author":{"gitId":"-"},"content":"            var ret \u003d await ParliamentContractStub.CreateProposalBySystemContract.SendWithExceptionAsync(","isFullCredit":false},{"lineNumber":1255,"author":{"gitId":"-"},"content":"                invalidInput);","isFullCredit":false},{"lineNumber":1256,"author":{"gitId":"-"},"content":"            ret.TransactionResult.Error.ShouldContain(\"No registered organization\");","isFullCredit":false},{"lineNumber":1257,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":1258,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1259,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1260,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":1261,"author":{"gitId":"-"},"content":"    public async Task CreateProposalBySystemContract_Success_Test()","isFullCredit":false},{"lineNumber":1262,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1263,"author":{"gitId":"-"},"content":"        // await ParliamentContractStub.Initialize.SendAsync(new InitializeInput","isFullCredit":false},{"lineNumber":1264,"author":{"gitId":"-"},"content":"        // {","isFullCredit":false},{"lineNumber":1265,"author":{"gitId":"-"},"content":"        //     PrivilegedProposer \u003d DefaultSender","isFullCredit":false},{"lineNumber":1266,"author":{"gitId":"-"},"content":"        // });","isFullCredit":false},{"lineNumber":1267,"author":{"gitId":"-"},"content":"        var defaultParliamentAddress \u003d","isFullCredit":false},{"lineNumber":1268,"author":{"gitId":"-"},"content":"            await ParliamentContractStub.GetDefaultOrganizationAddress.CallAsync(new Empty());","isFullCredit":false},{"lineNumber":1269,"author":{"gitId":"-"},"content":"        var chain \u003d _blockchainService.GetChainAsync();","isFullCredit":false},{"lineNumber":1270,"author":{"gitId":"-"},"content":"        var blockIndex \u003d new BlockIndex","isFullCredit":false},{"lineNumber":1271,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1272,"author":{"gitId":"-"},"content":"            BlockHash \u003d chain.Result.BestChainHash,","isFullCredit":false},{"lineNumber":1273,"author":{"gitId":"-"},"content":"            BlockHeight \u003d chain.Result.BestChainHeight","isFullCredit":false},{"lineNumber":1274,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":1275,"author":{"gitId":"-"},"content":"        await _smartContractAddressService.SetSmartContractAddressAsync(blockIndex,","isFullCredit":false},{"lineNumber":1276,"author":{"gitId":"-"},"content":"            _smartContractAddressNameProvider.ContractStringName, DefaultSender);","isFullCredit":false},{"lineNumber":1277,"author":{"gitId":"-"},"content":"        var input \u003d new CreateProposalBySystemContractInput","isFullCredit":false},{"lineNumber":1278,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1279,"author":{"gitId":"-"},"content":"            ProposalInput \u003d new CreateProposalInput","isFullCredit":false},{"lineNumber":1280,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":1281,"author":{"gitId":"-"},"content":"                OrganizationAddress \u003d defaultParliamentAddress,","isFullCredit":false},{"lineNumber":1282,"author":{"gitId":"-"},"content":"                ToAddress \u003d TokenContractAddress,","isFullCredit":false},{"lineNumber":1283,"author":{"gitId":"-"},"content":"                ContractMethodName \u003d nameof(TokenContractImplContainer.TokenContractImplStub.Transfer),","isFullCredit":false},{"lineNumber":1284,"author":{"gitId":"-"},"content":"                Params \u003d new TransferInput","isFullCredit":false},{"lineNumber":1285,"author":{"gitId":"-"},"content":"                {","isFullCredit":false},{"lineNumber":1286,"author":{"gitId":"-"},"content":"                    Amount \u003d 100,","isFullCredit":false},{"lineNumber":1287,"author":{"gitId":"-"},"content":"                    Symbol \u003d \"ELF\",","isFullCredit":false},{"lineNumber":1288,"author":{"gitId":"-"},"content":"                    To \u003d DefaultSender","isFullCredit":false},{"lineNumber":1289,"author":{"gitId":"-"},"content":"                }.ToByteString(),","isFullCredit":false},{"lineNumber":1290,"author":{"gitId":"-"},"content":"                ExpiredTime \u003d TimestampHelper.GetUtcNow().AddHours(1)","isFullCredit":false},{"lineNumber":1291,"author":{"gitId":"-"},"content":"            },","isFullCredit":false},{"lineNumber":1292,"author":{"gitId":"-"},"content":"            OriginProposer \u003d DefaultSender","isFullCredit":false},{"lineNumber":1293,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":1294,"author":{"gitId":"-"},"content":"        var ret \u003d await ParliamentContractStub.CreateProposalBySystemContract.SendAsync(","isFullCredit":false},{"lineNumber":1295,"author":{"gitId":"-"},"content":"            input);","isFullCredit":false},{"lineNumber":1296,"author":{"gitId":"-"},"content":"        ret.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":1297,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1298,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1299,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":1300,"author":{"gitId":"-"},"content":"    public async Task GetNotVotedProposals_With_Invalid_Proposal_Test()","isFullCredit":false},{"lineNumber":1301,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1302,"author":{"gitId":"-"},"content":"        // proposal does not exist","isFullCredit":false},{"lineNumber":1303,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1304,"author":{"gitId":"-"},"content":"            var invalidProposalId \u003d HashHelper.ComputeFrom(\"invalid hash\");","isFullCredit":false},{"lineNumber":1305,"author":{"gitId":"-"},"content":"            var notVotedProposals \u003d await ParliamentContractStub.GetNotVotedProposals.CallAsync(new ProposalIdList","isFullCredit":false},{"lineNumber":1306,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":1307,"author":{"gitId":"-"},"content":"                ProposalIds \u003d { invalidProposalId }","isFullCredit":false},{"lineNumber":1308,"author":{"gitId":"-"},"content":"            });","isFullCredit":false},{"lineNumber":1309,"author":{"gitId":"-"},"content":"            notVotedProposals.ProposalIds.Count.ShouldBe(0);","isFullCredit":false},{"lineNumber":1310,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":1311,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1312,"author":{"gitId":"-"},"content":"        //fail to validate proposal, proposal expires","isFullCredit":false},{"lineNumber":1313,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1314,"author":{"gitId":"-"},"content":"            // await InitializeParliamentContracts();","isFullCredit":false},{"lineNumber":1315,"author":{"gitId":"-"},"content":"            var minimalApprovalThreshold \u003d 6667;","isFullCredit":false},{"lineNumber":1316,"author":{"gitId":"-"},"content":"            var maximalAbstentionThreshold \u003d 2000;","isFullCredit":false},{"lineNumber":1317,"author":{"gitId":"-"},"content":"            var maximalRejectionThreshold \u003d 3000;","isFullCredit":false},{"lineNumber":1318,"author":{"gitId":"-"},"content":"            var minimalVoteThreshold \u003d 8000;","isFullCredit":false},{"lineNumber":1319,"author":{"gitId":"-"},"content":"            var organizationAddress \u003d await CreateOrganizationAsync(minimalApprovalThreshold,","isFullCredit":false},{"lineNumber":1320,"author":{"gitId":"-"},"content":"                maximalAbstentionThreshold, maximalRejectionThreshold, minimalVoteThreshold);","isFullCredit":false},{"lineNumber":1321,"author":{"gitId":"-"},"content":"            var proposalId \u003d await CreateProposalAsync(DefaultSenderKeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":1322,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1323,"author":{"gitId":"-"},"content":"            ParliamentContractStub \u003d GetParliamentContractTester(InitialMinersKeyPairs[0]);","isFullCredit":false},{"lineNumber":1324,"author":{"gitId":"-"},"content":"            BlockTimeProvider.SetBlockTime(BlockTimeProvider.GetBlockTime().AddDays(5));","isFullCredit":false},{"lineNumber":1325,"author":{"gitId":"-"},"content":"            var notVotedProposals \u003d await ParliamentContractStub.GetNotVotedProposals.CallAsync(new ProposalIdList","isFullCredit":false},{"lineNumber":1326,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":1327,"author":{"gitId":"-"},"content":"                ProposalIds \u003d { proposalId }","isFullCredit":false},{"lineNumber":1328,"author":{"gitId":"-"},"content":"            });","isFullCredit":false},{"lineNumber":1329,"author":{"gitId":"-"},"content":"            notVotedProposals.ProposalIds.Count.ShouldBe(0);","isFullCredit":false},{"lineNumber":1330,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":1331,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1332,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1333,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":1334,"author":{"gitId":"-"},"content":"    public async Task GetNotVotedPendingProposals_With_Invalid_Proposal_Test()","isFullCredit":false},{"lineNumber":1335,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1336,"author":{"gitId":"-"},"content":"        // proposal does not exist","isFullCredit":false},{"lineNumber":1337,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1338,"author":{"gitId":"-"},"content":"            var invalidProposalId \u003d HashHelper.ComputeFrom(\"invalid hash\");","isFullCredit":false},{"lineNumber":1339,"author":{"gitId":"-"},"content":"            var notVotedProposals \u003d await ParliamentContractStub.GetNotVotedPendingProposals.CallAsync(","isFullCredit":false},{"lineNumber":1340,"author":{"gitId":"-"},"content":"                new ProposalIdList","isFullCredit":false},{"lineNumber":1341,"author":{"gitId":"-"},"content":"                {","isFullCredit":false},{"lineNumber":1342,"author":{"gitId":"-"},"content":"                    ProposalIds \u003d { invalidProposalId }","isFullCredit":false},{"lineNumber":1343,"author":{"gitId":"-"},"content":"                });","isFullCredit":false},{"lineNumber":1344,"author":{"gitId":"-"},"content":"            notVotedProposals.ProposalIds.Count.ShouldBe(0);","isFullCredit":false},{"lineNumber":1345,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":1346,"author":{"gitId":"-"},"content":"        //fail to validate proposal, proposal expires","isFullCredit":false},{"lineNumber":1347,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1348,"author":{"gitId":"-"},"content":"            // await InitializeParliamentContracts();","isFullCredit":false},{"lineNumber":1349,"author":{"gitId":"-"},"content":"            var minimalApprovalThreshold \u003d 6667;","isFullCredit":false},{"lineNumber":1350,"author":{"gitId":"-"},"content":"            var maximalAbstentionThreshold \u003d 2000;","isFullCredit":false},{"lineNumber":1351,"author":{"gitId":"-"},"content":"            var maximalRejectionThreshold \u003d 3000;","isFullCredit":false},{"lineNumber":1352,"author":{"gitId":"-"},"content":"            var minimalVoteThreshold \u003d 8000;","isFullCredit":false},{"lineNumber":1353,"author":{"gitId":"-"},"content":"            var organizationAddress \u003d await CreateOrganizationAsync(minimalApprovalThreshold,","isFullCredit":false},{"lineNumber":1354,"author":{"gitId":"-"},"content":"                maximalAbstentionThreshold, maximalRejectionThreshold, minimalVoteThreshold);","isFullCredit":false},{"lineNumber":1355,"author":{"gitId":"-"},"content":"            var proposalId \u003d await CreateProposalAsync(DefaultSenderKeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":1356,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1357,"author":{"gitId":"-"},"content":"            ParliamentContractStub \u003d GetParliamentContractTester(InitialMinersKeyPairs[0]);","isFullCredit":false},{"lineNumber":1358,"author":{"gitId":"-"},"content":"            BlockTimeProvider.SetBlockTime(BlockTimeProvider.GetBlockTime().AddDays(5));","isFullCredit":false},{"lineNumber":1359,"author":{"gitId":"-"},"content":"            var notVotedProposals \u003d await ParliamentContractStub.GetNotVotedPendingProposals.CallAsync(","isFullCredit":false},{"lineNumber":1360,"author":{"gitId":"-"},"content":"                new ProposalIdList","isFullCredit":false},{"lineNumber":1361,"author":{"gitId":"-"},"content":"                {","isFullCredit":false},{"lineNumber":1362,"author":{"gitId":"-"},"content":"                    ProposalIds \u003d { proposalId }","isFullCredit":false},{"lineNumber":1363,"author":{"gitId":"-"},"content":"                });","isFullCredit":false},{"lineNumber":1364,"author":{"gitId":"-"},"content":"            notVotedProposals.ProposalIds.Count.ShouldBe(0);","isFullCredit":false},{"lineNumber":1365,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":1366,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1367,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1368,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":1369,"author":{"gitId":"-"},"content":"    public async Task ApproveMultiProposals_With_Invalid_Proposal_Test()","isFullCredit":false},{"lineNumber":1370,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1371,"author":{"gitId":"-"},"content":"        // await InitializeParliamentContracts();","isFullCredit":false},{"lineNumber":1372,"author":{"gitId":"-"},"content":"        var minimalApprovalThreshold \u003d 6667;","isFullCredit":false},{"lineNumber":1373,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 2000;","isFullCredit":false},{"lineNumber":1374,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 3000;","isFullCredit":false},{"lineNumber":1375,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 8000;","isFullCredit":false},{"lineNumber":1376,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApprovalThreshold,","isFullCredit":false},{"lineNumber":1377,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, minimalVoteThreshold);","isFullCredit":false},{"lineNumber":1378,"author":{"gitId":"-"},"content":"        var invalidProposalId \u003d HashHelper.ComputeFrom(\"invalid hash\");","isFullCredit":false},{"lineNumber":1379,"author":{"gitId":"-"},"content":"        var expiredProposalId \u003d await CreateProposalAsync(DefaultSenderKeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":1380,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1381,"author":{"gitId":"-"},"content":"        ParliamentContractStub \u003d GetParliamentContractTester(InitialMinersKeyPairs[0]);","isFullCredit":false},{"lineNumber":1382,"author":{"gitId":"-"},"content":"        var transactionResult \u003d","isFullCredit":false},{"lineNumber":1383,"author":{"gitId":"-"},"content":"            await ParliamentContractStub.ApproveMultiProposals.SendAsync(new ProposalIdList","isFullCredit":false},{"lineNumber":1384,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":1385,"author":{"gitId":"-"},"content":"                ProposalIds \u003d { invalidProposalId, expiredProposalId }","isFullCredit":false},{"lineNumber":1386,"author":{"gitId":"-"},"content":"            });","isFullCredit":false},{"lineNumber":1387,"author":{"gitId":"-"},"content":"        transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":1388,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1389,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1390,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":1391,"author":{"gitId":"-"},"content":"    public async Task Check_ValidProposal_With_Rejected_Test()","isFullCredit":false},{"lineNumber":1392,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1393,"author":{"gitId":"-"},"content":"        // await InitializeParliamentContracts();","isFullCredit":false},{"lineNumber":1394,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1395,"author":{"gitId":"-"},"content":"        var minimalApprovalThreshold \u003d 6000;","isFullCredit":false},{"lineNumber":1396,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 1;","isFullCredit":false},{"lineNumber":1397,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 1;","isFullCredit":false},{"lineNumber":1398,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 6000;","isFullCredit":false},{"lineNumber":1399,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApprovalThreshold,","isFullCredit":false},{"lineNumber":1400,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, minimalVoteThreshold);","isFullCredit":false},{"lineNumber":1401,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1402,"author":{"gitId":"-"},"content":"        //reject proposal","isFullCredit":false},{"lineNumber":1403,"author":{"gitId":"-"},"content":"        var proposalTobeRejectedId \u003d await CreateProposalAsync(DefaultSenderKeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":1404,"author":{"gitId":"-"},"content":"        var parliamentContractStub \u003d GetParliamentContractTester(InitialMinersKeyPairs[2]);","isFullCredit":false},{"lineNumber":1405,"author":{"gitId":"-"},"content":"        var validProposals \u003d await parliamentContractStub.GetNotVotedPendingProposals.CallAsync(new ProposalIdList","isFullCredit":false},{"lineNumber":1406,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1407,"author":{"gitId":"-"},"content":"            ProposalIds \u003d { proposalTobeRejectedId }","isFullCredit":false},{"lineNumber":1408,"author":{"gitId":"-"},"content":"        });","isFullCredit":false},{"lineNumber":1409,"author":{"gitId":"-"},"content":"        validProposals.ProposalIds.Count.ShouldBe(1);","isFullCredit":false},{"lineNumber":1410,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1411,"author":{"gitId":"-"},"content":"        await RejectionAsync(InitialMinersKeyPairs[0], proposalTobeRejectedId);","isFullCredit":false},{"lineNumber":1412,"author":{"gitId":"-"},"content":"        validProposals \u003d await parliamentContractStub.GetNotVotedPendingProposals.CallAsync(new ProposalIdList","isFullCredit":false},{"lineNumber":1413,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1414,"author":{"gitId":"-"},"content":"            ProposalIds \u003d { proposalTobeRejectedId }","isFullCredit":false},{"lineNumber":1415,"author":{"gitId":"-"},"content":"        });","isFullCredit":false},{"lineNumber":1416,"author":{"gitId":"-"},"content":"        validProposals.ProposalIds.Count.ShouldBe(0);","isFullCredit":false},{"lineNumber":1417,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1418,"author":{"gitId":"-"},"content":"        //abstain proposal","isFullCredit":false},{"lineNumber":1419,"author":{"gitId":"-"},"content":"        var proposalTobeAbstainedId \u003d await CreateProposalAsync(DefaultSenderKeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":1420,"author":{"gitId":"-"},"content":"        validProposals \u003d await parliamentContractStub.GetNotVotedPendingProposals.CallAsync(new ProposalIdList","isFullCredit":false},{"lineNumber":1421,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1422,"author":{"gitId":"-"},"content":"            ProposalIds \u003d { proposalTobeAbstainedId }","isFullCredit":false},{"lineNumber":1423,"author":{"gitId":"-"},"content":"        });","isFullCredit":false},{"lineNumber":1424,"author":{"gitId":"-"},"content":"        validProposals.ProposalIds.Count.ShouldBe(1);","isFullCredit":false},{"lineNumber":1425,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1426,"author":{"gitId":"-"},"content":"        await AbstainAsync(InitialMinersKeyPairs[0], proposalTobeAbstainedId);","isFullCredit":false},{"lineNumber":1427,"author":{"gitId":"-"},"content":"        validProposals \u003d await parliamentContractStub.GetNotVotedPendingProposals.CallAsync(new ProposalIdList","isFullCredit":false},{"lineNumber":1428,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1429,"author":{"gitId":"-"},"content":"            ProposalIds \u003d { proposalTobeAbstainedId }","isFullCredit":false},{"lineNumber":1430,"author":{"gitId":"-"},"content":"        });","isFullCredit":false},{"lineNumber":1431,"author":{"gitId":"-"},"content":"        validProposals.ProposalIds.Count.ShouldBe(0);","isFullCredit":false},{"lineNumber":1432,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1433,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1434,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":1435,"author":{"gitId":"-"},"content":"    public async Task GetReleaseThresholdReachedProposals_Test()","isFullCredit":false},{"lineNumber":1436,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1437,"author":{"gitId":"-"},"content":"        // await InitializeParliamentContracts();","isFullCredit":false},{"lineNumber":1438,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1439,"author":{"gitId":"-"},"content":"        var minimalApprovalThreshold \u003d 3000;","isFullCredit":false},{"lineNumber":1440,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 3000;","isFullCredit":false},{"lineNumber":1441,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 3000;","isFullCredit":false},{"lineNumber":1442,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 6000;","isFullCredit":false},{"lineNumber":1443,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApprovalThreshold,","isFullCredit":false},{"lineNumber":1444,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, minimalVoteThreshold);","isFullCredit":false},{"lineNumber":1445,"author":{"gitId":"-"},"content":"        ","isFullCredit":false},{"lineNumber":1446,"author":{"gitId":"-"},"content":"        var proposalId \u003d HashHelper.ComputeFrom(\"proposalId\");","isFullCredit":false},{"lineNumber":1447,"author":{"gitId":"-"},"content":"        var parliamentContractStub \u003d GetParliamentContractTester(InitialMinersKeyPairs[0]);","isFullCredit":false},{"lineNumber":1448,"author":{"gitId":"-"},"content":"        var reachedReleasedList \u003d await parliamentContractStub.GetReleaseThresholdReachedProposals.CallAsync(new ProposalIdList","isFullCredit":false},{"lineNumber":1449,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1450,"author":{"gitId":"-"},"content":"            ProposalIds \u003d { proposalId }","isFullCredit":false},{"lineNumber":1451,"author":{"gitId":"-"},"content":"        });","isFullCredit":false},{"lineNumber":1452,"author":{"gitId":"-"},"content":"        reachedReleasedList.ProposalIds.Count.ShouldBe(0);","isFullCredit":false},{"lineNumber":1453,"author":{"gitId":"-"},"content":"        ","isFullCredit":false},{"lineNumber":1454,"author":{"gitId":"-"},"content":"        proposalId \u003d await CreateProposalAsync(DefaultSenderKeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":1455,"author":{"gitId":"-"},"content":"        reachedReleasedList \u003d await parliamentContractStub.GetReleaseThresholdReachedProposals.CallAsync(new ProposalIdList","isFullCredit":false},{"lineNumber":1456,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1457,"author":{"gitId":"-"},"content":"            ProposalIds \u003d { proposalId }","isFullCredit":false},{"lineNumber":1458,"author":{"gitId":"-"},"content":"        });","isFullCredit":false},{"lineNumber":1459,"author":{"gitId":"-"},"content":"        reachedReleasedList.ProposalIds.Count.ShouldBe(0);","isFullCredit":false},{"lineNumber":1460,"author":{"gitId":"-"},"content":"        ","isFullCredit":false},{"lineNumber":1461,"author":{"gitId":"-"},"content":"        await ApproveAsync(InitialMinersKeyPairs[0], proposalId);","isFullCredit":false},{"lineNumber":1462,"author":{"gitId":"-"},"content":"        reachedReleasedList \u003d await parliamentContractStub.GetReleaseThresholdReachedProposals.CallAsync(new ProposalIdList","isFullCredit":false},{"lineNumber":1463,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1464,"author":{"gitId":"-"},"content":"            ProposalIds \u003d { proposalId }","isFullCredit":false},{"lineNumber":1465,"author":{"gitId":"-"},"content":"        });","isFullCredit":false},{"lineNumber":1466,"author":{"gitId":"-"},"content":"        reachedReleasedList.ProposalIds.Count.ShouldBe(0);","isFullCredit":false},{"lineNumber":1467,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1468,"author":{"gitId":"-"},"content":"        await ApproveAsync(InitialMinersKeyPairs[1], proposalId);","isFullCredit":false},{"lineNumber":1469,"author":{"gitId":"-"},"content":"        reachedReleasedList \u003d await parliamentContractStub.GetReleaseThresholdReachedProposals.CallAsync(new ProposalIdList","isFullCredit":false},{"lineNumber":1470,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1471,"author":{"gitId":"-"},"content":"            ProposalIds \u003d { proposalId }","isFullCredit":false},{"lineNumber":1472,"author":{"gitId":"-"},"content":"        });","isFullCredit":false},{"lineNumber":1473,"author":{"gitId":"-"},"content":"        reachedReleasedList.ProposalIds.Count.ShouldBe(1);","isFullCredit":false},{"lineNumber":1474,"author":{"gitId":"-"},"content":"        reachedReleasedList.ProposalIds[0].ShouldBe(proposalId);","isFullCredit":false},{"lineNumber":1475,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1476,"author":{"gitId":"-"},"content":"    ","isFullCredit":false},{"lineNumber":1477,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":1478,"author":{"gitId":"-"},"content":"    public async Task GetAvailableProposals_Test()","isFullCredit":false},{"lineNumber":1479,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1480,"author":{"gitId":"-"},"content":"        // await InitializeParliamentContracts();","isFullCredit":false},{"lineNumber":1481,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1482,"author":{"gitId":"-"},"content":"        var minimalApprovalThreshold \u003d 3000;","isFullCredit":false},{"lineNumber":1483,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 3000;","isFullCredit":false},{"lineNumber":1484,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 3000;","isFullCredit":false},{"lineNumber":1485,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 6000;","isFullCredit":false},{"lineNumber":1486,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApprovalThreshold,","isFullCredit":false},{"lineNumber":1487,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, minimalVoteThreshold);","isFullCredit":false},{"lineNumber":1488,"author":{"gitId":"-"},"content":"        ","isFullCredit":false},{"lineNumber":1489,"author":{"gitId":"-"},"content":"        var proposalId \u003d HashHelper.ComputeFrom(\"proposalId\");","isFullCredit":false},{"lineNumber":1490,"author":{"gitId":"-"},"content":"        var parliamentContractStub \u003d GetParliamentContractTester(InitialMinersKeyPairs[0]);","isFullCredit":false},{"lineNumber":1491,"author":{"gitId":"-"},"content":"        var reachedReleasedList \u003d await parliamentContractStub.GetAvailableProposals.CallAsync(new ProposalIdList","isFullCredit":false},{"lineNumber":1492,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1493,"author":{"gitId":"-"},"content":"            ProposalIds \u003d { proposalId }","isFullCredit":false},{"lineNumber":1494,"author":{"gitId":"-"},"content":"        });","isFullCredit":false},{"lineNumber":1495,"author":{"gitId":"-"},"content":"        reachedReleasedList.ProposalIds.Count.ShouldBe(0);","isFullCredit":false},{"lineNumber":1496,"author":{"gitId":"-"},"content":"        ","isFullCredit":false},{"lineNumber":1497,"author":{"gitId":"-"},"content":"        proposalId \u003d await CreateProposalAsync(DefaultSenderKeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":1498,"author":{"gitId":"-"},"content":"        reachedReleasedList \u003d await parliamentContractStub.GetAvailableProposals.CallAsync(new ProposalIdList","isFullCredit":false},{"lineNumber":1499,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1500,"author":{"gitId":"-"},"content":"            ProposalIds \u003d { proposalId }","isFullCredit":false},{"lineNumber":1501,"author":{"gitId":"-"},"content":"        });","isFullCredit":false},{"lineNumber":1502,"author":{"gitId":"-"},"content":"        reachedReleasedList.ProposalIds.Count.ShouldBe(1);","isFullCredit":false},{"lineNumber":1503,"author":{"gitId":"-"},"content":"        reachedReleasedList.ProposalIds[0].ShouldBe(proposalId);","isFullCredit":false},{"lineNumber":1504,"author":{"gitId":"-"},"content":"        ","isFullCredit":false},{"lineNumber":1505,"author":{"gitId":"-"},"content":"        await ApproveAsync(InitialMinersKeyPairs[0], proposalId);","isFullCredit":false},{"lineNumber":1506,"author":{"gitId":"-"},"content":"        reachedReleasedList \u003d await parliamentContractStub.GetAvailableProposals.CallAsync(new ProposalIdList","isFullCredit":false},{"lineNumber":1507,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1508,"author":{"gitId":"-"},"content":"            ProposalIds \u003d { proposalId }","isFullCredit":false},{"lineNumber":1509,"author":{"gitId":"-"},"content":"        });","isFullCredit":false},{"lineNumber":1510,"author":{"gitId":"-"},"content":"        reachedReleasedList.ProposalIds.Count.ShouldBe(1);","isFullCredit":false},{"lineNumber":1511,"author":{"gitId":"-"},"content":"        reachedReleasedList.ProposalIds[0].ShouldBe(proposalId);","isFullCredit":false},{"lineNumber":1512,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1513,"author":{"gitId":"-"},"content":"        await ApproveAsync(InitialMinersKeyPairs[1], proposalId);","isFullCredit":false},{"lineNumber":1514,"author":{"gitId":"-"},"content":"        reachedReleasedList \u003d await parliamentContractStub.GetAvailableProposals.CallAsync(new ProposalIdList","isFullCredit":false},{"lineNumber":1515,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1516,"author":{"gitId":"-"},"content":"            ProposalIds \u003d { proposalId }","isFullCredit":false},{"lineNumber":1517,"author":{"gitId":"-"},"content":"        });","isFullCredit":false},{"lineNumber":1518,"author":{"gitId":"-"},"content":"        reachedReleasedList.ProposalIds.Count.ShouldBe(1);","isFullCredit":false},{"lineNumber":1519,"author":{"gitId":"-"},"content":"        reachedReleasedList.ProposalIds[0].ShouldBe(proposalId);","isFullCredit":false},{"lineNumber":1520,"author":{"gitId":"-"},"content":"        ","isFullCredit":false},{"lineNumber":1521,"author":{"gitId":"-"},"content":"        await TransferToOrganizationAddressAsync(organizationAddress);","isFullCredit":false},{"lineNumber":1522,"author":{"gitId":"-"},"content":"        await ParliamentContractStub.Release.SendAsync(proposalId);","isFullCredit":false},{"lineNumber":1523,"author":{"gitId":"-"},"content":"        ","isFullCredit":false},{"lineNumber":1524,"author":{"gitId":"-"},"content":"        reachedReleasedList \u003d await parliamentContractStub.GetAvailableProposals.CallAsync(new ProposalIdList","isFullCredit":false},{"lineNumber":1525,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1526,"author":{"gitId":"-"},"content":"            ProposalIds \u003d { proposalId }","isFullCredit":false},{"lineNumber":1527,"author":{"gitId":"-"},"content":"        });","isFullCredit":false},{"lineNumber":1528,"author":{"gitId":"-"},"content":"        reachedReleasedList.ProposalIds.Count.ShouldBe(0);","isFullCredit":false},{"lineNumber":1529,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1530,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1531,"author":{"gitId":"-"},"content":"    private async Task\u003cHash\u003e CreateProposalAsync(ECKeyPair proposalKeyPair, Address organizationAddress)","isFullCredit":false},{"lineNumber":1532,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1533,"author":{"gitId":"-"},"content":"        var transferInput \u003d new TransferInput","isFullCredit":false},{"lineNumber":1534,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1535,"author":{"gitId":"-"},"content":"            Symbol \u003d \"ELF\",","isFullCredit":false},{"lineNumber":1536,"author":{"gitId":"-"},"content":"            Amount \u003d 100,","isFullCredit":false},{"lineNumber":1537,"author":{"gitId":"-"},"content":"            To \u003d Tester,","isFullCredit":false},{"lineNumber":1538,"author":{"gitId":"-"},"content":"            Memo \u003d Guid.NewGuid().ToString() //In order to generate different proposal","isFullCredit":false},{"lineNumber":1539,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":1540,"author":{"gitId":"-"},"content":"        var createProposalInput \u003d new CreateProposalInput","isFullCredit":false},{"lineNumber":1541,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1542,"author":{"gitId":"-"},"content":"            ContractMethodName \u003d nameof(TokenContractStub.Transfer),","isFullCredit":false},{"lineNumber":1543,"author":{"gitId":"-"},"content":"            ToAddress \u003d TokenContractAddress,","isFullCredit":false},{"lineNumber":1544,"author":{"gitId":"-"},"content":"            Params \u003d transferInput.ToByteString(),","isFullCredit":false},{"lineNumber":1545,"author":{"gitId":"-"},"content":"            ExpiredTime \u003d BlockTimeProvider.GetBlockTime().AddDays(2),","isFullCredit":false},{"lineNumber":1546,"author":{"gitId":"eanzhao"},"content":"            OrganizationAddress \u003d organizationAddress,","isFullCredit":false},{"lineNumber":1547,"author":{"gitId":"eanzhao"},"content":"            Title \u003d \"Token Transfer\",","isFullCredit":false},{"lineNumber":1548,"author":{"gitId":"eanzhao"},"content":"            Description \u003d \"Transfer 100 ELF to Tester\u0027s address\",","isFullCredit":false},{"lineNumber":1549,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":1550,"author":{"gitId":"-"},"content":"        var parliamentContractStub \u003d GetParliamentContractTester(proposalKeyPair);","isFullCredit":false},{"lineNumber":1551,"author":{"gitId":"-"},"content":"        var proposal \u003d await parliamentContractStub.CreateProposal.SendAsync(createProposalInput);","isFullCredit":false},{"lineNumber":1552,"author":{"gitId":"-"},"content":"        proposal.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":1553,"author":{"gitId":"-"},"content":"        var proposalCreated \u003d ProposalCreated.Parser.ParseFrom(proposal.TransactionResult.Logs","isFullCredit":false},{"lineNumber":1554,"author":{"gitId":"-"},"content":"                .First(l \u003d\u003e l.Name.Contains(nameof(ProposalCreated))).NonIndexed)","isFullCredit":false},{"lineNumber":1555,"author":{"gitId":"-"},"content":"            .ProposalId;","isFullCredit":false},{"lineNumber":1556,"author":{"gitId":"-"},"content":"        proposal.Output.ShouldBe(proposalCreated);","isFullCredit":false},{"lineNumber":1557,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1558,"author":{"gitId":"-"},"content":"        return proposal.Output;","isFullCredit":false},{"lineNumber":1559,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1560,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1561,"author":{"gitId":"-"},"content":"    private async Task\u003cAddress\u003e CreateOrganizationAsync(int minimalApprovalThreshold,","isFullCredit":false},{"lineNumber":1562,"author":{"gitId":"-"},"content":"        int maximalAbstentionThreshold, int maximalRejectionThreshold, int minimalVoteThreshold)","isFullCredit":false},{"lineNumber":1563,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1564,"author":{"gitId":"-"},"content":"        var createOrganizationInput \u003d new CreateOrganizationInput","isFullCredit":false},{"lineNumber":1565,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1566,"author":{"gitId":"-"},"content":"            ProposalReleaseThreshold \u003d new ProposalReleaseThreshold","isFullCredit":false},{"lineNumber":1567,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":1568,"author":{"gitId":"-"},"content":"                MinimalApprovalThreshold \u003d minimalApprovalThreshold,","isFullCredit":false},{"lineNumber":1569,"author":{"gitId":"-"},"content":"                MaximalAbstentionThreshold \u003d maximalAbstentionThreshold,","isFullCredit":false},{"lineNumber":1570,"author":{"gitId":"-"},"content":"                MaximalRejectionThreshold \u003d maximalRejectionThreshold,","isFullCredit":false},{"lineNumber":1571,"author":{"gitId":"-"},"content":"                MinimalVoteThreshold \u003d minimalVoteThreshold","isFullCredit":false},{"lineNumber":1572,"author":{"gitId":"-"},"content":"            }","isFullCredit":false},{"lineNumber":1573,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":1574,"author":{"gitId":"-"},"content":"        var parliamentContractStub \u003d GetParliamentContractTester(InitialMinersKeyPairs[0]);","isFullCredit":false},{"lineNumber":1575,"author":{"gitId":"-"},"content":"        var transactionResult \u003d","isFullCredit":false},{"lineNumber":1576,"author":{"gitId":"-"},"content":"            await parliamentContractStub.CreateOrganization.SendAsync(createOrganizationInput);","isFullCredit":false},{"lineNumber":1577,"author":{"gitId":"-"},"content":"        transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":1578,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1579,"author":{"gitId":"-"},"content":"        return transactionResult.Output;","isFullCredit":false},{"lineNumber":1580,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1581,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1582,"author":{"gitId":"-"},"content":"    private async Task TransferToOrganizationAddressAsync(Address to)","isFullCredit":false},{"lineNumber":1583,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1584,"author":{"gitId":"-"},"content":"        await TokenContractStub.Transfer.SendAsync(new TransferInput","isFullCredit":false},{"lineNumber":1585,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1586,"author":{"gitId":"-"},"content":"            Symbol \u003d \"ELF\",","isFullCredit":false},{"lineNumber":1587,"author":{"gitId":"-"},"content":"            Amount \u003d 200,","isFullCredit":false},{"lineNumber":1588,"author":{"gitId":"-"},"content":"            To \u003d to,","isFullCredit":false},{"lineNumber":1589,"author":{"gitId":"-"},"content":"            Memo \u003d \"transfer organization address\"","isFullCredit":false},{"lineNumber":1590,"author":{"gitId":"-"},"content":"        });","isFullCredit":false},{"lineNumber":1591,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1592,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1593,"author":{"gitId":"-"},"content":"    private async Task ApproveAsync(ECKeyPair reviewer, Hash proposalId)","isFullCredit":false},{"lineNumber":1594,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1595,"author":{"gitId":"-"},"content":"        var utcNow \u003d TimestampHelper.GetUtcNow();","isFullCredit":false},{"lineNumber":1596,"author":{"gitId":"-"},"content":"        BlockTimeProvider.SetBlockTime(utcNow);","isFullCredit":false},{"lineNumber":1597,"author":{"gitId":"-"},"content":"        var parliamentContractStub \u003d GetParliamentContractTester(reviewer);","isFullCredit":false},{"lineNumber":1598,"author":{"gitId":"-"},"content":"        var transactionResult \u003d","isFullCredit":false},{"lineNumber":1599,"author":{"gitId":"-"},"content":"            await parliamentContractStub.Approve.SendAsync(proposalId);","isFullCredit":false},{"lineNumber":1600,"author":{"gitId":"-"},"content":"        transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":1601,"author":{"gitId":"-"},"content":"        var receiptCreated \u003d ReceiptCreated.Parser.ParseFrom(transactionResult.TransactionResult.Logs","isFullCredit":false},{"lineNumber":1602,"author":{"gitId":"-"},"content":"            .FirstOrDefault(l \u003d\u003e l.Name \u003d\u003d nameof(ReceiptCreated))","isFullCredit":false},{"lineNumber":1603,"author":{"gitId":"-"},"content":"            ?.NonIndexed);","isFullCredit":false},{"lineNumber":1604,"author":{"gitId":"-"},"content":"        ValidateReceiptCreated(receiptCreated, Address.FromPublicKey(reviewer.PublicKey), proposalId, utcNow,","isFullCredit":false},{"lineNumber":1605,"author":{"gitId":"-"},"content":"            nameof(parliamentContractStub.Approve));","isFullCredit":false},{"lineNumber":1606,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1607,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1608,"author":{"gitId":"-"},"content":"    private async Task RejectionAsync(ECKeyPair reviewer, Hash proposalId)","isFullCredit":false},{"lineNumber":1609,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1610,"author":{"gitId":"-"},"content":"        var parliamentContractStub \u003d GetParliamentContractTester(reviewer);","isFullCredit":false},{"lineNumber":1611,"author":{"gitId":"-"},"content":"        var utcNow \u003d TimestampHelper.GetUtcNow();","isFullCredit":false},{"lineNumber":1612,"author":{"gitId":"-"},"content":"        BlockTimeProvider.SetBlockTime(utcNow);","isFullCredit":false},{"lineNumber":1613,"author":{"gitId":"-"},"content":"        var transactionResult \u003d","isFullCredit":false},{"lineNumber":1614,"author":{"gitId":"-"},"content":"            await parliamentContractStub.Reject.SendAsync(proposalId);","isFullCredit":false},{"lineNumber":1615,"author":{"gitId":"-"},"content":"        transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":1616,"author":{"gitId":"-"},"content":"        var receiptCreated \u003d ReceiptCreated.Parser.ParseFrom(transactionResult.TransactionResult.Logs","isFullCredit":false},{"lineNumber":1617,"author":{"gitId":"-"},"content":"            .FirstOrDefault(l \u003d\u003e l.Name \u003d\u003d nameof(ReceiptCreated))","isFullCredit":false},{"lineNumber":1618,"author":{"gitId":"-"},"content":"            ?.NonIndexed);","isFullCredit":false},{"lineNumber":1619,"author":{"gitId":"-"},"content":"        ValidateReceiptCreated(receiptCreated, Address.FromPublicKey(reviewer.PublicKey), proposalId, utcNow,","isFullCredit":false},{"lineNumber":1620,"author":{"gitId":"-"},"content":"            nameof(parliamentContractStub.Reject));","isFullCredit":false},{"lineNumber":1621,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1622,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1623,"author":{"gitId":"-"},"content":"    private async Task AbstainAsync(ECKeyPair reviewer, Hash proposalId)","isFullCredit":false},{"lineNumber":1624,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1625,"author":{"gitId":"-"},"content":"        var parliamentContractStub \u003d GetParliamentContractTester(reviewer);","isFullCredit":false},{"lineNumber":1626,"author":{"gitId":"-"},"content":"        var utcNow \u003d TimestampHelper.GetUtcNow();","isFullCredit":false},{"lineNumber":1627,"author":{"gitId":"-"},"content":"        BlockTimeProvider.SetBlockTime(utcNow);","isFullCredit":false},{"lineNumber":1628,"author":{"gitId":"-"},"content":"        var transactionResult \u003d","isFullCredit":false},{"lineNumber":1629,"author":{"gitId":"-"},"content":"            await parliamentContractStub.Abstain.SendAsync(proposalId);","isFullCredit":false},{"lineNumber":1630,"author":{"gitId":"-"},"content":"        transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":1631,"author":{"gitId":"-"},"content":"        var receiptCreated \u003d ReceiptCreated.Parser.ParseFrom(transactionResult.TransactionResult.Logs","isFullCredit":false},{"lineNumber":1632,"author":{"gitId":"-"},"content":"            .FirstOrDefault(l \u003d\u003e l.Name \u003d\u003d nameof(ReceiptCreated))","isFullCredit":false},{"lineNumber":1633,"author":{"gitId":"-"},"content":"            ?.NonIndexed);","isFullCredit":false},{"lineNumber":1634,"author":{"gitId":"-"},"content":"        ValidateReceiptCreated(receiptCreated, Address.FromPublicKey(reviewer.PublicKey), proposalId, utcNow,","isFullCredit":false},{"lineNumber":1635,"author":{"gitId":"-"},"content":"            nameof(parliamentContractStub.Abstain));","isFullCredit":false},{"lineNumber":1636,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1637,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1638,"author":{"gitId":"-"},"content":"    private void ValidateReceiptCreated(ReceiptCreated receiptCreated, Address sender, Hash proposalId,","isFullCredit":false},{"lineNumber":1639,"author":{"gitId":"-"},"content":"        Timestamp blockTime, string receiptType)","isFullCredit":false},{"lineNumber":1640,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1641,"author":{"gitId":"-"},"content":"        receiptCreated.Address.ShouldBe(sender);","isFullCredit":false},{"lineNumber":1642,"author":{"gitId":"-"},"content":"        receiptCreated.ProposalId.ShouldBe(proposalId);","isFullCredit":false},{"lineNumber":1643,"author":{"gitId":"-"},"content":"        receiptCreated.Time.ShouldBe(blockTime);","isFullCredit":false},{"lineNumber":1644,"author":{"gitId":"-"},"content":"        receiptCreated.ReceiptType.ShouldBe(receiptType);","isFullCredit":false},{"lineNumber":1645,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1646,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1647,"author":{"gitId":"-"},"content":"    private async Task\u003cHash\u003e CreateFeeProposalAsync(Address contractAddress, Address organizationAddress,","isFullCredit":false},{"lineNumber":1648,"author":{"gitId":"-"},"content":"        string methodName, IMessage input)","isFullCredit":false},{"lineNumber":1649,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1650,"author":{"gitId":"-"},"content":"        var parliamentContractStub \u003d GetParliamentContractTester(InitialMinersKeyPairs[0]);","isFullCredit":false},{"lineNumber":1651,"author":{"gitId":"-"},"content":"        var proposal \u003d new CreateProposalInput","isFullCredit":false},{"lineNumber":1652,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1653,"author":{"gitId":"-"},"content":"            OrganizationAddress \u003d organizationAddress,","isFullCredit":false},{"lineNumber":1654,"author":{"gitId":"-"},"content":"            ContractMethodName \u003d methodName,","isFullCredit":false},{"lineNumber":1655,"author":{"gitId":"-"},"content":"            ExpiredTime \u003d TimestampHelper.GetUtcNow().AddHours(1),","isFullCredit":false},{"lineNumber":1656,"author":{"gitId":"-"},"content":"            Params \u003d input.ToByteString(),","isFullCredit":false},{"lineNumber":1657,"author":{"gitId":"-"},"content":"            ToAddress \u003d contractAddress","isFullCredit":false},{"lineNumber":1658,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":1659,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1660,"author":{"gitId":"-"},"content":"        var createResult \u003d await parliamentContractStub.CreateProposal.SendAsync(proposal);","isFullCredit":false},{"lineNumber":1661,"author":{"gitId":"-"},"content":"        var proposalId \u003d createResult.Output;","isFullCredit":false},{"lineNumber":1662,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1663,"author":{"gitId":"-"},"content":"        return proposalId;","isFullCredit":false},{"lineNumber":1664,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1665,"author":{"gitId":"-"},"content":"}","isFullCredit":false}],"authorContributionMap":{"eanzhao":5,"-":1660}},{"path":"test/AElf.Contracts.Referendum.Tests/ReferendumContractTest.cs","fileType":"cs","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"using System.Linq;","isFullCredit":false},{"lineNumber":2,"author":{"gitId":"-"},"content":"using System.Threading.Tasks;","isFullCredit":false},{"lineNumber":3,"author":{"gitId":"-"},"content":"using AElf.Contracts.MultiToken;","isFullCredit":false},{"lineNumber":4,"author":{"gitId":"-"},"content":"using AElf.Contracts.Parliament;","isFullCredit":false},{"lineNumber":5,"author":{"gitId":"-"},"content":"using AElf.Cryptography.ECDSA;","isFullCredit":false},{"lineNumber":6,"author":{"gitId":"-"},"content":"using AElf.CSharp.Core.Extension;","isFullCredit":false},{"lineNumber":7,"author":{"gitId":"-"},"content":"using AElf.Kernel;","isFullCredit":false},{"lineNumber":8,"author":{"gitId":"-"},"content":"using AElf.Kernel.Blockchain.Application;","isFullCredit":false},{"lineNumber":9,"author":{"gitId":"-"},"content":"using AElf.Kernel.SmartContract.Application;","isFullCredit":false},{"lineNumber":10,"author":{"gitId":"-"},"content":"using AElf.Standards.ACS1;","isFullCredit":false},{"lineNumber":11,"author":{"gitId":"-"},"content":"using AElf.Standards.ACS3;","isFullCredit":false},{"lineNumber":12,"author":{"gitId":"-"},"content":"using AElf.Types;","isFullCredit":false},{"lineNumber":13,"author":{"gitId":"-"},"content":"using Google.Protobuf;","isFullCredit":false},{"lineNumber":14,"author":{"gitId":"-"},"content":"using Google.Protobuf.WellKnownTypes;","isFullCredit":false},{"lineNumber":15,"author":{"gitId":"-"},"content":"using Shouldly;","isFullCredit":false},{"lineNumber":16,"author":{"gitId":"-"},"content":"using Xunit;","isFullCredit":false},{"lineNumber":17,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":18,"author":{"gitId":"-"},"content":"namespace AElf.Contracts.Referendum;","isFullCredit":false},{"lineNumber":19,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":20,"author":{"gitId":"-"},"content":"public sealed class ReferendumContractTest : ReferendumContractTestBase","isFullCredit":false},{"lineNumber":21,"author":{"gitId":"-"},"content":"{","isFullCredit":false},{"lineNumber":22,"author":{"gitId":"-"},"content":"    private readonly IBlockchainService _blockchainService;","isFullCredit":false},{"lineNumber":23,"author":{"gitId":"-"},"content":"    private readonly TestDemoSmartContractAddressNameProvider _smartContractAddressNameProvider;","isFullCredit":false},{"lineNumber":24,"author":{"gitId":"-"},"content":"    private readonly ISmartContractAddressService _smartContractAddressService;","isFullCredit":false},{"lineNumber":25,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":26,"author":{"gitId":"-"},"content":"    public ReferendumContractTest()","isFullCredit":false},{"lineNumber":27,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":28,"author":{"gitId":"-"},"content":"        _smartContractAddressService \u003d GetRequiredService\u003cISmartContractAddressService\u003e();","isFullCredit":false},{"lineNumber":29,"author":{"gitId":"-"},"content":"        _blockchainService \u003d GetRequiredService\u003cIBlockchainService\u003e();","isFullCredit":false},{"lineNumber":30,"author":{"gitId":"-"},"content":"        _smartContractAddressNameProvider \u003d GetRequiredService\u003cTestDemoSmartContractAddressNameProvider\u003e();","isFullCredit":false},{"lineNumber":31,"author":{"gitId":"-"},"content":"        InitializeContracts();","isFullCredit":false},{"lineNumber":32,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":33,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":34,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":35,"author":{"gitId":"-"},"content":"    public async Task Get_Organization_Test()","isFullCredit":false},{"lineNumber":36,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":37,"author":{"gitId":"-"},"content":"        //not exist","isFullCredit":false},{"lineNumber":38,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":39,"author":{"gitId":"-"},"content":"            var organization \u003d","isFullCredit":false},{"lineNumber":40,"author":{"gitId":"-"},"content":"                await ReferendumContractStub.GetOrganization.CallAsync(Accounts[0].Address);","isFullCredit":false},{"lineNumber":41,"author":{"gitId":"-"},"content":"            organization.ShouldBe(new Organization());","isFullCredit":false},{"lineNumber":42,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":43,"author":{"gitId":"-"},"content":"            var result \u003d await ReferendumContractStub.ValidateOrganizationExist.CallAsync(DefaultSender);","isFullCredit":false},{"lineNumber":44,"author":{"gitId":"-"},"content":"            result.Value.ShouldBeFalse();","isFullCredit":false},{"lineNumber":45,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":46,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":47,"author":{"gitId":"-"},"content":"        var minimalApproveThreshold \u003d 5000;","isFullCredit":false},{"lineNumber":48,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 5000;","isFullCredit":false},{"lineNumber":49,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 10000;","isFullCredit":false},{"lineNumber":50,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 10000;","isFullCredit":false},{"lineNumber":51,"author":{"gitId":"-"},"content":"        var createOrganizationInput \u003d new CreateOrganizationInput","isFullCredit":false},{"lineNumber":52,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":53,"author":{"gitId":"-"},"content":"            ProposalReleaseThreshold \u003d new ProposalReleaseThreshold","isFullCredit":false},{"lineNumber":54,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":55,"author":{"gitId":"-"},"content":"                MinimalApprovalThreshold \u003d minimalApproveThreshold,","isFullCredit":false},{"lineNumber":56,"author":{"gitId":"-"},"content":"                MinimalVoteThreshold \u003d minimalVoteThreshold,","isFullCredit":false},{"lineNumber":57,"author":{"gitId":"-"},"content":"                MaximalAbstentionThreshold \u003d maximalAbstentionThreshold,","isFullCredit":false},{"lineNumber":58,"author":{"gitId":"-"},"content":"                MaximalRejectionThreshold \u003d maximalRejectionThreshold","isFullCredit":false},{"lineNumber":59,"author":{"gitId":"-"},"content":"            },","isFullCredit":false},{"lineNumber":60,"author":{"gitId":"-"},"content":"            ProposerWhiteList \u003d new ProposerWhiteList","isFullCredit":false},{"lineNumber":61,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":62,"author":{"gitId":"-"},"content":"                Proposers \u003d { DefaultSender }","isFullCredit":false},{"lineNumber":63,"author":{"gitId":"-"},"content":"            },","isFullCredit":false},{"lineNumber":64,"author":{"gitId":"-"},"content":"            TokenSymbol \u003d \"ELF\"","isFullCredit":false},{"lineNumber":65,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":66,"author":{"gitId":"-"},"content":"        var transactionResult \u003d","isFullCredit":false},{"lineNumber":67,"author":{"gitId":"-"},"content":"            await ReferendumContractStub.CreateOrganization.SendAsync(createOrganizationInput);","isFullCredit":false},{"lineNumber":68,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d transactionResult.Output;","isFullCredit":false},{"lineNumber":69,"author":{"gitId":"-"},"content":"        var getOrganization \u003d await ReferendumContractStub.GetOrganization.CallAsync(organizationAddress);","isFullCredit":false},{"lineNumber":70,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":71,"author":{"gitId":"-"},"content":"        getOrganization.OrganizationAddress.ShouldBe(organizationAddress);","isFullCredit":false},{"lineNumber":72,"author":{"gitId":"-"},"content":"        getOrganization.ProposalReleaseThreshold.MinimalApprovalThreshold.ShouldBe(minimalApproveThreshold);","isFullCredit":false},{"lineNumber":73,"author":{"gitId":"-"},"content":"        getOrganization.ProposalReleaseThreshold.MinimalVoteThreshold.ShouldBe(minimalVoteThreshold);","isFullCredit":false},{"lineNumber":74,"author":{"gitId":"-"},"content":"        getOrganization.ProposalReleaseThreshold.MaximalAbstentionThreshold.ShouldBe(maximalAbstentionThreshold);","isFullCredit":false},{"lineNumber":75,"author":{"gitId":"-"},"content":"        getOrganization.ProposalReleaseThreshold.MaximalRejectionThreshold.ShouldBe(maximalRejectionThreshold);","isFullCredit":false},{"lineNumber":76,"author":{"gitId":"-"},"content":"        getOrganization.OrganizationHash.ShouldBe(HashHelper.ComputeFrom(createOrganizationInput));","isFullCredit":false},{"lineNumber":77,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":78,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":79,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":80,"author":{"gitId":"-"},"content":"    public async Task Get_Proposal_Test()","isFullCredit":false},{"lineNumber":81,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":82,"author":{"gitId":"-"},"content":"        //not exist","isFullCredit":false},{"lineNumber":83,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":84,"author":{"gitId":"-"},"content":"            var proposal \u003d await ReferendumContractStub.GetProposal.CallAsync(HashHelper.ComputeFrom(\"Test\"));","isFullCredit":false},{"lineNumber":85,"author":{"gitId":"-"},"content":"            proposal.ShouldBe(new ProposalOutput());","isFullCredit":false},{"lineNumber":86,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":87,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":88,"author":{"gitId":"-"},"content":"        var minimalApproveThreshold \u003d 5000;","isFullCredit":false},{"lineNumber":89,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 5000;","isFullCredit":false},{"lineNumber":90,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 10000;","isFullCredit":false},{"lineNumber":91,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 10000;","isFullCredit":false},{"lineNumber":92,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApproveThreshold, minimalVoteThreshold,","isFullCredit":false},{"lineNumber":93,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, new[] { DefaultSender });","isFullCredit":false},{"lineNumber":94,"author":{"gitId":"-"},"content":"        var createInput \u003d new CreateInput","isFullCredit":false},{"lineNumber":95,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":96,"author":{"gitId":"-"},"content":"            Symbol \u003d \"NEW\",","isFullCredit":false},{"lineNumber":97,"author":{"gitId":"-"},"content":"            Decimals \u003d 2,","isFullCredit":false},{"lineNumber":98,"author":{"gitId":"-"},"content":"            TotalSupply \u003d 10_0000,","isFullCredit":false},{"lineNumber":99,"author":{"gitId":"-"},"content":"            TokenName \u003d \"new token\",","isFullCredit":false},{"lineNumber":100,"author":{"gitId":"-"},"content":"            Issuer \u003d organizationAddress,","isFullCredit":false},{"lineNumber":101,"author":{"gitId":"-"},"content":"            Owner \u003d organizationAddress,","isFullCredit":false},{"lineNumber":102,"author":{"gitId":"-"},"content":"            IsBurnable \u003d true","isFullCredit":false},{"lineNumber":103,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":104,"author":{"gitId":"-"},"content":"        var proposalId \u003d await CreateProposalAsync(DefaultSenderKeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":105,"author":{"gitId":"-"},"content":"        var getProposal \u003d await ReferendumContractStub.GetProposal.SendAsync(proposalId);","isFullCredit":false},{"lineNumber":106,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":107,"author":{"gitId":"-"},"content":"        getProposal.Output.Proposer.ShouldBe(DefaultSender);","isFullCredit":false},{"lineNumber":108,"author":{"gitId":"-"},"content":"        getProposal.Output.ContractMethodName.ShouldBe(nameof(TokenContract.Create));","isFullCredit":false},{"lineNumber":109,"author":{"gitId":"-"},"content":"        getProposal.Output.ProposalId.ShouldBe(proposalId);","isFullCredit":false},{"lineNumber":110,"author":{"gitId":"-"},"content":"        getProposal.Output.OrganizationAddress.ShouldBe(organizationAddress);","isFullCredit":false},{"lineNumber":111,"author":{"gitId":"-"},"content":"        getProposal.Output.ToAddress.ShouldBe(TokenContractAddress);","isFullCredit":false},{"lineNumber":112,"author":{"gitId":"-"},"content":"        getProposal.Output.Params.ShouldBe(createInput.ToByteString());","isFullCredit":false},{"lineNumber":113,"author":{"gitId":"eanzhao"},"content":"        getProposal.Output.Title.ShouldNotBeNullOrEmpty();","isFullCredit":false},{"lineNumber":114,"author":{"gitId":"eanzhao"},"content":"        getProposal.Output.Description.ShouldNotBeNullOrEmpty();","isFullCredit":false},{"lineNumber":115,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":116,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":117,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":118,"author":{"gitId":"-"},"content":"    public async Task Create_ProposalFailed_Test()","isFullCredit":false},{"lineNumber":119,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":120,"author":{"gitId":"-"},"content":"        var minimalApproveThreshold \u003d 5000;","isFullCredit":false},{"lineNumber":121,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 5000;","isFullCredit":false},{"lineNumber":122,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 10000;","isFullCredit":false},{"lineNumber":123,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 10000;","isFullCredit":false},{"lineNumber":124,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApproveThreshold, minimalVoteThreshold,","isFullCredit":false},{"lineNumber":125,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, new[] { DefaultSender });","isFullCredit":false},{"lineNumber":126,"author":{"gitId":"-"},"content":"        var blockTime \u003d BlockTimeProvider.GetBlockTime();","isFullCredit":false},{"lineNumber":127,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":128,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":129,"author":{"gitId":"-"},"content":"            //\"Invalid proposal.\"","isFullCredit":false},{"lineNumber":130,"author":{"gitId":"-"},"content":"            var createProposalInput \u003d new CreateProposalInput","isFullCredit":false},{"lineNumber":131,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":132,"author":{"gitId":"-"},"content":"                ToAddress \u003d Accounts[0].Address,","isFullCredit":false},{"lineNumber":133,"author":{"gitId":"-"},"content":"                Params \u003d ByteString.CopyFromUtf8(\"Test\"),","isFullCredit":false},{"lineNumber":134,"author":{"gitId":"-"},"content":"                ExpiredTime \u003d blockTime.AddDays(1),","isFullCredit":false},{"lineNumber":135,"author":{"gitId":"-"},"content":"                OrganizationAddress \u003d organizationAddress","isFullCredit":false},{"lineNumber":136,"author":{"gitId":"-"},"content":"            };","isFullCredit":false},{"lineNumber":137,"author":{"gitId":"-"},"content":"            var transactionResult \u003d","isFullCredit":false},{"lineNumber":138,"author":{"gitId":"-"},"content":"                await ReferendumContractStub.CreateProposal.SendWithExceptionAsync(createProposalInput);","isFullCredit":false},{"lineNumber":139,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":140,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Error.Contains(\"Invalid proposal.\").ShouldBeTrue();","isFullCredit":false},{"lineNumber":141,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":142,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":143,"author":{"gitId":"-"},"content":"            var createProposalInput \u003d new CreateProposalInput","isFullCredit":false},{"lineNumber":144,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":145,"author":{"gitId":"-"},"content":"                ToAddress \u003d null,","isFullCredit":false},{"lineNumber":146,"author":{"gitId":"-"},"content":"                Params \u003d ByteString.CopyFromUtf8(\"Test\"),","isFullCredit":false},{"lineNumber":147,"author":{"gitId":"-"},"content":"                ExpiredTime \u003d blockTime.AddDays(1),","isFullCredit":false},{"lineNumber":148,"author":{"gitId":"-"},"content":"                OrganizationAddress \u003d organizationAddress,","isFullCredit":false},{"lineNumber":149,"author":{"gitId":"-"},"content":"                ContractMethodName \u003d \"Test\"","isFullCredit":false},{"lineNumber":150,"author":{"gitId":"-"},"content":"            };","isFullCredit":false},{"lineNumber":151,"author":{"gitId":"-"},"content":"            var transactionResult \u003d","isFullCredit":false},{"lineNumber":152,"author":{"gitId":"-"},"content":"                await ReferendumContractStub.CreateProposal.SendWithExceptionAsync(createProposalInput);","isFullCredit":false},{"lineNumber":153,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":154,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Error.Contains(\"Invalid proposal.\").ShouldBeTrue();","isFullCredit":false},{"lineNumber":155,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":156,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":157,"author":{"gitId":"-"},"content":"            var createProposalInput \u003d new CreateProposalInput","isFullCredit":false},{"lineNumber":158,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":159,"author":{"gitId":"-"},"content":"                ToAddress \u003d Accounts[0].Address,","isFullCredit":false},{"lineNumber":160,"author":{"gitId":"-"},"content":"                Params \u003d ByteString.CopyFromUtf8(\"Test\"),","isFullCredit":false},{"lineNumber":161,"author":{"gitId":"-"},"content":"                ExpiredTime \u003d null,","isFullCredit":false},{"lineNumber":162,"author":{"gitId":"-"},"content":"                OrganizationAddress \u003d organizationAddress,","isFullCredit":false},{"lineNumber":163,"author":{"gitId":"-"},"content":"                ContractMethodName \u003d \"Test\"","isFullCredit":false},{"lineNumber":164,"author":{"gitId":"-"},"content":"            };","isFullCredit":false},{"lineNumber":165,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":166,"author":{"gitId":"-"},"content":"            var transactionResult \u003d","isFullCredit":false},{"lineNumber":167,"author":{"gitId":"-"},"content":"                await ReferendumContractStub.CreateProposal.SendWithExceptionAsync(createProposalInput);","isFullCredit":false},{"lineNumber":168,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":169,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Error.Contains(\"Invalid proposal.\").ShouldBeTrue();","isFullCredit":false},{"lineNumber":170,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":171,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":172,"author":{"gitId":"-"},"content":"            //\"Expired proposal.\"","isFullCredit":false},{"lineNumber":173,"author":{"gitId":"-"},"content":"            var createProposalInput \u003d new CreateProposalInput","isFullCredit":false},{"lineNumber":174,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":175,"author":{"gitId":"-"},"content":"                ToAddress \u003d Accounts[0].Address,","isFullCredit":false},{"lineNumber":176,"author":{"gitId":"-"},"content":"                Params \u003d ByteString.CopyFromUtf8(\"Test\"),","isFullCredit":false},{"lineNumber":177,"author":{"gitId":"-"},"content":"                ExpiredTime \u003d TimestampHelper.GetUtcNow().AddSeconds(-5),","isFullCredit":false},{"lineNumber":178,"author":{"gitId":"-"},"content":"                OrganizationAddress \u003d organizationAddress,","isFullCredit":false},{"lineNumber":179,"author":{"gitId":"-"},"content":"                ContractMethodName \u003d \"Test\"","isFullCredit":false},{"lineNumber":180,"author":{"gitId":"-"},"content":"            };","isFullCredit":false},{"lineNumber":181,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":182,"author":{"gitId":"-"},"content":"            BlockTimeProvider.SetBlockTime(TimestampHelper.GetUtcNow());","isFullCredit":false},{"lineNumber":183,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":184,"author":{"gitId":"-"},"content":"            var transactionResult \u003d","isFullCredit":false},{"lineNumber":185,"author":{"gitId":"-"},"content":"                await ReferendumContractStub.CreateProposal.SendWithExceptionAsync(createProposalInput);","isFullCredit":false},{"lineNumber":186,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":187,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":188,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":189,"author":{"gitId":"-"},"content":"            //\"No registered organization.\"","isFullCredit":false},{"lineNumber":190,"author":{"gitId":"-"},"content":"            var createProposalInput \u003d new CreateProposalInput","isFullCredit":false},{"lineNumber":191,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":192,"author":{"gitId":"-"},"content":"                ToAddress \u003d Accounts[0].Address,","isFullCredit":false},{"lineNumber":193,"author":{"gitId":"-"},"content":"                Params \u003d ByteString.CopyFromUtf8(\"Test\"),","isFullCredit":false},{"lineNumber":194,"author":{"gitId":"-"},"content":"                ExpiredTime \u003d TimestampHelper.GetUtcNow().AddDays(1),","isFullCredit":false},{"lineNumber":195,"author":{"gitId":"-"},"content":"                OrganizationAddress \u003d DefaultSender,","isFullCredit":false},{"lineNumber":196,"author":{"gitId":"-"},"content":"                ContractMethodName \u003d \"Test\"","isFullCredit":false},{"lineNumber":197,"author":{"gitId":"-"},"content":"            };","isFullCredit":false},{"lineNumber":198,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":199,"author":{"gitId":"-"},"content":"            var transactionResult \u003d","isFullCredit":false},{"lineNumber":200,"author":{"gitId":"-"},"content":"                await ReferendumContractStub.CreateProposal.SendWithExceptionAsync(createProposalInput);","isFullCredit":false},{"lineNumber":201,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":202,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Error.Contains(\"Organization not found.\").ShouldBeTrue();","isFullCredit":false},{"lineNumber":203,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":204,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":205,"author":{"gitId":"-"},"content":"            //\"Proposal with same input.\"","isFullCredit":false},{"lineNumber":206,"author":{"gitId":"-"},"content":"            var createProposalInput \u003d new CreateProposalInput","isFullCredit":false},{"lineNumber":207,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":208,"author":{"gitId":"-"},"content":"                ToAddress \u003d Accounts[0].Address,","isFullCredit":false},{"lineNumber":209,"author":{"gitId":"-"},"content":"                Params \u003d ByteString.CopyFromUtf8(\"Test\"),","isFullCredit":false},{"lineNumber":210,"author":{"gitId":"-"},"content":"                ExpiredTime \u003d TimestampHelper.GetUtcNow().AddDays(1),","isFullCredit":false},{"lineNumber":211,"author":{"gitId":"-"},"content":"                OrganizationAddress \u003d organizationAddress,","isFullCredit":false},{"lineNumber":212,"author":{"gitId":"-"},"content":"                ContractMethodName \u003d \"Test\"","isFullCredit":false},{"lineNumber":213,"author":{"gitId":"-"},"content":"            };","isFullCredit":false},{"lineNumber":214,"author":{"gitId":"-"},"content":"            var transactionResult1 \u003d await ReferendumContractStub.CreateProposal.SendAsync(createProposalInput);","isFullCredit":false},{"lineNumber":215,"author":{"gitId":"-"},"content":"            transactionResult1.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":216,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":217,"author":{"gitId":"-"},"content":"            var transactionResult2 \u003d await ReferendumContractStub.CreateProposal.SendAsync(createProposalInput);","isFullCredit":false},{"lineNumber":218,"author":{"gitId":"-"},"content":"            transactionResult2.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":219,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":220,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":221,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":222,"author":{"gitId":"-"},"content":"            //\"Proposal with invalid url.\"","isFullCredit":false},{"lineNumber":223,"author":{"gitId":"-"},"content":"            var createProposalInput \u003d new CreateProposalInput","isFullCredit":false},{"lineNumber":224,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":225,"author":{"gitId":"-"},"content":"                ToAddress \u003d Accounts[0].Address,","isFullCredit":false},{"lineNumber":226,"author":{"gitId":"-"},"content":"                Params \u003d ByteString.CopyFromUtf8(\"Test\"),","isFullCredit":false},{"lineNumber":227,"author":{"gitId":"-"},"content":"                ExpiredTime \u003d TimestampHelper.GetUtcNow().AddDays(1),","isFullCredit":false},{"lineNumber":228,"author":{"gitId":"-"},"content":"                OrganizationAddress \u003d organizationAddress,","isFullCredit":false},{"lineNumber":229,"author":{"gitId":"-"},"content":"                ContractMethodName \u003d \"Test\",","isFullCredit":false},{"lineNumber":230,"author":{"gitId":"-"},"content":"                ProposalDescriptionUrl \u003d \"test.com\"","isFullCredit":false},{"lineNumber":231,"author":{"gitId":"-"},"content":"            };","isFullCredit":false},{"lineNumber":232,"author":{"gitId":"-"},"content":"            var transactionResult \u003d","isFullCredit":false},{"lineNumber":233,"author":{"gitId":"-"},"content":"                await ReferendumContractStub.CreateProposal.SendWithExceptionAsync(createProposalInput);","isFullCredit":false},{"lineNumber":234,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":235,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Error.Contains(\"Invalid proposal.\").ShouldBeTrue();","isFullCredit":false},{"lineNumber":236,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":237,"author":{"gitId":"-"},"content":"            createProposalInput.ProposalDescriptionUrl \u003d \"https://test.com/test%abcd%\u0026wxyz\";","isFullCredit":false},{"lineNumber":238,"author":{"gitId":"-"},"content":"            var transactionResult2 \u003d await ReferendumContractStub.CreateProposal.SendAsync(createProposalInput);","isFullCredit":false},{"lineNumber":239,"author":{"gitId":"-"},"content":"            transactionResult2.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":240,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":241,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":242,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":243,"author":{"gitId":"-"},"content":"            // unauthorized to propose","isFullCredit":false},{"lineNumber":244,"author":{"gitId":"-"},"content":"            var createProposalInput \u003d new CreateProposalInput","isFullCredit":false},{"lineNumber":245,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":246,"author":{"gitId":"-"},"content":"                ToAddress \u003d Accounts[0].Address,","isFullCredit":false},{"lineNumber":247,"author":{"gitId":"-"},"content":"                Params \u003d ByteString.CopyFromUtf8(\"Test\"),","isFullCredit":false},{"lineNumber":248,"author":{"gitId":"-"},"content":"                ExpiredTime \u003d TimestampHelper.GetUtcNow().AddDays(1),","isFullCredit":false},{"lineNumber":249,"author":{"gitId":"-"},"content":"                OrganizationAddress \u003d organizationAddress,","isFullCredit":false},{"lineNumber":250,"author":{"gitId":"-"},"content":"                ContractMethodName \u003d \"Test\"","isFullCredit":false},{"lineNumber":251,"author":{"gitId":"-"},"content":"            };","isFullCredit":false},{"lineNumber":252,"author":{"gitId":"-"},"content":"            var transactionResult \u003d await GetReferendumContractTester(Accounts.Last().KeyPair)","isFullCredit":false},{"lineNumber":253,"author":{"gitId":"-"},"content":"                .CreateProposal.SendWithExceptionAsync(createProposalInput);","isFullCredit":false},{"lineNumber":254,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Error.ShouldContain(\"Unauthorized to propose.\");","isFullCredit":false},{"lineNumber":255,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":256,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":257,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":258,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":259,"author":{"gitId":"-"},"content":"    public async Task Approve_Proposal_NotFoundProposal_Test()","isFullCredit":false},{"lineNumber":260,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":261,"author":{"gitId":"-"},"content":"        var transactionResult \u003d","isFullCredit":false},{"lineNumber":262,"author":{"gitId":"-"},"content":"            await ReferendumContractStub.Approve.SendWithExceptionAsync(HashHelper.ComputeFrom(\"Test\"));","isFullCredit":false},{"lineNumber":263,"author":{"gitId":"-"},"content":"        transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":264,"author":{"gitId":"-"},"content":"        transactionResult.TransactionResult.Error.Contains(\"Invalid proposal id\").ShouldBeTrue();","isFullCredit":false},{"lineNumber":265,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":266,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":267,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":268,"author":{"gitId":"-"},"content":"    public async Task Approve_WithoutAllowance()","isFullCredit":false},{"lineNumber":269,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":270,"author":{"gitId":"-"},"content":"        var minimalApproveThreshold \u003d 5000;","isFullCredit":false},{"lineNumber":271,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 5000;","isFullCredit":false},{"lineNumber":272,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 10000;","isFullCredit":false},{"lineNumber":273,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 10000;","isFullCredit":false},{"lineNumber":274,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApproveThreshold, minimalVoteThreshold,","isFullCredit":false},{"lineNumber":275,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, new[] { DefaultSender });","isFullCredit":false},{"lineNumber":276,"author":{"gitId":"-"},"content":"        var proposalId \u003d await CreateProposalAsync(DefaultSenderKeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":277,"author":{"gitId":"-"},"content":"        ReferendumContractStub \u003d GetReferendumContractTester(DefaultSenderKeyPair);","isFullCredit":false},{"lineNumber":278,"author":{"gitId":"-"},"content":"        var approveTx \u003d await ReferendumContractStub.Approve.SendWithExceptionAsync(proposalId);","isFullCredit":false},{"lineNumber":279,"author":{"gitId":"-"},"content":"        approveTx.TransactionResult.Error.ShouldContain(\"Allowance not enough.\");","isFullCredit":false},{"lineNumber":280,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":281,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":282,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":283,"author":{"gitId":"-"},"content":"    public async Task Approve_Success()","isFullCredit":false},{"lineNumber":284,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":285,"author":{"gitId":"-"},"content":"        var minimalApproveThreshold \u003d 5000;","isFullCredit":false},{"lineNumber":286,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 5000;","isFullCredit":false},{"lineNumber":287,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 10000;","isFullCredit":false},{"lineNumber":288,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 10000;","isFullCredit":false},{"lineNumber":289,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApproveThreshold, minimalVoteThreshold,","isFullCredit":false},{"lineNumber":290,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, new[] { DefaultSender });","isFullCredit":false},{"lineNumber":291,"author":{"gitId":"-"},"content":"        var proposalId \u003d await CreateProposalAsync(DefaultSenderKeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":292,"author":{"gitId":"-"},"content":"        ReferendumContractStub \u003d GetReferendumContractTester(DefaultSenderKeyPair);","isFullCredit":false},{"lineNumber":293,"author":{"gitId":"-"},"content":"        var proposalVirtualAddress \u003d await ReferendumContractStub.GetProposalVirtualAddress.CallAsync(proposalId);","isFullCredit":false},{"lineNumber":294,"author":{"gitId":"-"},"content":"        long amount \u003d 1000;","isFullCredit":false},{"lineNumber":295,"author":{"gitId":"-"},"content":"        await TokenContractStub.Approve.SendAsync(new ApproveInput","isFullCredit":false},{"lineNumber":296,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":297,"author":{"gitId":"-"},"content":"            Amount \u003d amount,","isFullCredit":false},{"lineNumber":298,"author":{"gitId":"-"},"content":"            Spender \u003d proposalVirtualAddress,","isFullCredit":false},{"lineNumber":299,"author":{"gitId":"-"},"content":"            Symbol \u003d \"ELF\"","isFullCredit":false},{"lineNumber":300,"author":{"gitId":"-"},"content":"        });","isFullCredit":false},{"lineNumber":301,"author":{"gitId":"-"},"content":"        var balance1 \u003d await GetBalanceAsync(\"ELF\", DefaultSender);","isFullCredit":false},{"lineNumber":302,"author":{"gitId":"-"},"content":"        var transactionResult1 \u003d await ReferendumContractStub.Approve.SendAsync(proposalId);","isFullCredit":false},{"lineNumber":303,"author":{"gitId":"-"},"content":"        transactionResult1.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":304,"author":{"gitId":"-"},"content":"        var balance2 \u003d await GetBalanceAsync(\"ELF\", DefaultSender);","isFullCredit":false},{"lineNumber":305,"author":{"gitId":"-"},"content":"        balance2.ShouldBe(balance1 - amount);","isFullCredit":false},{"lineNumber":306,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":307,"author":{"gitId":"-"},"content":"        var proposal \u003d await ReferendumContractStub.GetProposal.CallAsync(proposalId);","isFullCredit":false},{"lineNumber":308,"author":{"gitId":"-"},"content":"        proposal.ApprovalCount.ShouldBe(amount);","isFullCredit":false},{"lineNumber":309,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":310,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":311,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":312,"author":{"gitId":"-"},"content":"    public async Task Approve_Proposal_MultiTimes_Test()","isFullCredit":false},{"lineNumber":313,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":314,"author":{"gitId":"-"},"content":"        var minimalApproveThreshold \u003d 5000;","isFullCredit":false},{"lineNumber":315,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 5000;","isFullCredit":false},{"lineNumber":316,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 10000;","isFullCredit":false},{"lineNumber":317,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 10000;","isFullCredit":false},{"lineNumber":318,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApproveThreshold, minimalVoteThreshold,","isFullCredit":false},{"lineNumber":319,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, new[] { DefaultSender });","isFullCredit":false},{"lineNumber":320,"author":{"gitId":"-"},"content":"        var proposalId \u003d await CreateProposalAsync(DefaultSenderKeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":321,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":322,"author":{"gitId":"-"},"content":"        var keyPair \u003d Accounts[1].KeyPair;","isFullCredit":false},{"lineNumber":323,"author":{"gitId":"-"},"content":"        var userBalanceBeforeApprove \u003d","isFullCredit":false},{"lineNumber":324,"author":{"gitId":"-"},"content":"            await GetBalanceAsync(\"ELF\", Address.FromPublicKey(keyPair.PublicKey));","isFullCredit":false},{"lineNumber":325,"author":{"gitId":"-"},"content":"        long amount \u003d 1000;","isFullCredit":false},{"lineNumber":326,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":327,"author":{"gitId":"-"},"content":"        await ApproveAllowanceAsync(keyPair, amount, proposalId);","isFullCredit":false},{"lineNumber":328,"author":{"gitId":"-"},"content":"        var referendumContractStub \u003d GetReferendumContractTester(keyPair);","isFullCredit":false},{"lineNumber":329,"author":{"gitId":"-"},"content":"        await referendumContractStub.Approve.SendAsync(proposalId);","isFullCredit":false},{"lineNumber":330,"author":{"gitId":"-"},"content":"        var userBalance \u003d","isFullCredit":false},{"lineNumber":331,"author":{"gitId":"-"},"content":"            await GetBalanceAsync(\"ELF\", Accounts[1].Address);","isFullCredit":false},{"lineNumber":332,"author":{"gitId":"-"},"content":"        userBalance.ShouldBe(userBalanceBeforeApprove - amount);","isFullCredit":false},{"lineNumber":333,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":334,"author":{"gitId":"-"},"content":"        var transactionResult2 \u003d await referendumContractStub.Approve.SendWithExceptionAsync(proposalId);","isFullCredit":false},{"lineNumber":335,"author":{"gitId":"-"},"content":"        transactionResult2.TransactionResult.Error.ShouldContain(\"Allowance not enough.\");","isFullCredit":false},{"lineNumber":336,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":337,"author":{"gitId":"-"},"content":"        await ApproveAllowanceAsync(keyPair, amount, proposalId);","isFullCredit":false},{"lineNumber":338,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":339,"author":{"gitId":"-"},"content":"        var result \u003d await referendumContractStub.Reject.SendWithExceptionAsync(proposalId);","isFullCredit":false},{"lineNumber":340,"author":{"gitId":"-"},"content":"        result.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":341,"author":{"gitId":"-"},"content":"        result.TransactionResult.Error.ShouldContain(\"Already locked.\");","isFullCredit":false},{"lineNumber":342,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":343,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":344,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":345,"author":{"gitId":"-"},"content":"    public async Task Approve_Proposal_ExpiredTime_Test()","isFullCredit":false},{"lineNumber":346,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":347,"author":{"gitId":"-"},"content":"        var minimalApproveThreshold \u003d 5000;","isFullCredit":false},{"lineNumber":348,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 5000;","isFullCredit":false},{"lineNumber":349,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 10000;","isFullCredit":false},{"lineNumber":350,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 10000;","isFullCredit":false},{"lineNumber":351,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApproveThreshold, minimalVoteThreshold,","isFullCredit":false},{"lineNumber":352,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, new[] { DefaultSender });","isFullCredit":false},{"lineNumber":353,"author":{"gitId":"-"},"content":"        var timeStamp \u003d TimestampHelper.GetUtcNow();","isFullCredit":false},{"lineNumber":354,"author":{"gitId":"-"},"content":"        var proposalId \u003d","isFullCredit":false},{"lineNumber":355,"author":{"gitId":"-"},"content":"            await CreateProposalAsync(DefaultSenderKeyPair, organizationAddress, timeStamp.AddSeconds(5));","isFullCredit":false},{"lineNumber":356,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":357,"author":{"gitId":"-"},"content":"        var referendumContractStub \u003d GetReferendumContractTester(Accounts[1].KeyPair);","isFullCredit":false},{"lineNumber":358,"author":{"gitId":"-"},"content":"        BlockTimeProvider.SetBlockTime(timeStamp.AddSeconds(10));","isFullCredit":false},{"lineNumber":359,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":360,"author":{"gitId":"-"},"content":"        var error \u003d await referendumContractStub.Approve.CallWithExceptionAsync(proposalId);","isFullCredit":false},{"lineNumber":361,"author":{"gitId":"-"},"content":"        error.Value.ShouldContain(\"Invalid proposal.\");","isFullCredit":false},{"lineNumber":362,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":363,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":364,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":365,"author":{"gitId":"-"},"content":"    public async Task Approve_WrongAllowance()","isFullCredit":false},{"lineNumber":366,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":367,"author":{"gitId":"-"},"content":"        var minimalApproveThreshold \u003d 5000;","isFullCredit":false},{"lineNumber":368,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 5000;","isFullCredit":false},{"lineNumber":369,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 10000;","isFullCredit":false},{"lineNumber":370,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 10000;","isFullCredit":false},{"lineNumber":371,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApproveThreshold, minimalVoteThreshold,","isFullCredit":false},{"lineNumber":372,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, new[] { DefaultSender });","isFullCredit":false},{"lineNumber":373,"author":{"gitId":"-"},"content":"        var proposalId \u003d await CreateProposalAsync(DefaultSenderKeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":374,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":375,"author":{"gitId":"-"},"content":"        var keyPair \u003d Accounts[1].KeyPair;","isFullCredit":false},{"lineNumber":376,"author":{"gitId":"-"},"content":"        long amount \u003d 1000;","isFullCredit":false},{"lineNumber":377,"author":{"gitId":"-"},"content":"        await GetTokenContractTester(keyPair).Approve.SendAsync(new ApproveInput","isFullCredit":false},{"lineNumber":378,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":379,"author":{"gitId":"-"},"content":"            Amount \u003d amount,","isFullCredit":false},{"lineNumber":380,"author":{"gitId":"-"},"content":"            Spender \u003d ReferendumContractAddress,","isFullCredit":false},{"lineNumber":381,"author":{"gitId":"-"},"content":"            Symbol \u003d \"ELF\"","isFullCredit":false},{"lineNumber":382,"author":{"gitId":"-"},"content":"        });","isFullCredit":false},{"lineNumber":383,"author":{"gitId":"-"},"content":"        ReferendumContractStub \u003d GetReferendumContractTester(keyPair);","isFullCredit":false},{"lineNumber":384,"author":{"gitId":"-"},"content":"        var approveTransaction \u003d await ReferendumContractStub.Approve.SendWithExceptionAsync(proposalId);","isFullCredit":false},{"lineNumber":385,"author":{"gitId":"-"},"content":"        approveTransaction.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":386,"author":{"gitId":"-"},"content":"        approveTransaction.TransactionResult.Error.Contains(\"Allowance not enough.\").ShouldBeTrue();","isFullCredit":false},{"lineNumber":387,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":388,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":389,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":390,"author":{"gitId":"-"},"content":"    public async Task ReclaimVoteToken_AfterRelease()","isFullCredit":false},{"lineNumber":391,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":392,"author":{"gitId":"-"},"content":"        var minimalApproveThreshold \u003d 5000;","isFullCredit":false},{"lineNumber":393,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 5000;","isFullCredit":false},{"lineNumber":394,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 10000;","isFullCredit":false},{"lineNumber":395,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 10000;","isFullCredit":false},{"lineNumber":396,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApproveThreshold, minimalVoteThreshold,","isFullCredit":false},{"lineNumber":397,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, new[] { DefaultSender });","isFullCredit":false},{"lineNumber":398,"author":{"gitId":"-"},"content":"        await ApproveAndTransferCreateTokenFee(DefaultSenderKeyPair, minimalApproveThreshold, organizationAddress);","isFullCredit":false},{"lineNumber":399,"author":{"gitId":"-"},"content":"        var proposalId \u003d await CreateProposalAsync(DefaultSenderKeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":400,"author":{"gitId":"-"},"content":"        var amount \u003d 5000;","isFullCredit":false},{"lineNumber":401,"author":{"gitId":"-"},"content":"        var accountApprove \u003d Accounts[3];","isFullCredit":false},{"lineNumber":402,"author":{"gitId":"-"},"content":"        await ApproveAllowanceAsync(accountApprove.KeyPair, amount, proposalId);","isFullCredit":false},{"lineNumber":403,"author":{"gitId":"-"},"content":"        var balanceApprove1 \u003d await GetBalanceAsync(\"ELF\", accountApprove.Address);","isFullCredit":false},{"lineNumber":404,"author":{"gitId":"-"},"content":"        var accountReject \u003d Accounts[4];","isFullCredit":false},{"lineNumber":405,"author":{"gitId":"-"},"content":"        await ApproveAllowanceAsync(accountReject.KeyPair, amount, proposalId);","isFullCredit":false},{"lineNumber":406,"author":{"gitId":"-"},"content":"        var balanceReject1 \u003d await GetBalanceAsync(\"ELF\", accountReject.Address);","isFullCredit":false},{"lineNumber":407,"author":{"gitId":"-"},"content":"        var accountAbstain \u003d Accounts[5];","isFullCredit":false},{"lineNumber":408,"author":{"gitId":"-"},"content":"        await ApproveAllowanceAsync(accountAbstain.KeyPair, amount, proposalId);","isFullCredit":false},{"lineNumber":409,"author":{"gitId":"-"},"content":"        var balanceAbstain1 \u003d await GetBalanceAsync(\"ELF\", accountAbstain.Address);","isFullCredit":false},{"lineNumber":410,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":411,"author":{"gitId":"-"},"content":"        await ApproveAsync(accountApprove.KeyPair, proposalId);","isFullCredit":false},{"lineNumber":412,"author":{"gitId":"-"},"content":"        await RejectAsync(accountReject.KeyPair, proposalId);","isFullCredit":false},{"lineNumber":413,"author":{"gitId":"-"},"content":"        await AbstainAsync(accountAbstain.KeyPair, proposalId);","isFullCredit":false},{"lineNumber":414,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":415,"author":{"gitId":"-"},"content":"        ReferendumContractStub \u003d GetReferendumContractTester(DefaultSenderKeyPair);","isFullCredit":false},{"lineNumber":416,"author":{"gitId":"-"},"content":"        var result \u003d await ReferendumContractStub.Release.SendAsync(proposalId);","isFullCredit":false},{"lineNumber":417,"author":{"gitId":"-"},"content":"        result.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":418,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":419,"author":{"gitId":"-"},"content":"        var referendumContractStubApprove \u003d GetReferendumContractTester(accountApprove.KeyPair);","isFullCredit":false},{"lineNumber":420,"author":{"gitId":"-"},"content":"        var reclaimResult1 \u003d await referendumContractStubApprove.ReclaimVoteToken.SendAsync(proposalId);","isFullCredit":false},{"lineNumber":421,"author":{"gitId":"-"},"content":"        reclaimResult1.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":422,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":423,"author":{"gitId":"-"},"content":"        var referendumContractStubReject \u003d GetReferendumContractTester(accountReject.KeyPair);","isFullCredit":false},{"lineNumber":424,"author":{"gitId":"-"},"content":"        var reclaimResult2 \u003d await referendumContractStubReject.ReclaimVoteToken.SendAsync(proposalId);","isFullCredit":false},{"lineNumber":425,"author":{"gitId":"-"},"content":"        reclaimResult2.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":426,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":427,"author":{"gitId":"-"},"content":"        var referendumContractStubAbstain \u003d GetReferendumContractTester(accountAbstain.KeyPair);","isFullCredit":false},{"lineNumber":428,"author":{"gitId":"-"},"content":"        var reclaimResult3 \u003d await referendumContractStubAbstain.ReclaimVoteToken.SendAsync(proposalId);","isFullCredit":false},{"lineNumber":429,"author":{"gitId":"-"},"content":"        reclaimResult3.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":430,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":431,"author":{"gitId":"-"},"content":"        var balanceApprove2 \u003d await GetBalanceAsync(\"ELF\", accountApprove.Address);","isFullCredit":false},{"lineNumber":432,"author":{"gitId":"-"},"content":"        balanceApprove2.ShouldBe(balanceApprove1);","isFullCredit":false},{"lineNumber":433,"author":{"gitId":"-"},"content":"        var balanceReject2 \u003d await GetBalanceAsync(\"ELF\", accountReject.Address);","isFullCredit":false},{"lineNumber":434,"author":{"gitId":"-"},"content":"        balanceReject2.ShouldBe(balanceReject1);","isFullCredit":false},{"lineNumber":435,"author":{"gitId":"-"},"content":"        var balanceAbstain2 \u003d await GetBalanceAsync(\"ELF\", accountAbstain.Address);","isFullCredit":false},{"lineNumber":436,"author":{"gitId":"-"},"content":"        balanceAbstain2.ShouldBe(balanceAbstain1);","isFullCredit":false},{"lineNumber":437,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":438,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":439,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":440,"author":{"gitId":"-"},"content":"    public async Task ReclaimVoteToken_AfterExpired()","isFullCredit":false},{"lineNumber":441,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":442,"author":{"gitId":"-"},"content":"        var minimalApproveThreshold \u003d 5000;","isFullCredit":false},{"lineNumber":443,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 5000;","isFullCredit":false},{"lineNumber":444,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 10000;","isFullCredit":false},{"lineNumber":445,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 10000;","isFullCredit":false},{"lineNumber":446,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApproveThreshold, minimalVoteThreshold,","isFullCredit":false},{"lineNumber":447,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, new[] { DefaultSender });","isFullCredit":false},{"lineNumber":448,"author":{"gitId":"-"},"content":"        var timeStamp \u003d TimestampHelper.GetUtcNow();","isFullCredit":false},{"lineNumber":449,"author":{"gitId":"-"},"content":"        BlockTimeProvider.SetBlockTime(timeStamp); // set next block time","isFullCredit":false},{"lineNumber":450,"author":{"gitId":"-"},"content":"        var proposalId \u003d","isFullCredit":false},{"lineNumber":451,"author":{"gitId":"-"},"content":"            await CreateProposalAsync(DefaultSenderKeyPair, organizationAddress, timeStamp.AddSeconds(5));","isFullCredit":false},{"lineNumber":452,"author":{"gitId":"-"},"content":"        var amount \u003d 5000;","isFullCredit":false},{"lineNumber":453,"author":{"gitId":"-"},"content":"        var account \u003d Accounts[3];","isFullCredit":false},{"lineNumber":454,"author":{"gitId":"-"},"content":"        await ApproveAllowanceAsync(account.KeyPair, amount, proposalId);","isFullCredit":false},{"lineNumber":455,"author":{"gitId":"-"},"content":"        var balance1 \u003d await GetBalanceAsync(\"ELF\", account.Address);","isFullCredit":false},{"lineNumber":456,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":457,"author":{"gitId":"-"},"content":"        await ApproveAsync(account.KeyPair, proposalId);","isFullCredit":false},{"lineNumber":458,"author":{"gitId":"-"},"content":"        BlockTimeProvider.SetBlockTime(timeStamp.AddSeconds(10)); // set next block time","isFullCredit":false},{"lineNumber":459,"author":{"gitId":"-"},"content":"        var referendumContractStubApprove \u003d GetReferendumContractTester(account.KeyPair);","isFullCredit":false},{"lineNumber":460,"author":{"gitId":"-"},"content":"        var reclaimResult \u003d await referendumContractStubApprove.ReclaimVoteToken.SendAsync(proposalId);","isFullCredit":false},{"lineNumber":461,"author":{"gitId":"-"},"content":"        reclaimResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":462,"author":{"gitId":"-"},"content":"        var balance2 \u003d await GetBalanceAsync(\"ELF\", account.Address);","isFullCredit":false},{"lineNumber":463,"author":{"gitId":"-"},"content":"        balance2.ShouldBe(balance1);","isFullCredit":false},{"lineNumber":464,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":465,"author":{"gitId":"-"},"content":"        //delete expired proposal","isFullCredit":false},{"lineNumber":466,"author":{"gitId":"-"},"content":"        var clearResult \u003d await ReferendumContractStub.ClearProposal.SendAsync(proposalId);","isFullCredit":false},{"lineNumber":467,"author":{"gitId":"-"},"content":"        clearResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":468,"author":{"gitId":"-"},"content":"        var proposal \u003d await ReferendumContractStub.GetProposal.CallAsync(proposalId);","isFullCredit":false},{"lineNumber":469,"author":{"gitId":"-"},"content":"        proposal.ShouldBe(new ProposalOutput());","isFullCredit":false},{"lineNumber":470,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":471,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":472,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":473,"author":{"gitId":"-"},"content":"    public async Task ReclaimVoteToken_WithoutRelease()","isFullCredit":false},{"lineNumber":474,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":475,"author":{"gitId":"-"},"content":"        var minimalApproveThreshold \u003d 5000;","isFullCredit":false},{"lineNumber":476,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 5000;","isFullCredit":false},{"lineNumber":477,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 10000;","isFullCredit":false},{"lineNumber":478,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 10000;","isFullCredit":false},{"lineNumber":479,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApproveThreshold, minimalVoteThreshold,","isFullCredit":false},{"lineNumber":480,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, new[] { DefaultSender });","isFullCredit":false},{"lineNumber":481,"author":{"gitId":"-"},"content":"        var proposalId \u003d await CreateProposalAsync(DefaultSenderKeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":482,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":483,"author":{"gitId":"-"},"content":"        var account \u003d Accounts[1];","isFullCredit":false},{"lineNumber":484,"author":{"gitId":"-"},"content":"        var amount \u003d 2000;","isFullCredit":false},{"lineNumber":485,"author":{"gitId":"-"},"content":"        await ApproveAllowanceAsync(account.KeyPair, amount, proposalId);","isFullCredit":false},{"lineNumber":486,"author":{"gitId":"-"},"content":"        await ApproveAsync(account.KeyPair, proposalId);","isFullCredit":false},{"lineNumber":487,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":488,"author":{"gitId":"-"},"content":"        var reclaimResult \u003d await GetReferendumContractTester(account.KeyPair).ReclaimVoteToken","isFullCredit":false},{"lineNumber":489,"author":{"gitId":"-"},"content":"            .SendWithExceptionAsync(proposalId);","isFullCredit":false},{"lineNumber":490,"author":{"gitId":"-"},"content":"        reclaimResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":491,"author":{"gitId":"-"},"content":"        reclaimResult.TransactionResult.Error.Contains(\"Unable to reclaim at this time.\").ShouldBeTrue();","isFullCredit":false},{"lineNumber":492,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":493,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":494,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":495,"author":{"gitId":"-"},"content":"    public async Task Reclaim_VoteTokenWithoutVote_Test()","isFullCredit":false},{"lineNumber":496,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":497,"author":{"gitId":"-"},"content":"        var minimalApproveThreshold \u003d 5000;","isFullCredit":false},{"lineNumber":498,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 5000;","isFullCredit":false},{"lineNumber":499,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 10000;","isFullCredit":false},{"lineNumber":500,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 10000;","isFullCredit":false},{"lineNumber":501,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApproveThreshold, minimalVoteThreshold,","isFullCredit":false},{"lineNumber":502,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, new[] { DefaultSender });","isFullCredit":false},{"lineNumber":503,"author":{"gitId":"-"},"content":"        var timeStamp \u003d TimestampHelper.GetUtcNow();","isFullCredit":false},{"lineNumber":504,"author":{"gitId":"-"},"content":"        var proposalId \u003d","isFullCredit":false},{"lineNumber":505,"author":{"gitId":"-"},"content":"            await CreateProposalAsync(DefaultSenderKeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":506,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":507,"author":{"gitId":"-"},"content":"        var referendumContractStub \u003d GetReferendumContractTester(Accounts[1].KeyPair);","isFullCredit":false},{"lineNumber":508,"author":{"gitId":"-"},"content":"        BlockTimeProvider.SetBlockTime(timeStamp.AddDays(1)); // set next block time","isFullCredit":false},{"lineNumber":509,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":510,"author":{"gitId":"-"},"content":"        var reclaimResult \u003d await referendumContractStub.ReclaimVoteToken.SendWithExceptionAsync(proposalId);","isFullCredit":false},{"lineNumber":511,"author":{"gitId":"-"},"content":"        reclaimResult.TransactionResult.Error.ShouldContain(\"Nothing to reclaim.\");","isFullCredit":false},{"lineNumber":512,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":513,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":514,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":515,"author":{"gitId":"-"},"content":"    public async Task Check_Proposal_ToBeRelease()","isFullCredit":false},{"lineNumber":516,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":517,"author":{"gitId":"-"},"content":"        var minimalApproveThreshold \u003d 1000;","isFullCredit":false},{"lineNumber":518,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 1000;","isFullCredit":false},{"lineNumber":519,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 1000;","isFullCredit":false},{"lineNumber":520,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 1000;","isFullCredit":false},{"lineNumber":521,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApproveThreshold, minimalVoteThreshold,","isFullCredit":false},{"lineNumber":522,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, new[] { DefaultSender });","isFullCredit":false},{"lineNumber":523,"author":{"gitId":"-"},"content":"        //Abstain probability \u003e\u003d maximalAbstentionThreshold","isFullCredit":false},{"lineNumber":524,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":525,"author":{"gitId":"-"},"content":"            var proposalId \u003d await CreateProposalAsync(DefaultSenderKeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":526,"author":{"gitId":"-"},"content":"            var keyPair1 \u003d Accounts[1].KeyPair;","isFullCredit":false},{"lineNumber":527,"author":{"gitId":"-"},"content":"            var amount \u003d 1001;","isFullCredit":false},{"lineNumber":528,"author":{"gitId":"-"},"content":"            await ApproveAllowanceAsync(keyPair1, amount, proposalId);","isFullCredit":false},{"lineNumber":529,"author":{"gitId":"-"},"content":"            await ApproveAsync(keyPair1, proposalId);","isFullCredit":false},{"lineNumber":530,"author":{"gitId":"-"},"content":"            var result \u003d await ReferendumContractStub.GetProposal.CallAsync(proposalId);","isFullCredit":false},{"lineNumber":531,"author":{"gitId":"-"},"content":"            result.ToBeReleased.ShouldBeTrue();","isFullCredit":false},{"lineNumber":532,"author":{"gitId":"-"},"content":"            var keyPair2 \u003d Accounts[2].KeyPair;","isFullCredit":false},{"lineNumber":533,"author":{"gitId":"-"},"content":"            await ApproveAllowanceAsync(keyPair2, amount, proposalId);","isFullCredit":false},{"lineNumber":534,"author":{"gitId":"-"},"content":"            await AbstainAsync(keyPair2, proposalId);","isFullCredit":false},{"lineNumber":535,"author":{"gitId":"-"},"content":"            result \u003d await ReferendumContractStub.GetProposal.CallAsync(proposalId);","isFullCredit":false},{"lineNumber":536,"author":{"gitId":"-"},"content":"            result.ToBeReleased.ShouldBeFalse();","isFullCredit":false},{"lineNumber":537,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":538,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":539,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":540,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":541,"author":{"gitId":"-"},"content":"    public async Task Check_Proposal_ToBeRelease_Rejection()","isFullCredit":false},{"lineNumber":542,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":543,"author":{"gitId":"-"},"content":"        var minimalApproveThreshold \u003d 1000;","isFullCredit":false},{"lineNumber":544,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 1000;","isFullCredit":false},{"lineNumber":545,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 1000;","isFullCredit":false},{"lineNumber":546,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 1000;","isFullCredit":false},{"lineNumber":547,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApproveThreshold, minimalVoteThreshold,","isFullCredit":false},{"lineNumber":548,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, new[] { DefaultSender });","isFullCredit":false},{"lineNumber":549,"author":{"gitId":"-"},"content":"        //Rejection probability \u003e maximalRejectionThreshold","isFullCredit":false},{"lineNumber":550,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":551,"author":{"gitId":"-"},"content":"            var proposalId \u003d await CreateProposalAsync(DefaultSenderKeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":552,"author":{"gitId":"-"},"content":"            var keyPair1 \u003d Accounts[1].KeyPair;","isFullCredit":false},{"lineNumber":553,"author":{"gitId":"-"},"content":"            var amount \u003d 1001;","isFullCredit":false},{"lineNumber":554,"author":{"gitId":"-"},"content":"            await ApproveAllowanceAsync(keyPair1, amount, proposalId);","isFullCredit":false},{"lineNumber":555,"author":{"gitId":"-"},"content":"            await ApproveAsync(keyPair1, proposalId);","isFullCredit":false},{"lineNumber":556,"author":{"gitId":"-"},"content":"            var result \u003d await ReferendumContractStub.GetProposal.CallAsync(proposalId);","isFullCredit":false},{"lineNumber":557,"author":{"gitId":"-"},"content":"            result.ToBeReleased.ShouldBeTrue();","isFullCredit":false},{"lineNumber":558,"author":{"gitId":"-"},"content":"            var keyPair2 \u003d Accounts[2].KeyPair;","isFullCredit":false},{"lineNumber":559,"author":{"gitId":"-"},"content":"            await ApproveAllowanceAsync(keyPair2, amount, proposalId);","isFullCredit":false},{"lineNumber":560,"author":{"gitId":"-"},"content":"            await RejectAsync(keyPair2, proposalId);","isFullCredit":false},{"lineNumber":561,"author":{"gitId":"-"},"content":"            result \u003d await ReferendumContractStub.GetProposal.CallAsync(proposalId);","isFullCredit":false},{"lineNumber":562,"author":{"gitId":"-"},"content":"            result.ToBeReleased.ShouldBeFalse();","isFullCredit":false},{"lineNumber":563,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":564,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":565,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":566,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":567,"author":{"gitId":"-"},"content":"    public async Task Release_NotEnoughWeight_Test()","isFullCredit":false},{"lineNumber":568,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":569,"author":{"gitId":"-"},"content":"        var minimalApproveThreshold \u003d 5000;","isFullCredit":false},{"lineNumber":570,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 5000;","isFullCredit":false},{"lineNumber":571,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 10000;","isFullCredit":false},{"lineNumber":572,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 10000;","isFullCredit":false},{"lineNumber":573,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApproveThreshold, minimalVoteThreshold,","isFullCredit":false},{"lineNumber":574,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, new[] { DefaultSender });","isFullCredit":false},{"lineNumber":575,"author":{"gitId":"-"},"content":"        var proposalId \u003d await CreateProposalAsync(DefaultSenderKeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":576,"author":{"gitId":"-"},"content":"        var keyPair \u003d Accounts[3].KeyPair;","isFullCredit":false},{"lineNumber":577,"author":{"gitId":"-"},"content":"        var amount \u003d 2000;","isFullCredit":false},{"lineNumber":578,"author":{"gitId":"-"},"content":"        await ApproveAllowanceAsync(keyPair, amount, proposalId);","isFullCredit":false},{"lineNumber":579,"author":{"gitId":"-"},"content":"        await ApproveAsync(keyPair, proposalId);","isFullCredit":false},{"lineNumber":580,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":581,"author":{"gitId":"-"},"content":"        ReferendumContractStub \u003d GetReferendumContractTester(DefaultSenderKeyPair);","isFullCredit":false},{"lineNumber":582,"author":{"gitId":"-"},"content":"        var result \u003d await ReferendumContractStub.Release.SendWithExceptionAsync(proposalId);","isFullCredit":false},{"lineNumber":583,"author":{"gitId":"-"},"content":"        //Reviewer Shares \u003c ReleaseThreshold, release failed","isFullCredit":false},{"lineNumber":584,"author":{"gitId":"-"},"content":"        result.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":585,"author":{"gitId":"-"},"content":"        result.TransactionResult.Error.Contains(\"Not approved.\").ShouldBeTrue();","isFullCredit":false},{"lineNumber":586,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":587,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":588,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":589,"author":{"gitId":"-"},"content":"    public async Task Release_NotFound_Test()","isFullCredit":false},{"lineNumber":590,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":591,"author":{"gitId":"-"},"content":"        var proposalId \u003d HashHelper.ComputeFrom(\"test\");","isFullCredit":false},{"lineNumber":592,"author":{"gitId":"-"},"content":"        var result \u003d await ReferendumContractStub.Release.SendWithExceptionAsync(proposalId);","isFullCredit":false},{"lineNumber":593,"author":{"gitId":"-"},"content":"        //Proposal not found","isFullCredit":false},{"lineNumber":594,"author":{"gitId":"-"},"content":"        result.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":595,"author":{"gitId":"-"},"content":"        result.TransactionResult.Error.ShouldContain(\"Invalid proposal id.\");","isFullCredit":false},{"lineNumber":596,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":597,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":598,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":599,"author":{"gitId":"-"},"content":"    public async Task Release_WrongSender_Test()","isFullCredit":false},{"lineNumber":600,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":601,"author":{"gitId":"-"},"content":"        var minimalApproveThreshold \u003d 5000;","isFullCredit":false},{"lineNumber":602,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 5000;","isFullCredit":false},{"lineNumber":603,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 10000;","isFullCredit":false},{"lineNumber":604,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 10000;","isFullCredit":false},{"lineNumber":605,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApproveThreshold, minimalVoteThreshold,","isFullCredit":false},{"lineNumber":606,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, new[] { DefaultSender });","isFullCredit":false},{"lineNumber":607,"author":{"gitId":"-"},"content":"        var proposalId \u003d await CreateProposalAsync(DefaultSenderKeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":608,"author":{"gitId":"-"},"content":"        var keyPair \u003d Accounts[3].KeyPair;","isFullCredit":false},{"lineNumber":609,"author":{"gitId":"-"},"content":"        var amount \u003d 5000;","isFullCredit":false},{"lineNumber":610,"author":{"gitId":"-"},"content":"        await ApproveAllowanceAsync(keyPair, amount, proposalId);","isFullCredit":false},{"lineNumber":611,"author":{"gitId":"-"},"content":"        await ApproveAsync(keyPair, proposalId);","isFullCredit":false},{"lineNumber":612,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":613,"author":{"gitId":"-"},"content":"        var referendumContractStub \u003d GetReferendumContractTester(keyPair);","isFullCredit":false},{"lineNumber":614,"author":{"gitId":"-"},"content":"        var result \u003d await referendumContractStub.Release.SendWithExceptionAsync(proposalId);","isFullCredit":false},{"lineNumber":615,"author":{"gitId":"-"},"content":"        result.TransactionResult.Error.Contains(\"No permission.\").ShouldBeTrue();","isFullCredit":false},{"lineNumber":616,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":617,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":618,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":619,"author":{"gitId":"-"},"content":"    public async Task Release_Proposal_Test()","isFullCredit":false},{"lineNumber":620,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":621,"author":{"gitId":"-"},"content":"        var minimalApproveThreshold \u003d 5000;","isFullCredit":false},{"lineNumber":622,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 5000;","isFullCredit":false},{"lineNumber":623,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 10000;","isFullCredit":false},{"lineNumber":624,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 10000;","isFullCredit":false},{"lineNumber":625,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApproveThreshold, minimalVoteThreshold,","isFullCredit":false},{"lineNumber":626,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, new[] { DefaultSender });","isFullCredit":false},{"lineNumber":627,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":628,"author":{"gitId":"-"},"content":"        await ApproveAndTransferCreateTokenFee(DefaultSenderKeyPair, minimalApproveThreshold, organizationAddress);","isFullCredit":false},{"lineNumber":629,"author":{"gitId":"-"},"content":"        var proposalId \u003d await CreateProposalAsync(DefaultSenderKeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":630,"author":{"gitId":"-"},"content":"        await ApproveAllowanceAsync(Accounts[3].KeyPair, minimalApproveThreshold, proposalId);","isFullCredit":false},{"lineNumber":631,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":632,"author":{"gitId":"-"},"content":"        await ApproveAsync(Accounts[3].KeyPair, proposalId);","isFullCredit":false},{"lineNumber":633,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":634,"author":{"gitId":"-"},"content":"        ReferendumContractStub \u003d GetReferendumContractTester(DefaultSenderKeyPair);","isFullCredit":false},{"lineNumber":635,"author":{"gitId":"-"},"content":"        var result \u003d await ReferendumContractStub.Release.SendAsync(proposalId);","isFullCredit":false},{"lineNumber":636,"author":{"gitId":"-"},"content":"        result.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":637,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":638,"author":{"gitId":"-"},"content":"        // Check inline transaction result","isFullCredit":false},{"lineNumber":639,"author":{"gitId":"-"},"content":"        var newToken \u003d await TokenContractStub.GetTokenInfo.CallAsync(new GetTokenInfoInput { Symbol \u003d \"NEW\" });","isFullCredit":false},{"lineNumber":640,"author":{"gitId":"-"},"content":"        newToken.Issuer.ShouldBe(organizationAddress);","isFullCredit":false},{"lineNumber":641,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":642,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":643,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":644,"author":{"gitId":"-"},"content":"    public async Task Release_Proposal_AlreadyReleased_Test()","isFullCredit":false},{"lineNumber":645,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":646,"author":{"gitId":"-"},"content":"        var minimalApproveThreshold \u003d 5000;","isFullCredit":false},{"lineNumber":647,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 5000;","isFullCredit":false},{"lineNumber":648,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 10000;","isFullCredit":false},{"lineNumber":649,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 10000;","isFullCredit":false},{"lineNumber":650,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApproveThreshold, minimalVoteThreshold,","isFullCredit":false},{"lineNumber":651,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, new[] { DefaultSender });","isFullCredit":false},{"lineNumber":652,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":653,"author":{"gitId":"-"},"content":"        await ApproveAndTransferCreateTokenFee(DefaultSenderKeyPair, minimalApproveThreshold, organizationAddress);","isFullCredit":false},{"lineNumber":654,"author":{"gitId":"-"},"content":"        var proposalId \u003d await CreateProposalAsync(DefaultSenderKeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":655,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":656,"author":{"gitId":"-"},"content":"        // do not reach minimal approve amount","isFullCredit":false},{"lineNumber":657,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":658,"author":{"gitId":"-"},"content":"            var result \u003d await ReferendumContractStub.Release.SendWithExceptionAsync(proposalId);","isFullCredit":false},{"lineNumber":659,"author":{"gitId":"-"},"content":"            result.TransactionResult.Error.ShouldContain(\"Not approved\");","isFullCredit":false},{"lineNumber":660,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":661,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":662,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":663,"author":{"gitId":"-"},"content":"            var amount \u003d 5000;","isFullCredit":false},{"lineNumber":664,"author":{"gitId":"-"},"content":"            var keyPair \u003d Accounts[3].KeyPair;","isFullCredit":false},{"lineNumber":665,"author":{"gitId":"-"},"content":"            await ApproveAllowanceAsync(keyPair, amount, proposalId);","isFullCredit":false},{"lineNumber":666,"author":{"gitId":"-"},"content":"            await ApproveAsync(keyPair, proposalId);","isFullCredit":false},{"lineNumber":667,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":668,"author":{"gitId":"-"},"content":"            var referendumContractStub \u003d GetReferendumContractTester(DefaultSenderKeyPair);","isFullCredit":false},{"lineNumber":669,"author":{"gitId":"-"},"content":"            var result \u003d await referendumContractStub.Release.SendAsync(proposalId);","isFullCredit":false},{"lineNumber":670,"author":{"gitId":"-"},"content":"            result.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":671,"author":{"gitId":"-"},"content":"            var proposalReleased \u003d ProposalReleased.Parser.ParseFrom(result.TransactionResult.Logs","isFullCredit":false},{"lineNumber":672,"author":{"gitId":"-"},"content":"                    .First(l \u003d\u003e l.Name.Contains(nameof(ProposalReleased))).NonIndexed)","isFullCredit":false},{"lineNumber":673,"author":{"gitId":"-"},"content":"                .ProposalId;","isFullCredit":false},{"lineNumber":674,"author":{"gitId":"-"},"content":"            proposalReleased.ShouldBe(proposalId);","isFullCredit":false},{"lineNumber":675,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":676,"author":{"gitId":"-"},"content":"            //After release,the proposal will be deleted","isFullCredit":false},{"lineNumber":677,"author":{"gitId":"-"},"content":"            var getProposal \u003d await ReferendumContractStub.GetProposal.CallAsync(proposalId);","isFullCredit":false},{"lineNumber":678,"author":{"gitId":"-"},"content":"            getProposal.ShouldBe(new ProposalOutput());","isFullCredit":false},{"lineNumber":679,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":680,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":681,"author":{"gitId":"-"},"content":"            var amount \u003d 5000;","isFullCredit":false},{"lineNumber":682,"author":{"gitId":"-"},"content":"            var keyPair \u003d Accounts[3].KeyPair;","isFullCredit":false},{"lineNumber":683,"author":{"gitId":"-"},"content":"            await ApproveAllowanceAsync(keyPair, amount, proposalId);","isFullCredit":false},{"lineNumber":684,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":685,"author":{"gitId":"-"},"content":"            //approve the same proposal again","isFullCredit":false},{"lineNumber":686,"author":{"gitId":"-"},"content":"            var referendumContractStub \u003d GetReferendumContractTester(keyPair);","isFullCredit":false},{"lineNumber":687,"author":{"gitId":"-"},"content":"            var transactionResult \u003d await referendumContractStub.Approve.SendWithExceptionAsync(proposalId);","isFullCredit":false},{"lineNumber":688,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":689,"author":{"gitId":"-"},"content":"            transactionResult.TransactionResult.Error.ShouldContain(\"Invalid proposal\");","isFullCredit":false},{"lineNumber":690,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":691,"author":{"gitId":"-"},"content":"            //release the same proposal again","isFullCredit":false},{"lineNumber":692,"author":{"gitId":"-"},"content":"            var anotherReferendumContractStub \u003d GetReferendumContractTester(DefaultSenderKeyPair);","isFullCredit":false},{"lineNumber":693,"author":{"gitId":"-"},"content":"            var transactionResult2 \u003d","isFullCredit":false},{"lineNumber":694,"author":{"gitId":"-"},"content":"                await anotherReferendumContractStub.Release.SendWithExceptionAsync(proposalId);","isFullCredit":false},{"lineNumber":695,"author":{"gitId":"-"},"content":"            transactionResult2.TransactionResult.Error.ShouldContain(\"Invalid proposal id.\");","isFullCredit":false},{"lineNumber":696,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":697,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":698,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":699,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":700,"author":{"gitId":"-"},"content":"    public async Task Change_OrganizationThreshold_Test()","isFullCredit":false},{"lineNumber":701,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":702,"author":{"gitId":"-"},"content":"        var minimalApproveThreshold \u003d 5000;","isFullCredit":false},{"lineNumber":703,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 5000;","isFullCredit":false},{"lineNumber":704,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 10000;","isFullCredit":false},{"lineNumber":705,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 10000;","isFullCredit":false},{"lineNumber":706,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApproveThreshold, minimalVoteThreshold,","isFullCredit":false},{"lineNumber":707,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, new[] { DefaultSender });","isFullCredit":false},{"lineNumber":708,"author":{"gitId":"-"},"content":"        var proposalId \u003d await CreateProposalAsync(DefaultSenderKeyPair, organizationAddress);","isFullCredit":false},{"lineNumber":709,"author":{"gitId":"-"},"content":"        var keyPair \u003d Accounts[3].KeyPair;","isFullCredit":false},{"lineNumber":710,"author":{"gitId":"-"},"content":"        await ApproveAllowanceAsync(keyPair, minimalApproveThreshold, proposalId);","isFullCredit":false},{"lineNumber":711,"author":{"gitId":"-"},"content":"        await ApproveAsync(Accounts[3].KeyPair, proposalId);","isFullCredit":false},{"lineNumber":712,"author":{"gitId":"-"},"content":"        var proposal \u003d await ReferendumContractStub.GetProposal.CallAsync(proposalId);","isFullCredit":false},{"lineNumber":713,"author":{"gitId":"-"},"content":"        proposal.ToBeReleased.ShouldBeTrue();","isFullCredit":false},{"lineNumber":714,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":715,"author":{"gitId":"-"},"content":"        // invalid sender","isFullCredit":false},{"lineNumber":716,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":717,"author":{"gitId":"-"},"content":"            var ret \u003d","isFullCredit":false},{"lineNumber":718,"author":{"gitId":"-"},"content":"                await ReferendumContractStub.ChangeOrganizationThreshold.SendWithExceptionAsync(","isFullCredit":false},{"lineNumber":719,"author":{"gitId":"-"},"content":"                    new ProposalReleaseThreshold());","isFullCredit":false},{"lineNumber":720,"author":{"gitId":"-"},"content":"            ret.TransactionResult.Error.ShouldContain(\"Organization not found\");","isFullCredit":false},{"lineNumber":721,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":722,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":723,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":724,"author":{"gitId":"-"},"content":"            var proposalReleaseThresholdInput \u003d new ProposalReleaseThreshold","isFullCredit":false},{"lineNumber":725,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":726,"author":{"gitId":"-"},"content":"                MinimalVoteThreshold \u003d 20000","isFullCredit":false},{"lineNumber":727,"author":{"gitId":"-"},"content":"            };","isFullCredit":false},{"lineNumber":728,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":729,"author":{"gitId":"-"},"content":"            var changeProposalId \u003d await CreateReferendumProposalAsync(DefaultSenderKeyPair,","isFullCredit":false},{"lineNumber":730,"author":{"gitId":"-"},"content":"                proposalReleaseThresholdInput,","isFullCredit":false},{"lineNumber":731,"author":{"gitId":"-"},"content":"                nameof(ReferendumContractStub.ChangeOrganizationThreshold), organizationAddress,","isFullCredit":false},{"lineNumber":732,"author":{"gitId":"-"},"content":"                ReferendumContractAddress);","isFullCredit":false},{"lineNumber":733,"author":{"gitId":"-"},"content":"            await ApproveAllowanceAsync(keyPair, minimalApproveThreshold, changeProposalId);","isFullCredit":false},{"lineNumber":734,"author":{"gitId":"-"},"content":"            await ApproveAsync(Accounts[3].KeyPair, changeProposalId);","isFullCredit":false},{"lineNumber":735,"author":{"gitId":"-"},"content":"            var referendumContractStub \u003d GetReferendumContractTester(DefaultSenderKeyPair);","isFullCredit":false},{"lineNumber":736,"author":{"gitId":"-"},"content":"            var result \u003d await referendumContractStub.Release.SendWithExceptionAsync(changeProposalId);","isFullCredit":false},{"lineNumber":737,"author":{"gitId":"-"},"content":"            result.TransactionResult.Error.ShouldContain(\"Invalid organization.\");","isFullCredit":false},{"lineNumber":738,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":739,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":740,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":741,"author":{"gitId":"-"},"content":"            var proposalReleaseThresholdInput \u003d new ProposalReleaseThreshold","isFullCredit":false},{"lineNumber":742,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":743,"author":{"gitId":"-"},"content":"                MinimalVoteThreshold \u003d 20000,","isFullCredit":false},{"lineNumber":744,"author":{"gitId":"-"},"content":"                MinimalApprovalThreshold \u003d minimalApproveThreshold","isFullCredit":false},{"lineNumber":745,"author":{"gitId":"-"},"content":"            };","isFullCredit":false},{"lineNumber":746,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":747,"author":{"gitId":"-"},"content":"            ReferendumContractStub \u003d GetReferendumContractTester(DefaultSenderKeyPair);","isFullCredit":false},{"lineNumber":748,"author":{"gitId":"-"},"content":"            var changeProposalId \u003d await CreateReferendumProposalAsync(DefaultSenderKeyPair,","isFullCredit":false},{"lineNumber":749,"author":{"gitId":"-"},"content":"                proposalReleaseThresholdInput,","isFullCredit":false},{"lineNumber":750,"author":{"gitId":"-"},"content":"                nameof(ReferendumContractStub.ChangeOrganizationThreshold), organizationAddress,","isFullCredit":false},{"lineNumber":751,"author":{"gitId":"-"},"content":"                ReferendumContractAddress);","isFullCredit":false},{"lineNumber":752,"author":{"gitId":"-"},"content":"            await ApproveAllowanceAsync(keyPair, minimalApproveThreshold, changeProposalId);","isFullCredit":false},{"lineNumber":753,"author":{"gitId":"-"},"content":"            await ApproveAsync(Accounts[3].KeyPair, changeProposalId);","isFullCredit":false},{"lineNumber":754,"author":{"gitId":"-"},"content":"            var referendumContractStub \u003d GetReferendumContractTester(DefaultSenderKeyPair);","isFullCredit":false},{"lineNumber":755,"author":{"gitId":"-"},"content":"            var result \u003d await referendumContractStub.Release.SendAsync(changeProposalId);","isFullCredit":false},{"lineNumber":756,"author":{"gitId":"-"},"content":"            result.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":757,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":758,"author":{"gitId":"-"},"content":"            proposal \u003d await referendumContractStub.GetProposal.CallAsync(proposalId);","isFullCredit":false},{"lineNumber":759,"author":{"gitId":"-"},"content":"            proposal.ToBeReleased.ShouldBeFalse();","isFullCredit":false},{"lineNumber":760,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":761,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":762,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":763,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":764,"author":{"gitId":"-"},"content":"    public async Task ChangeOrganizationProposalWhitelist_Fail_Test()","isFullCredit":false},{"lineNumber":765,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":766,"author":{"gitId":"-"},"content":"        // invalid sender","isFullCredit":false},{"lineNumber":767,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":768,"author":{"gitId":"-"},"content":"            var ret \u003d","isFullCredit":false},{"lineNumber":769,"author":{"gitId":"-"},"content":"                await ReferendumContractStub.ChangeOrganizationProposerWhiteList.SendWithExceptionAsync(","isFullCredit":false},{"lineNumber":770,"author":{"gitId":"-"},"content":"                    new ProposerWhiteList());","isFullCredit":false},{"lineNumber":771,"author":{"gitId":"-"},"content":"            ret.TransactionResult.Error.ShouldContain(\"Organization not found\");","isFullCredit":false},{"lineNumber":772,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":773,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":774,"author":{"gitId":"-"},"content":"        // invalid proposal whitelist","isFullCredit":false},{"lineNumber":775,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":776,"author":{"gitId":"-"},"content":"            var organizationAddress \u003d await CreateOrganizationAsync();","isFullCredit":false},{"lineNumber":777,"author":{"gitId":"-"},"content":"            var newProposalWhitelist \u003d new ProposerWhiteList();","isFullCredit":false},{"lineNumber":778,"author":{"gitId":"-"},"content":"            var changeProposerWhitelistProposalId \u003d await CreateReferendumProposalAsync(DefaultSenderKeyPair,","isFullCredit":false},{"lineNumber":779,"author":{"gitId":"-"},"content":"                newProposalWhitelist,","isFullCredit":false},{"lineNumber":780,"author":{"gitId":"-"},"content":"                nameof(ReferendumContractStub.ChangeOrganizationProposerWhiteList), organizationAddress,","isFullCredit":false},{"lineNumber":781,"author":{"gitId":"-"},"content":"                ReferendumContractAddress);","isFullCredit":false},{"lineNumber":782,"author":{"gitId":"-"},"content":"            var keyPair \u003d Accounts[3].KeyPair;","isFullCredit":false},{"lineNumber":783,"author":{"gitId":"-"},"content":"            await ApproveAllowanceAsync(keyPair, 5000, changeProposerWhitelistProposalId);","isFullCredit":false},{"lineNumber":784,"author":{"gitId":"-"},"content":"            await ApproveAsync(keyPair, changeProposerWhitelistProposalId);","isFullCredit":false},{"lineNumber":785,"author":{"gitId":"-"},"content":"            var ret \u003d await ReferendumContractStub.Release.SendWithExceptionAsync(","isFullCredit":false},{"lineNumber":786,"author":{"gitId":"-"},"content":"                changeProposerWhitelistProposalId);","isFullCredit":false},{"lineNumber":787,"author":{"gitId":"-"},"content":"            ret.TransactionResult.Error.ShouldContain(\"Invalid organization\");","isFullCredit":false},{"lineNumber":788,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":789,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":790,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":791,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":792,"author":{"gitId":"-"},"content":"    public async Task Change_OrganizationProposalWhitelist_Test()","isFullCredit":false},{"lineNumber":793,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":794,"author":{"gitId":"-"},"content":"        var minimalApproveThreshold \u003d 5000;","isFullCredit":false},{"lineNumber":795,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 5000;","isFullCredit":false},{"lineNumber":796,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 10000;","isFullCredit":false},{"lineNumber":797,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 10000;","isFullCredit":false},{"lineNumber":798,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApproveThreshold, minimalVoteThreshold,","isFullCredit":false},{"lineNumber":799,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, new[] { DefaultSender });","isFullCredit":false},{"lineNumber":800,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":801,"author":{"gitId":"-"},"content":"        var whiteAddress \u003d Accounts[3].Address;","isFullCredit":false},{"lineNumber":802,"author":{"gitId":"-"},"content":"        var proposerWhiteList \u003d new ProposerWhiteList","isFullCredit":false},{"lineNumber":803,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":804,"author":{"gitId":"-"},"content":"            Proposers \u003d { whiteAddress }","isFullCredit":false},{"lineNumber":805,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":806,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":807,"author":{"gitId":"-"},"content":"        ReferendumContractStub \u003d GetReferendumContractTester(DefaultSenderKeyPair);","isFullCredit":false},{"lineNumber":808,"author":{"gitId":"-"},"content":"        var changeProposalId \u003d await CreateReferendumProposalAsync(DefaultSenderKeyPair, proposerWhiteList,","isFullCredit":false},{"lineNumber":809,"author":{"gitId":"-"},"content":"            nameof(ReferendumContractStub.ChangeOrganizationProposerWhiteList), organizationAddress,","isFullCredit":false},{"lineNumber":810,"author":{"gitId":"-"},"content":"            ReferendumContractAddress);","isFullCredit":false},{"lineNumber":811,"author":{"gitId":"-"},"content":"        await ApproveAllowanceAsync(Accounts[3].KeyPair, minimalApproveThreshold, changeProposalId);","isFullCredit":false},{"lineNumber":812,"author":{"gitId":"-"},"content":"        await ApproveAsync(Accounts[3].KeyPair, changeProposalId);","isFullCredit":false},{"lineNumber":813,"author":{"gitId":"-"},"content":"        ReferendumContractStub \u003d GetReferendumContractTester(DefaultSenderKeyPair);","isFullCredit":false},{"lineNumber":814,"author":{"gitId":"-"},"content":"        var releaseResult \u003d await ReferendumContractStub.Release.SendAsync(changeProposalId);","isFullCredit":false},{"lineNumber":815,"author":{"gitId":"-"},"content":"        releaseResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":816,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":817,"author":{"gitId":"-"},"content":"        //verify whiteList","isFullCredit":false},{"lineNumber":818,"author":{"gitId":"-"},"content":"        var verifyResult \u003d await ReferendumContractStub.ValidateProposerInWhiteList.CallAsync(","isFullCredit":false},{"lineNumber":819,"author":{"gitId":"-"},"content":"            new ValidateProposerInWhiteListInput","isFullCredit":false},{"lineNumber":820,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":821,"author":{"gitId":"-"},"content":"                OrganizationAddress \u003d organizationAddress,","isFullCredit":false},{"lineNumber":822,"author":{"gitId":"-"},"content":"                Proposer \u003d whiteAddress","isFullCredit":false},{"lineNumber":823,"author":{"gitId":"-"},"content":"            });","isFullCredit":false},{"lineNumber":824,"author":{"gitId":"-"},"content":"        verifyResult.Value.ShouldBeTrue();","isFullCredit":false},{"lineNumber":825,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":826,"author":{"gitId":"-"},"content":"        var timeStamp \u003d TimestampHelper.GetUtcNow();","isFullCredit":false},{"lineNumber":827,"author":{"gitId":"-"},"content":"        var createInput \u003d new CreateInput","isFullCredit":false},{"lineNumber":828,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":829,"author":{"gitId":"-"},"content":"            Symbol \u003d \"NEW\",","isFullCredit":false},{"lineNumber":830,"author":{"gitId":"-"},"content":"            Decimals \u003d 2,","isFullCredit":false},{"lineNumber":831,"author":{"gitId":"-"},"content":"            TotalSupply \u003d 10_0000,","isFullCredit":false},{"lineNumber":832,"author":{"gitId":"-"},"content":"            TokenName \u003d \"new token\",","isFullCredit":false},{"lineNumber":833,"author":{"gitId":"-"},"content":"            Issuer \u003d organizationAddress,","isFullCredit":false},{"lineNumber":834,"author":{"gitId":"-"},"content":"            IsBurnable \u003d true","isFullCredit":false},{"lineNumber":835,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":836,"author":{"gitId":"-"},"content":"        var createProposalInput \u003d new CreateProposalInput","isFullCredit":false},{"lineNumber":837,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":838,"author":{"gitId":"-"},"content":"            ContractMethodName \u003d nameof(TokenContract.Create),","isFullCredit":false},{"lineNumber":839,"author":{"gitId":"-"},"content":"            ToAddress \u003d TokenContractAddress,","isFullCredit":false},{"lineNumber":840,"author":{"gitId":"-"},"content":"            Params \u003d createInput.ToByteString(),","isFullCredit":false},{"lineNumber":841,"author":{"gitId":"-"},"content":"            ExpiredTime \u003d timeStamp ?? BlockTimeProvider.GetBlockTime().AddSeconds(1000),","isFullCredit":false},{"lineNumber":842,"author":{"gitId":"-"},"content":"            OrganizationAddress \u003d organizationAddress","isFullCredit":false},{"lineNumber":843,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":844,"author":{"gitId":"-"},"content":"        ReferendumContractStub \u003d GetReferendumContractTester(DefaultSenderKeyPair);","isFullCredit":false},{"lineNumber":845,"author":{"gitId":"-"},"content":"        var result \u003d await ReferendumContractStub.CreateProposal.SendWithExceptionAsync(createProposalInput);","isFullCredit":false},{"lineNumber":846,"author":{"gitId":"-"},"content":"        result.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":847,"author":{"gitId":"-"},"content":"        result.TransactionResult.Error.ShouldContain(\"Unauthorized to propose.\");","isFullCredit":false},{"lineNumber":848,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":849,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":850,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":851,"author":{"gitId":"-"},"content":"    public async Task SetMethodFee_Fail_Test()","isFullCredit":false},{"lineNumber":852,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":853,"author":{"gitId":"-"},"content":"        // invalid token symbol","isFullCredit":false},{"lineNumber":854,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":855,"author":{"gitId":"-"},"content":"            var invalidTokenSymbol \u003d \"CPW\";","isFullCredit":false},{"lineNumber":856,"author":{"gitId":"-"},"content":"            var inputFee \u003d GetValidMethodFees();","isFullCredit":false},{"lineNumber":857,"author":{"gitId":"-"},"content":"            inputFee.Fees[0].Symbol \u003d invalidTokenSymbol;","isFullCredit":false},{"lineNumber":858,"author":{"gitId":"-"},"content":"            var ret \u003d await ReferendumContractStub.SetMethodFee.SendWithExceptionAsync(inputFee);","isFullCredit":false},{"lineNumber":859,"author":{"gitId":"-"},"content":"            ret.TransactionResult.Error.ShouldContain(\"Token is not found\");","isFullCredit":false},{"lineNumber":860,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":861,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":862,"author":{"gitId":"-"},"content":"        //invalid fee amount","isFullCredit":false},{"lineNumber":863,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":864,"author":{"gitId":"-"},"content":"            var inputFee \u003d GetValidMethodFees();","isFullCredit":false},{"lineNumber":865,"author":{"gitId":"-"},"content":"            inputFee.Fees[0].BasicFee \u003d -1;","isFullCredit":false},{"lineNumber":866,"author":{"gitId":"-"},"content":"            var ret \u003d await ReferendumContractStub.SetMethodFee.SendWithExceptionAsync(inputFee);","isFullCredit":false},{"lineNumber":867,"author":{"gitId":"-"},"content":"            ret.TransactionResult.Error.ShouldContain(\"Invalid amount\");","isFullCredit":false},{"lineNumber":868,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":869,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":870,"author":{"gitId":"-"},"content":"        //invalid sender","isFullCredit":false},{"lineNumber":871,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":872,"author":{"gitId":"-"},"content":"            var inputFee \u003d GetValidMethodFees();","isFullCredit":false},{"lineNumber":873,"author":{"gitId":"-"},"content":"            var ret \u003d await ReferendumContractStub.SetMethodFee.SendWithExceptionAsync(inputFee);","isFullCredit":false},{"lineNumber":874,"author":{"gitId":"-"},"content":"            ret.TransactionResult.Error.ShouldContain(\"Unauthorized\");","isFullCredit":false},{"lineNumber":875,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":876,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":877,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":878,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":879,"author":{"gitId":"-"},"content":"    public async Task SetMethodFee_Test()","isFullCredit":false},{"lineNumber":880,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":881,"author":{"gitId":"-"},"content":"        var inputFee \u003d new MethodFees","isFullCredit":false},{"lineNumber":882,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":883,"author":{"gitId":"-"},"content":"            MethodName \u003d nameof(ReferendumContractStub.CreateProposal),","isFullCredit":false},{"lineNumber":884,"author":{"gitId":"-"},"content":"            Fees \u003d","isFullCredit":false},{"lineNumber":885,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":886,"author":{"gitId":"-"},"content":"                new MethodFee","isFullCredit":false},{"lineNumber":887,"author":{"gitId":"-"},"content":"                {","isFullCredit":false},{"lineNumber":888,"author":{"gitId":"-"},"content":"                    Symbol \u003d \"ELF\",","isFullCredit":false},{"lineNumber":889,"author":{"gitId":"-"},"content":"                    BasicFee \u003d 5000_0000L","isFullCredit":false},{"lineNumber":890,"author":{"gitId":"-"},"content":"                }","isFullCredit":false},{"lineNumber":891,"author":{"gitId":"-"},"content":"            }","isFullCredit":false},{"lineNumber":892,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":893,"author":{"gitId":"-"},"content":"        var defaultOrganization \u003d await ParliamentContractStub.GetDefaultOrganizationAddress.CallAsync(new Empty());","isFullCredit":false},{"lineNumber":894,"author":{"gitId":"-"},"content":"        var result \u003d await ParliamentContractStub.CreateProposal.SendAsync(new CreateProposalInput","isFullCredit":false},{"lineNumber":895,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":896,"author":{"gitId":"-"},"content":"            ToAddress \u003d ReferendumContractAddress,","isFullCredit":false},{"lineNumber":897,"author":{"gitId":"-"},"content":"            Params \u003d inputFee.ToByteString(),","isFullCredit":false},{"lineNumber":898,"author":{"gitId":"-"},"content":"            ContractMethodName \u003d nameof(ReferendumContractStub.SetMethodFee),","isFullCredit":false},{"lineNumber":899,"author":{"gitId":"-"},"content":"            ExpiredTime \u003d TimestampHelper.GetUtcNow().AddHours(1),","isFullCredit":false},{"lineNumber":900,"author":{"gitId":"-"},"content":"            OrganizationAddress \u003d defaultOrganization","isFullCredit":false},{"lineNumber":901,"author":{"gitId":"-"},"content":"        });","isFullCredit":false},{"lineNumber":902,"author":{"gitId":"-"},"content":"        var proposalId \u003d result.Output;","isFullCredit":false},{"lineNumber":903,"author":{"gitId":"-"},"content":"        await ApproveWithMinersAsync(proposalId);","isFullCredit":false},{"lineNumber":904,"author":{"gitId":"-"},"content":"        await ParliamentContractStub.Release.SendAsync(proposalId);","isFullCredit":false},{"lineNumber":905,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":906,"author":{"gitId":"-"},"content":"        var feeResult \u003d await ReferendumContractStub.GetMethodFee.CallAsync(new StringValue","isFullCredit":false},{"lineNumber":907,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":908,"author":{"gitId":"-"},"content":"            Value \u003d nameof(ReferendumContractStub.CreateProposal)","isFullCredit":false},{"lineNumber":909,"author":{"gitId":"-"},"content":"        });","isFullCredit":false},{"lineNumber":910,"author":{"gitId":"-"},"content":"        feeResult.Fees.First().ShouldBe(new MethodFee","isFullCredit":false},{"lineNumber":911,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":912,"author":{"gitId":"-"},"content":"            Symbol \u003d \"ELF\",","isFullCredit":false},{"lineNumber":913,"author":{"gitId":"-"},"content":"            BasicFee \u003d 5000_0000L","isFullCredit":false},{"lineNumber":914,"author":{"gitId":"-"},"content":"        });","isFullCredit":false},{"lineNumber":915,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":916,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":917,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":918,"author":{"gitId":"-"},"content":"    public async Task ChangeMethodFeeController_With_Invalid_Organization_Test()","isFullCredit":false},{"lineNumber":919,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":920,"author":{"gitId":"-"},"content":"        var methodFeeController \u003d await ReferendumContractStub.GetMethodFeeController.CallAsync(new Empty());","isFullCredit":false},{"lineNumber":921,"author":{"gitId":"-"},"content":"        var proposalId \u003d await CreateFeeProposalAsync(ReferendumContractAddress,","isFullCredit":false},{"lineNumber":922,"author":{"gitId":"-"},"content":"            methodFeeController.OwnerAddress, nameof(ReferendumContractStub.ChangeMethodFeeController),","isFullCredit":false},{"lineNumber":923,"author":{"gitId":"-"},"content":"            new AuthorityInfo","isFullCredit":false},{"lineNumber":924,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":925,"author":{"gitId":"-"},"content":"                OwnerAddress \u003d TokenContractAddress,","isFullCredit":false},{"lineNumber":926,"author":{"gitId":"-"},"content":"                ContractAddress \u003d ParliamentContractAddress","isFullCredit":false},{"lineNumber":927,"author":{"gitId":"-"},"content":"            });","isFullCredit":false},{"lineNumber":928,"author":{"gitId":"-"},"content":"        await ApproveWithMinersAsync(proposalId);","isFullCredit":false},{"lineNumber":929,"author":{"gitId":"-"},"content":"        var ret \u003d await ParliamentContractStub.Release.SendWithExceptionAsync(proposalId);","isFullCredit":false},{"lineNumber":930,"author":{"gitId":"-"},"content":"        ret.TransactionResult.Error.ShouldContain(\"Invalid authority input\");","isFullCredit":false},{"lineNumber":931,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":932,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":933,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":934,"author":{"gitId":"-"},"content":"    public async Task ChangeMethodFeeController_Test()","isFullCredit":false},{"lineNumber":935,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":936,"author":{"gitId":"-"},"content":"        var createOrganizationResult \u003d","isFullCredit":false},{"lineNumber":937,"author":{"gitId":"-"},"content":"            await ParliamentContractStub.CreateOrganization.SendAsync(","isFullCredit":false},{"lineNumber":938,"author":{"gitId":"-"},"content":"                new Parliament.CreateOrganizationInput","isFullCredit":false},{"lineNumber":939,"author":{"gitId":"-"},"content":"                {","isFullCredit":false},{"lineNumber":940,"author":{"gitId":"-"},"content":"                    ProposalReleaseThreshold \u003d new ProposalReleaseThreshold","isFullCredit":false},{"lineNumber":941,"author":{"gitId":"-"},"content":"                    {","isFullCredit":false},{"lineNumber":942,"author":{"gitId":"-"},"content":"                        MinimalApprovalThreshold \u003d 1000,","isFullCredit":false},{"lineNumber":943,"author":{"gitId":"-"},"content":"                        MinimalVoteThreshold \u003d 1000","isFullCredit":false},{"lineNumber":944,"author":{"gitId":"-"},"content":"                    }","isFullCredit":false},{"lineNumber":945,"author":{"gitId":"-"},"content":"                });","isFullCredit":false},{"lineNumber":946,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d Address.Parser.ParseFrom(createOrganizationResult.TransactionResult.ReturnValue);","isFullCredit":false},{"lineNumber":947,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":948,"author":{"gitId":"-"},"content":"        var methodFeeController \u003d await ReferendumContractStub.GetMethodFeeController.CallAsync(new Empty());","isFullCredit":false},{"lineNumber":949,"author":{"gitId":"-"},"content":"        var defaultOrganization \u003d await ParliamentContractStub.GetDefaultOrganizationAddress.CallAsync(new Empty());","isFullCredit":false},{"lineNumber":950,"author":{"gitId":"-"},"content":"        methodFeeController.OwnerAddress.ShouldBe(defaultOrganization);","isFullCredit":false},{"lineNumber":951,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":952,"author":{"gitId":"-"},"content":"        const string proposalCreationMethodName \u003d nameof(ReferendumContractStub.ChangeMethodFeeController);","isFullCredit":false},{"lineNumber":953,"author":{"gitId":"-"},"content":"        var proposalId \u003d await CreateFeeProposalAsync(ReferendumContractAddress,","isFullCredit":false},{"lineNumber":954,"author":{"gitId":"-"},"content":"            methodFeeController.OwnerAddress, proposalCreationMethodName, new AuthorityInfo","isFullCredit":false},{"lineNumber":955,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":956,"author":{"gitId":"-"},"content":"                OwnerAddress \u003d organizationAddress,","isFullCredit":false},{"lineNumber":957,"author":{"gitId":"-"},"content":"                ContractAddress \u003d ParliamentContractAddress","isFullCredit":false},{"lineNumber":958,"author":{"gitId":"-"},"content":"            });","isFullCredit":false},{"lineNumber":959,"author":{"gitId":"-"},"content":"        await ApproveWithMinersAsync(proposalId);","isFullCredit":false},{"lineNumber":960,"author":{"gitId":"-"},"content":"        var releaseResult \u003d await ParliamentContractStub.Release.SendAsync(proposalId);","isFullCredit":false},{"lineNumber":961,"author":{"gitId":"-"},"content":"        releaseResult.TransactionResult.Error.ShouldBeNullOrEmpty();","isFullCredit":false},{"lineNumber":962,"author":{"gitId":"-"},"content":"        releaseResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":963,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":964,"author":{"gitId":"-"},"content":"        var newMethodFeeController \u003d await ReferendumContractStub.GetMethodFeeController.CallAsync(new Empty());","isFullCredit":false},{"lineNumber":965,"author":{"gitId":"-"},"content":"        newMethodFeeController.OwnerAddress.ShouldBe(organizationAddress);","isFullCredit":false},{"lineNumber":966,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":967,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":968,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":969,"author":{"gitId":"-"},"content":"    public async Task ChangeMethodFeeController_WithoutAuth_Test()","isFullCredit":false},{"lineNumber":970,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":971,"author":{"gitId":"-"},"content":"        var createOrganizationResult \u003d","isFullCredit":false},{"lineNumber":972,"author":{"gitId":"-"},"content":"            await ParliamentContractStub.CreateOrganization.SendAsync(","isFullCredit":false},{"lineNumber":973,"author":{"gitId":"-"},"content":"                new Parliament.CreateOrganizationInput","isFullCredit":false},{"lineNumber":974,"author":{"gitId":"-"},"content":"                {","isFullCredit":false},{"lineNumber":975,"author":{"gitId":"-"},"content":"                    ProposalReleaseThreshold \u003d new ProposalReleaseThreshold","isFullCredit":false},{"lineNumber":976,"author":{"gitId":"-"},"content":"                    {","isFullCredit":false},{"lineNumber":977,"author":{"gitId":"-"},"content":"                        MinimalApprovalThreshold \u003d 1000,","isFullCredit":false},{"lineNumber":978,"author":{"gitId":"-"},"content":"                        MinimalVoteThreshold \u003d 1000","isFullCredit":false},{"lineNumber":979,"author":{"gitId":"-"},"content":"                    }","isFullCredit":false},{"lineNumber":980,"author":{"gitId":"-"},"content":"                });","isFullCredit":false},{"lineNumber":981,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d Address.Parser.ParseFrom(createOrganizationResult.TransactionResult.ReturnValue);","isFullCredit":false},{"lineNumber":982,"author":{"gitId":"-"},"content":"        var result \u003d await ReferendumContractStub.ChangeMethodFeeController.SendWithExceptionAsync(new AuthorityInfo","isFullCredit":false},{"lineNumber":983,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":984,"author":{"gitId":"-"},"content":"            OwnerAddress \u003d organizationAddress,","isFullCredit":false},{"lineNumber":985,"author":{"gitId":"-"},"content":"            ContractAddress \u003d ParliamentContractAddress","isFullCredit":false},{"lineNumber":986,"author":{"gitId":"-"},"content":"        });","isFullCredit":false},{"lineNumber":987,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":988,"author":{"gitId":"-"},"content":"        result.TransactionResult.Status.ShouldBe(TransactionResultStatus.Failed);","isFullCredit":false},{"lineNumber":989,"author":{"gitId":"-"},"content":"        result.TransactionResult.Error.Contains(\"Unauthorized behavior.\").ShouldBeTrue();","isFullCredit":false},{"lineNumber":990,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":991,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":992,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":993,"author":{"gitId":"-"},"content":"    public async Task CreateOrganizationBySystemContract_Test()","isFullCredit":false},{"lineNumber":994,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":995,"author":{"gitId":"-"},"content":"        var minimalApproveThreshold \u003d 2;","isFullCredit":false},{"lineNumber":996,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 3;","isFullCredit":false},{"lineNumber":997,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 1;","isFullCredit":false},{"lineNumber":998,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 1;","isFullCredit":false},{"lineNumber":999,"author":{"gitId":"-"},"content":"        var createOrganizationInput \u003d new CreateOrganizationInput","isFullCredit":false},{"lineNumber":1000,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1001,"author":{"gitId":"-"},"content":"            TokenSymbol \u003d \"ELF\",","isFullCredit":false},{"lineNumber":1002,"author":{"gitId":"-"},"content":"            ProposalReleaseThreshold \u003d new ProposalReleaseThreshold","isFullCredit":false},{"lineNumber":1003,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":1004,"author":{"gitId":"-"},"content":"                MinimalApprovalThreshold \u003d minimalApproveThreshold,","isFullCredit":false},{"lineNumber":1005,"author":{"gitId":"-"},"content":"                MinimalVoteThreshold \u003d minimalVoteThreshold,","isFullCredit":false},{"lineNumber":1006,"author":{"gitId":"-"},"content":"                MaximalAbstentionThreshold \u003d maximalAbstentionThreshold,","isFullCredit":false},{"lineNumber":1007,"author":{"gitId":"-"},"content":"                MaximalRejectionThreshold \u003d maximalRejectionThreshold","isFullCredit":false},{"lineNumber":1008,"author":{"gitId":"-"},"content":"            },","isFullCredit":false},{"lineNumber":1009,"author":{"gitId":"-"},"content":"            ProposerWhiteList \u003d new ProposerWhiteList","isFullCredit":false},{"lineNumber":1010,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":1011,"author":{"gitId":"-"},"content":"                Proposers \u003d { DefaultSender }","isFullCredit":false},{"lineNumber":1012,"author":{"gitId":"-"},"content":"            }","isFullCredit":false},{"lineNumber":1013,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":1014,"author":{"gitId":"-"},"content":"        var input \u003d new CreateOrganizationBySystemContractInput","isFullCredit":false},{"lineNumber":1015,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1016,"author":{"gitId":"-"},"content":"            OrganizationCreationInput \u003d createOrganizationInput,","isFullCredit":false},{"lineNumber":1017,"author":{"gitId":"-"},"content":"            OrganizationAddressFeedbackMethod \u003d \"\"","isFullCredit":false},{"lineNumber":1018,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":1019,"author":{"gitId":"-"},"content":"        //Unauthorized to create organization","isFullCredit":false},{"lineNumber":1020,"author":{"gitId":"-"},"content":"        var addressByCalculate \u003d","isFullCredit":false},{"lineNumber":1021,"author":{"gitId":"-"},"content":"            await ReferendumContractStub.CalculateOrganizationAddress.SendAsync(createOrganizationInput);","isFullCredit":false},{"lineNumber":1022,"author":{"gitId":"-"},"content":"        var transactionResult \u003d","isFullCredit":false},{"lineNumber":1023,"author":{"gitId":"-"},"content":"            await ReferendumContractStub.CreateOrganizationBySystemContract.SendWithExceptionAsync(input);","isFullCredit":false},{"lineNumber":1024,"author":{"gitId":"-"},"content":"        transactionResult.TransactionResult.Error.ShouldContain(\"Unauthorized\");","isFullCredit":false},{"lineNumber":1025,"author":{"gitId":"-"},"content":"        //success","isFullCredit":false},{"lineNumber":1026,"author":{"gitId":"-"},"content":"        var chain \u003d await _blockchainService.GetChainAsync();","isFullCredit":false},{"lineNumber":1027,"author":{"gitId":"-"},"content":"        var blockIndex \u003d new BlockIndex","isFullCredit":false},{"lineNumber":1028,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1029,"author":{"gitId":"-"},"content":"            BlockHash \u003d chain.BestChainHash,","isFullCredit":false},{"lineNumber":1030,"author":{"gitId":"-"},"content":"            BlockHeight \u003d chain.BestChainHeight","isFullCredit":false},{"lineNumber":1031,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":1032,"author":{"gitId":"-"},"content":"        await _smartContractAddressService.SetSmartContractAddressAsync(blockIndex,","isFullCredit":false},{"lineNumber":1033,"author":{"gitId":"-"},"content":"            _smartContractAddressNameProvider.ContractStringName, DefaultSender);","isFullCredit":false},{"lineNumber":1034,"author":{"gitId":"-"},"content":"        var transactionResult1 \u003d","isFullCredit":false},{"lineNumber":1035,"author":{"gitId":"-"},"content":"            await ReferendumContractStub.CreateOrganizationBySystemContract.SendAsync(input);","isFullCredit":false},{"lineNumber":1036,"author":{"gitId":"-"},"content":"        transactionResult1.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":1037,"author":{"gitId":"-"},"content":"        transactionResult1.Output.ShouldBe(addressByCalculate.Output);","isFullCredit":false},{"lineNumber":1038,"author":{"gitId":"-"},"content":"        var boolResult \u003d","isFullCredit":false},{"lineNumber":1039,"author":{"gitId":"-"},"content":"            ReferendumContractStub.ValidateOrganizationExist.SendAsync(addressByCalculate.Output);","isFullCredit":false},{"lineNumber":1040,"author":{"gitId":"-"},"content":"        boolResult.Result.Output.Value.ShouldBeTrue();","isFullCredit":false},{"lineNumber":1041,"author":{"gitId":"-"},"content":"        //create again to verify address ","isFullCredit":false},{"lineNumber":1042,"author":{"gitId":"-"},"content":"        var existTransactionResult \u003d","isFullCredit":false},{"lineNumber":1043,"author":{"gitId":"-"},"content":"            await ReferendumContractStub.CreateOrganizationBySystemContract.SendAsync(input);","isFullCredit":false},{"lineNumber":1044,"author":{"gitId":"-"},"content":"        existTransactionResult.Output.ShouldBe(addressByCalculate.Output);","isFullCredit":false},{"lineNumber":1045,"author":{"gitId":"-"},"content":"        //invalid contract","isFullCredit":false},{"lineNumber":1046,"author":{"gitId":"-"},"content":"        var method \u003d \"OrganizationAddressFeedbackMethodName\";","isFullCredit":false},{"lineNumber":1047,"author":{"gitId":"-"},"content":"        var input2 \u003d new CreateOrganizationBySystemContractInput","isFullCredit":false},{"lineNumber":1048,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1049,"author":{"gitId":"-"},"content":"            OrganizationCreationInput \u003d createOrganizationInput,","isFullCredit":false},{"lineNumber":1050,"author":{"gitId":"-"},"content":"            OrganizationAddressFeedbackMethod \u003d method","isFullCredit":false},{"lineNumber":1051,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":1052,"author":{"gitId":"-"},"content":"        var transactionResult2 \u003d","isFullCredit":false},{"lineNumber":1053,"author":{"gitId":"-"},"content":"            await ReferendumContractStub.CreateOrganizationBySystemContract.SendWithExceptionAsync(input2);","isFullCredit":false},{"lineNumber":1054,"author":{"gitId":"-"},"content":"        transactionResult2.TransactionResult.Error.ShouldContain(\"invalid contract\");","isFullCredit":false},{"lineNumber":1055,"author":{"gitId":"-"},"content":"        //Invalid organization data","isFullCredit":false},{"lineNumber":1056,"author":{"gitId":"-"},"content":"        var createOrganizationInput3 \u003d new CreateOrganizationInput","isFullCredit":false},{"lineNumber":1057,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1058,"author":{"gitId":"-"},"content":"            ProposalReleaseThreshold \u003d new ProposalReleaseThreshold","isFullCredit":false},{"lineNumber":1059,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":1060,"author":{"gitId":"-"},"content":"                MinimalApprovalThreshold \u003d minimalApproveThreshold,","isFullCredit":false},{"lineNumber":1061,"author":{"gitId":"-"},"content":"                MinimalVoteThreshold \u003d minimalVoteThreshold,","isFullCredit":false},{"lineNumber":1062,"author":{"gitId":"-"},"content":"                MaximalAbstentionThreshold \u003d maximalAbstentionThreshold,","isFullCredit":false},{"lineNumber":1063,"author":{"gitId":"-"},"content":"                MaximalRejectionThreshold \u003d maximalRejectionThreshold","isFullCredit":false},{"lineNumber":1064,"author":{"gitId":"-"},"content":"            },","isFullCredit":false},{"lineNumber":1065,"author":{"gitId":"-"},"content":"            ProposerWhiteList \u003d new ProposerWhiteList","isFullCredit":false},{"lineNumber":1066,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":1067,"author":{"gitId":"-"},"content":"                Proposers \u003d { DefaultSender }","isFullCredit":false},{"lineNumber":1068,"author":{"gitId":"-"},"content":"            }","isFullCredit":false},{"lineNumber":1069,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":1070,"author":{"gitId":"-"},"content":"        var input3 \u003d new CreateOrganizationBySystemContractInput","isFullCredit":false},{"lineNumber":1071,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1072,"author":{"gitId":"-"},"content":"            OrganizationCreationInput \u003d createOrganizationInput3,","isFullCredit":false},{"lineNumber":1073,"author":{"gitId":"-"},"content":"            OrganizationAddressFeedbackMethod \u003d \"\"","isFullCredit":false},{"lineNumber":1074,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":1075,"author":{"gitId":"-"},"content":"        var transactionResult3 \u003d","isFullCredit":false},{"lineNumber":1076,"author":{"gitId":"-"},"content":"            await ReferendumContractStub.CreateOrganizationBySystemContract.SendWithExceptionAsync(input3);","isFullCredit":false},{"lineNumber":1077,"author":{"gitId":"-"},"content":"        transactionResult3.TransactionResult.Error.ShouldContain(\"Invalid organization data\");","isFullCredit":false},{"lineNumber":1078,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1079,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1080,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":1081,"author":{"gitId":"-"},"content":"    public async Task CreateProposalBySystemContract_Test()","isFullCredit":false},{"lineNumber":1082,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1083,"author":{"gitId":"-"},"content":"        var minimalApproveThreshold \u003d 2;","isFullCredit":false},{"lineNumber":1084,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 3;","isFullCredit":false},{"lineNumber":1085,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 1;","isFullCredit":false},{"lineNumber":1086,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 1;","isFullCredit":false},{"lineNumber":1087,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApproveThreshold, minimalVoteThreshold,","isFullCredit":false},{"lineNumber":1088,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, new[] { DefaultSender });","isFullCredit":false},{"lineNumber":1089,"author":{"gitId":"-"},"content":"        var transferInput \u003d new TransferInput","isFullCredit":false},{"lineNumber":1090,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1091,"author":{"gitId":"-"},"content":"            Symbol \u003d \"ELF\",","isFullCredit":false},{"lineNumber":1092,"author":{"gitId":"-"},"content":"            Amount \u003d 100,","isFullCredit":false},{"lineNumber":1093,"author":{"gitId":"-"},"content":"            To \u003d TokenContractAddress,","isFullCredit":false},{"lineNumber":1094,"author":{"gitId":"-"},"content":"            Memo \u003d \"Transfer\"","isFullCredit":false},{"lineNumber":1095,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":1096,"author":{"gitId":"-"},"content":"        var createProposalInput \u003d new CreateProposalInput","isFullCredit":false},{"lineNumber":1097,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1098,"author":{"gitId":"-"},"content":"            ContractMethodName \u003d nameof(TokenContractStub.Transfer),","isFullCredit":false},{"lineNumber":1099,"author":{"gitId":"-"},"content":"            ToAddress \u003d TokenContractAddress,","isFullCredit":false},{"lineNumber":1100,"author":{"gitId":"-"},"content":"            Params \u003d transferInput.ToByteString(),","isFullCredit":false},{"lineNumber":1101,"author":{"gitId":"-"},"content":"            ExpiredTime \u003d BlockTimeProvider.GetBlockTime().AddDays(2),","isFullCredit":false},{"lineNumber":1102,"author":{"gitId":"-"},"content":"            OrganizationAddress \u003d organizationAddress","isFullCredit":false},{"lineNumber":1103,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":1104,"author":{"gitId":"-"},"content":"        var input \u003d new CreateProposalBySystemContractInput","isFullCredit":false},{"lineNumber":1105,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1106,"author":{"gitId":"-"},"content":"            ProposalInput \u003d createProposalInput, OriginProposer \u003d DefaultSender","isFullCredit":false},{"lineNumber":1107,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":1108,"author":{"gitId":"-"},"content":"        var chain \u003d await _blockchainService.GetChainAsync();","isFullCredit":false},{"lineNumber":1109,"author":{"gitId":"-"},"content":"        var blockIndex \u003d new BlockIndex","isFullCredit":false},{"lineNumber":1110,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1111,"author":{"gitId":"-"},"content":"            BlockHash \u003d chain.BestChainHash,","isFullCredit":false},{"lineNumber":1112,"author":{"gitId":"-"},"content":"            BlockHeight \u003d chain.BestChainHeight","isFullCredit":false},{"lineNumber":1113,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":1114,"author":{"gitId":"-"},"content":"        //Unauthorized to propose","isFullCredit":false},{"lineNumber":1115,"author":{"gitId":"-"},"content":"        var transactionResult \u003d","isFullCredit":false},{"lineNumber":1116,"author":{"gitId":"-"},"content":"            await ReferendumContractStub.CreateProposalBySystemContract.SendWithExceptionAsync(input);","isFullCredit":false},{"lineNumber":1117,"author":{"gitId":"-"},"content":"        transactionResult.TransactionResult.Error.ShouldContain(\"Not authorized to propose.\");","isFullCredit":false},{"lineNumber":1118,"author":{"gitId":"-"},"content":"        //success","isFullCredit":false},{"lineNumber":1119,"author":{"gitId":"-"},"content":"        await _smartContractAddressService.SetSmartContractAddressAsync(blockIndex,","isFullCredit":false},{"lineNumber":1120,"author":{"gitId":"-"},"content":"            _smartContractAddressNameProvider.ContractStringName, DefaultSender);","isFullCredit":false},{"lineNumber":1121,"author":{"gitId":"-"},"content":"        var transactionResult2 \u003d","isFullCredit":false},{"lineNumber":1122,"author":{"gitId":"-"},"content":"            await ReferendumContractStub.CreateProposalBySystemContract.SendAsync(input);","isFullCredit":false},{"lineNumber":1123,"author":{"gitId":"-"},"content":"        transactionResult2.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":1124,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1125,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1126,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":1127,"author":{"gitId":"-"},"content":"    public async Task CreateOrganization_With_Invalid_Input_Test()","isFullCredit":false},{"lineNumber":1128,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1129,"author":{"gitId":"-"},"content":"        // token symbol is null or empty","isFullCredit":false},{"lineNumber":1130,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1131,"author":{"gitId":"-"},"content":"            var validInput \u003d GetValidCreateOrganizationInput();","isFullCredit":false},{"lineNumber":1132,"author":{"gitId":"-"},"content":"            validInput.TokenSymbol \u003d string.Empty;","isFullCredit":false},{"lineNumber":1133,"author":{"gitId":"-"},"content":"            var ret \u003d await ReferendumContractStub.CreateOrganization.SendWithExceptionAsync(validInput);","isFullCredit":false},{"lineNumber":1134,"author":{"gitId":"-"},"content":"            ret.TransactionResult.Error.ShouldContain(\"Invalid organization data\");","isFullCredit":false},{"lineNumber":1135,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":1136,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1137,"author":{"gitId":"-"},"content":"        // no proposer in proposeWhiteList","isFullCredit":false},{"lineNumber":1138,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1139,"author":{"gitId":"-"},"content":"            var validInput \u003d GetValidCreateOrganizationInput();","isFullCredit":false},{"lineNumber":1140,"author":{"gitId":"-"},"content":"            validInput.ProposerWhiteList.Proposers.Clear();","isFullCredit":false},{"lineNumber":1141,"author":{"gitId":"-"},"content":"            var ret \u003d await ReferendumContractStub.CreateOrganization.SendWithExceptionAsync(validInput);","isFullCredit":false},{"lineNumber":1142,"author":{"gitId":"-"},"content":"            ret.TransactionResult.Error.ShouldContain(\"Invalid organization data\");","isFullCredit":false},{"lineNumber":1143,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":1144,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1145,"author":{"gitId":"-"},"content":"        //MinimalApprovalThreshold \u003e MinimalVoteThreshold","isFullCredit":false},{"lineNumber":1146,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1147,"author":{"gitId":"-"},"content":"            var validInput \u003d GetValidCreateOrganizationInput();","isFullCredit":false},{"lineNumber":1148,"author":{"gitId":"-"},"content":"            validInput.ProposalReleaseThreshold.MinimalApprovalThreshold \u003d","isFullCredit":false},{"lineNumber":1149,"author":{"gitId":"-"},"content":"                validInput.ProposalReleaseThreshold.MinimalVoteThreshold + 1;","isFullCredit":false},{"lineNumber":1150,"author":{"gitId":"-"},"content":"            var ret \u003d await ReferendumContractStub.CreateOrganization.SendWithExceptionAsync(validInput);","isFullCredit":false},{"lineNumber":1151,"author":{"gitId":"-"},"content":"            ret.TransactionResult.Error.ShouldContain(\"Invalid organization data\");","isFullCredit":false},{"lineNumber":1152,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":1153,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1154,"author":{"gitId":"-"},"content":"        //MinimalApprovalThreshold \u003d\u003d 0","isFullCredit":false},{"lineNumber":1155,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1156,"author":{"gitId":"-"},"content":"            var validInput \u003d GetValidCreateOrganizationInput();","isFullCredit":false},{"lineNumber":1157,"author":{"gitId":"-"},"content":"            validInput.ProposalReleaseThreshold.MinimalApprovalThreshold \u003d 0;","isFullCredit":false},{"lineNumber":1158,"author":{"gitId":"-"},"content":"            var ret \u003d await ReferendumContractStub.CreateOrganization.SendWithExceptionAsync(validInput);","isFullCredit":false},{"lineNumber":1159,"author":{"gitId":"-"},"content":"            ret.TransactionResult.Error.ShouldContain(\"Invalid organization data\");","isFullCredit":false},{"lineNumber":1160,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":1161,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1162,"author":{"gitId":"-"},"content":"        //MaximalAbstentionThreshold \u003c 0","isFullCredit":false},{"lineNumber":1163,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1164,"author":{"gitId":"-"},"content":"            var validInput \u003d GetValidCreateOrganizationInput();","isFullCredit":false},{"lineNumber":1165,"author":{"gitId":"-"},"content":"            validInput.ProposalReleaseThreshold.MaximalAbstentionThreshold \u003d -1;","isFullCredit":false},{"lineNumber":1166,"author":{"gitId":"-"},"content":"            var ret \u003d await ReferendumContractStub.CreateOrganization.SendWithExceptionAsync(validInput);","isFullCredit":false},{"lineNumber":1167,"author":{"gitId":"-"},"content":"            ret.TransactionResult.Error.ShouldContain(\"Invalid organization data\");","isFullCredit":false},{"lineNumber":1168,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":1169,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1170,"author":{"gitId":"-"},"content":"        //MaximalRejectionThreshold \u003c 0","isFullCredit":false},{"lineNumber":1171,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1172,"author":{"gitId":"-"},"content":"            var validInput \u003d GetValidCreateOrganizationInput();","isFullCredit":false},{"lineNumber":1173,"author":{"gitId":"-"},"content":"            validInput.ProposalReleaseThreshold.MaximalRejectionThreshold \u003d -1;","isFullCredit":false},{"lineNumber":1174,"author":{"gitId":"-"},"content":"            var ret \u003d await ReferendumContractStub.CreateOrganization.SendWithExceptionAsync(validInput);","isFullCredit":false},{"lineNumber":1175,"author":{"gitId":"-"},"content":"            ret.TransactionResult.Error.ShouldContain(\"Invalid organization data\");","isFullCredit":false},{"lineNumber":1176,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":1177,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1178,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1179,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":1180,"author":{"gitId":"-"},"content":"    public async Task CreateProposalBySystemContract_With_Invalid_Proposal_Test()","isFullCredit":false},{"lineNumber":1181,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1182,"author":{"gitId":"-"},"content":"        var minimalApproveThreshold \u003d 2;","isFullCredit":false},{"lineNumber":1183,"author":{"gitId":"-"},"content":"        var minimalVoteThreshold \u003d 3;","isFullCredit":false},{"lineNumber":1184,"author":{"gitId":"-"},"content":"        var maximalAbstentionThreshold \u003d 1;","isFullCredit":false},{"lineNumber":1185,"author":{"gitId":"-"},"content":"        var maximalRejectionThreshold \u003d 1;","isFullCredit":false},{"lineNumber":1186,"author":{"gitId":"-"},"content":"        var organizationAddress \u003d await CreateOrganizationAsync(minimalApproveThreshold, minimalVoteThreshold,","isFullCredit":false},{"lineNumber":1187,"author":{"gitId":"-"},"content":"            maximalAbstentionThreshold, maximalRejectionThreshold, new[] { DefaultSender });","isFullCredit":false},{"lineNumber":1188,"author":{"gitId":"-"},"content":"        var input \u003d new CreateProposalBySystemContractInput","isFullCredit":false},{"lineNumber":1189,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1190,"author":{"gitId":"-"},"content":"            OriginProposer \u003d DefaultSender","isFullCredit":false},{"lineNumber":1191,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":1192,"author":{"gitId":"-"},"content":"        var chain \u003d _blockchainService.GetChainAsync();","isFullCredit":false},{"lineNumber":1193,"author":{"gitId":"-"},"content":"        var blockIndex \u003d new BlockIndex","isFullCredit":false},{"lineNumber":1194,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1195,"author":{"gitId":"-"},"content":"            BlockHash \u003d chain.Result.BestChainHash,","isFullCredit":false},{"lineNumber":1196,"author":{"gitId":"-"},"content":"            BlockHeight \u003d chain.Result.BestChainHeight","isFullCredit":false},{"lineNumber":1197,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":1198,"author":{"gitId":"-"},"content":"        await _smartContractAddressService.SetSmartContractAddressAsync(blockIndex,","isFullCredit":false},{"lineNumber":1199,"author":{"gitId":"-"},"content":"            _smartContractAddressNameProvider.ContractStringName, DefaultSender);","isFullCredit":false},{"lineNumber":1200,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1201,"author":{"gitId":"-"},"content":"        //invalid organization","isFullCredit":false},{"lineNumber":1202,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1203,"author":{"gitId":"-"},"content":"            var proposal \u003d GetValidCreateProposalInput(organizationAddress);","isFullCredit":false},{"lineNumber":1204,"author":{"gitId":"-"},"content":"            proposal.OrganizationAddress \u003d ReferendumContractAddress;","isFullCredit":false},{"lineNumber":1205,"author":{"gitId":"-"},"content":"            input.ProposalInput \u003d proposal;","isFullCredit":false},{"lineNumber":1206,"author":{"gitId":"-"},"content":"            var ret \u003d","isFullCredit":false},{"lineNumber":1207,"author":{"gitId":"-"},"content":"                await ReferendumContractStub.CreateProposalBySystemContract.SendWithExceptionAsync(input);","isFullCredit":false},{"lineNumber":1208,"author":{"gitId":"-"},"content":"            ret.TransactionResult.Error.ShouldContain(\"Organization not found\");","isFullCredit":false},{"lineNumber":1209,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":1210,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1211,"author":{"gitId":"-"},"content":"        //method name \u003d string.Empty","isFullCredit":false},{"lineNumber":1212,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1213,"author":{"gitId":"-"},"content":"            var proposal \u003d GetValidCreateProposalInput(organizationAddress);","isFullCredit":false},{"lineNumber":1214,"author":{"gitId":"-"},"content":"            proposal.ContractMethodName \u003d string.Empty;","isFullCredit":false},{"lineNumber":1215,"author":{"gitId":"-"},"content":"            input.ProposalInput \u003d proposal;","isFullCredit":false},{"lineNumber":1216,"author":{"gitId":"-"},"content":"            var ret \u003d","isFullCredit":false},{"lineNumber":1217,"author":{"gitId":"-"},"content":"                await ReferendumContractStub.CreateProposalBySystemContract.SendWithExceptionAsync(input);","isFullCredit":false},{"lineNumber":1218,"author":{"gitId":"-"},"content":"            ret.TransactionResult.Error.ShouldContain(\"Invalid proposal\");","isFullCredit":false},{"lineNumber":1219,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":1220,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1221,"author":{"gitId":"-"},"content":"        //invalid expire time","isFullCredit":false},{"lineNumber":1222,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1223,"author":{"gitId":"-"},"content":"            var proposal \u003d GetValidCreateProposalInput(organizationAddress);","isFullCredit":false},{"lineNumber":1224,"author":{"gitId":"-"},"content":"            proposal.ExpiredTime \u003d new Timestamp();","isFullCredit":false},{"lineNumber":1225,"author":{"gitId":"-"},"content":"            input.ProposalInput \u003d proposal;","isFullCredit":false},{"lineNumber":1226,"author":{"gitId":"-"},"content":"            var ret \u003d","isFullCredit":false},{"lineNumber":1227,"author":{"gitId":"-"},"content":"                await ReferendumContractStub.CreateProposalBySystemContract.SendWithExceptionAsync(input);","isFullCredit":false},{"lineNumber":1228,"author":{"gitId":"-"},"content":"            ret.TransactionResult.Error.ShouldContain(\"Invalid proposal\");","isFullCredit":false},{"lineNumber":1229,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":1230,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1231,"author":{"gitId":"-"},"content":"        //invalid url","isFullCredit":false},{"lineNumber":1232,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1233,"author":{"gitId":"-"},"content":"            var proposal \u003d GetValidCreateProposalInput(organizationAddress);","isFullCredit":false},{"lineNumber":1234,"author":{"gitId":"-"},"content":"            proposal.ProposalDescriptionUrl \u003d \"ppp\";","isFullCredit":false},{"lineNumber":1235,"author":{"gitId":"-"},"content":"            input.ProposalInput \u003d proposal;","isFullCredit":false},{"lineNumber":1236,"author":{"gitId":"-"},"content":"            var ret \u003d","isFullCredit":false},{"lineNumber":1237,"author":{"gitId":"-"},"content":"                await ReferendumContractStub.CreateProposalBySystemContract.SendWithExceptionAsync(input);","isFullCredit":false},{"lineNumber":1238,"author":{"gitId":"-"},"content":"            ret.TransactionResult.Error.ShouldContain(\"Invalid proposal\");","isFullCredit":false},{"lineNumber":1239,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":1240,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1241,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1242,"author":{"gitId":"-"},"content":"    [Fact]","isFullCredit":false},{"lineNumber":1243,"author":{"gitId":"-"},"content":"    public async Task ClearProposal_Fail_Test()","isFullCredit":false},{"lineNumber":1244,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1245,"author":{"gitId":"-"},"content":"        // the proposal that is not exist","isFullCredit":false},{"lineNumber":1246,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1247,"author":{"gitId":"-"},"content":"            var proposalId \u003d new Hash();","isFullCredit":false},{"lineNumber":1248,"author":{"gitId":"-"},"content":"            var ret \u003d await ReferendumContractStub.ClearProposal.SendWithExceptionAsync(proposalId);","isFullCredit":false},{"lineNumber":1249,"author":{"gitId":"-"},"content":"            ret.TransactionResult.Error.ShouldContain(\"Proposal clear failed\");","isFullCredit":false},{"lineNumber":1250,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":1251,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1252,"author":{"gitId":"-"},"content":"        // the proposal that is not expired","isFullCredit":false},{"lineNumber":1253,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1254,"author":{"gitId":"-"},"content":"            var organizationAddress \u003d await CreateOrganizationAsync();","isFullCredit":false},{"lineNumber":1255,"author":{"gitId":"-"},"content":"            var newProposalWhitelist \u003d new ProposerWhiteList();","isFullCredit":false},{"lineNumber":1256,"author":{"gitId":"-"},"content":"            var changeProposerWhitelistProposalId \u003d await CreateReferendumProposalAsync(DefaultSenderKeyPair,","isFullCredit":false},{"lineNumber":1257,"author":{"gitId":"-"},"content":"                newProposalWhitelist,","isFullCredit":false},{"lineNumber":1258,"author":{"gitId":"-"},"content":"                nameof(ReferendumContractStub.ChangeOrganizationProposerWhiteList), organizationAddress,","isFullCredit":false},{"lineNumber":1259,"author":{"gitId":"-"},"content":"                ReferendumContractAddress);","isFullCredit":false},{"lineNumber":1260,"author":{"gitId":"-"},"content":"            var ret \u003d await ReferendumContractStub.ClearProposal.SendWithExceptionAsync(","isFullCredit":false},{"lineNumber":1261,"author":{"gitId":"-"},"content":"                changeProposerWhitelistProposalId);","isFullCredit":false},{"lineNumber":1262,"author":{"gitId":"-"},"content":"            ret.TransactionResult.Error.ShouldContain(\"Proposal clear failed\");","isFullCredit":false},{"lineNumber":1263,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":1264,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1265,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1266,"author":{"gitId":"-"},"content":"    private CreateOrganizationInput GetValidCreateOrganizationInput(Address sender \u003d null)","isFullCredit":false},{"lineNumber":1267,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1268,"author":{"gitId":"-"},"content":"        var validSender \u003d sender ?? DefaultSender;","isFullCredit":false},{"lineNumber":1269,"author":{"gitId":"-"},"content":"        return new CreateOrganizationInput","isFullCredit":false},{"lineNumber":1270,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1271,"author":{"gitId":"-"},"content":"            ProposalReleaseThreshold \u003d new ProposalReleaseThreshold","isFullCredit":false},{"lineNumber":1272,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":1273,"author":{"gitId":"-"},"content":"                MinimalApprovalThreshold \u003d 5000,","isFullCredit":false},{"lineNumber":1274,"author":{"gitId":"-"},"content":"                MinimalVoteThreshold \u003d 5000,","isFullCredit":false},{"lineNumber":1275,"author":{"gitId":"-"},"content":"                MaximalAbstentionThreshold \u003d 10000,","isFullCredit":false},{"lineNumber":1276,"author":{"gitId":"-"},"content":"                MaximalRejectionThreshold \u003d 10000","isFullCredit":false},{"lineNumber":1277,"author":{"gitId":"-"},"content":"            },","isFullCredit":false},{"lineNumber":1278,"author":{"gitId":"-"},"content":"            ProposerWhiteList \u003d new ProposerWhiteList","isFullCredit":false},{"lineNumber":1279,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":1280,"author":{"gitId":"-"},"content":"                Proposers \u003d { validSender }","isFullCredit":false},{"lineNumber":1281,"author":{"gitId":"-"},"content":"            },","isFullCredit":false},{"lineNumber":1282,"author":{"gitId":"-"},"content":"            TokenSymbol \u003d \"ELF\"","isFullCredit":false},{"lineNumber":1283,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":1284,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1285,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1286,"author":{"gitId":"-"},"content":"    private CreateProposalInput GetValidCreateProposalInput(Address organizationAddress)","isFullCredit":false},{"lineNumber":1287,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1288,"author":{"gitId":"-"},"content":"        var transferInput \u003d new TransferInput","isFullCredit":false},{"lineNumber":1289,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1290,"author":{"gitId":"-"},"content":"            Symbol \u003d \"ELF\",","isFullCredit":false},{"lineNumber":1291,"author":{"gitId":"-"},"content":"            Amount \u003d 100,","isFullCredit":false},{"lineNumber":1292,"author":{"gitId":"-"},"content":"            To \u003d TokenContractAddress,","isFullCredit":false},{"lineNumber":1293,"author":{"gitId":"-"},"content":"            Memo \u003d \"Transfer\"","isFullCredit":false},{"lineNumber":1294,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":1295,"author":{"gitId":"-"},"content":"        return new CreateProposalInput","isFullCredit":false},{"lineNumber":1296,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1297,"author":{"gitId":"-"},"content":"            ContractMethodName \u003d nameof(TokenContractStub.Transfer),","isFullCredit":false},{"lineNumber":1298,"author":{"gitId":"-"},"content":"            ToAddress \u003d TokenContractAddress,","isFullCredit":false},{"lineNumber":1299,"author":{"gitId":"-"},"content":"            Params \u003d transferInput.ToByteString(),","isFullCredit":false},{"lineNumber":1300,"author":{"gitId":"-"},"content":"            ExpiredTime \u003d BlockTimeProvider.GetBlockTime().AddDays(2),","isFullCredit":false},{"lineNumber":1301,"author":{"gitId":"-"},"content":"            OrganizationAddress \u003d organizationAddress","isFullCredit":false},{"lineNumber":1302,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":1303,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1304,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1305,"author":{"gitId":"-"},"content":"    private async Task\u003cHash\u003e CreateProposalAsync(ECKeyPair proposalKeyPair, Address organizationAddress,","isFullCredit":false},{"lineNumber":1306,"author":{"gitId":"-"},"content":"        Timestamp timestamp \u003d null)","isFullCredit":false},{"lineNumber":1307,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1308,"author":{"gitId":"-"},"content":"        await PrepareCreateToken(organizationAddress);","isFullCredit":false},{"lineNumber":1309,"author":{"gitId":"-"},"content":"        var createInput \u003d new CreateInput","isFullCredit":false},{"lineNumber":1310,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1311,"author":{"gitId":"-"},"content":"            Symbol \u003d \"NEW\",","isFullCredit":false},{"lineNumber":1312,"author":{"gitId":"-"},"content":"            Decimals \u003d 2,","isFullCredit":false},{"lineNumber":1313,"author":{"gitId":"-"},"content":"            TotalSupply \u003d 10_0000,","isFullCredit":false},{"lineNumber":1314,"author":{"gitId":"-"},"content":"            TokenName \u003d \"new token\",","isFullCredit":false},{"lineNumber":1315,"author":{"gitId":"-"},"content":"            Issuer \u003d organizationAddress,","isFullCredit":false},{"lineNumber":1316,"author":{"gitId":"-"},"content":"            Owner \u003d organizationAddress,","isFullCredit":false},{"lineNumber":1317,"author":{"gitId":"-"},"content":"            IsBurnable \u003d true","isFullCredit":false},{"lineNumber":1318,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":1319,"author":{"gitId":"-"},"content":"        var createProposalInput \u003d new CreateProposalInput","isFullCredit":false},{"lineNumber":1320,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1321,"author":{"gitId":"-"},"content":"            ContractMethodName \u003d nameof(TokenContract.Create),","isFullCredit":false},{"lineNumber":1322,"author":{"gitId":"-"},"content":"            ToAddress \u003d TokenContractAddress,","isFullCredit":false},{"lineNumber":1323,"author":{"gitId":"-"},"content":"            Params \u003d createInput.ToByteString(),","isFullCredit":false},{"lineNumber":1324,"author":{"gitId":"-"},"content":"            ExpiredTime \u003d timestamp ?? BlockTimeProvider.GetBlockTime().AddSeconds(1000),","isFullCredit":false},{"lineNumber":1325,"author":{"gitId":"eanzhao"},"content":"            OrganizationAddress \u003d organizationAddress,","isFullCredit":false},{"lineNumber":1326,"author":{"gitId":"eanzhao"},"content":"            Title \u003d \"Create token: NEW\",","isFullCredit":false},{"lineNumber":1327,"author":{"gitId":"eanzhao"},"content":"            Description \u003d \"Create a new token named NEW.\"","isFullCredit":false},{"lineNumber":1328,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":1329,"author":{"gitId":"-"},"content":"        ReferendumContractStub \u003d GetReferendumContractTester(proposalKeyPair);","isFullCredit":false},{"lineNumber":1330,"author":{"gitId":"-"},"content":"        var proposal \u003d await ReferendumContractStub.CreateProposal.SendAsync(createProposalInput);","isFullCredit":false},{"lineNumber":1331,"author":{"gitId":"-"},"content":"        proposal.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":1332,"author":{"gitId":"-"},"content":"        return proposal.Output;","isFullCredit":false},{"lineNumber":1333,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1334,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1335,"author":{"gitId":"-"},"content":"    private async Task PrepareCreateToken(Address organizationAddress)","isFullCredit":false},{"lineNumber":1336,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1337,"author":{"gitId":"-"},"content":"        var defaultParliamentAddress \u003d","isFullCredit":false},{"lineNumber":1338,"author":{"gitId":"-"},"content":"            await ParliamentContractStub.GetDefaultOrganizationAddress.CallAsync(new Empty());","isFullCredit":false},{"lineNumber":1339,"author":{"gitId":"-"},"content":"        var seedCollectionInfo \u003d await TokenContractStub.GetTokenInfo.CallAsync(new GetTokenInfoInput","isFullCredit":false},{"lineNumber":1340,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1341,"author":{"gitId":"-"},"content":"            Symbol \u003d \"SEED-0\"","isFullCredit":false},{"lineNumber":1342,"author":{"gitId":"-"},"content":"        });","isFullCredit":false},{"lineNumber":1343,"author":{"gitId":"-"},"content":"        await SubmitAndApproveProposalOfDefaultParliament(DefaultSenderKeyPair, ParliamentContractAddress,","isFullCredit":false},{"lineNumber":1344,"author":{"gitId":"-"},"content":"            TokenContractAddress,","isFullCredit":false},{"lineNumber":1345,"author":{"gitId":"-"},"content":"            nameof(TokenContractStub.Create), new CreateInput","isFullCredit":false},{"lineNumber":1346,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":1347,"author":{"gitId":"-"},"content":"                Symbol \u003d \"SEED-0\",","isFullCredit":false},{"lineNumber":1348,"author":{"gitId":"-"},"content":"                Decimals \u003d 0,","isFullCredit":false},{"lineNumber":1349,"author":{"gitId":"-"},"content":"                IsBurnable \u003d true,","isFullCredit":false},{"lineNumber":1350,"author":{"gitId":"-"},"content":"                TokenName \u003d \"seed Collection\",","isFullCredit":false},{"lineNumber":1351,"author":{"gitId":"-"},"content":"                TotalSupply \u003d 1,","isFullCredit":false},{"lineNumber":1352,"author":{"gitId":"-"},"content":"                Issuer \u003d defaultParliamentAddress,","isFullCredit":false},{"lineNumber":1353,"author":{"gitId":"-"},"content":"                ExternalInfo \u003d new ExternalInfo(),","isFullCredit":false},{"lineNumber":1354,"author":{"gitId":"-"},"content":"                Owner \u003d defaultParliamentAddress","isFullCredit":false},{"lineNumber":1355,"author":{"gitId":"-"},"content":"            });","isFullCredit":false},{"lineNumber":1356,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1357,"author":{"gitId":"-"},"content":"        await SubmitAndApproveProposalOfDefaultParliament(DefaultSenderKeyPair, ParliamentContractAddress,","isFullCredit":false},{"lineNumber":1358,"author":{"gitId":"-"},"content":"            TokenContractAddress,","isFullCredit":false},{"lineNumber":1359,"author":{"gitId":"-"},"content":"            nameof(TokenContractStub.Create), new CreateInput","isFullCredit":false},{"lineNumber":1360,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":1361,"author":{"gitId":"-"},"content":"                Symbol \u003d \"SEED-1\",","isFullCredit":false},{"lineNumber":1362,"author":{"gitId":"-"},"content":"                Decimals \u003d 0,","isFullCredit":false},{"lineNumber":1363,"author":{"gitId":"-"},"content":"                IsBurnable \u003d true,","isFullCredit":false},{"lineNumber":1364,"author":{"gitId":"-"},"content":"                TokenName \u003d \"seed token\" + 1,","isFullCredit":false},{"lineNumber":1365,"author":{"gitId":"-"},"content":"                TotalSupply \u003d 1,","isFullCredit":false},{"lineNumber":1366,"author":{"gitId":"-"},"content":"                Issuer \u003d defaultParliamentAddress,","isFullCredit":false},{"lineNumber":1367,"author":{"gitId":"-"},"content":"                ExternalInfo \u003d new ExternalInfo","isFullCredit":false},{"lineNumber":1368,"author":{"gitId":"-"},"content":"                {","isFullCredit":false},{"lineNumber":1369,"author":{"gitId":"-"},"content":"                    Value \u003d","isFullCredit":false},{"lineNumber":1370,"author":{"gitId":"-"},"content":"                    {","isFullCredit":false},{"lineNumber":1371,"author":{"gitId":"-"},"content":"                        { \"__seed_owned_symbol\", \"NEW\" },","isFullCredit":false},{"lineNumber":1372,"author":{"gitId":"-"},"content":"                        { \"__seed_exp_time\", TimestampHelper.GetUtcNow().AddDays(1).Seconds.ToString() }","isFullCredit":false},{"lineNumber":1373,"author":{"gitId":"-"},"content":"                    }","isFullCredit":false},{"lineNumber":1374,"author":{"gitId":"-"},"content":"                },","isFullCredit":false},{"lineNumber":1375,"author":{"gitId":"-"},"content":"                LockWhiteList \u003d { TokenContractAddress },","isFullCredit":false},{"lineNumber":1376,"author":{"gitId":"-"},"content":"                Owner \u003d defaultParliamentAddress","isFullCredit":false},{"lineNumber":1377,"author":{"gitId":"-"},"content":"            });","isFullCredit":false},{"lineNumber":1378,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1379,"author":{"gitId":"-"},"content":"        await SubmitAndApproveProposalOfDefaultParliament(DefaultSenderKeyPair, ParliamentContractAddress,","isFullCredit":false},{"lineNumber":1380,"author":{"gitId":"-"},"content":"            TokenContractAddress,","isFullCredit":false},{"lineNumber":1381,"author":{"gitId":"-"},"content":"            nameof(TokenContractStub.Issue), new IssueInput","isFullCredit":false},{"lineNumber":1382,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":1383,"author":{"gitId":"-"},"content":"                Symbol \u003d \"SEED-1\",","isFullCredit":false},{"lineNumber":1384,"author":{"gitId":"-"},"content":"                Amount \u003d 1,","isFullCredit":false},{"lineNumber":1385,"author":{"gitId":"-"},"content":"                Memo \u003d \"ddd\",","isFullCredit":false},{"lineNumber":1386,"author":{"gitId":"-"},"content":"                To \u003d organizationAddress","isFullCredit":false},{"lineNumber":1387,"author":{"gitId":"-"},"content":"            });","isFullCredit":false},{"lineNumber":1388,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1389,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1390,"author":{"gitId":"-"},"content":"    private async Task\u003cHash\u003e CreateReferendumProposalAsync(ECKeyPair proposalKeyPair, IMessage input,","isFullCredit":false},{"lineNumber":1391,"author":{"gitId":"-"},"content":"        string method, Address organizationAddress, Address toAddress)","isFullCredit":false},{"lineNumber":1392,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1393,"author":{"gitId":"-"},"content":"        var referendumContractStub \u003d GetReferendumContractTester(proposalKeyPair);","isFullCredit":false},{"lineNumber":1394,"author":{"gitId":"-"},"content":"        var createProposalInput \u003d new CreateProposalInput","isFullCredit":false},{"lineNumber":1395,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1396,"author":{"gitId":"-"},"content":"            ContractMethodName \u003d method,","isFullCredit":false},{"lineNumber":1397,"author":{"gitId":"-"},"content":"            ToAddress \u003d toAddress,","isFullCredit":false},{"lineNumber":1398,"author":{"gitId":"-"},"content":"            Params \u003d input.ToByteString(),","isFullCredit":false},{"lineNumber":1399,"author":{"gitId":"-"},"content":"            ExpiredTime \u003d BlockTimeProvider.GetBlockTime().AddDays(2),","isFullCredit":false},{"lineNumber":1400,"author":{"gitId":"-"},"content":"            OrganizationAddress \u003d organizationAddress","isFullCredit":false},{"lineNumber":1401,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":1402,"author":{"gitId":"-"},"content":"        var proposal \u003d await referendumContractStub.CreateProposal.SendAsync(createProposalInput);","isFullCredit":false},{"lineNumber":1403,"author":{"gitId":"-"},"content":"        var proposalCreated \u003d ProposalCreated.Parser.ParseFrom(proposal.TransactionResult.Logs","isFullCredit":false},{"lineNumber":1404,"author":{"gitId":"-"},"content":"                .First(l \u003d\u003e l.Name.Contains(nameof(ProposalCreated))).NonIndexed)","isFullCredit":false},{"lineNumber":1405,"author":{"gitId":"-"},"content":"            .ProposalId;","isFullCredit":false},{"lineNumber":1406,"author":{"gitId":"-"},"content":"        proposal.Output.ShouldBe(proposalCreated);","isFullCredit":false},{"lineNumber":1407,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1408,"author":{"gitId":"-"},"content":"        return proposal.Output;","isFullCredit":false},{"lineNumber":1409,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1410,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1411,"author":{"gitId":"-"},"content":"    private async Task\u003cAddress\u003e CreateOrganizationAsync(long minimalApproveThreshold \u003d 5000,","isFullCredit":false},{"lineNumber":1412,"author":{"gitId":"-"},"content":"        long minimalVoteThreshold \u003d 5000,","isFullCredit":false},{"lineNumber":1413,"author":{"gitId":"-"},"content":"        long maximalAbstentionThreshold \u003d 10000, long maximalRejectionThreshold \u003d 10000,","isFullCredit":false},{"lineNumber":1414,"author":{"gitId":"-"},"content":"        Address[] proposerWhiteList \u003d null,","isFullCredit":false},{"lineNumber":1415,"author":{"gitId":"-"},"content":"        string symbol \u003d \"ELF\")","isFullCredit":false},{"lineNumber":1416,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1417,"author":{"gitId":"-"},"content":"        if (proposerWhiteList \u003d\u003d null)","isFullCredit":false},{"lineNumber":1418,"author":{"gitId":"-"},"content":"            proposerWhiteList \u003d new[] { DefaultSender };","isFullCredit":false},{"lineNumber":1419,"author":{"gitId":"-"},"content":"        var createOrganizationInput \u003d new CreateOrganizationInput","isFullCredit":false},{"lineNumber":1420,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1421,"author":{"gitId":"-"},"content":"            ProposalReleaseThreshold \u003d new ProposalReleaseThreshold","isFullCredit":false},{"lineNumber":1422,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":1423,"author":{"gitId":"-"},"content":"                MinimalApprovalThreshold \u003d minimalApproveThreshold,","isFullCredit":false},{"lineNumber":1424,"author":{"gitId":"-"},"content":"                MinimalVoteThreshold \u003d minimalVoteThreshold,","isFullCredit":false},{"lineNumber":1425,"author":{"gitId":"-"},"content":"                MaximalAbstentionThreshold \u003d maximalAbstentionThreshold,","isFullCredit":false},{"lineNumber":1426,"author":{"gitId":"-"},"content":"                MaximalRejectionThreshold \u003d maximalRejectionThreshold","isFullCredit":false},{"lineNumber":1427,"author":{"gitId":"-"},"content":"            },","isFullCredit":false},{"lineNumber":1428,"author":{"gitId":"-"},"content":"            TokenSymbol \u003d symbol,","isFullCredit":false},{"lineNumber":1429,"author":{"gitId":"-"},"content":"            ProposerWhiteList \u003d new ProposerWhiteList","isFullCredit":false},{"lineNumber":1430,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":1431,"author":{"gitId":"-"},"content":"                Proposers \u003d { proposerWhiteList }","isFullCredit":false},{"lineNumber":1432,"author":{"gitId":"-"},"content":"            }","isFullCredit":false},{"lineNumber":1433,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":1434,"author":{"gitId":"-"},"content":"        var transactionResult \u003d","isFullCredit":false},{"lineNumber":1435,"author":{"gitId":"-"},"content":"            await ReferendumContractStub.CreateOrganization.SendAsync(createOrganizationInput);","isFullCredit":false},{"lineNumber":1436,"author":{"gitId":"-"},"content":"        transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":1437,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1438,"author":{"gitId":"-"},"content":"        return transactionResult.Output;","isFullCredit":false},{"lineNumber":1439,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1440,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1441,"author":{"gitId":"-"},"content":"    private async Task ApproveAsync(ECKeyPair reviewer, Hash proposalId)","isFullCredit":false},{"lineNumber":1442,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1443,"author":{"gitId":"-"},"content":"        var referendumContractStub \u003d GetReferendumContractTester(reviewer);","isFullCredit":false},{"lineNumber":1444,"author":{"gitId":"-"},"content":"        var utcNow \u003d TimestampHelper.GetUtcNow();","isFullCredit":false},{"lineNumber":1445,"author":{"gitId":"-"},"content":"        BlockTimeProvider.SetBlockTime(utcNow);","isFullCredit":false},{"lineNumber":1446,"author":{"gitId":"-"},"content":"        var transactionResult \u003d await referendumContractStub.Approve.SendAsync(proposalId);","isFullCredit":false},{"lineNumber":1447,"author":{"gitId":"-"},"content":"        transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":1448,"author":{"gitId":"-"},"content":"        var receiptCreated \u003d ReferendumReceiptCreated.Parser.ParseFrom(transactionResult.TransactionResult.Logs","isFullCredit":false},{"lineNumber":1449,"author":{"gitId":"-"},"content":"            .FirstOrDefault(l \u003d\u003e l.Name \u003d\u003d nameof(ReferendumReceiptCreated))","isFullCredit":false},{"lineNumber":1450,"author":{"gitId":"-"},"content":"            ?.NonIndexed);","isFullCredit":false},{"lineNumber":1451,"author":{"gitId":"-"},"content":"        ValidateReferendumReceiptCreated(receiptCreated, Address.FromPublicKey(reviewer.PublicKey), proposalId, utcNow,","isFullCredit":false},{"lineNumber":1452,"author":{"gitId":"-"},"content":"            nameof(referendumContractStub.Approve));","isFullCredit":false},{"lineNumber":1453,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1454,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1455,"author":{"gitId":"-"},"content":"    private async Task RejectAsync(ECKeyPair reviewer, Hash proposalId)","isFullCredit":false},{"lineNumber":1456,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1457,"author":{"gitId":"-"},"content":"        var referendumContractStub \u003d GetReferendumContractTester(reviewer);","isFullCredit":false},{"lineNumber":1458,"author":{"gitId":"-"},"content":"        var utcNow \u003d TimestampHelper.GetUtcNow();","isFullCredit":false},{"lineNumber":1459,"author":{"gitId":"-"},"content":"        BlockTimeProvider.SetBlockTime(utcNow);","isFullCredit":false},{"lineNumber":1460,"author":{"gitId":"-"},"content":"        var transactionResult \u003d await referendumContractStub.Reject.SendAsync(proposalId);","isFullCredit":false},{"lineNumber":1461,"author":{"gitId":"-"},"content":"        transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":1462,"author":{"gitId":"-"},"content":"        var receiptCreated \u003d ReferendumReceiptCreated.Parser.ParseFrom(transactionResult.TransactionResult.Logs","isFullCredit":false},{"lineNumber":1463,"author":{"gitId":"-"},"content":"            .FirstOrDefault(l \u003d\u003e l.Name \u003d\u003d nameof(ReferendumReceiptCreated))","isFullCredit":false},{"lineNumber":1464,"author":{"gitId":"-"},"content":"            ?.NonIndexed);","isFullCredit":false},{"lineNumber":1465,"author":{"gitId":"-"},"content":"        ValidateReferendumReceiptCreated(receiptCreated, Address.FromPublicKey(reviewer.PublicKey), proposalId, utcNow,","isFullCredit":false},{"lineNumber":1466,"author":{"gitId":"-"},"content":"            nameof(referendumContractStub.Reject));","isFullCredit":false},{"lineNumber":1467,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1468,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1469,"author":{"gitId":"-"},"content":"    private async Task AbstainAsync(ECKeyPair reviewer, Hash proposalId)","isFullCredit":false},{"lineNumber":1470,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1471,"author":{"gitId":"-"},"content":"        var referendumContractStub \u003d GetReferendumContractTester(reviewer);","isFullCredit":false},{"lineNumber":1472,"author":{"gitId":"-"},"content":"        var utcNow \u003d TimestampHelper.GetUtcNow();","isFullCredit":false},{"lineNumber":1473,"author":{"gitId":"-"},"content":"        BlockTimeProvider.SetBlockTime(utcNow);","isFullCredit":false},{"lineNumber":1474,"author":{"gitId":"-"},"content":"        var transactionResult \u003d await referendumContractStub.Abstain.SendAsync(proposalId);","isFullCredit":false},{"lineNumber":1475,"author":{"gitId":"-"},"content":"        transactionResult.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":1476,"author":{"gitId":"-"},"content":"        var receiptCreated \u003d ReferendumReceiptCreated.Parser.ParseFrom(transactionResult.TransactionResult.Logs","isFullCredit":false},{"lineNumber":1477,"author":{"gitId":"-"},"content":"            .FirstOrDefault(l \u003d\u003e l.Name \u003d\u003d nameof(ReferendumReceiptCreated))","isFullCredit":false},{"lineNumber":1478,"author":{"gitId":"-"},"content":"            ?.NonIndexed);","isFullCredit":false},{"lineNumber":1479,"author":{"gitId":"-"},"content":"        ValidateReferendumReceiptCreated(receiptCreated, Address.FromPublicKey(reviewer.PublicKey), proposalId, utcNow,","isFullCredit":false},{"lineNumber":1480,"author":{"gitId":"-"},"content":"            nameof(referendumContractStub.Abstain));","isFullCredit":false},{"lineNumber":1481,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1482,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1483,"author":{"gitId":"-"},"content":"    private void ValidateReferendumReceiptCreated(ReferendumReceiptCreated referendumReceiptCreated, Address sender,","isFullCredit":false},{"lineNumber":1484,"author":{"gitId":"-"},"content":"        Hash proposalId,","isFullCredit":false},{"lineNumber":1485,"author":{"gitId":"-"},"content":"        Timestamp blockTime, string receiptType)","isFullCredit":false},{"lineNumber":1486,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1487,"author":{"gitId":"-"},"content":"        referendumReceiptCreated.Address.ShouldBe(sender);","isFullCredit":false},{"lineNumber":1488,"author":{"gitId":"-"},"content":"        referendumReceiptCreated.ProposalId.ShouldBe(proposalId);","isFullCredit":false},{"lineNumber":1489,"author":{"gitId":"-"},"content":"        referendumReceiptCreated.Time.ShouldBe(blockTime);","isFullCredit":false},{"lineNumber":1490,"author":{"gitId":"-"},"content":"        referendumReceiptCreated.ReceiptType.ShouldBe(receiptType);","isFullCredit":false},{"lineNumber":1491,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1492,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1493,"author":{"gitId":"-"},"content":"    private async Task ApproveAllowanceAsync(ECKeyPair keyPair, long amount, Hash proposalId, string symbol \u003d \"ELF\")","isFullCredit":false},{"lineNumber":1494,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1495,"author":{"gitId":"-"},"content":"        var proposalVirtualAddress \u003d await ReferendumContractStub.GetProposalVirtualAddress.CallAsync(proposalId);","isFullCredit":false},{"lineNumber":1496,"author":{"gitId":"-"},"content":"        await GetTokenContractTester(keyPair).Approve.SendAsync(new ApproveInput","isFullCredit":false},{"lineNumber":1497,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1498,"author":{"gitId":"-"},"content":"            Amount \u003d amount,","isFullCredit":false},{"lineNumber":1499,"author":{"gitId":"-"},"content":"            Spender \u003d proposalVirtualAddress,","isFullCredit":false},{"lineNumber":1500,"author":{"gitId":"-"},"content":"            Symbol \u003d symbol","isFullCredit":false},{"lineNumber":1501,"author":{"gitId":"-"},"content":"        });","isFullCredit":false},{"lineNumber":1502,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1503,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1504,"author":{"gitId":"-"},"content":"    private async Task\u003cHash\u003e CreateFeeProposalAsync(Address contractAddress, Address organizationAddress,","isFullCredit":false},{"lineNumber":1505,"author":{"gitId":"-"},"content":"        string methodName, IMessage input)","isFullCredit":false},{"lineNumber":1506,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1507,"author":{"gitId":"-"},"content":"        var proposal \u003d new CreateProposalInput","isFullCredit":false},{"lineNumber":1508,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1509,"author":{"gitId":"-"},"content":"            OrganizationAddress \u003d organizationAddress,","isFullCredit":false},{"lineNumber":1510,"author":{"gitId":"-"},"content":"            ContractMethodName \u003d methodName,","isFullCredit":false},{"lineNumber":1511,"author":{"gitId":"-"},"content":"            ExpiredTime \u003d TimestampHelper.GetUtcNow().AddHours(1),","isFullCredit":false},{"lineNumber":1512,"author":{"gitId":"-"},"content":"            Params \u003d input.ToByteString(),","isFullCredit":false},{"lineNumber":1513,"author":{"gitId":"-"},"content":"            ToAddress \u003d contractAddress","isFullCredit":false},{"lineNumber":1514,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":1515,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1516,"author":{"gitId":"-"},"content":"        var createResult \u003d await ParliamentContractStub.CreateProposal.SendAsync(proposal);","isFullCredit":false},{"lineNumber":1517,"author":{"gitId":"-"},"content":"        var proposalId \u003d createResult.Output;","isFullCredit":false},{"lineNumber":1518,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1519,"author":{"gitId":"-"},"content":"        return proposalId;","isFullCredit":false},{"lineNumber":1520,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1521,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1522,"author":{"gitId":"-"},"content":"    private async Task ApproveWithMinersAsync(Hash proposalId)","isFullCredit":false},{"lineNumber":1523,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1524,"author":{"gitId":"-"},"content":"        foreach (var bp in InitialCoreDataCenterKeyPairs)","isFullCredit":false},{"lineNumber":1525,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1526,"author":{"gitId":"-"},"content":"            var tester \u003d GetParliamentContractTester(bp);","isFullCredit":false},{"lineNumber":1527,"author":{"gitId":"-"},"content":"            var approveResult \u003d await tester.Approve.SendAsync(proposalId);","isFullCredit":false},{"lineNumber":1528,"author":{"gitId":"-"},"content":"            approveResult.TransactionResult.Error.ShouldBeNullOrEmpty();","isFullCredit":false},{"lineNumber":1529,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":1530,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1531,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1532,"author":{"gitId":"-"},"content":"    private async Task ApproveAndTransferCreateTokenFee(ECKeyPair proposalKeyPair, long minimalApproveThreshold,","isFullCredit":false},{"lineNumber":1533,"author":{"gitId":"-"},"content":"        Address organizationAddress)","isFullCredit":false},{"lineNumber":1534,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1535,"author":{"gitId":"-"},"content":"        var approveInput \u003d new ApproveInput","isFullCredit":false},{"lineNumber":1536,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1537,"author":{"gitId":"-"},"content":"            Spender \u003d TokenContractAddress,","isFullCredit":false},{"lineNumber":1538,"author":{"gitId":"-"},"content":"            Symbol \u003d \"ELF\",","isFullCredit":false},{"lineNumber":1539,"author":{"gitId":"-"},"content":"            Amount \u003d 10000_00000000","isFullCredit":false},{"lineNumber":1540,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":1541,"author":{"gitId":"-"},"content":"        var proposalId \u003d","isFullCredit":false},{"lineNumber":1542,"author":{"gitId":"-"},"content":"            await CreateReferendumProposalAsync(proposalKeyPair, approveInput, \"Approve\", organizationAddress,","isFullCredit":false},{"lineNumber":1543,"author":{"gitId":"-"},"content":"                TokenContractAddress);","isFullCredit":false},{"lineNumber":1544,"author":{"gitId":"-"},"content":"        await ApproveAllowanceAsync(Accounts[3].KeyPair, minimalApproveThreshold, proposalId);","isFullCredit":false},{"lineNumber":1545,"author":{"gitId":"-"},"content":"        await ApproveAsync(Accounts[3].KeyPair, proposalId);","isFullCredit":false},{"lineNumber":1546,"author":{"gitId":"-"},"content":"        var getProposal \u003d await ReferendumContractStub.GetProposal.CallAsync(proposalId);","isFullCredit":false},{"lineNumber":1547,"author":{"gitId":"-"},"content":"        getProposal.ToBeReleased.ShouldBeTrue();","isFullCredit":false},{"lineNumber":1548,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1549,"author":{"gitId":"-"},"content":"        var result \u003d await ReferendumContractStub.Release.SendAsync(proposalId);","isFullCredit":false},{"lineNumber":1550,"author":{"gitId":"-"},"content":"        result.TransactionResult.Status.ShouldBe(TransactionResultStatus.Mined);","isFullCredit":false},{"lineNumber":1551,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1552,"author":{"gitId":"-"},"content":"        await TokenContractStub.Transfer.SendAsync(new TransferInput","isFullCredit":false},{"lineNumber":1553,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1554,"author":{"gitId":"-"},"content":"            Amount \u003d 10000_00000000,","isFullCredit":false},{"lineNumber":1555,"author":{"gitId":"-"},"content":"            Symbol \u003d \"ELF\",","isFullCredit":false},{"lineNumber":1556,"author":{"gitId":"-"},"content":"            To \u003d organizationAddress","isFullCredit":false},{"lineNumber":1557,"author":{"gitId":"-"},"content":"        });","isFullCredit":false},{"lineNumber":1558,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1559,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1560,"author":{"gitId":"-"},"content":"    private MethodFees GetValidMethodFees()","isFullCredit":false},{"lineNumber":1561,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1562,"author":{"gitId":"-"},"content":"        return new MethodFees","isFullCredit":false},{"lineNumber":1563,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1564,"author":{"gitId":"-"},"content":"            MethodName \u003d nameof(ReferendumContractStub.CreateProposal),","isFullCredit":false},{"lineNumber":1565,"author":{"gitId":"-"},"content":"            Fees \u003d","isFullCredit":false},{"lineNumber":1566,"author":{"gitId":"-"},"content":"            {","isFullCredit":false},{"lineNumber":1567,"author":{"gitId":"-"},"content":"                new MethodFee","isFullCredit":false},{"lineNumber":1568,"author":{"gitId":"-"},"content":"                {","isFullCredit":false},{"lineNumber":1569,"author":{"gitId":"-"},"content":"                    Symbol \u003d \"ELF\",","isFullCredit":false},{"lineNumber":1570,"author":{"gitId":"-"},"content":"                    BasicFee \u003d 5000_0000L","isFullCredit":false},{"lineNumber":1571,"author":{"gitId":"-"},"content":"                }","isFullCredit":false},{"lineNumber":1572,"author":{"gitId":"-"},"content":"            }","isFullCredit":false},{"lineNumber":1573,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":1574,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1575,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1576,"author":{"gitId":"-"},"content":"    private async Task SubmitAndApproveProposalOfDefaultParliament(ECKeyPair senderKeyPair, Address parliamentAddress,","isFullCredit":false},{"lineNumber":1577,"author":{"gitId":"-"},"content":"        Address contractAddress, string methodName, IMessage message)","isFullCredit":false},{"lineNumber":1578,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1579,"author":{"gitId":"-"},"content":"        var defaultParliamentAddress \u003d","isFullCredit":false},{"lineNumber":1580,"author":{"gitId":"-"},"content":"            await ParliamentContractStub.GetDefaultOrganizationAddress.CallAsync(new Empty());","isFullCredit":false},{"lineNumber":1581,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1582,"author":{"gitId":"-"},"content":"        var proposal \u003d new CreateProposalInput","isFullCredit":false},{"lineNumber":1583,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1584,"author":{"gitId":"-"},"content":"            OrganizationAddress \u003d defaultParliamentAddress,","isFullCredit":false},{"lineNumber":1585,"author":{"gitId":"-"},"content":"            ContractMethodName \u003d methodName,","isFullCredit":false},{"lineNumber":1586,"author":{"gitId":"-"},"content":"            ExpiredTime \u003d TimestampHelper.GetUtcNow().AddHours(1),","isFullCredit":false},{"lineNumber":1587,"author":{"gitId":"-"},"content":"            Params \u003d message.ToByteString(),","isFullCredit":false},{"lineNumber":1588,"author":{"gitId":"-"},"content":"            ToAddress \u003d contractAddress","isFullCredit":false},{"lineNumber":1589,"author":{"gitId":"-"},"content":"        };","isFullCredit":false},{"lineNumber":1590,"author":{"gitId":"-"},"content":"        var createResult \u003d await ParliamentContractStub.CreateProposal.SendAsync(proposal);","isFullCredit":false},{"lineNumber":1591,"author":{"gitId":"-"},"content":"        var proposalId \u003d createResult.Output;","isFullCredit":false},{"lineNumber":1592,"author":{"gitId":"-"},"content":"        await ApproveWithMinersAsync(proposalId, parliamentAddress);","isFullCredit":false},{"lineNumber":1593,"author":{"gitId":"-"},"content":"        await ParliamentContractStub.Release.SendAsync(proposalId);","isFullCredit":false},{"lineNumber":1594,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1595,"author":{"gitId":"-"},"content":"","isFullCredit":false},{"lineNumber":1596,"author":{"gitId":"-"},"content":"    private async Task ApproveWithMinersAsync(Hash proposalId, Address parliamentAddress)","isFullCredit":false},{"lineNumber":1597,"author":{"gitId":"-"},"content":"    {","isFullCredit":false},{"lineNumber":1598,"author":{"gitId":"-"},"content":"        foreach (var bp in InitialCoreDataCenterKeyPairs)","isFullCredit":false},{"lineNumber":1599,"author":{"gitId":"-"},"content":"        {","isFullCredit":false},{"lineNumber":1600,"author":{"gitId":"-"},"content":"            var tester \u003d GetTester\u003cParliamentContractImplContainer.ParliamentContractImplStub\u003e(parliamentAddress, bp);","isFullCredit":false},{"lineNumber":1601,"author":{"gitId":"-"},"content":"            await tester.Approve.SendAsync(proposalId);","isFullCredit":false},{"lineNumber":1602,"author":{"gitId":"-"},"content":"        }","isFullCredit":false},{"lineNumber":1603,"author":{"gitId":"-"},"content":"    }","isFullCredit":false},{"lineNumber":1604,"author":{"gitId":"-"},"content":"}","isFullCredit":false}],"authorContributionMap":{"eanzhao":5,"-":1599}},{"path":"docs-sphinx/architecture/core/node-archi.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs-sphinx/architecture/cross-chain/architecture-node.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs-sphinx/architecture/cross-chain/architecture-topology.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs-sphinx/architecture/cross-chain/introduction-topology.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs-sphinx/architecture/cross-chain/merkle-path.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs-sphinx/architecture/cross-chain/merkle.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs-sphinx/architecture/cross-chain/side-chain-nodes.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs-sphinx/architecture/smart-contract/restrictions/contract-class-structure.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs-sphinx/architecture/smart-contract/sc-as-service.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs-sphinx/getting-started/development-environment/codespaces1.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs-sphinx/getting-started/development-environment/codespaces2.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs-sphinx/getting-started/development-environment/mac_install_redis.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs-sphinx/getting-started/development-environment/node_aelf_command_warn.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs-sphinx/getting-started/development-environment/setup-redis.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs-sphinx/getting-started/development-environment/windows_install_redis.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs-sphinx/getting-started/smart-contract-development/developing-smart-contracts/boilerplate-structure-autox200.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs-sphinx/getting-started/smart-contract-development/developing-smart-contracts/boilerplate-structure.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs-sphinx/getting-started/smart-contract-development/developing-smart-contracts/term.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs-sphinx/getting-started/smart-contract-development/developing-smart-contracts/vscode-dep-autox150.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs-sphinx/getting-started/smart-contract-development/developing-smart-contracts/vscode-dep.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs-sphinx/img/favicon.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs-sphinx/protocol/pictures/consensus-1.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs-sphinx/protocol/pictures/consensus-2.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs-sphinx/protocol/pictures/consensus-3.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs-sphinx/protocol/pictures/consensus-4.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs-sphinx/protocol/pictures/consensus-5.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs-sphinx/protocol/pictures/consensus-6.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs-sphinx/resources/testnet-create-account.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs-sphinx/tutorials/cloud/gcp/gcp-curl-chain-stat.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs-sphinx/tutorials/cloud/gcp/gcp-deployed.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs-sphinx/tutorials/cloud/gcp/gcp-docker-compose.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs-sphinx/tutorials/cloud/gcp/gcp-ssh-select.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs-sphinx/tutorials/cloud/gcp/gcp-step1.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs-sphinx/tutorials/cloud/gcp/gcp-step2-a.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs-sphinx/tutorials/cloud/gcp/gcp-step2-b.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs-sphinx/tutorials/ssh.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs/.gitbook/assets/aelf-cluster-diagram (1).png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs/.gitbook/assets/aelf-cluster-diagram (2).png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs/.gitbook/assets/aelf-cluster-diagram.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs/.gitbook/assets/aelf-root.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs/.gitbook/assets/archi-node.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs/.gitbook/assets/archi-topology.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs/.gitbook/assets/dep-yes.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs/.gitbook/assets/extension.jpg","fileType":"jpg","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs/.gitbook/assets/intro-topology.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs/.gitbook/assets/jssdk_browser.jpg","fileType":"jpg","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs/.gitbook/assets/jssdk_terminal.jpg","fileType":"jpg","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs/.gitbook/assets/node-archi.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs/.gitbook/assets/node_state_fsm.jpg","fileType":"jpg","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs/.gitbook/assets/sc-as-service.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs/.gitbook/assets/side-chain-nodes.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs/.gitbook/assets/term.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs/.gitbook/assets/vscode-dep.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs/architecture/node-archi.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs/contract/restrictions/contract-class-structure.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs/contract/sc-as-service.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs/crosschain/architecture-node.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs/crosschain/architecture-topology.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs/crosschain/introduction-topology.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs/crosschain/merkle-path.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs/crosschain/merkle.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs/crosschain/side-chain-nodes.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs/resources/cloud/gcp/gcp-curl-chain-stat.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs/resources/cloud/gcp/gcp-deployed.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs/resources/cloud/gcp/gcp-docker-compose.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs/resources/cloud/gcp/gcp-ssh-select.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs/resources/cloud/gcp/gcp-step1.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs/resources/cloud/gcp/gcp-step2-a.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs/resources/cloud/gcp/gcp-step2-b.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs/resources/testnet-create-account.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs/technical/figures/aelf-cluster-diagram.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs/tutorials/DApp/aelf-root.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs/tutorials/DApp/assets/extension.jpg","fileType":"jpg","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs/tutorials/DApp/assets/jssdk_browser.jpg","fileType":"jpg","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs/tutorials/DApp/assets/jssdk_terminal.jpg","fileType":"jpg","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs/tutorials/DApp/vscode-dep.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs/tutorials/developing-smart-contracts/boilerplate-structure-autox200.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs/tutorials/developing-smart-contracts/boilerplate-structure.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs/tutorials/developing-smart-contracts/term.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs/tutorials/developing-smart-contracts/vscode-dep-autox150.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs/tutorials/developing-smart-contracts/vscode-dep.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs/tutorials/setup/setup-build-tools-2.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs/tutorials/setup/setup-build-tools.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs/tutorials/setup/setup-dotnet-sdk-dl-link.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs/tutorials/setup/setup-redis.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs/tutorials/setup/setup-vs-install-workload.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}},{"path":"docs/tutorials/ssh.png","fileType":"png","isBinary":true,"lines":[],"authorContributionMap":{"-":0}}]
